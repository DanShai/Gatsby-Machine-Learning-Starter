webpackJsonp([0xfc8f7dabe7cc],[,function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),n(167),n(437);var a=n(427);t.nextFrame=a.nextFrame;var o=n(4);t.environment=o;var i=n(4),s=n(434);t.io=s;var u=n(37);t.serialization=u;var l=n(18),c=n(497);t.test_util=c;var p=n(2);t.util=p;var h=n(499);t.version_core=h.version;var d=n(500);t.webgl=d;var f=n(133);t.AdadeltaOptimizer=f.AdadeltaOptimizer;var m=n(134);t.AdagradOptimizer=m.AdagradOptimizer;var g=n(135);t.AdamOptimizer=g.AdamOptimizer;var v=n(136);t.AdamaxOptimizer=v.AdamaxOptimizer;var y=n(137);t.MomentumOptimizer=y.MomentumOptimizer;var b=n(48);t.Optimizer=b.Optimizer;var x=n(138);t.RMSPropOptimizer=x.RMSPropOptimizer;var w=n(93);t.SGDOptimizer=w.SGDOptimizer;var S=n(18);t.Tensor=S.Tensor,t.TensorBuffer=S.TensorBuffer,t.variable=S.variable,t.Variable=S.Variable;var _=n(94);t.Rank=_.Rank,r(n(29));var N=n(181);t.Reduction=N.Reduction,r(n(498)),r(n(24));var T=n(4);t.ENV=T.ENV,t.Environment=T.Environment,t.setBackend=i.Environment.setBackend,t.getBackend=i.Environment.getBackend,t.disposeVariables=i.Environment.disposeVariables,t.memory=i.Environment.memory;var k=n(29);l.setOpHandler(k)},function(e,t,n){(function(e){"use strict";function n(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,t--,n=e[t],e[t]=e[r],e[r]=n}function r(e,t,n){return Math.max(e,Math.min(t,n))}function a(e,t){var n=Math.random();return t*n+(1-n)*e}function o(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n}function i(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function s(e,t,n){void 0===n&&(n=""),i(f(e,t),n+(" Shapes "+e+" and "+t+" must match"))}function u(e){i(null!=e,"The input to the tensor constructor must be a non-null value.")}function l(e,t){if(void 0===t&&(t=[]),Array.isArray(e))for(var n=0;n<e.length;++n)l(e[n],t);else t.push(e);return t}function c(e){var t=e;if(E(e))return[e.length];if(!Array.isArray(e))return[];for(var n=[];t instanceof Array;)n.push(t.length),t=t[0];return e instanceof Array&&p(e,n,[]),n}function p(e,t,n){if(n=n||[],!(e instanceof Array))return void i(0===t.length,function(){return"Element arr["+n.join("][")+"] is a primitive, "+("but should be an array of "+t[0]+" elements")});i(t.length>0,function(){return"Element arr["+n.join("][")+"] should be a primitive, "+("but is an array of "+e.length+" elements")}),i(e.length===t[0],function(){return"Element arr["+n.join("][")+"] should have "+t[0]+" "+("elements, but has "+e.length+" elements")});for(var r=t.slice(1),a=0;a<e.length;++a)p(e[a],r,n.concat(a))}function h(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function d(e){return 0===e.length}function f(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function m(e){return e%1===0}function g(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-(1/0))return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function v(e){for(var t=Math.floor(Math.sqrt(e));t>1;--t)if(e%t===0)return[t,e/t];return[1,e]}function y(e){for(var t=new Uint32Array(e),r=0;r<e;++r)t[r]=r;return n(t),t}function b(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function x(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise(function(r,a){var o=0,i=function(){if(e())return void r();o++;var s=t(o);return null!=n&&o>=n?void a():void setTimeout(i,s)};i()})}function w(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(e[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. "+("Found -1 at dim "+r+" and dim "+a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+("Got "+t+" / "+n));var o=e.slice();return o[r]=t/n,o}function S(e,t){for(var n=[],r=[],a=0,o=0;o<e.length;++o){if(null!=t){if(t[a]===o&&1!==e[o])throw new Error("Can't squeeze axis "+o+" since its dim '"+e[o]+"' is not 1");(null==t[a]||t[a]>o)&&1===e[o]&&(n.push(e[o]),r.push(o)),t[a]<=o&&a++}1!==e[o]&&(n.push(e[o]),r.push(o))}return{newShape:n,keptDims:r}}function _(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function N(e,t,n){if("float32"===t)for(var r=0;r<e.length;r++)if(isNaN(e[r]))throw Error("The result of the '"+n+"' has NaNs.")}function T(e,t){if("float32"!==t)for(var n=0;n<e.length;n++)if(isNaN(e[n]))throw Error("NaN is not a valid value for dtype: '"+t+"'.")}function k(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function I(e,t,n){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return n&&T(e,t),new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),a=0;a<r.length;++a)0!==Math.round(e[a])&&(r[a]=1);return r}throw new Error("Unknown data type "+t)}function E(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function A(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function P(e){return!!(e&&e.constructor&&e.call&&e.apply)}function C(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function O(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function M(e,t,n){return D(e,t)?e:(Array.isArray(e)&&(e=l(e)),I(e,t,n))}function D(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}function R(e,t){for(var n=z(e,t),r=0;r<n.length;r++)n[r]=1;return n}function z(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function L(){if("undefined"!=typeof performance)return performance.now();if("undefined"!=typeof e){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}Object.defineProperty(t,"__esModule",{value:!0}),t.shuffle=n,t.clamp=r,t.randUniform=a,t.distSquared=o,t.assert=i,t.assertShapesMatch=s,t.assertNonNull=u,t.flatten=l,t.inferShape=c,t.sizeFromShape=h,t.isScalarShape=d,t.arraysEqual=f,t.isInt=m,t.tanh=g,t.sizeToSquarishShape=v,t.createShuffledIndices=y,t.rightPad=b,t.repeatedTry=x,t.inferFromImplicitShape=w,t.squeezeShape=S,t.getTypedArrayFromDType=_,t.checkComputationForNaN=N,t.checkConversionForNaN=T,t.hasEncodingLoss=k,t.isTypedArray=E,t.bytesPerElement=A,t.isFunction=P,t.nearestDivisor=C,t.computeStrides=O,t.toTypedArray=M,t.makeOnesTypedArray=R,t.makeZerosTypedArray=z,t.now=L}).call(t,n(73))},function(e,t,n){"use strict";e.exports=n(54),e.exports.easing=n(222),e.exports.canvas=n(221),e.exports.options=n(223)},function(e,t,n){(function(e){"use strict";function r(){var t;if("undefined"!=typeof window)t=window;else{if("undefined"==typeof e)throw new Error("Could not find a global object");t=e}return t}function a(){var e=r();return null==e.ENV&&(e.ENV=new f(s.getFeaturesFromURL()),u.setTensorTracker(function(){return e.ENV.engine})),e.ENV}Object.defineProperty(t,"__esModule",{value:!0});var o=n(428),i=n(429),s=n(430),u=n(18),l=n(76),c=.001,p=.1,h=1e-7,d=.001,f=function(){function n(e){this.features={},this.engines={},this.registry={},null!=e&&(this.features=e),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return n.setBackend=function(e,n){if(void 0===n&&(n=!1),!(e in t.ENV.registry))throw new Error("Backend name '"+e+"' not found in registry");t.ENV.initBackend(e,n)},n.getBackend=function(){return t.ENV.initDefaultBackend(),t.ENV.backendName},n.disposeVariables=function(){t.ENV.engine.disposeVariables()},n.memory=function(){return t.ENV.engine.memory()},n.tidy=function(e,n,r){return void 0===r&&(r=!1),t.ENV.engine.tidy(e,n,r)},n.dispose=function(e){var t=l.getTensorsInContainer(e);t.forEach(function(e){return e.dispose()})},n.keep=function(e){return t.ENV.engine.keep(e)},n.time=function(e){return t.ENV.engine.time(e)},n.prototype.get=function(e){return e in this.features?this.features[e]:(this.features[e]=this.evaluateFeature(e),this.features[e])},n.prototype.getFeatures=function(){return this.features},n.prototype.set=function(e,t){this.features[e]=t},n.prototype.getBestBackendName=function(){var e=this;if(0===Object.keys(this.registry).length)throw new Error("No backend found in registry.");var t=Object.keys(this.registry).map(function(t){return{name:t,entry:e.registry[t]}}).sort(function(e,t){return t.entry.priority-e.entry.priority});return t[0].name},n.prototype.evaluateFeature=function(t){if("DEBUG"===t)return!1;if("IS_BROWSER"===t)return"undefined"!=typeof window;if("IS_NODE"===t)return"undefined"!=typeof e&&"undefined"!=typeof e.versions.node;if("IS_CHROME"===t)return s.isChrome();if("IS_TEST"===t)return!1;if("BACKEND"===t)return this.getBestBackendName();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===t){var n=this.get("WEBGL_VERSION");return 0===n?0:n>0?0:s.getWebGLDisjointQueryTimerVersion(n,this.get("IS_BROWSER"))}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===t)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!o.isMobile();if("HAS_WEBGL"===t)return this.get("WEBGL_VERSION")>0;if("WEBGL_VERSION"===t)return s.isWebGLVersionEnabled(2,this.get("IS_BROWSER"))?2:s.isWebGLVersionEnabled(1,this.get("IS_BROWSER"))?1:0;if("WEBGL_RENDER_FLOAT32_ENABLED"===t)return s.isRenderToFloatTextureEnabled(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_DOWNLOAD_FLOAT_ENABLED"===t)return s.isDownloadFloatTextureEnabled(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_FENCE_API_ENABLED"===t)return s.isWebGLFenceEnabled(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("TEST_EPSILON"===t)return 32===this.backend.floatPrecision()?d:p;if("EPSILON"===t)return 32===this.backend.floatPrecision()?h:c;throw new Error("Unknown feature "+t+".")},n.prototype.setFeatures=function(e){this.features=Object.assign({},e)},n.prototype.reset=function(){this.features=s.getFeaturesFromURL(),null!=this.globalEngine&&(this.globalEngine=null)},n.prototype.initBackend=function(e,t){var n=this;if(void 0===t&&(t=!1),this.backendName=e,this.engines[e])this.globalEngine=this.engines[e];else{var r=this.findBackend(e);this.globalEngine=new i.Engine(r,t,function(){return n.get("DEBUG")}),this.engines[e]=this.globalEngine}},Object.defineProperty(n.prototype,"backend",{get:function(){return this.engine.backend},enumerable:!0,configurable:!0}),n.prototype.findBackend=function(e){return e in this.registry?this.registry[e].backend:null},n.prototype.registerBackend=function(e,t,n,r){var a=this;if(void 0===n&&(n=1),e in this.registry)return console.warn(e+" backend was already registered. Reusing existing backend"),null!=r&&r(function(){return a.engine}),!1;try{var o=t();return this.registry[e]={backend:o,priority:n},!0}catch(t){return console.warn("Registration of backend "+e+" failed"),console.warn(t.stack||t.message),!1}},n.prototype.removeBackend=function(e){if(!(e in this.registry))throw new Error(e+" backend not found in registry");this.registry[e].backend.dispose(),delete this.registry[e],e in this.engines&&delete this.engines[e]},Object.defineProperty(n.prototype,"engine",{get:function(){return this.initDefaultBackend(),this.globalEngine},enumerable:!0,configurable:!0}),n.prototype.initDefaultBackend=function(){null==this.globalEngine&&this.initBackend(this.get("BACKEND"),!1)},n}();t.Environment=f,t.ENV=a()}).call(t,n(73))},function(e,t,n){"use strict";var r=n(3);e.exports={_set:function(e,t){return r.merge(this[e]||(this[e]={}),t)}}},function(e,t,n){"use strict";function r(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+(t.length+" keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a.ENV.engine.startScope(n);try{var o=r.apply(void 0,e);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),a.ENV.engine.endScope(o),o}catch(e){throw a.ENV.engine.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4);t.op=r},function(e,t,n){"use strict";function r(e,t,n,r){if(void 0===r&&(r="float32"),r=r||"float32",e instanceof i.Tensor)return e;if(!s.isTypedArray(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e)throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got "+e.constructor.name);var a=s.inferShape(e);return s.isTypedArray(e)||Array.isArray(e)||(e=[e]),i.Tensor.make(a,{values:s.toTypedArray(e,r,o.ENV.get("DEBUG"))},r)}function a(e,t,n){if(!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");var a=e;return a.map(function(e,a){return r(e,t+"["+a+"]",n)})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(18),s=n(2);t.convertToTensor=r,t.convertToTensorArray=a},function(e,t){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return n(t,e),t}(Error);t.AttributeError=r;var a=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return n(t,e),t}(Error);t.RuntimeError=a;var o=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return n(t,e),t}(Error);t.ValueError=o;var i=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return n(t,e),t}(Error);t.NotImplementedError=i;var s=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return n(t,e),t}(Error);t.AssertionError=s;var u=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return n(t,e),t}(Error);t.IndexError=u},,function(e,t,n){"use strict";function r(e,t,n){if(void 0===n&&(n="float32"),"complex64"===n)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!w.isTypedArray(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e)throw new Error("values passed to tensor(values) must be an array of numbers or booleans, or a TypedArray");var r=w.inferShape(e);return null!=t&&1!==r.length&&w.assertShapesMatch(t,r,"Error creating a new Tensor. "+("Inferred shape ("+r+") does not match the ")+("provided shape ("+t+"). ")),w.isTypedArray(e)||Array.isArray(e)||(e=[e]),t=t||r,b.Tensor.make(t,{values:w.toTypedArray(e,n,y.ENV.get("DEBUG"))},n)}function a(e,t){if(void 0===t&&(t="float32"),(w.isTypedArray(e)||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return r(e,[],t)}function o(e,t){void 0===t&&(t="float32"),w.assertNonNull(e);var n=w.inferShape(e);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return r(e,n,t)}function i(e,t,n){if(void 0===n&&(n="float32"),w.assertNonNull(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var a=w.inferShape(e);if(2!==a.length&&1!==a.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return t=t||a,r(e,t,n)}function s(e,t,n){if(void 0===n&&(n="float32"),w.assertNonNull(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var a=w.inferShape(e);if(3!==a.length&&1!==a.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return t=t||a,r(e,t,n)}function u(e,t,n){if(void 0===n&&(n="float32"),w.assertNonNull(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var a=w.inferShape(e);if(4!==a.length&&1!==a.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return t=t||a,r(e,t,n)}function l(e,t,n){if(void 0===n&&(n="float32"),w.assertNonNull(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var a=w.inferShape(e);if(5!==a.length&&1!==a.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return t=t||a,r(e,t,n)}function c(e,t,n){if(void 0===n&&(n="float32"),w.assertNonNull(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var a=w.inferShape(e);if(6!==a.length&&1!==a.length)throw new Error("tensor6d() requires values to be number[][][][] or flat/TypedArray");if(1===a.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||a,r(e,t,n)}function p(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=p(e,"float32"),r=p(e,"float32");return S.complex(n,r)}var a=w.makeOnesTypedArray(w.sizeFromShape(e),t);return b.Tensor.make(e,{values:a},t)}function h(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=h(e,"float32"),r=h(e,"float32");return S.complex(n,r)}var a=w.makeZerosTypedArray(w.sizeFromShape(e),t);return b.Tensor.make(e,{values:a},t)}function d(e,t,n){void 0===n&&(n="float32");var r=w.getTypedArrayFromDType(n,w.sizeFromShape(e));return r.fill(t),b.Tensor.make(e,{values:r},n)}function f(e){var t=x.convertToTensor(e,"x","onesLike");return p(t.shape,t.dtype)}function m(e){var t=x.convertToTensor(e,"x","zerosLike");return h(t.shape,t.dtype)}function g(e,t,n){if(0===n)throw new Error("Cannot request zero samples");var r=(t-e)/(n-1),a=w.makeZerosTypedArray(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return o(a,"float32")}function v(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");var a=e===t,i=e<t&&n<0,s=t<e&&n>1;if(a||i||s)return h([0],r);var u=Math.abs(Math.ceil((t-e)/n)),l=w.makeZerosTypedArray(u,r);t<e&&1===n&&(n=-1),l[0]=e;for(var c=1;c<l.length;c++)l[c]=l[c-1]+n;return o(l,r)}Object.defineProperty(t,"__esModule",{value:!0});var y=n(4),b=n(18),x=n(7),w=n(2),S=n(178),_=n(6);t.tensor=r,t.scalar=a,t.tensor1d=o,t.tensor2d=i,t.tensor3d=s,t.tensor4d=u,t.tensor5d=l,t.tensor6d=c,t.ones=p,t.zeros=h,t.fill=d,t.linspace=g,t.range=v,t.onesLike=_.op({onesLike_:f}),t.zerosLike=_.op({zerosLike_:m})},function(e,t,n){"use strict";function r(){return u++}function a(e){return void 0===e&&(e=""),e in l||(l[e]=0),l[e]+=1,e+l[e].toString()}function o(e,t){return void 0===t&&(t=p),null==c[t][e]&&(c[t][e]=s.scalar(e,t),s.keep(c[t][e])),c[t][e]}function i(){for(var e in c)for(var t in c[e])c[e][t].dispose(),delete c[e][t]}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=0;t.getNextUniqueTensorId=r;var l={};t.getUid=a;var c={float32:{},int32:{}},p="float32";t.getScalar=o,t.disposeScalarCache=i},,function(e,t,n){"use strict";function r(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var n=new Array(t);return n.fill(e),n}function a(e,t){if(!e)throw new S.AssertionError(t)}function o(e,t){for(var n=0,r=0,a=e;r<a.length;r++){var o=a[r];o===t&&n++}return n}function i(e){return 1===e.length?e[0]:e}function s(e){return Array.isArray(e)?e:[e]}function u(e){for(var t=s(e),n="",r=0,a=t;r<a.length;r++){var o=a[r];if(null==o.id)throw new S.ValueError("Object "+o+" passed to objectListUid without an id");""!==n&&(n+=", "),n+=Math.abs(o.id)}return n}function l(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2"),n=t.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==n[0]?n:"private"+n}function c(e){return e.length<=1?e:e.indexOf("_")===-1?e:e.replace(/[_]+(\w|$)/g,function(e,t){return t.toUpperCase()})}function p(e){return null===e||void 0===e?null:{className:e.getClassName(),config:e.getConfig()}}function h(e,t,n,r){if(void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r="object"),"string"==typeof e){var a=e,o=void 0;if(a in n)o=n[a];else if(a in _)o=_[a];else if(o=t[a],null==o)throw new S.ValueError("Unknown "+r+": "+e+". This may be due to one of the following reasons:\n"+("1. The "+r+" is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+("2. The custom "+r+" is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");return o}var i=e;if(null==i.className||null==i.config)throw new S.ValueError(r+": Improper config format: "+(JSON.stringify(i)+".\n")+"'className' and 'config' must set.");var s=i.className,u=void 0,l=void 0;if(s in n?(k=n.get(s),u=k[0],l=k[1]):s in _?(I=_.className,u=I[0],l=I[1]):s in t&&(E=t[s],u=E[0],l=E[1]),null==u)throw new S.ValueError("Unknown "+r+": "+s+". This may be due to one of the following reasons:\n"+("1. The "+r+" is defined in Python, in which ")+"case it needs to be ported to TensorFlow.js or your JavaScript code.\n"+("2. The custom "+r+" is defined in JavaScript, ")+"but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var c={},p=0,h=Object.keys(_);p<h.length;p++){var d=h[p];c[d]=_[d]}for(var f=0,m=Object.keys(n);f<m.length;f++){var d=m[f];c[d]=n[d]}var g=i.config;g.customObjects=c;for(var v=w({},_),y=0,b=Object.keys(n);y<b.length;y++){var d=b[y];_[d]=n[d]}var x=l(u,i.config);return _=w({},v),x}for(var v=w({},_),N=0,T=Object.keys(n);N<T.length;N++){var d=T[N];_[d]=n[d]}var x=new u(i.config);return _=w({},v),x;var k,I,E}function d(e,t){return e<t?-1:e>t?1:0}function f(e,t){return-1*d(e,t)}function m(e){switch(e){case"float32":return"float32";default:throw new S.ValueError("Invalid dtype: "+e)}}function g(e,t){if(null==e||null==t)return e===t;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}function v(e){if(null==e)return e;for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];t.indexOf(a)===-1&&t.push(a)}return t}function y(e){if(null==e)throw new S.ValueError("Invalid value in obj: "+JSON.stringify(e));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function b(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new S.ValueError(n+" is not a valid "+t+".  Valid values are "+e+" or null/undefined.")}function x(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),a(n>=0),a(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(function(e){return typeof e===t})}var w=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};Object.defineProperty(t,"__esModule",{value:!0});var S=n(8);t.pyListRepeat=r,t.assert=a,t.count=o,t.singletonOrArray=i,t.toList=s,t.objectListUid=u,t.toSnakeCase=l,t.toCamelCase=c;var _={};t.serializeKerasObject=p,t.deserializeKerasObject=h,t.numberCompare=d,t.reverseNumberCompare=f,t.stringToDType=m,t.stringsEqual=g,t.unique=v,t.isObjectEmpty=y,t.checkStringTypeUnionValue=b,t.checkArrayTypeAndLength=x},function(e,t){"use strict";function n(e,t,n,a){var o=t.params[e];if(o&&void 0!==o.inputIndex){if("tensor"===o.type)return r(t.inputNames[o.inputIndex],n,a);if("tensors"===o.type){var i=0===o.inputIndex?0===o.inputParamLength?t.inputNames:t.inputNames.slice(o.inputIndex,-o.inputParamLength):t.inputNames.splice(o.inputIndex);return i.map(function(e){return r(e,n,a)})}var s=Array.prototype.slice.call(r(t.inputNames.slice(o.inputIndex)[0],n,a).dataSync());return"number"===o.type?s[0]:s}return o&&o.value}function r(e,t,n){var r=i(e),a=r[0],s=r[1],u=n.currentContextIds.find(function(e){return!!t[o(a,e)]});return void 0!==u?t[o(a,u)][s]:void 0}function a(e,t){var n=i(e),r=n[0],a=n[1];return[o(r,t&&t.currentContextId),a]}function o(e,t){return t?e+"-"+t:e}function i(e){var t=e.lastIndexOf(":");if(t===-1)return[e,0];var n=e.substring(0,t);return[n,Number(e.substring(t+1))]}function s(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getParamValue=n,t.getTensor=r,t.getNodeNameAndIndex=a,t.parseNodeName=i,t.split=s},function(e,t,n){"use strict";function r(e){e=p.toList(e);for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];t.push(a.shape)}return p.singletonOrArray(t)}function a(e){return"float32"}function o(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++)for(var s=r.inputTensors[i],u=r.inboundLayers[i],l=r.nodeIndices[i],c=o(s,u,l),p=0,h=c;p<h.length;p++){var d=h[p];a.indexOf(d)===-1&&a.push(d)}return a}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=n(11),l=n(38),c=n(8),p=n(13),h=n(19),d=n(192),f=n(99),m=function(){function e(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}return e}();t.InputSpec=m;var g=function(){function e(e,t,n,r,a,o,i){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=i,this.id=u.getNextUniqueTensorId(),null!=o&&(this.originalName=l.getScopedTensorName(o),this.name=l.getUniqueTensorName(this.originalName)),this.rank=t.length}return e}();t.SymbolicTensor=g;var v=0,y=function(){function e(e,t){this.callArgs=t,this.id=v++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(var n=0,r=e.inboundLayers;n<r.length;n++){var a=r[n];null!=a&&a.outboundNodes.push(this)}e.outboundLayer.inboundNodes.push(this)}return e.prototype.getConfig=function(){for(var e=[],t=0,n=this.inboundLayers;t<n.length;t++){var r=n[t];null!=r?e.push(r.name):e.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},e}();t.Node=y;var b=0,x=function(e){function t(t){var n=e.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=b++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=t.name;if(!r){var a=n.getClassName();r=p.toSnakeCase(a)+"_"+u.getUid(a)}if(n.name=r,n.trainable=null==t.trainable||t.trainable,n.updatable=null==t.updatable||t.updatable,null!=t.inputShape||null!=t.batchInputShape){var o=void 0;if(null!=t.batchInputShape)o=t.batchInputShape;else if(null!=t.inputShape){var i=null;null!=t.batchSize&&(i=t.batchSize),o=[i].concat(t.inputShape)}n.batchInputShape=o;var s=t.dtype;null==s&&(s=t.inputDType),null==s&&(s="float32"),n.dtype=s}return null!=t.weights?n.initialWeights=t.weights:n.initialWeights=null,n._refCount=null,n}return i(t,e),t.nodeKey=function(e,t){return e.name+"_ib-"+t.toString()},t.prototype.getNodeAtIndex=function(e,t){if(0===this.inboundNodes.length)throw new c.RuntimeError("The layer has never been called "+("and thus has no defined "+t+"."));if(this.inboundNodes.length<=e)throw new c.ValueError("Asked to get "+t+" at node "+e+", "+("but the layer has only "+this.inboundNodes.length+" inbound nodes."));return this.inboundNodes[e]},t.prototype.getInputAt=function(e){return p.singletonOrArray(this.getNodeAtIndex(e,"input").inputTensors)},t.prototype.getOutputAt=function(e){return p.singletonOrArray(this.getNodeAtIndex(e,"output").outputTensors)},Object.defineProperty(t.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new c.AttributeError("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new c.AttributeError("Layer "+this.name+" is not connected, no input to return.");return p.singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new c.AttributeError("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new c.AttributeError("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return p.singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),t.prototype.calculateLosses=function(){return this.losses.map(function(e){return e()})},Object.defineProperty(t.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"built",{get:function(){return this._built},set:function(e){this._built=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this._trainableWeights:[]},set:function(e){this._trainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._nonTrainableWeights:this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),t.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},t.prototype.assertInputCompatibility=function(e){if(e=p.toList(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=p.toList(this.inputSpec);if(e.length!==t.length)throw new c.ValueError("Layer "+this.name+" expects "+t.length+" inputs, "+("but it received "+e.length+" input tensors. ")+("Input received: "+e));for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var o=r.rank;if(null!=a.ndim&&o!==a.ndim)throw new c.ValueError("Input "+n+" is incompatible with layer "+this.name+": "+("expected ndim="+a.ndim+", found ndim="+o));
if(null!=a.maxNDim&&o>a.maxNDim)throw new c.ValueError("Input "+n+" is incompatible with layer "+this.name+(": expected max_ndim="+a.maxNDim+", found ndim="+o));if(null!=a.minNDim&&o<a.minNDim)throw new c.ValueError("Input "+n+" is incompatible with layer "+this.name+(": expected min_ndim="+a.minNDim+", found ndim="+o+"."));if(null!=a.dtype&&r.dtype!==a.dtype)throw new c.ValueError("Input "+n+" is incompatible with layer "+this.name+" "+(": expected dtype="+a.dtype+", found dtype="+r.dtype+"."));if(a.axes){var i=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],h=u>=0?i[u]:i[i.length+u];if(null!=l&&[l,null].indexOf(h)===-1)throw new c.ValueError("Input "+n+" is incompatible with layer "+(this.name+": expected axis "+u+" of input shape to ")+("have value "+l+" but got shape "+i+"."))}}if(null!=a.shape)for(var d=0;d<a.shape.length;++d){var f=a.shape[d],m=r.shape[d];if(null!=f&&null!=m&&f!==m)throw new c.ValueError("Input "+n+" is incompatible with layer "+(this.name+": expected shape="+a.shape+", ")+"found shape=${xShape}.")}}}}},t.prototype.call=function(e,t){return e},t.prototype.invokeCallHook=function(e,t){null!=this._callHook&&this._callHook(e,t)},t.prototype.setCallHook=function(e){this._callHook=e},t.prototype.clearCallHook=function(){this._callHook=null},t.prototype.apply=function(e,t){var n=this;t=t||{},this.assertNotDisposed();for(var o=p.toList(e),i=!0,s=0,u=o;s<u.length;s++){var h=u[s];if(!(h instanceof g)){i=!1;break}}for(var d=!0,f=0,m=o;f<m.length;f++){var h=m[f];if(h instanceof g){d=!1;break}}if(i===d)throw new c.ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return l.nameScope(this.name,function(){if(!n.built){n.assertInputCompatibility(e);for(var i=[],s=0,u=p.toList(e);s<u.length;s++){var l=u[s];i.push(l.shape)}n.build(p.singletonOrArray(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&d&&(n._refCount=1)}if(n.assertInputCompatibility(e),d){for(var h=n.call(e,t),f=p.toList(h),m=[],v=0,y=f;v<y.length;v++){var b=y[v];o.indexOf(b)!==-1&&(b=b.clone()),m.push(b)}if(h=p.singletonOrArray(m),null!=n.activityRegularizer)throw new c.NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return h}var x=r(e),w=n.computeOutputShape(x),h=void 0,S=a(e);if(n.warnOnIncompatibleInputShape(Array.isArray(e)?x[0]:x),h=null!=w&&w.length>0&&Array.isArray(w[0])?w.map(function(r,a){return new g(S,r,n,p.toList(e),t,n.name,a)}):new g(S,w,n,p.toList(e),t,n.name),n.addInboundNode(e,h,null,null,x,w,t),n._refCount++,null!=n.activityRegularizer)throw new c.NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return h})},t.prototype.warnOnIncompatibleInputShape=function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+(JSON.stringify(e)+") does not match that of the ")+("batchInputShape ("+JSON.stringify(this.batchInputShape)+") ")+("of the layer "+this.name));else{var t=!1;this.batchInputShape.forEach(function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn("The shape of the input tensor "+("("+JSON.stringify(e)+") does not ")+("match the expectation of layer "+this.name+": ")+(""+JSON.stringify(this.batchInputShape)))}},Object.defineProperty(t.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new c.AttributeError("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var e=[],t=0,n=this.inboundNodes;t<n.length;t++){var r=n[t],a=JSON.stringify(r.outputShapes);e.indexOf(a)===-1&&e.push(a)}if(1===e.length){var o=this.inboundNodes[0].outputShapes;return Array.isArray(o)&&Array.isArray(o[0])&&1===o.length?o[0]:o}throw new c.AttributeError("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),t.prototype.countParams=function(){if(!this.built)throw new c.RuntimeError("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return d.countParamsInWeights(this.weights)},t.prototype.build=function(e){this.built=!0},t.prototype.getWeights=function(e){return void 0===e&&(e=!1),f.batchGetValue(e?this.trainableWeights:this.weights)},t.prototype.setWeights=function(e){var t=this;s.tidy(function(){var n=t.weights;if(n.length!==e.length)throw new c.ValueError('You called setWeights(weights) on layer "'+t.name+'" '+("with a weight list of length "+e.length+", ")+("but the layer was expecting "+n.length+" weights. ")+("Provided weights: "+e+"..."));if(0!==n.length){for(var r=[],a=f.batchGetValue(n),o=0;o<a.length;++o){var i=a[o],u=n[o],l=e[o];if(!s.util.arraysEqual(i.shape,l.shape))throw new c.ValueError("Layer weight shape "+i.shape+" not compatible with provided weight shape "+l.shape);r.push([u,l])}f.batchSetValue(r)}})},t.prototype.addWeight=function(e,t,n,r,a,o,i){if(this._addedWeightNames.indexOf(e)!==-1)throw new c.ValueError("Duplicate weight name "+e+" for layer "+this.name);this._addedWeightNames.push(e),null==n&&(n="float32");var s=new f.LayerVariable(r.apply(t,n),n,e,o,i);return null!=a&&this.addLoss(function(){return a.apply(s.read())}),null==o&&(o=!0),o?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s},t.prototype.addLoss=function(e){if(!(null==e||Array.isArray(e)&&0===e.length)){e=p.toList(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,e);var t}},t.prototype.computeOutputShape=function(e){return e},t.prototype.computeMask=function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer "+this.name+" does not support masking,but was passed an inputMask.");t.forEach(function(e){if(null!=e)throw new TypeError("Layer "+n.name+" does not support masking,but was passed an inputMask.")})}return null}return t},t.prototype.addInboundNode=function(e,t,n,r,a,o,i){void 0===i&&(i=null);var s=p.toList(e);t=p.toList(t),n=p.toList(n),r=p.toList(r),a=h.normalizeShapeList(a),o=h.normalizeShapeList(o);for(var u=[],l=[],c=[],d=0,f=s;d<f.length;d++){var m=f[d];u.push(m.sourceLayer),l.push(m.nodeIndex),c.push(m.tensorIndex)}new y({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:o},i);for(var g=0;g<t.length;g++)t[g].sourceLayer=this,t[g].nodeIndex=this.inboundNodes.length-1,t[g].tensorIndex=g},t.prototype.getConfig=function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e},t.prototype.disposeWeights=function(){return this.weights.forEach(function(e){return e.dispose()}),this.weights.length},t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var e=0;return 0===--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}},t}(s.serialization.Serializable);t.Layer=x,t.getSourceInputs=o},function(e,t,n){"use strict";function r(e,t,n,r){var o,i,s,u,l,c,p,h,d,f=Object.keys(n);for(o=0,i=f.length;o<i;++o)if(s=f[o],c=n[s],t.hasOwnProperty(s)||(t[s]=c),u=t[s],u!==c&&"_"!==s[0]){if(e.hasOwnProperty(s)||(e[s]=u),l=e[s],p=typeof c,p===typeof l)if("string"===p){if(h=a(l),h.valid&&(d=a(c),d.valid)){t[s]=d.mix(h,r).rgbString();continue}}else if("number"===p&&isFinite(l)&&isFinite(c)){t[s]=l+(c-l)*r;continue}t[s]=c}}var a=n(106),o=n(3),i=function(e){o.extend(this,e),this.initialize.apply(this,arguments)};o.extend(i.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=o.clone(e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,a=t._start,o=t._view;return n&&1!==e?(o||(o=t._view={}),a||(a=t._start={}),r(a,o,n,e),t):(t._view=n,t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return o.isNumber(this._model.x)&&o.isNumber(this._model.y)}}),i.extend=o.inherits,e.exports=i},function(e,t,n){"use strict";function r(e){C.setBackend(e),V=e,M.disposeScalarCache()}function a(){return V}function o(){return!1}function i(e){var t=e.shape;return t.length>0?t.reduce(function(e,t){return e*t}):1}function s(e,t){return e.asType(t)}function u(e,t){void 0===t&&(t=-1);var n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function l(e,t){return O.tidy(function(){if(2!==e.shape.length)throw new R.ValueError("repeat() expects a rank-2 tensor, but received a "+("rank-"+e.shape.length+" tensor."));var n=u(e,1);return v(n,[1,t,1])})}function c(e){var t=[z.arrayProd(e.shape)];return e.reshape(t)}function p(e){if(e.rank<=1)throw new R.ValueError("batchFlatten requires a minimum rank of 2. Got rank: "+e.rank+".");var t=[e.shape[0],z.arrayProd(e.shape,1)];return e.reshape(t)}function h(e,t,n){return O.tidy(function(){switch(e.rank){case 1:return C.slice1d(e,t,n);case 2:return C.slice2d(e,[t,0],[n,e.shape[1]]);case 3:return C.slice3d(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return C.slice4d(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);default:throw new R.ValueError("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}})}function d(e,t,n){return O.tidy(function(){switch(e.rank){case 1:return C.slice1d(e,t,n);case 2:return C.slice2d(e,[0,t],[e.shape[0],n]);case 3:return C.slice3d(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return C.slice4d(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new R.ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function f(e,t,n,r){return O.tidy(function(){switch(e.rank){case 1:return C.slice1d(e,t,n);case 2:switch(r){case 1:return h(e,t,n);case 2:return d(e,t,n);default:throw new R.ValueError("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return h(e,t,n);case 2:return C.slice3d(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return d(e,t,n);default:throw new R.ValueError("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return h(e,t,n);case 2:return C.slice4d(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return C.slice4d(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return d(e,t,n);default:throw new R.ValueError("The axis is not within the rank of the tensor "+r)}default:throw new R.ValueError("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function m(e,t){void 0===t&&(t=-1);var n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),C.concat(e,t)}function g(e,t){switch(e.rank){case 1:return C.concat1d([e,t]);case 2:return C.concat2d([e,t],0);case 3:return C.concat3d([e,t],0);case 4:return C.concat4d([e,t],0);default:throw new R.ValueError("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function v(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new R.ValueError("The length of input n ("+t.length+") does not match "+("the number of dimensions in input x ("+e.rank+")"));return C.tile(e,t)}function y(e,t,n,r,a){return void 0===t&&(t=0),void 0===n&&(n=1),C.randomNormal(e,t,n,r,a)}function b(e,t){if(2!==t.rank)throw new R.NotImplementedError("dot support for y other than rank 2 is not yet implemented: y shape = "+t.shape);if(2===e.rank)return C.matMul(e,t);if(3===e.rank){var n=e.shape[0],r=e.shape[1],a=e.shape[2];return e=e.reshape([n*r,a]),C.matMul(e,t).reshape([n,r,t.shape[1]])}throw new R.NotImplementedError("dot support for x of rank "+e.rank+" is not yet implemented: x shape = "+e.shape)}function x(e){return O.tidy(function(){var t=O.zerosLike(e),n=O.onesLike(e);return O.where(C.equal(e,t),t,O.where(C.greater(e,O.zerosLike(e)),n,C.mul(M.getScalar(-1),n)))})}function w(e,t){return O.tidy(function(){if(1!==e.rank)throw new Error("Only 1D one-hot tensors are supported in the deeplearn backend, at present.");return e=e.toInt(),C.oneHot(e,t).toFloat()})}function S(e,t,n){return O.tidy(function(){return t=Array.isArray(t)?O.tensor1d(t,"int32"):t.toInt(),C.gather(e,t,n)})}function _(e){return C.mulStrict(e,e)}function N(e,t){return O.tidy(function(){if("number"==typeof t&&(t=O.scalar(Math.round(t),"int32")),"int32"!==t.dtype)throw new R.NotImplementedError("Non-int32 dtype ("+t.dtype+") is not supported by pow() yet");return C.pow(e,t)})}function T(e,t,n){return O.tidy(function(){if(null==n&&(n=L.imageDataFormat()),D.checkDataFormat(n),1!==t.rank&&t.rank!==e.rank)throw new R.ValueError("Unexpected bias dimensions: "+t.rank+"; expected it to be 1 or "+e.rank);var r,a=t.shape;if(5===e.rank)"channelsFirst"===n?r=1===a.length?e.add(t.reshape([1,a[0],1,1,1])):e.add(t.reshape([1,a[3],a[0],a[1],a[2]])):"channelsLast"===n&&(r=1===a.length?e.add(t.reshape([1,1,1,1,a[0]])):e.add(t.reshape([1].concat(a))));else if(4===e.rank)"channelsFirst"===n?r=1===a.length?e.add(t.reshape([1,a[0],1,1])):e.add(t.reshape([1,a[2],a[0],a[1]])):"channelsLast"===n&&(r=1===a.length?e.add(t.reshape([1,1,1,a[0]])):e.add(t.reshape([1].concat(a))));else if(3===e.rank)"channelsFirst"===n?r=1===a.length?e.add(t.reshape([1,a[0],1])):e.add(t.reshape([1,a[1],a[0]])):"channelsLast"===n&&(r=1===a.length?e.add(t.reshape([1,1,a[0]])):e.add(t.reshape([1].concat(a))));else{if(!(e.rank<3))throw new R.ValueError("Unsupported input rank by biasAdd: "+e.rank);r=e.add(t)}return r})}function k(e,t){if(void 0===t&&(t=1),1!==t)throw new R.NotImplementedError("Support for alpha values other than 1 ("+t+") is not implemented yet.");return C.elu(e)}function I(e){return O.tidy(function(){return C.div(e,C.add(M.getScalar(1),C.abs(e)))})}function E(e,t,n,r){return O.tidy(function(){if(null!=n&&!O.util.arraysEqual(e.shape,n))throw new R.NotImplementedError("Non-default noise shape is not implemented yet: "+JSON.stringify(n));if(null!=r)throw new R.NotImplementedError("seed is not implemented for dropout yet.");var a=C.step(C.add(C.neg(t),C.randomUniform(e.shape,0,1,"float32")));return a=C.mul(C.div(M.getScalar(1),C.sub(M.getScalar(1),t)),a),C.mul(e,a)})}function A(e){return O.tidy(function(){var t=C.add(M.getScalar(.5),C.mul(M.getScalar(.2),e));return C.clipByValue(t,0,1)})}function P(e,t,n){return void 0===n&&(n=!1),n?e():t()}Object.defineProperty(t,"__esModule",{value:!0});var C=n(1),O=n(1),M=n(11),D=n(38),R=n(8),z=n(41),L=n(39),V="webgl";t.setBackend=r,t.getBackend=a,t.isBackendSymbolic=o,t.countParams=i,t.cast=s,t.expandDims=u,t.repeat=l,t.flatten=c,t.batchFlatten=p,t.sliceAlongFirstAxis=h,t.sliceAlongLastAxis=d,t.sliceAlongAxis=f,t.concatenate=m,t.concatAlongFirstAxis=g,t.tile=v,t.randomNormal=y,t.dot=b,t.sign=x,t.oneHot=w,t.gather=S,t.square=_,t.pow=N,t.biasAdd=T,t.elu=k,t.softsign=I,t.dropout=E,t.hardSigmoid=A,t.inTrainPhase=P},function(e,t,n){"use strict";function r(e){h=e}function a(e){d=e}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var u=n(496),l=n(2),c=n(2),p=function(){function e(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=l.sizeFromShape(e),null!=n){var r=n.length;l.assert(r===this.size,"Length of values '"+r+"' does not match the size "+("inferred by the shape '"+this.size+"'."))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||l.getTypedArrayFromDType(t,l.sizeFromShape(this.shape)),this.strides=c.computeStrides(e)}return e.prototype.set=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];0===t.length&&(t=[0]),l.assert(t.length===this.rank,"The number of provided coordinates ("+t.length+") must "+("match the rank ("+this.rank+")"));var r=this.locToIndex(t);this.values[r]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.values[n]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return f.make(this.shape,{values:this.values},this.dtype)},e}();t.TensorBuffer=p;var h=null,d=null;t.setTensorTracker=r,t.setOpHandler=a;var f=function(){function e(t,n,r,a){this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=l.sizeFromShape(t),null!=r&&l.assert(this.size===r.length,"Based on the provided shape, ["+t+"], and dtype "+(this.dtype+", the tensor should have ")+(this.size+" values but has "+r.length)),this.strides=c.computeStrides(t),this.dataId=null!=a?a:{},this.id=e.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",h().registerTensor(this),null!=r&&h().write(this.dataId,r)}return e.make=function(t,n,r){return new e(t,r,n.values,n.dataId)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),l.assert(1===this.size,"The array must have only 1 element."),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.asType=function(e){return this.throwIfDisposed(),d.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l.assert(e.length===this.rank,"Number of coordinates in get() must match the rank of the tensor"),l.assert("complex64"!==this.dtype,"Tensor.get() is not supported for complex64 tensors yet."),this.throwIfDisposed(),0===e.length&&(e=[0]);for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return this.dataSync()[n]},e.prototype.buffer=function(){return d.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.data=function(){return i(this,void 0,void 0,function(){return s(this,function(e){return this.throwIfDisposed(),[2,h().read(this.dataId)]})})},e.prototype.dataSync=function(){return this.throwIfDisposed(),h().readSync(this.dataId)},e.prototype.dispose=function(){this.isDisposed||(h().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),d.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),d.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),d.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),d.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),d.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),d.clone(this)},e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this.dataSync();return u.tensorToString(t,this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),d.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),d.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),d.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),d.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),d.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),d.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),d.reverse(this,e)},e.prototype.concat=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),d.concat([this,e],t)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),d.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),d.stack([this,e],t)},e.prototype.unstack=function(e,t){return void 0===t&&(t=0),d.unstack(this,t)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),d.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,a){return void 0===n&&(n=.001),this.throwIfDisposed(),d.batchNormalization(this,e,t,n,r,a)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),d.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),d.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),d.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),d.sum(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),d.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),d.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),d.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),d.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),d.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),d.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),d.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),d.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),d.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),d.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),d.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),d.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),d.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),d.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),d.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),d.div(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),d.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),d.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),d.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),d.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),d.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),d.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),d.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),d.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),d.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),d.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),d.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),d.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),d.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),d.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),d.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),d.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),d.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),d.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),d.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),d.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),d.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),d.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),d.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),d.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),d.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),d.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),d.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),d.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),d.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),d.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),d.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),d.sign(this)},e.prototype.exp=function(){return this.throwIfDisposed(),d.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),d.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),d.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),d.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),d.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),d.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),d.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),d.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),d.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),d.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),d.relu(this)},e.prototype.elu=function(){return this.throwIfDisposed(),d.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),d.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),d.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),d.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),d.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),d.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),d.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),d.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),d.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),d.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),d.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),d.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),d.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),d.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),d.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),d.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),d.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),d.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),d.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),d.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),d.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),d.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),d.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),d.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),d.softmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),d.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),d.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,a,o){return void 0===r&&(r="NWC"),void 0===a&&(a=1),this.throwIfDisposed(),d.conv1d(this,e,t,n,r,a,o)},e.prototype.conv2d=function(e,t,n,r,a,o){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),d.conv2d(this,e,t,n,r,a,o)},e.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),d.conv2dTranspose(this,e,t,n,r,a)},e.prototype.depthwiseConv2D=function(e,t,n,r,a,o){return void 0===r&&(r="NHWC"),void 0===a&&(a=[1,1]),this.throwIfDisposed(),d.depthwiseConv2d(this,e,t,n,r,a,o)},e.prototype.separableConv2d=function(e,t,n,r,a,o){return void 0===a&&(a=[1,1]),void 0===o&&(o="NHWC"),this.throwIfDisposed(),d.separableConv2d(this,e,t,n,r,a,o)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),d.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),d.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),d.localResponseNormalization(this,e,t,n,r);
},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),m.variable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),d.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),d.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),d.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),d.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,a){return void 0===r&&(r=0),void 0===a&&(a=0),this.throwIfDisposed(),d.stridedSlice(this,e,t,n,r,a)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),d.depthToSpace(this,e,t)},e.nextId=0,e}();t.Tensor=f,Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.shape&&null!=e.dtype}});var m=function(e){function t(n,r,a){void 0===r&&(r=!0);var o=e.call(this,n.shape,n.dtype,null,n.dataId)||this;o.trainable=r,o.name=a,null==o.name&&(o.name=t.nextVarId.toString(),t.nextVarId++);try{h().registerVariable(o)}catch(e){throw h().disposeTensor(o),e}return o}return o(t,e),t.variable=function(e,n,r,a){return void 0===n&&(n=!0),null!=a&&a!==e.dtype&&(e=e.asType(a)),new t(e,n,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and "+("previous value ("+this.dtype+") must match"));if(!l.arraysEqual(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and "+("previous value ("+this.shape+") must match"));h().disposeTensor(this),this.dataId=e.dataId,h().registerTensor(this)},t.nextVarId=0,t}(f);t.Variable=m,Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return e instanceof f&&null!=e.assign&&e.assign instanceof Function}});var g=m.variable;t.variable=g},function(e,t,n){"use strict";function r(e){return Array.isArray(e)&&Array.isArray(e[0])}function a(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function o(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new s.ValueError("Expected Tensor length to be 1; got "+e.length);t=e[0]}else t=e;return t}function i(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e=e,e[0];throw new s.ValueError("Expected exactly 1 Shape; got "+e.length)}return e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(8);t.isArrayOfShapes=r,t.normalizeShapeList=a,t.getExactlyOneTensor=o,t.getExactlyOneShape=i},function(e,t,n){var r=n(114),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},function(e,t){var n=Array.isArray;e.exports=n},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),a=n(163);t.customGrad=a.customGrad,t.grad=a.grad,t.grads=a.grads,t.valueAndGrad=a.valueAndGrad,t.valueAndGrads=a.valueAndGrads,t.variableGrads=a.variableGrads,t.tidy=r.Environment.tidy,t.keep=r.Environment.keep,t.dispose=r.Environment.dispose,t.time=r.Environment.time},function(e,t,n){"use strict";e.exports={},e.exports.Arc=n(217),e.exports.Line=n(218),e.exports.Point=n(219),e.exports.Rectangle=n(220)},,function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},,function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(475)),r(n(178)),r(n(128)),r(n(476)),r(n(481)),r(n(486)),r(n(483)),r(n(489)),r(n(132)),r(n(184)),r(n(177)),r(n(75)),r(n(485)),r(n(129)),r(n(74)),r(n(10)),r(n(492)),r(n(185)),r(n(479)),r(n(182)),r(n(487)),r(n(480)),r(n(482)),r(n(490)),r(n(491));var a=n(6);t.op=a.op;var o=n(181);t.losses=o;var i=n(478);t.linalg=i;var s=n(477);t.image=s},function(e,t,n){function r(e,t){var n=o(e,t);return a(n)?n:void 0}var a=n(274),o=n(298);e.exports=r},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},,function(e,t,n){"use strict";function r(e,t,n,r){var a=e.map(function(e){var t=E.sizeFromShape(e.shapeInfo.logicalShape);return e.shapeInfo.isUniform?"uniform float "+e.name+(t>1?"["+t+"]":"")+";":"uniform sampler2D "+e.name+";"});a=a.join("\n");var s=e.map(function(e){return o(e,t,r)}).join("\n"),u=t.texShape,l=i(t.logicalShape,u),c=[L,R,z,a,l,s,n].join("\n");return c}function a(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return f(e);case 1:return m(e);case 2:return g(e);case 3:return v(e);case 4:return y(e);case 5:return b(e);case 6:return x(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function o(e,t,n){var r=w(e);return r+=a(e),(n||E.arraysEqual(e.shapeInfo.logicalShape,t.logicalShape))&&(r+=_(e,t,n)),r}function i(e,t){switch(e.length){case 0:return s();case 1:return u(e,t);case 2:return d(e,t);case 3:return l(e,t);case 4:return c(e,t);case 5:return p(e,t);case 6:return h(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}}function s(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function u(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}function l(e,t){var n=e[1]*e[2],r=e[2];return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+n+";\n      index -= r * "+n+";\n      int c = index / "+r+";\n      int d = index - c * "+r+";\n      return ivec3(r, c, d);\n    }\n  "}function c(e,t){var n=e[3],r=e[2]*n,a=e[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+a+";\n      index -= r * "+a+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}function p(e,t){var n=e[4],r=e[3]*n,a=e[2]*r,o=e[1]*a;return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+a+";\n      index -= c * "+a+";\n\n      int d = index / "+r+";\n      index -= d * "+r+";\n\n      int d2 = index  / "+n+";\n      int d3 = index - d2 * "+n+";\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}function h(e,t){var n=e[5],r=e[4]*n,a=e[3]*r,o=e[2]*a,i=e[1]*o;return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      int r = index / "+i+";\n      index -= r * "+i+";\n\n      int c = index / "+o+";\n      index -= c * "+o+";\n\n      int d = index / "+a+";\n      index -= d * "+a+";\n\n      int d2 = index / "+r+";\n      index -= d2 * "+r+";\n\n      int d3 = index / "+n+";\n      int d4 = index - d3 * "+n+";\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}function d(e,t){return E.arraysEqual(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}function f(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);return e.shapeInfo.isUniform?"float "+n+"() {return "+t+";}":"\n    float "+n+"() {\n      return sampleTexture("+t+", halfCR);\n    }\n  "}function m(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}function g(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape;if(null!=o&&E.arraysEqual(t,o)){var i=o[0],s=o[1];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+s+".0, "+i+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var u=E.squeezeShape(t),l=u.newShape,c=u.keptDims,p=l;if(p.length<t.length){var h=T(e,p),d=["row","col"];return"\n      "+a(h)+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+k(d,c)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = row * "+t[1]+" + col;\n        return "+r+"Flat(index);\n      }\n    ";var f=o[0],m=o[1];return 1===m?"\n    float "+r+"(int row, int col) {\n      int index = row * "+t[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===f?"\n    float "+r+"(int row, int col) {\n      int index = row * "+t[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+m+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    vec2 uv = UVfrom2D("+f+", "+m+", "+t[1]+", row, col);\n    return sampleTexture("+n+", uv);\n  }\n"}function v(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[1]*t[2],i=t[2],s=E.squeezeShape(t),u=s.newShape,l=s.keptDims,c=u;if(c.length<t.length){var p=T(e,c),h=["row","col","depth"];return"\n        "+a(p)+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+k(h,l)+");\n        }\n      "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = row * "+o+" + col * "+i+" + depth;\n        return "+r+"Flat(index);\n      }\n    ";var d=e.shapeInfo.texShape,f=d[0],m=d[1];return m===o?"\n        float "+r+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+i+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+m+".0, "+f+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":m===i?"\n    float "+r+"(int row, int col, int depth) {\n      int texR = row * "+t[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+m+".0, "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+f+", "+m+", "+o+", "+i+", row, col, depth);\n        return sampleTexture("+n+", uv);\n      }\n  "}function y(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[3],i=t[2]*o,s=t[1]*i,u=E.squeezeShape(t),l=u.newShape,c=u.keptDims;if(l.length<t.length){var p=T(e,l),h=["row","col","depth","depth2"];return"\n      "+a(p)+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+k(h,c)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = row * "+s+" + col * "+i+" +\n            depth * "+o+" + depth2;\n        return "+r+"Flat(index);\n      }\n    ";var d=e.shapeInfo.texShape,f=d[0],m=d[1];return m===s?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+i+" + depth * "+o+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===o?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+t[1]*t[2]+" + col * "+t[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+f+", "+m+", "+s+", "+i+",\n          "+o+", row, col, depth, depth2);\n      return sampleTexture("+n+", uv);\n    }\n  "}function b(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],i=t[3]*o,s=t[2]*i,u=t[1]*s,l=E.squeezeShape(t),c=l.newShape,p=l.keptDims;if(c.length<t.length){var h=T(e,c),d=["row","col","depth","depth2","depth3"];return"\n      "+a(h)+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+k(d,p)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int index = row * "+u+" + col * "+s+" +\n            depth * "+i+" + depth2 * "+o+" + depth3;\n        return "+r+"Flat(index);\n      }\n    ";var f=e.shapeInfo.texShape,m=f[0],g=f[1];return g===u?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        int texC = col * "+s+" + depth * "+i+" +\n                   depth2 * "+o+" + depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+m+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":g===o?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row * "+t[1]*t[2]+" + col * "+t[2]+" +\n                   depth * "+t[3]+" + depth2;\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+m+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      vec2 uv = UVfrom5D("+m+", "+g+", "+u+", "+s+",\n          "+i+", "+o+", row, col, depth, depth2, depth3);\n      return sampleTexture("+n+", uv);\n    }\n  "}function x(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[5],i=t[4]*o,s=t[3]*i,u=t[2]*s,l=t[1]*u,c=E.squeezeShape(t),p=c.newShape,h=c.keptDims;if(p.length<t.length){var d=T(e,p),f=["row","col","depth","depth2","depth3","depth4"];return"\n      "+a(d)+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+k(f,h)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = row * "+l+" + col * "+u+" +\n            depth * "+s+" + depth2 * "+i+" + depth3 * "+i+"\n            + depth4\n        return "+r+"Flat(index);\n      }\n    ";var m=e.shapeInfo.texShape,g=m[0],v=m[1];return v===l?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        int texC = col * "+u+" + depth * "+s+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+g+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":v===o?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row * "+t[1]*t[2]+" + col * "+t[2]+" + depth;\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+g+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      vec2 uv = UVfrom6D("+g+", "+v+", "+l+", "+u+",\n          "+s+", "+i+", "+o+"\n          ,row, col, depth, depth2, depth3, depth4);\n      return sampleTexture("+n+", uv);\n    }\n  "}function w(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1)+"Flat",r=E.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform)return 1===r?"float "+n+"(int index) {return "+t+";}":"\n      float "+n+"(int index) {\n        for (int i = 0; i < "+r+"; i++) {\n          if (i == index) {\n            return "+t+"[i];\n          }\n        }\n      }\n    ";var a=e.shapeInfo.texShape,o=a[0],i=a[1];return 1===i&&1===o?"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+o+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = UVfrom1D("+o+", "+i+", index);\n      return sampleTexture("+t+", uv);\n    }\n  "}function S(e,t,n,r){var a=e.shapeInfo.logicalShape.length,o=t.logicalShape.length,i="int";2===o?i="ivec2":3===o?i="ivec3":4===o&&(i="ivec4");var s,u=I.getBroadcastDims(e.shapeInfo.logicalShape,t.logicalShape),l=o-a;s=0===a?"":o<2&&u.length>=1?"coords = 0;":u.map(function(e){return"coords["+(e+l)+"] = 0;"}).join("\n");var c="";return c=o<2&&a>0?"coords":e.shapeInfo.logicalShape.map(function(e,t){return"coords["+(t+l)+"]"}).join(", "),"\n    float "+r+"() {\n      "+i+" coords = getOutputCoords();\n      "+s+"\n      return get"+n+"("+c+");\n    }\n  "}function _(e,t,n){var r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),o="get"+a+"AtOutCoords",i=I.getBroadcastDims(e.shapeInfo.logicalShape,t.logicalShape),s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length,l=n&&(u>s||i.length>0),c=I.broadcastDimsAreOuter(i),p=e.shapeInfo.isUniform;if(l&&!c)return S(e,t,a,o);var h=E.sizeFromShape(e.shapeInfo.logicalShape),d="";l&&c&&(d="\n        int mainPart = index / "+h+";\n        index -= mainPart * "+h+";\n      ");var f=t.texShape;if(p)return 1===h?"float "+o+"() {return "+r+";}":"\n      float "+o+"() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                              vec2("+f[0]+", "+f[1]+"));\n        int index = resTexRC.x * "+f[1]+" + resTexRC.y;\n        "+d+"\n        return get"+a+"Flat(index);\n      }\n    ";var m=e.shapeInfo.texShape;return E.arraysEqual(m,f)?"\n      float "+o+"() {\n        return sampleTexture("+r+", resultUV);\n      }\n    ":"\n    float "+o+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+f[0]+", "+f[1]+"));\n      int index = resTexRC.x * "+f[1]+" + resTexRC.y;\n      "+d+"\n      int texR = index / "+m[1]+";\n      int texC = index - texR * "+m[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+m[1]+".0, "+m[0]+".0);\n\n      return sampleTexture("+r+", uv);\n    }\n  "}function N(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function T(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function k(e,t){return t.map(function(t){return e[t]}).join(", ")}Object.defineProperty(t,"__esModule",{value:!0});var I=n(36),E=n(2);t.makeShader=r;var A="\nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",P="\nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",C="\nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",O="\nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",M="\nvec2 UVfrom5D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int row, int col, int depth,\n    int depth2, int depth3) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 +\n              depth * stride2 + depth2 * stride3 + depth3;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",D="\nvec2 UVfrom6D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int stride4,\n    int row, int col, int depth, int depth2, int depth3, int depth4) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2 *\n    stride3 + depth3 * stride4 + depth4;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",R="\n  float sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n  }\n",z="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",L="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  struct ivec5\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n  };\n\n  struct ivec6\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n    int v;\n  };\n\n  bool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  //Based on the work of Dave Hoskins\n  //https://www.shadertoy.com/view/4djSRW\n  #define HASHSCALE1 443.8975\n  float random(float seed){\n    vec2 p = resultUV * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n  }\n\n  "+A+"\n  "+P+"\n  "+C+"\n  "+O+"\n  "+M+"\n  "+D+"\n";t.getCoordsDataType=N},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function a(e,t,n){for(var r=e.length+t.length,a=[],o=0,i=0,s=0;s<r;s++)n.indexOf(s)===-1?a.push(e[o++]):a.push(t[i++]);return a}function o(e,t){for(var n=[],r=e.length,a=0;a<r;a++)t.indexOf(a)===-1&&n.push(e[a]);var o=t.map(function(t){return e[t]});return[n,o]}function i(e,t){var n=t.map(function(e){return 1});return a(e,n,t)}function s(e,t){var n=t.length;return e=null==e?t.map(function(e,t){return t}):[].concat(e),h.assert(e.every(function(e){return e>=-n&&e<n}),"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e),h.assert(e.every(function(e){return h.isInt(e)}),"All values in axis param must be integers but got axis "+e),e.map(function(e){return e<0?n+e:e})}function u(e,t,n){h.assert(r(t,n),e+" supports only inner-most axes for now. "+("Got axes "+t+" and rank-"+n+" input."))}function l(e,t){if(r(e,t))return null;for(var n=[],a=0;a<t;++a)e.indexOf(a)===-1&&n.push(a);return e.forEach(function(e){return n.push(e)}),n}function c(e){return e.map(function(e,t){return[t,e]}).sort(function(e,t){return e[1]-t[1]}).map(function(e){return e[0]})}function p(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}Object.defineProperty(t,"__esModule",{value:!0});var h=n(2);t.axesAreInnerMostDims=r,t.combineLocations=a,t.computeOutAndReduceShapes=o,t.expandShapeToKeepDim=i,t.parseAxisParam=s,t.assertAxesAreInnerMostDims=u,t.getAxesPermutation=l,t.getUndoAxesPermutation=c,t.getInnerMostAxes=p},,function(e,t){"use strict";function n(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var o=n-1-a,i=e[o]||1,s=t[t.length-1-a]||1;s>1&&1===i&&r.unshift(o)}return r}function r(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],o=t.length-r-1,i=t[o];(null==a||1===a&&i>1)&&n.unshift(o)}return n}function a(e){for(var t=0;t<e.length;t++)if(e[t]!==t)return!1;return!0}function o(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var o=e[e.length-a-1];null==o&&(o=1);var i=t[t.length-a-1];if(null==i&&(i=1),1===o)n.unshift(i);else if(1===i)n.unshift(o);else{if(o!==i){var s="Operands could not be broadcast together with shapes "+(e+" and "+t+".");throw Error(s)}n.unshift(o)}}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getBroadcastDims=n,t.getReductionAxes=r,t.broadcastDimsAreOuter=a,t.assertAndGetBroadcastShape=o},function(e,t,n){"use strict";function r(e){a.assert(null!=e.className,"Class being registered does not have the static className property defined."),a.assert("string"==typeof e.className,"className is required to be a string, but got type "+typeof e.className),a.assert(e.className.length>0,"Class being registered has an empty-string as its className, which is disallowed."),i.register(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}();t.Serializable=o;var i=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();t.SerializationMap=i,t.registerClass=r},function(e,t,n){"use strict";function r(e){p.checkStringTypeUnionValue(t.VALID_DATA_FORMAT_VALUES,"DataFormat",e)}function a(e){p.checkStringTypeUnionValue(t.VALID_PADDING_MODE_VALUES,"PaddingMode",e)}function o(e){p.checkStringTypeUnionValue(t.VALID_POOL_MODE_VALUES,"PoolMode",e)}function i(e,t){d.push(e);try{var n=t();return d.pop(),n}catch(e){throw d.pop(),e}}function s(){return 0===d.length?"":d.join(f)+f}function u(e){if(!c(e))throw new Error("Not a valid tensor name: '"+e+"'");return s()+e}function l(e){if(!c(e))throw new Error("Not a valid tensor name: '"+e+"'");h.has(e)||h.set(e,0);var t=h.get(e);if(h.set(e,h.get(e)+1),t>0){var n=e+"_"+t;return h.set(n,1),n}return e}function c(e){return!!e.match(m)}Object.defineProperty(t,"__esModule",{value:!0});var p=n(13),h=new Map;t.VALID_DATA_FORMAT_VALUES=["channelsFirst","channelsLast"],t.checkDataFormat=r,t.VALID_PADDING_MODE_VALUES=["valid","same","causal"],t.checkPaddingMode=a,t.VALID_POOL_MODE_VALUES=["max","avg"],t.checkPoolMode=o;var d=[],f="/";t.nameScope=i,t.getScopedTensorName=u,t.getUniqueTensorName=l;var m=new RegExp(/^[A-Za-z][A-Za-z0-9\._\/]*$/);t.isValidTensorName=c},function(e,t,n){"use strict";function r(){return s}function a(e){s=e}function o(){return"channelsLast"}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=i.ENV.get("EPSILON");t.epsilon=r,t.setEpsilon=a,t.imageDataFormat=o},function(e,t,n){"use strict";function r(e){return new m({l1:null!=e?e.l1:null,l2:0})}function a(e){return new m({l2:null!=e?e.l2:null,l1:0})}function o(e){return d.serializeKerasObject(e)}function i(e,t){return void 0===t&&(t={}),d.deserializeKerasObject(e,c.serialization.SerializationMap.getMap().classNameMap,t,"regularizer")}function s(e){if(null==e)return null;if("string"==typeof e){var n=e in t.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?t.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[e]:e,r={className:n,config:{}};return i(r)}return e instanceof f?e:i(e)}var u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),c=n(1),p=n(11),h=n(17),d=n(13),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t}(c.serialization.Serializable);t.Regularizer=f;var m=function(e){function t(t){var n=e.call(this)||this,r=null==t||null==t.l1?.01:t.l1,a=null==t||null==t.l2?.01:t.l2;return n.hasL1=0!==r,n.hasL2=0!==a,n.l1=p.getScalar(r),n.l2=p.getScalar(a),n}return u(t,e),t.prototype.apply=function(e){var t=this;return c.tidy(function(){var n=c.zeros([1]);return t.hasL1&&(n=c.add(n,c.sum(l.mul(t.l1,c.abs(e))))),t.hasL2&&(n=c.add(n,c.sum(l.mul(t.l2,h.square(e))))),n.asScalar()})},t.prototype.getConfig=function(){return{l1:this.l1.dataSync()[0],l2:this.l2.dataSync()[0]}},t.fromConfig=function(e,t){return new e({l1:t.l1,l2:t.l2})},t.className="L1L2",t}(f);t.L1L2=m,c.serialization.SerializationMap.register(m),t.l1=r,t.l2=a,t.REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={l1l2:"L1L2"},t.serializeRegularizer=o,t.deserializeRegularizer=i,t.getRegularizer=s},function(e,t,n){"use strict";function r(e){return e===parseInt(e.toString(),10)}function a(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function o(e){return e=Array.isArray(e)?new Float32Array(e):e,f.tensor1d(e)}function i(e){return d.min(o(e)).dataSync()[0]}function s(e){return d.max(o(e)).dataSync()[0]}function u(e){return d.sum(o(e)).dataSync()[0]}function l(e){return u(e)/e.length}function c(e){var t=d.sub(o(e),f.scalar(l(e))),n=d.sum(d.mulStrict(t,t)).dataSync()[0];return n/e.length}function p(e){var t=e.slice().sort(function(e,t){return e-t}),n=Math.floor((t.length-1)/2),r=Math.ceil((t.length-1)/2);return n===r?t[n]:(t[n]+t[r])/2}function h(e,t){if(t<e)throw new m.ValueError("end ("+t+") < begin ("+e+") is forbidden.");for(var n=[],r=e;r<t;++r)n.push(r);return n}Object.defineProperty(t,"__esModule",{value:!0});var d=n(1),f=n(1),m=n(8);t.isInteger=r,t.arrayProd=a,t.min=i,t.max=s,t.sum=u,t.mean=l,t.variance=c,t.median=p,t.range=h},function(e,t,n){"use strict";function r(e,t){return o.where(e,function(e){return e.position===t})}function a(e,t){e.forEach(function(e,t){return e._tmpIndex_=t,e}),e.sort(function(e,n){var r=t?n:e,a=t?e:n;return r.weight===a.weight?r._tmpIndex_-a._tmpIndex_:r.weight-a.weight}),e.forEach(function(e){delete e._tmpIndex_})}var o=n(3);e.exports={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;n!==-1&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var r,a=["fullWidth","position","weight"],o=a.length,i=0;i<o;++i)r=a[i],n.hasOwnProperty(r)&&(t[r]=n[r])},update:function(e,t,n){function i(e){var t,n=e.isHorizontal();n?(t=e.update(e.fullWidth?w:I,k),E-=t.height):(t=e.update(T,E),I-=t.width),A.push({horizontal:n,minSize:t,box:e})}function s(e){var t=o.findNextWhere(A,function(t){return t.box===e});if(t)if(e.isHorizontal()){var n={left:Math.max(D,P),right:Math.max(R,C),top:0,bottom:0};e.update(e.fullWidth?w:I,S/2,n);
}else e.update(t.minSize.width,E)}function u(e){var t=o.findNextWhere(A,function(t){return t.box===e}),n={left:0,right:0,top:z,bottom:L};t&&e.update(t.minSize.width,E,n)}function l(e){e.isHorizontal()?(e.left=e.fullWidth?h:D,e.right=e.fullWidth?t-d:D+I,e.top=W,e.bottom=W+e.height,W=e.bottom):(e.left=U,e.right=U+e.width,e.top=z,e.bottom=z+E,U=e.right)}if(e){var c=e.options.layout||{},p=o.options.toPadding(c.padding),h=p.left,d=p.right,f=p.top,m=p.bottom,g=r(e.boxes,"left"),v=r(e.boxes,"right"),y=r(e.boxes,"top"),b=r(e.boxes,"bottom"),x=r(e.boxes,"chartArea");a(g,!0),a(v,!1),a(y,!0),a(b,!1);var w=t-h-d,S=n-f-m,_=w/2,N=S/2,T=(t-_)/(g.length+v.length),k=(n-N)/(y.length+b.length),I=w,E=S,A=[];o.each(g.concat(v,y,b),i);var P=0,C=0,O=0,M=0;o.each(y.concat(b),function(e){if(e.getPadding){var t=e.getPadding();P=Math.max(P,t.left),C=Math.max(C,t.right)}}),o.each(g.concat(v),function(e){if(e.getPadding){var t=e.getPadding();O=Math.max(O,t.top),M=Math.max(M,t.bottom)}});var D=h,R=d,z=f,L=m;o.each(g.concat(v),s),o.each(g,function(e){D+=e.width}),o.each(v,function(e){R+=e.width}),o.each(y.concat(b),s),o.each(y,function(e){z+=e.height}),o.each(b,function(e){L+=e.height}),o.each(g.concat(v),u),D=h,R=d,z=f,L=m,o.each(g,function(e){D+=e.width}),o.each(v,function(e){R+=e.width}),o.each(y,function(e){z+=e.height}),o.each(b,function(e){L+=e.height});var V=Math.max(P-D,0);D+=V,R+=Math.max(C-R,0);var F=Math.max(O-z,0);z+=F,L+=Math.max(M-L,0);var B=n-z-L,j=t-D-R;j===I&&B===E||(o.each(g,function(e){e.height=B}),o.each(v,function(e){e.height=B}),o.each(y,function(e){e.fullWidth||(e.width=j)}),o.each(b,function(e){e.fullWidth||(e.width=j)}),E=B,I=j);var U=h+V,W=f+F;o.each(g.concat(y),l),U+=I,W+=E,o.each(v,l),o.each(b,l),e.chartArea={left:D,top:z,right:D+I,bottom:z+E},o.each(x,function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(I,E)})}}}},function(e,t,n){"use strict";var r=n(3);e.exports={formatters:{values:function(e){return r.isArray(e)?e:""+e},linear:function(e,t,n){var a=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(a)>1&&e!==Math.floor(e)&&(a=e-Math.floor(e));var o=r.log10(Math.abs(a)),i="";if(0!==e){var s=-1*Math.floor(o);s=Math.max(Math.min(s,20),0),i=e.toFixed(s)}else i="0";return i},logarithmic:function(e,t,n){var a=e/Math.pow(10,Math.floor(r.log10(e)));return 0===e?"0":1===a||2===a||5===a||0===t||t===n.length-1?e.toExponential():""}}}},function(e,t,n){function r(e){return null==e?void 0===e?u:s:l&&l in Object(e)?o(e):i(e)}var a=n(58),o=n(295),i=n(322),s="[object Null]",u="[object Undefined]",l=a?a.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},,,function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(24),o=n(37),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,o=r.grads;this.applyGradients(o);var i=Object.keys(o);return i.forEach(function(e){return o[e].dispose()}),t?a:(a.dispose(),null)},t.prototype.computeGradients=function(e,t){return a.variableGrads(e,t)},t}(o.Serializable);t.Optimizer=i},function(e,t,n){"use strict";function r(e,t){return l.tidy(function(){return u.sqrt(u.sum(u.mulStrict(e,e),t,!0))})}function a(e){return h.serializeKerasObject(e)}function o(e,t){return void 0===t&&(t={}),h.deserializeKerasObject(e,l.serialization.SerializationMap.getMap().classNameMap,t,"constraint")}function i(e){if(null==e)return null;if("string"==typeof e){var n=e in t.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP?t.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP[e]:e,r={className:n,config:{}};return o(r)}return e instanceof d?e:o(e)}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),l=n(1),c=n(39),p=n(11),h=n(13),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.getConfig=function(){return{}},t}(l.serialization.Serializable);t.Constraint=d;var f=function(e){function t(t){var n=e.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return s(t,e),t.prototype.apply=function(e){var t=this;return l.tidy(function(){var n=r(e,t.axis),a=u.clipByValue(n,0,t.maxValue);return u.mul(e,u.div(a,u.add(p.getScalar(c.epsilon()),n)))})},t.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},t.className="MaxNorm",t}(d);t.MaxNorm=f,l.serialization.SerializationMap.register(f);var m=function(e){function t(t){var n=e.call(this)||this;return n.defaultAxis=0,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return s(t,e),t.prototype.apply=function(e){var t=this;return l.tidy(function(){return u.div(e,u.add(p.getScalar(c.epsilon()),r(e,t.axis)))})},t.prototype.getConfig=function(){return{axis:this.axis}},t.className="UnitNorm",t}(d);t.UnitNorm=m,l.serialization.SerializationMap.register(m);var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.apply=function(e){return u.relu(e)},t.className="NonNeg",t}(d);t.NonNeg=g,l.serialization.SerializationMap.register(g);var v=function(e){function t(t){var n=e.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=t.minValue?t.minValue:n.defaultMinValue,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.rate=null!=t.rate?t.rate:n.defaultRate,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}return s(t,e),t.prototype.apply=function(e){var t=this;return l.tidy(function(){var n=r(e,t.axis),a=u.add(u.mul(p.getScalar(t.rate),u.clipByValue(n,t.minValue,t.maxValue)),u.mul(p.getScalar(1-t.rate),n));return u.mul(e,u.div(a,u.add(p.getScalar(c.epsilon()),n)))})},t.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},t.className="MinMaxNorm",t}(d);t.MinMaxNorm=v,l.serialization.SerializationMap.register(v),t.CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"},t.serializeConstraint=a,t.deserializeConstraint=o,t.getConstraint=i},function(e,t,n){"use strict";function r(e){m.checkStringTypeUnionValue(t.VALID_FAN_MODE_VALUES,"FanMode",e)}function a(e){m.checkStringTypeUnionValue(t.VALID_DISTRIBUTION_VALUES,"Distribution",e)}function o(e,t){void 0===t&&(t="channelsLast");var n,r;if(d.checkDataFormat(t),2===e.length)n=e[0],r=e[1];else if([3,4,5].indexOf(e.length)!==-1){if("channelsFirst"===t){var a=g.arrayProd(e,2);n=e[1]*a,r=e[0]*a}else if("channelsLast"===t){var a=g.arrayProd(e,0,e.length-2);n=e[e.length-2]*a,r=e[e.length-1]*a}}else{var o=g.arrayProd(e);n=Math.sqrt(o),r=Math.sqrt(o)}return[n,r]}function i(e,t){return void 0===t&&(t={}),m.deserializeKerasObject(e,c.serialization.SerializationMap.getMap().classNameMap,t,"initializer")}function s(e){return m.serializeKerasObject(e)}function u(e){if("string"==typeof e){var n=e in t.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?t.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[e]:e;if("GlorotUniform"===n)return new k;if("GlorotNormal"===n)return new I;if("HeNormal"===n)return new E;if("LeCunNormal"===n)return new A;var r={className:n,config:{}};return i(r)}return e instanceof v?e:i(e)}var l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),p=n(11),h=n(17),d=n(38),f=n(8),m=n(13),g=n(41);t.VALID_FAN_MODE_VALUES=["fanIn","fanOut","fanAvg"],t.checkFanMode=r,t.VALID_DISTRIBUTION_VALUES=["normal","uniform"],t.checkDistribution=a;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.fromConfigUsesCustomObjects=function(){return!1},t.prototype.getConfig=function(){return{}},t}(c.serialization.Serializable);t.Initializer=v;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.apply=function(e,t){return c.zeros(e,t)},t.className="Zeros",t}(v);t.Zeros=y,c.serialization.SerializationMap.register(y);var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.apply=function(e,t){return c.ones(e,t)},t.className="Ones",t}(v);t.Ones=b,c.serialization.SerializationMap.register(b);var x=function(e){function t(t){var n=e.call(this)||this;if("object"!=typeof t)throw new f.ValueError("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new f.ValueError("config must have value set but got "+t);return n.value=t.value,n}return l(t,e),t.prototype.apply=function(e,t){var n=this;return c.tidy(function(){return c.mul(c.scalar(n.value),c.ones(e,t))})},t.prototype.getConfig=function(){return{value:this.value}},t.className="Constant",t}(v);t.Constant=x,c.serialization.SerializationMap.register(x);var w=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=t.minval||n.DEFAULT_MINVAL,n.maxval=t.maxval||n.DEFAULT_MAXVAL,n.seed=t.seed,n}return l(t,e),t.prototype.apply=function(e,t){return c.randomUniform(e,this.minval,this.maxval,t)},t.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},t.className="RandomUniform",t}(v);t.RandomUniform=w,c.serialization.SerializationMap.register(w);var S=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return l(t,e),t.prototype.apply=function(e,t){if("bool"===t)throw new f.NotImplementedError("randomNormal does not support dType bool.");return h.randomNormal(e,this.mean,this.stddev,t,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="RandomNormal",t}(v);t.RandomNormal=S,c.serialization.SerializationMap.register(S);var _=function(e){function t(t){var n=e.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}return l(t,e),t.prototype.apply=function(e,t){if("bool"===t)throw new f.NotImplementedError("truncatedNormal does not support dType bool.");return c.truncatedNormal(e,this.mean,this.stddev,t,this.seed)},t.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t.className="TruncatedNormal",t}(v);t.TruncatedNormal=_,c.serialization.SerializationMap.register(_);var N=function(e){function t(t){var n=e.call(this)||this;return n.gain=null!=t.gain?c.scalar(t.gain):p.getScalar(1),n}return l(t,e),t.prototype.apply=function(e,t){var n=this;return c.tidy(function(){if(2!==e.length||e[0]!==e[1])throw new f.ValueError("Identity matrix initializer can only be used for 2D square matrices.");return c.mul(n.gain,c.eye(e[0]))})},t.prototype.getConfig=function(){return{gain:this.gain.get()}},t.className="Identity",t}(v);t.Identity=N,c.serialization.SerializationMap.register(N);var T=function(e){function t(t){var n=e.call(this)||this;if(t.scale<0)throw new f.ValueError("scale must be a positive float. Got: "+t.scale);return n.scale=null==t.scale?1:t.scale,n.mode=t.mode,r(n.mode),n.distribution=t.distribution,a(n.distribution),n.seed=t.seed,n}return l(t,e),t.prototype.apply=function(e,t){var n=o(e),r=n[0],a=n[1],i=this.scale;if(i/="fanIn"===this.mode?Math.max(1,r):"fanOut"===this.mode?Math.max(1,a):Math.max(1,(r+a)/2),"normal"===this.distribution){var s=Math.sqrt(i);if("bool"===t)throw new f.NotImplementedError(this.getClassName()+" does not support dType bool.");return c.truncatedNormal(e,0,s,t,this.seed)}var u=Math.sqrt(3*i);return c.randomUniform(e,-u,u,t)},t.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},t.className="VarianceScaling",t}(v);t.VarianceScaling=T,c.serialization.SerializationMap.register(T);var k=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})||this}return l(t,e),t.prototype.getClassName=function(){return T.className},t}(T);t.GlorotUniform=k;var I=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})||this}return l(t,e),t.prototype.getClassName=function(){return T.className},t}(T);t.GlorotNormal=I;var E=function(e){function t(t){return e.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return l(t,e),t.prototype.getClassName=function(){return T.className},t}(T);t.HeNormal=E;var A=function(e){function t(t){return e.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return l(t,e),t.prototype.getClassName=function(){return T.className},t}(T);t.LeCunNormal=A;var P=function(e){function t(t){var n=e.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==t.gain?n.DEFAULT_GAIN:t.gain,n.seed=t.seed,null!=n.seed)throw new f.NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.");return n}return l(t,e),t.prototype.apply=function(e,t){var n=this;return c.tidy(function(){if(2!==e.length)throw new f.NotImplementedError("The Orthogonal Initializer does not support non-2D shapes yet.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more "+("than 2000 ("+e[0]*e[1]+") elements: ")+"Slowness may result.");var t=e[0]>e[1]?[e[1],e[0]]:e,r=h.randomNormal(t,0,1,"float32"),a=c.linalg.gramSchmidt(r);return e[0]>e[1]&&(a=a.transpose()),c.mul(p.getScalar(n.gain),a)})},t.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},t.className="Orthogonal",t}(v);t.Orthogonal=P,c.serialization.SerializationMap.register(P),t.INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",identity:"Identity",leCunNormal:"LeCunNormal",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"},t.serializeInitializer=s,t.getInitializer=u},,,function(e,t,n){(function(e){"use strict";function r(e,t,n){for(var r=Object.keys(t),a=0;a<r.length;++a)void 0!==e[r[a]]&&n||(e[r[a]]=t[r[a]]);return e}function a(e){function t(e,n){return this instanceof t?(Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),void(n&&r(this,n))):new t(e,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}var o=t;o.asPromise=n(383),o.base64=n(384),o.EventEmitter=n(385),o.float=n(386),o.inquire=n(387),o.utf8=n(389),o.pool=n(388),o.LongBits=n(566),o.global="undefined"!=typeof window&&window||"undefined"!=typeof e&&e||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isNode=Boolean(o.global.process&&o.global.process.versions&&o.global.process.versions.node),o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var n=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},o.merge=r,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=a,o.ProtocolError=a("ProtocolError"),o.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},o.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;return e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},void(o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)})):void(o._Buffer_from=o._Buffer_allocUnsafe=null)}}).call(t,function(){return this}())},function(e,t){"use strict";var n={noop:function(){},uid:function(){var e=0;return function(){return e++}}(),isNullOrUndef:function(e){return null===e||"undefined"==typeof e},isArray:Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},valueOrDefault:function(e,t){return"undefined"==typeof e?t:e},valueAtIndexOrDefault:function(e,t,r){return n.valueOrDefault(n.isArray(e)?e[t]:e,r)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,r,a){var o,i,s;if(n.isArray(e))if(i=e.length,a)for(o=i-1;o>=0;o--)t.call(r,e[o],o);else for(o=0;o<i;o++)t.call(r,e[o],o);else if(n.isObject(e))for(s=Object.keys(e),i=s.length,o=0;o<i;o++)t.call(r,e[s[o]],s[o])},arrayEquals:function(e,t){var r,a,o,i;if(!e||!t||e.length!==t.length)return!1;for(r=0,a=e.length;r<a;++r)if(o=e[r],i=t[r],o instanceof Array&&i instanceof Array){if(!n.arrayEquals(o,i))return!1}else if(o!==i)return!1;return!0},clone:function(e){if(n.isArray(e))return e.map(n.clone);if(n.isObject(e)){for(var t={},r=Object.keys(e),a=r.length,o=0;o<a;++o)t[r[o]]=n.clone(e[r[o]]);return t}return e},_merger:function(e,t,r,a){var o=t[e],i=r[e];n.isObject(o)&&n.isObject(i)?n.merge(o,i,a):t[e]=n.clone(i)},_mergerIf:function(e,t,r){var a=t[e],o=r[e];n.isObject(a)&&n.isObject(o)?n.mergeIf(a,o):t.hasOwnProperty(e)||(t[e]=n.clone(o))},merge:function(e,t,r){var a,o,i,s,u,l=n.isArray(t)?t:[t],c=l.length;if(!n.isObject(e))return e;for(r=r||{},a=r.merger||n._merger,o=0;o<c;++o)if(t=l[o],n.isObject(t))for(i=Object.keys(t),u=0,s=i.length;u<s;++u)a(i[u],e,t,r);return e},mergeIf:function(e,t){return n.merge(e,t,{merger:n._mergerIf})},extend:function(e){for(var t=function(t,n){e[n]=t},r=1,a=arguments.length;r<a;++r)n.each(arguments[r],t);return e},inherits:function(e){var t=this,r=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},a=function(){this.constructor=r};return a.prototype=t.prototype,r.prototype=new a,r.extend=n.inherits,e&&n.extend(r.prototype,e),r.__super__=t.prototype,r}};e.exports=n,n.callCallback=n.callback,n.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},n.getValueOrDefault=n.valueOrDefault,n.getValueAtIndexOrDefault=n.valueAtIndexOrDefault},,,function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n(308),o=n(309),i=n(310),s=n(311),u=n(312);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=i,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(20),a=r.Symbol;e.exports=a},function(e,t,n){function r(e,t){for(var n=e.length;n--;)if(a(e[n][0],t))return n;return-1}var a=n(119);e.exports=r},function(e,t,n){function r(e,t){var n=e.__data__;return a(t)?n["string"==typeof t?"string":"hash"]:n.map}var a=n(305);e.exports=r},function(e,t,n){var r=n(30),a=r(Object,"create");e.exports=a},function(e,t,n){function r(e){if("string"==typeof e||a(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}var a=n(64),o=1/0;e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){function r(e){return"symbol"==typeof e||o(e)&&a(e)==i}var a=n(44),o=n(45),i="[object Symbol]";e.exports=r},function(e,t,n){function r(e){return i(e)?a(e):o(e)}var a=n(259),o=n(276),i=n(83);e.exports=r},function(e,t,n){(function(e){"use strict";function r(e){return h(this,void 0,void 0,function(){var t,n,r,a,i;return d(this,function(s){switch(s.label){case 0:t=[],n=[];for(r in e){if(a=e[r],"float32"!==a.dtype&&"int32"!==a.dtype&&"bool"!==a.dtype)throw new Error("Unsupported dtype in weight '"+r+"': "+a.dtype);t.push({name:r,shape:a.shape,dtype:a.dtype}),n.push(a.data())}return[4,Promise.all(n)];case 1:return i=s.sent(),[2,{data:o(i),specs:t}]}})})}function a(e,t){for(var n={},r=0,a=(function(t){var a=t.name,o=t.dtype,i=t.shape,s=m.sizeFromShape(i),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown "+("quantization dtype "+l.dtype+". ")+"Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=g.DTYPE_VALUE_SIZE_MAP[l.dtype],p=e.slice(r,r+s*c),h="uint8"===l.dtype?new Uint8Array(p):new Uint16Array(p);if("float32"===o)u=Float32Array.from(h,function(e){return e*l.scale+l.min});else{if("int32"!==o)throw new Error("Unsupported dtype in weight '"+a+"': "+o);u=Int32Array.from(h,function(e){return Math.round(e*l.scale+l.min)})}r+=s*c}else{var d=g.DTYPE_VALUE_SIZE_MAP[o],p=e.slice(r,r+s*d);if("float32"===o)u=new Float32Array(p);else if("int32"===o)u=new Int32Array(p);else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+a+"': "+o);u=new Uint8Array(p)}r+=s*d}var v=void 0;if("float32"===o)v=f.tensor(u,i,"float32");else if("int32"===o)v=f.tensor(u,i,"int32");else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+a+"': "+o);v=f.tensor(u,i,"bool")}n[a]=v}),o=0,i=t;o<i.length;o++){var s=i[o];a(s)}return n}function o(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});var r=new Uint8Array(t),a=0;return n.forEach(function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength}),r.buffer}function i(t){return v?e.byteLength(t):new Blob([t]).size}function s(t){return v?e.from(t).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(t)))}function u(t){if(v){var n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}for(var r=atob(t),a=new Uint8Array(r.length),o=0;o<r.length;++o)a.set([r.charCodeAt(o)],o);return a.buffer}function l(e){var t=0;e.forEach(function(e){t+=e.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(e){n.set(new Uint8Array(e),r),r+=e.byteLength}),n.buffer}function c(e){var t="/";for(e=e.trim();e.endsWith(t);)e=e.slice(0,e.length-1);var n=e.split(t);return n[n.length-1]}function p(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:i(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:i(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var h=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},d=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var f=n(10),m=n(2),g=n(164);t.encodeWeights=r,t.decodeWeights=a,t.concatenateTypedArrays=o;var v="undefined"!=typeof e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);t.stringByteLength=i,t.arrayBufferToBase64String=s,t.base64StringToArrayBuffer=u,t.concatenateArrayBuffers=l,t.basename=c,t.getModelArtifactsInfoForJSON=p}).call(t,n(527).Buffer)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t){return e.getHandlers(t,"load")},e.getHandlers=function(e,t){var n=[],r="load"===t?this.getInstance().loadRouters:this.getInstance().saveRouters;return r.forEach(function(t){var r=t(e);null!==r&&n.push(r)}),n},e}();t.IORouterRegistry=n},,,,function(e,t){(function(t){e.exports=t}).call(t,{})},,,function(e,t,n){"use strict";function r(e){var t=R.convertToTensor(e,"x","clone"),n=function(e){return{$x:function(){return e.toFloat()}}};return M.ENV.engine.runKernel(function(e){return D.Tensor.make(t.shape,{dataId:t.dataId},t.dtype)},{$x:t},n)}function a(e,n,r,a){void 0===a&&(a="float32"),null==n&&(n=e);for(var o=A([e,n],a),i=e<=n?e:n,s=0;s<i;++s)o.set(1,s,s);var u=o.toTensor().as2D(e,n);if(null==r)return u;if(1===r.length)return t.tile(t.expandDims(u,0),[r[0],1,1]);if(2===r.length)return t.tile(t.expandDims(t.expandDims(u,0),0),[r[0],r[1],1,1]);if(3===r.length)return t.tile(t.expandDims(t.expandDims(t.expandDims(u,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+("batchShapes, but received "+r.length+"D."))}function o(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new B.MPRandGauss(t,n,r,!1,a),i=A(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}function i(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new B.MPRandGauss(t,n,r,!0,a),i=A(e,r),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}function s(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=A(e,r),o=0;o<a.values.length;o++)a.values[o]=z.randUniform(t,n);return a.toTensor()}function u(e,t,n){var r=z.sizeFromShape(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=t();return D.Tensor.make(e,{values:a},n)}function l(e,t,n,r){void 0===r&&(r=!1);var a=R.convertToTensor(e,"logits","multinomial"),o=a.size,i=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+(o+"."));if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=1===i?a.as2D(1,-1):a,u=M.ENV.engine.runKernel(function(e){return e.multinomial(s,r,t,n)},{logits2D:s});return 1===i?u.as1D():u}function c(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=0);var a=R.convertToTensor(e,"indices","oneHot","int32");if(z.assert("int32"===a.dtype,"Indices must be of dtype `int32`"),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=function(e){return{$indices:function(){return j.zerosLike(a)}}};return M.ENV.engine.runKernel(function(e){return e.oneHot(a,t,n,r)},{$indices:a},o)}function p(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return M.ENV.engine.fromPixels(e,t)}function h(e,t){return C(this,void 0,void 0,function(){var n,r,a,o,i,s,u,l,c,p,h,d,f,m,g,v,y,b,x,w;return O(this,function(S){switch(S.label){case 0:if(n=R.convertToTensor(e,"img","toPixels","int32"),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),a=r[0],o=r[1],i=2===n.rank?1:n.shape[2],i>4||2===i)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return s=n.min(),u=n.max(),[4,s.data()];case 1:return l=S.sent()[0],[4,u.data()];case 2:if(c=S.sent()[0],s.dispose(),u.dispose(),"float32"===n.dtype){if(l<0||c>1)throw new Error("Tensor values for a float32 Tensor must be in the "+("range [0 - 1] but got range ["+l+" - "+c+"]."))}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(l<0||c>255)throw new Error("Tensor values for a int32 Tensor must be in the "+("range [0 - 255] but got range ["+l+" - "+c+"]."))}return[4,n.data()];case 3:for(p=S.sent(),h="float32"===n.dtype?255:1,d=new Uint8ClampedArray(o*a*4),f=0;f<a*o;++f)m=void 0,g=void 0,v=void 0,y=void 0,1===i?(m=p[f]*h,g=p[f]*h,v=p[f]*h,y=255):3===i?(m=p[3*f]*h,g=p[3*f+1]*h,v=p[3*f+2]*h,y=255):4===i&&(m=p[4*f]*h,g=p[4*f+1]*h,v=p[4*f+2]*h,y=p[4*f+3]*h),b=4*f,d[b+0]=Math.round(m),d[b+1]=Math.round(g),d[b+2]=Math.round(v),d[b+3]=Math.round(y);return null!=t&&(t.width=o,t.height=a,x=t.getContext("2d"),w=new ImageData(d,o,a),x.putImageData(w,0,0)),n!==e&&n.dispose(),[2,d]}})})}function d(e,t){var n=R.convertToTensor(e,"x","reshape");t=z.inferFromImplicitShape(t,n.size),z.assert(n.size===z.sizeFromShape(t),"new shape and old shape must have the same number of elements.");var r=function(e){return{$x:function(){return e.reshape(n.shape)}}};return M.ENV.engine.runKernel(function(e){return e.reshape(n,t)},{$x:n},r)}function f(e,n){var r=R.convertToTensor(e,"x","squeeze");return t.reshape(r,z.squeezeShape(r.shape,n).newShape)}function m(e,t){var n=R.convertToTensor(e,"x","cast"),r=function(e){
return{$x:function(){return e.clone()}}};return M.ENV.engine.runKernel(function(e){return e.cast(n,t)},{$x:n},r)}function g(e,t){var n=R.convertToTensor(e,"x","tile");z.assert(n.rank===t.length,"Error in transpose: rank of input "+n.rank+" "+("must match length of reps "+t+"."));var r=function(e){var r=function(){var r=j.zerosLike(n);if(1===n.rank)for(var a=0;a<t[0];++a)r=r.add(e.slice([a*n.shape[0]],[n.shape[0]]));else if(2===n.rank)for(var a=0;a<t[0];++a)for(var o=0;o<t[1];++o)r=r.add(e.slice([a*n.shape[0],o*n.shape[1]],[n.shape[0],n.shape[1]]));else if(3===n.rank)for(var a=0;a<t[0];++a)for(var o=0;o<t[1];++o)for(var i=0;i<t[2];++i)r=r.add(e.slice([a*n.shape[0],o*n.shape[1],i*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else{if(4!==n.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+(n.rank+" tensors yet."));for(var a=0;a<t[0];++a)for(var o=0;o<t[1];++o)for(var i=0;i<t[2];++i)for(var s=0;s<t[3];++s)r=r.add(e.slice([a*n.shape[0],o*n.shape[1],i*n.shape[2],s*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]))}return r};return{$x:r}};return M.ENV.engine.runKernel(function(e){return e.tile(n,t)},{$x:n},r)}function v(e,n,r){return void 0===r&&(r=0),z.assert(2===n.length,"Invalid number of paddings. Must be length of 2."),t.pad(e,[n],r)}function y(e,n,r){return void 0===r&&(r=0),z.assert(2===n.length&&2===n[0].length&&2===n[1].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)}function b(e,n,r){return void 0===r&&(r=0),z.assert(3===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)}function x(e,n,r){return void 0===r&&(r=0),z.assert(4===n.length&&2===n[0].length&&2===n[1].length&&2===n[2].length&&2===n[3].length,"Invalid number of paddings. Must be length of 2 each."),t.pad(e,n,r)}function w(e,t,n){void 0===n&&(n=0);var r=R.convertToTensor(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a=t.map(function(e){return e[0]}),o=function(e){return{$x:function(){return e.slice(a,r.shape)}}};return M.ENV.engine.runKernel(function(e){return e.pad(r,t,n)},{$x:r},o)}function S(e,t){void 0===t&&(t=0);var n=R.convertToTensorArray(e,"tensors","stack");if(z.assert(n.length>=1,"Pass at least one tensor to tf.stack"),1===n.length)return n[0].expandDims(t);var r=n[0].rank,a=n[0].shape,o=n[0].dtype;z.assert(t<=r,"Axis must be <= rank of the tensor"),n.forEach(function(e){z.assertShapesMatch(a,e.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(e){z.assert(o===e.dtype,"All tensors passed to stack must have matching dtypes")});var i=n.map(function(e){return e.expandDims(t)});return V.concat(i,t)}function _(e,t,n){var r=R.convertToTensor(e,"x","batchToSpaceND"),a=t.reduce(function(e,t){return e*t});z.assert(r.rank>=1+t.length,"input rank should be > than [blockShape] but got "+r.rank),z.assert(n.length===t.length,"crops.shape[0] must be equal to [blockShape] but got "+n.length),z.assert(r.shape[0]%a===0,"input tensor batch must be divisible by prod( blockShape )");var o=function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}};return M.ENV.engine.runKernel(function(e){return e.batchToSpaceND(r,t,n)},{$x:r},o)}function N(e,t,n){var r=R.convertToTensor(e,"x","spaceToBatchND");z.assert(r.rank>=1+t.length,"input rank "+r.rank+" should be > than [blockShape] "+t.length),z.assert(n.length===t.length,"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length),z.assert(r.shape.reduce(function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e},!0),"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString());var a=function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}};return M.ENV.engine.runKernel(function(e){return e.spaceToBatchND(r,t,n)},{$x:r},a)}function T(e,t){void 0===t&&(t=0);for(var n=R.convertToTensor(e,"x","unstack"),r=n.shape[t],a=Array(n.rank-1).fill(0),o=0,i=0;i<n.rank;i++)i!==t&&(a[o]=n.shape[i],o++);var s;s=Array(r).fill(1);var u=Array(n.rank).fill(0),l=n.shape.slice();return s.map(function(e){l[t]=e;var r=n.slice(u,l);return u[t]+=e,r.reshape(a)})}function k(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a=R.convertToTensor(e,"x","cumsum");t|=0;var o=L.getAxesPermutation([t],a.rank),i=a;null!=o&&(i=a.transpose(o));var s=L.getInnerMostAxes(1,a.rank)[0],u=function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}},l=M.ENV.engine.runKernel(function(e){return e.cumsum(i,s,n,r)},{permutedX:i},u);return null!=o&&(l=l.transpose(o)),l}function I(e,n){void 0===n&&(n=0);var r=R.convertToTensor(e,"x","expandDims");z.assert(n<=r.rank,"Axis must be <= rank of the tensor");var a=r.shape.slice();return n<0&&(z.assert(-(r.rank+1)<=n,"Axis must be in the interval ["+-(r.rank+1)+", "+r.rank+"]"),n=r.rank+n+1),a.splice(n,0,1),t.reshape(r,a)}function E(e,t,n){void 0===n&&(n="NHWC");var r=R.convertToTensor(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return z.assert(a*t>=0,"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+"  for depthToSpace with input shape\n      "+r.shape),z.assert(o*t>=0,"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+" for depthToSpace with input shape\n          "+r.shape),z.assert(i%(t*t)===0,"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape),M.ENV.engine.runKernel(function(e){return e.depthToSpace(r,t,n)},{$x:r})}function A(e,t,n){return void 0===t&&(t="float32"),new D.TensorBuffer(e,t,n)}function P(e,t){void 0===t&&(t=!1),console.log(e.toString(t))}var C=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},O=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var M=n(4),D=n(18),R=n(7),z=n(2),L=n(34),V=n(128),F=n(6),B=n(484),j=n(10);t.toPixels=h,t.buffer=A,t.print=P,t.batchToSpaceND=F.op({batchToSpaceND_:_}),t.cast=F.op({cast_:m}),t.clone=F.op({clone_:r}),t.cumsum=F.op({cumsum_:k}),t.depthToSpace=F.op({depthToSpace_:E}),t.expandDims=F.op({expandDims_:I}),t.eye=F.op({eye_:a}),t.fromPixels=F.op({fromPixels_:p}),t.multinomial=F.op({multinomial_:l}),t.oneHot=F.op({oneHot_:c}),t.pad=F.op({pad_:w}),t.pad1d=F.op({pad1d_:v}),t.pad2d=F.op({pad2d_:y}),t.pad3d=F.op({pad3d_:b}),t.pad4d=F.op({pad4d_:x}),t.rand=F.op({rand_:u}),t.randomNormal=F.op({randomNormal_:o}),t.randomUniform=F.op({randomUniform_:s}),t.reshape=F.op({reshape_:d}),t.spaceToBatchND=F.op({spaceToBatchND_:N}),t.squeeze=F.op({squeeze_:f}),t.stack=F.op({stack_:S}),t.tile=F.op({tile_:g}),t.truncatedNormal=F.op({truncatedNormal_:i}),t.unstack=F.op({unstack_:T})},function(e,t,n){"use strict";function r(e,t){var n=k.convertToTensor(e,"a","add"),r=k.convertToTensor(t,"b","add");T.assertTypesMatch(n,r);var a=A.assertAndGetBroadcastShape(n.shape,r.shape),o=function(e){var t=function(){var t=e,r=A.getReductionAxes(n.shape,a);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},o=function(){var t=e,n=A.getReductionAxes(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)};return{$a:t,$b:o}};return N.ENV.engine.runKernel(function(e){return e.add(n,r)},{$a:n,$b:r},o)}function a(e){E.assert(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),E.assert(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(e,t){return k.convertToTensor(e,"tensors"+t,"addN")}),n=t[0];t.forEach(function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(e){if(!E.arraysEqual(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=function(e){var n={};return t.forEach(function(t,r){n[r]=function(){return e.clone()}}),n},a=t;return N.ENV.engine.runKernel(function(e){return e.addN(t)},a,r)}function o(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in addStrict: "),e.add(t)}function i(e,t){var n=k.convertToTensor(e,"a","sub"),r=k.convertToTensor(t,"b","sub");T.assertTypesMatch(n,r);var a=A.assertAndGetBroadcastShape(n.shape,r.shape),o=function(e){var t=function(){var t=e,r=A.getReductionAxes(n.shape,a);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},o=function(){var t=e,n=A.getReductionAxes(r.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(r.shape)};return{$a:t,$b:o}};return N.ENV.engine.runKernel(function(e){return e.subtract(n,r)},{$a:n,$b:r},o)}function s(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in subStrict: "),e.sub(t)}function u(e,t){var n=k.convertToTensor(e,"base","pow"),r=k.convertToTensor(t,"exp","pow"),a=A.assertAndGetBroadcastShape(n.shape,r.shape);e=n.cast(I.upcastType(n.dtype,r.dtype)),t=r.cast(I.upcastType(n.dtype,r.dtype));var o=function(e,t){var o=t[0],i=function(){var t=e.mul(r.toFloat().mul(o.div(n))),i=A.getReductionAxes(n.shape,a);return i.length>0&&(t=t.sum(i)),t.reshape(n.shape)},s=function(){var t=e.mul(o.mul(n.log()).toFloat()),i=A.getReductionAxes(r.shape,a);return i.length>0&&(t=t.sum(i)),t.reshape(r.shape)};return{$base:i,$exp:s}};return N.ENV.engine.runKernel(function(e,t){return t(e.pow(n,r))},{$base:n,$exp:r},o)}function l(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}function c(e,t){var n=k.convertToTensor(e,"a","mul"),r=k.convertToTensor(t,"b","mul");T.assertTypesMatch(n,r);var a=A.assertAndGetBroadcastShape(n.shape,r.shape),o=function(e){var t=function(){var t=e.mul(r.toFloat()),o=A.getReductionAxes(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},o=function(){var t=e.mul(n.toFloat()),o=A.getReductionAxes(r.shape,a);return o.length>0?t.sum(o).reshape(r.shape):t};return{$a:t,$b:o}};return N.ENV.engine.runKernel(function(e){return e.multiply(n,r)},{$a:n,$b:r},o)}function p(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in multiplyStrict: "),e.mul(t)}function h(e,n){var r=k.convertToTensor(e,"a","div"),a=k.convertToTensor(n,"b","div");T.assertTypesMatch(r,a);var o;if("int32"===r.dtype&&"int32"===a.dtype)return t.floorDiv(r,a);o=function(e){return e.realDivide(r,a)};var i=A.assertAndGetBroadcastShape(r.shape,a.shape),s=function(e){var t=function(){var t=e.div(a.toFloat()),n=A.getReductionAxes(r.shape,i);return n.length>0?t.sum(n).reshape(r.shape):t},n=function(){var t=e.mul(r.toFloat()),n=A.getReductionAxes(a.shape,i);n.length>0&&(t=t.sum(n).reshape(a.shape));var o=a.square();return t.div(o.toFloat()).neg()};return{$a:t,$b:n}};return N.ENV.engine.runKernel(o,{$a:r,$b:a},s)}function d(e,t){var n=k.convertToTensor(e,"a","floorDiv"),r=k.convertToTensor(t,"b","floorDiv");T.assertTypesMatch(n,r);var a=function(e){return e.floorDiv(n,r)},o=A.assertAndGetBroadcastShape(n.shape,r.shape),i=function(e){var t=function(){var t=e.div(r.toFloat()),a=A.getReductionAxes(n.shape,o);return a.length>0?t.sum(a).reshape(n.shape):t},a=function(){var t=e.mul(n.toFloat()),a=A.getReductionAxes(r.shape,o);a.length>0&&(t=t.sum(a).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()};return{$a:t,$b:a}};return N.ENV.engine.runKernel(a,{$a:n,$b:r},i)}function f(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in divideStrict: "),e.div(t)}function m(e,t){var n=k.convertToTensor(e,"a","mod"),r=k.convertToTensor(t,"b","mod");T.assertTypesMatch(n,r);var a=A.assertAndGetBroadcastShape(n.shape,r.shape),o=function(e){var t=function(){var t=A.getReductionAxes(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},o=function(){var t=e.mul(n.div(r).floor().neg()),o=A.getReductionAxes(r.shape,a);return o.length>0?t.sum(o).reshape(r.shape):t};return{$a:t,$b:o}};return N.ENV.engine.runKernel(function(e){return e.mod(n,r)},{$a:n,$b:r},o)}function g(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in modStrict: "),e.mod(t)}function v(e,t){var n=k.convertToTensor(e,"a","minimum"),r=k.convertToTensor(t,"b","minimum");T.assertTypesMatch(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),A.assertAndGetBroadcastShape(n.shape,r.shape);var a=function(e){var t=function(){return e.mul(n.lessEqual(r).toFloat())},a=function(){return e.mul(n.greater(r).toFloat())};return{$a:t,$b:a}};return N.ENV.engine.runKernel(function(e){return e.minimum(n,r)},{$a:n,$b:r},a)}function y(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in minimumStrict: "),e.minimum(t)}function b(e,t){var n=k.convertToTensor(e,"a","maximum"),r=k.convertToTensor(t,"b","maximum");T.assertTypesMatch(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),A.assertAndGetBroadcastShape(n.shape,r.shape);var a=function(e){var t=function(){return e.mul(n.greaterEqual(r).toFloat())},a=function(){return e.mul(n.less(r).toFloat())};return{$a:t,$b:a}};return N.ENV.engine.runKernel(function(e){return e.maximum(n,r)},{$a:n,$b:r},a)}function x(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in maximumStrict: "),e.maximum(t)}function w(e,t){var n=k.convertToTensor(e,"a","squaredDifference"),r=k.convertToTensor(t,"b","squaredDifference");T.assertTypesMatch(n,r),A.assertAndGetBroadcastShape(n.shape,r.shape);var a=function(e){var t=C.scalar(2),a=function(){return e.mul(n.sub(r).mul(t))},o=function(){return e.mul(r.sub(n).mul(t))};return{$a:a,$b:o}};return N.ENV.engine.runKernel(function(e){return e.squaredDifference(n,r)},{$a:n,$b:r},a)}function S(e,t){return E.assertShapesMatch(e.shape,t.shape,"Error in squaredDifferenceStrict: "),e.squaredDifference(t)}function _(e,n){var r=k.convertToTensor(e,"a","atan2"),a=k.convertToTensor(n,"b","atan2");T.assertTypesMatch(r,a);var o=A.assertAndGetBroadcastShape(r.shape,a.shape),i=function(e){var n=function(){var n=t.add(r.square(),a.square()),i=e.mul(a.div(n)),s=A.getReductionAxes(r.shape,o);return s.length>0&&(i=i.sum(s)),i.reshape(r.shape)},i=function(){var n=t.add(r.square(),a.square()),i=O.neg(e.mul(r.div(n))),s=A.getReductionAxes(a.shape,o);return s.length>0&&(i=i.sum(s)),i.reshape(a.shape)};return{$a:n,$b:i}};return N.ENV.engine.runKernel(function(e){return e.atan2(r,a)},{$a:r,$b:a},i)}Object.defineProperty(t,"__esModule",{value:!0});var N=n(4),T=n(76),k=n(7),I=n(94),E=n(2),A=n(36),P=n(6),C=n(10),O=n(132);t.add=P.op({add_:r}),t.addN=P.op({addN_:a}),t.addStrict=P.op({addStrict_:o}),t.atan2=P.op({atan2_:_}),t.div=P.op({div_:h}),t.divStrict=P.op({divStrict_:f}),t.floorDiv=P.op({floorDiv_:d}),t.maximum=P.op({maximum_:b}),t.maximumStrict=P.op({maximumStrict_:x}),t.minimum=P.op({minimum_:v}),t.minimumStrict=P.op({minimumStrict_:y}),t.mod=P.op({mod_:m}),t.modStrict=P.op({modStrict_:g}),t.mul=P.op({mul_:c}),t.mulStrict=P.op({mulStrict_:p}),t.pow=P.op({pow_:u}),t.powStrict=P.op({powStrict_:l}),t.squaredDifference=P.op({squaredDifference_:w}),t.squaredDifferenceStrict=P.op({squaredDifferenceStrict_:S}),t.sub=P.op({sub_:i}),t.subStrict=P.op({subStrict_:s})},function(e,t,n){"use strict";function r(e,t){p.assert(e.dtype===t.dtype,"The dtypes of the first("+e.dtype+") and"+(" second("+t.dtype+") input must match"))}function a(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0;return!1}function o(e,t){var n=[];if(e instanceof c.Tensor)n.push(e);else for(var r=e,a=0;a<t.length;a++)n.push(r[t[a]]);return n}function i(e,t){if(e.length!==t.length)throw new Error("Cannot unflatten Tensor[], keys and arrays are not of same length.");for(var n={},r=0;r<e.length;r++)n[e[r]]=t[r];return n}function s(e){var t=[],n=new Set;return u(e,t,n),t}function u(e,t,n){if(null!=e){if(e instanceof c.Tensor)return void t.push(e);if(l(e)){var r=e;for(var a in r){var o=r[a];n.has(o)||(n.add(o),u(o,t,n))}}}}function l(e){return Array.isArray(e)||"object"==typeof e}Object.defineProperty(t,"__esModule",{value:!0});var c=n(18),p=n(2);t.assertTypesMatch=r,t.isTensorInList=a,t.flattenNameArrayMap=o,t.unflattenToNameArrayMap=i,t.getTensorsInContainer=s},function(e,t,n){"use strict";function r(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new s.ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;null==n&&(n="float32");var r=new l({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}),a=r.inboundNodes[0].outputTensors;return a[0]}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(11),s=n(8),u=n(15),l=function(e){function t(t){var n=e.call(this,{dtype:t.dtype,name:null!=t.name?t.name:i.getUid("input").toString()})||this;if(null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new s.ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=t.batchInputShape;if(null==r){if(null==t.inputShape)throw new s.ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new s.ValueError("Cannot specify batchSize if batchInputShape isspecified when creating an InputLayer.");var a=t.dtype||"float32";n.batchInputShape=r,n.dtype=a,n.inputSpec=[{shape:r}];var o=new u.SymbolicTensor(n.dtype,n.batchInputShape,n,[],{},n.name);return o.nodeIndex=0,o.tensorIndex=0,new u.Node({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[o],outputTensors:[o],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return a(t,e),t.prototype.apply=function(e,t){throw new s.ValueError("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},t.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},t.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},t.className="InputLayer",t}(u.Layer);t.InputLayer=l,o.serialization.SerializationMap.register(l),t.Input=r},function(e,t,n){var r=n(30),a=n(20),o=r(a,"Map");e.exports=o},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n(313),o=n(314),i=n(315),s=n(316),u=n(317);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=i,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){function r(e,t,n,i,s){return e===t||(null==e||null==t||!o(e)&&!o(t)?e!==e&&t!==t:a(e,t,n,i,r,s))}var a=n(272),o=n(45);e.exports=r},function(e,t,n){function r(e){return"function"==typeof e?e:null==e?i:"object"==typeof e?s(e)?o(e[0],e[1]):a(e):u(e)}var a=n(277),o=n(278),i=n(337),s=n(21),u=n(341);e.exports=r},function(e,t,n){function r(e,t){if(a(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!o(e))||(s.test(e)||!i.test(e)||null!=t&&e in Object(t))}var a=n(21),o=n(64),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=r},function(e,t,n){function r(e){return null!=e&&o(e.length)&&!a(e)}var a=n(122),o=n(84);e.exports=r},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}var r=9007199254740991;e.exports=n},,,,,,function(e,t){"use strict";function n(e,t){return[t,e]}function r(e,t){return e*t}function a(e,t){return[4*t,e]}function o(e,t){if(e%t!==0)throw new Error("unpackedSize ("+e+") must be a multiple of "+t);return e/t}function i(e,t,n){var a=r(e.length,n);if(t.length<a)throw new Error("unpackedArray length ("+t.length+") must be >= "+a);for(var o=0,i=0;i<e.length;++i)t[o]=e[i],o+=n}function s(e,t,n){var r=o(e.length,n);if(t.length<r)throw new Error("matrix length ("+t.length+") must be >= "+r);for(var a=0,i=0;i<e.length;i+=n)t[a++]=e[i]}function u(e,t,n){var r=e.length*n/4;if(t.length<r)throw new Error("matrix length ("+t.length+") must be >= "+r);for(var a=0,o=0;o<e.length;o+=4)for(var i=0;i<n;i++)t[a++]=e[o+i]}function l(e,t){return[Math.ceil(t/2),Math.ceil(e/2)]}function c(e,t){var n=l(e,t),r=n[0],a=n[1];return r*a*4}function p(e,t,n,r){var a=c(t,n);if(r.length<a)throw new Error("packedRGBA length ("+r.length+") must be >= "+a);for(var o=l(t,n),i=o[0],s=o[1],u=n%2===1,p=t%2===1,h=Math.floor(n/2),d=Math.floor(t/2),f=u?4:0,m=n,g=0,v=0;v<d;++v){for(var y=2*v*n,b=0;b<h;++b){var x=2*b,w=y+x;r[g]=e[w],r[g+1]=e[w+1],r[g+2]=e[w+m],r[g+3]=e[w+m+1],g+=4}g+=f}if(u)for(var w=n-1,g=4*(i-1),S=2*n,f=4*i,v=0;v<d;++v)r[g]=e[w],r[g+2]=e[w+n],w+=S,g+=f;if(p)for(var w=(t-1)*n,g=(s-1)*i*4,b=0;b<h;++b)r[g++]=e[w++],r[g++]=e[w++],g+=2;return u&&p&&(r[r.length-4]=e[e.length-1]),r}function h(e,t,n,r){var a=t*n;if(a<r.length)throw new Error("matrix length ("+r.length+") must be >= "+a);for(var o=n%2===1,i=t%2===1,s=Math.floor(n/2),u=Math.floor(t/2),c=l(t,n),p=c[0],h=c[1],d=o?4:0,f=n+(o?1:0),m=0,g=0,v=n,y=0;y<u;++y){for(var b=0;b<s;++b)r[g++]=e[m++],r[g++]=e[m++],r[v++]=e[m++],r[v++]=e[m++];m+=d,g+=f,v+=f}if(o)for(var m=4*(p-1),x=n-1,d=4*p,f=2*n,y=0;y<u;++y)r[x]=e[m],r[x+n]=e[m+2],m+=d,x+=f;if(i)for(var m=(h-1)*p*4,x=(t-1)*n,b=0;b<s;++b)r[x++]=e[m++],r[x++]=e[m++],m+=2;return o&&i&&(r[r.length-1]=e[e.length-4]),r}Object.defineProperty(t,"__esModule",{value:!0});var d;!function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(d=t.TextureUsage||(t.TextureUsage={}));var f;!function(e){e[e.FLOAT16=0]="FLOAT16",e[e.FLOAT32=1]="FLOAT32",e[e.UNSIGNED_BYTE=2]="UNSIGNED_BYTE"}(f=t.PhysicalTextureType||(t.PhysicalTextureType={})),t.getUnpackedMatrixTextureShapeWidthHeight=n,t.getUnpackedArraySizeFromMatrixSize=r,t.getColorMatrixTextureShapeWidthHeight=a,t.getMatrixSizeFromUnpackedArraySize=o,t.encodeMatrixToUnpackedArray=i,t.decodeMatrixFromUnpackedArray=s,t.decodeMatrixFromUnpackedColorRGBAArray=u,t.getPackedMatrixTextureShapeWidthHeight=l,t.getPackedRGBAArraySizeFromMatrixShape=c,t.encodeMatrixToPackedRGBA=p,t.decodeMatrixFromPackedRGBA=h},function(e,t,n){"use strict";function r(e){var t=document.createElement("canvas");return t.width=1,t.height=1,a(t,e)}function a(e,t){var n,r=F.ENV.get("WEBGL_VERSION");if(2===r?n=e.getContext("webgl2",t):1===r&&(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function o(e,t){var n=t();return s(e),n}function i(e){B=e}function s(e){if(B){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+u(e,t))}}function u(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function l(e,t){return D(e,function(){return e.getExtension(t)},'Extension "'+t+'" not supported on this browser.')}function c(e,t){var n=D(e,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(o(e,function(){return e.shaderSource(n,t)}),o(e,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function p(e,t){var n=D(e,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(o(e,function(){return e.shaderSource(n,t)}),o(e,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw h(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}function h(e,t){var n=j.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),o=a.length.toString().length+2,i=a.map(function(e,t){return V.rightPad((t+1).toString(),o)+e}),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),c=i.slice(r-1,r),p=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+V.rightPad(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join("\n"))}function d(e){return D(e,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function f(e,t){if(o(e,function(){return e.linkProgram(t)}),e.getProgramParameter(t,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function m(e,t){if(o(e,function(){return e.validateProgram(t)}),e.getProgramParameter(t,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function g(e,t){var n=D(e,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return o(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),o(e,function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)}),n}function v(e,t){var n=D(e,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return o(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)}),o(e,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)}),n}function y(e){return null!=L?L:L=o(e,function(){return e.getParameter(e.MAX_TEXTURE_SIZE)})}function b(){return 2===F.ENV.get("WEBGL_VERSION")?1:4}function x(e){return D(e,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function w(e,t,n){var r=y(e);if(t<=0||n<=0){var a="["+t+"x"+n+"]";throw new Error("Requested texture size "+a+" is invalid.")}if(t>r||n>r){var a="["+t+"x"+n+"]",o="["+r+"x"+r+"]";throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+o+".")}}function S(e){return D(e,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function _(e,t,n,r,a,i,s){var u=e.getAttribLocation(t,n);return u!==-1&&(o(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),o(e,function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,s)}),o(e,function(){return e.enableVertexAttribArray(u)}),!0)}function N(e,t,n){R(e,n),o(e,function(){return e.activeTexture(e.TEXTURE0+n)}),o(e,function(){return e.bindTexture(e.TEXTURE_2D,t)})}function T(e,t){R(e,t),o(e,function(){return e.activeTexture(e.TEXTURE0+t)}),o(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function k(e,t,n){return D(e,function(){return e.getUniformLocation(t,n)},'uniform "'+n+'" not present in program.')}function I(e,t,n){return e.getUniformLocation(t,n)}function E(e,t,n,r,a){o(e,function(){return N(e,n,a)}),o(e,function(){return e.uniform1i(r,a)})}function A(e){o(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),o(e,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),o(e,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})}function P(e,t,n){o(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),o(e,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)})}function C(e,t){o(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)}),o(e,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function O(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+M(e,t))}function M(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function D(e,t,n){var r=o(e,function(){return t()});if(null==r)throw new Error(n);return r}function R(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE"+n+"]";throw new Error("textureUnit must be in "+a+".")}}function z(e,t){if(2!==t.length){var n=V.squeezeShape(t);t=n.newShape}var r=y(e),a=V.sizeFromShape(t);return t.length<=1&&a<=r?[a,1]:2===t.length&&t[0]<=r&&t[1]<=r?t:3===t.length&&t[0]<=r&&t[1]*t[2]<=r?[t[0],t[1]*t[2]]:4===t.length&&t[0]<=r&&t[1]*t[2]*t[3]<=r?[t[0],t[1]*t[2]*t[3]]:V.sizeToSquarishShape(a)}Object.defineProperty(t,"__esModule",{value:!0});var L=null,V=n(2),F=n(4);t.createWebGLRenderingContext=r,t.createWebGLRenderingContextFromCanvas=a,t.callAndCheck=o;var B=!1;t.enableDebugWebGLErrorChecking=i,t.checkWebGLError=s,t.getWebGLErrorMessage=u,t.getExtensionOrThrow=l,t.createVertexShader=c,t.createFragmentShader=p;var j=/ERROR: [0-9]+:([0-9]+):/g;t.createProgram=d,t.linkProgram=f,t.validateProgram=m,t.createStaticVertexBuffer=g,t.createStaticIndexBuffer=v,t.queryMaxTextureSize=y,t.getNumChannels=b,t.createTexture=x,t.validateTextureSize=w,t.createFramebuffer=S,t.bindVertexBufferToProgramAttribute=_,t.bindTextureUnit=N,t.unbindTextureUnit=T,t.getProgramUniformLocationOrThrow=k,t.getProgramUniformLocation=I,t.bindTextureToProgramUniformSampler=E,t.bindCanvasToFramebuffer=A,t.bindColorTextureToFramebuffer=P,t.unbindColorTextureFromFramebuffer=C,t.validateFramebuffer=O,t.getFramebufferErrorMessage=M,t.getTextureShapeFromLogicalShape=z},function(e,t,n){"use strict";function r(e,t){var n=e[0].length;e.forEach(function(e,t){o.assert(e.length===n,"Error in concat"+n+"D: rank of tensors["+t+"] must be the same "+("as the rank of the rest ("+n+")"))}),o.assert(t>=0&&t<n,"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+".");var r=e[0];e.forEach(function(e,a){for(var i=0;i<n;i++)o.assert(i===t||e[i]===r[i],"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") "+("does not match the shape of the rest ("+r+") ")+("along the non-concatenated axis "+a+"."))})}function a(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);t.assertParamsConsistent=r,t.computeOutShape=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),
t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(24),i=n(29),s=n(37),u=n(48),l=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=Object.keys(e);n.forEach(function(n){var r=e[n],i=a.ENV.engine.registeredVariables[n];o.tidy(function(){var e=t.c.mul(r).add(i);i.assign(e)})})},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=o.keep(i.scalar(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGDOptimizer",t}(u.Optimizer);t.SGDOptimizer=l,s.registerClass(l)},function(e,t){"use strict";function n(e,t){return c[e][t]}function r(e){return n(e,"int32")}Object.defineProperty(t,"__esModule",{value:!0});var a;!function(e){e.float32="float32",e.int32="int32",e.bool="bool"}(a=t.DType||(t.DType={}));var o;!function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(o=t.Rank||(t.Rank={}));var i;!function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(i||(i={}));var s;!function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(s||(s={}));var u;!function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(u||(u={}));var l;!function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(l||(l={}));var c={float32:u,int32:i,bool:s,complex64:l};t.upcastType=n,t.sumOutType=r},function(e,t,n){"use strict";function r(e){return e.getClassName()}function a(e,t){return void 0===t&&(t={}),p.deserializeKerasObject(e,u.serialization.SerializationMap.getMap().classNameMap,t,"activation")}function o(e){if(null==e){var t={className:"linear",config:{}};return a(t)}if("string"==typeof e){var t={className:e,config:{}};return a(t)}return e instanceof h?e:a(e)}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=n(1),l=n(17),c=n(11),p=n(13),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.getConfig=function(){return{}},t}(u.serialization.Serializable);t.Activation=h;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=1),l.elu(e,t)},t.className="elu",t}(h);t.Elu=d,u.serialization.SerializationMap.register(d);var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return s.selu(e)},t.className="selu",t}(h);t.Selu=f,u.serialization.SerializationMap.register(f);var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return s.relu(e)},t.className="relu",t}(h);t.Relu=m,u.serialization.SerializationMap.register(m);var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return u.tidy(function(){return s.minimum(c.getScalar(6),s.relu(e))})},t.className="relu6",t}(h);t.Relu6=g,u.serialization.SerializationMap.register(g);var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return e},t.className="linear",t}(h);t.Linear=v,u.serialization.SerializationMap.register(v);var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return s.sigmoid(e)},t.className="sigmoid",t}(h);t.Sigmoid=y,u.serialization.SerializationMap.register(y);var b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return l.hardSigmoid(e)},t.className="hardSigmoid",t}(h);t.HardSigmoid=b,u.serialization.SerializationMap.register(b);var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return s.softplus(e)},t.className="softplus",t}(h);t.Softplus=x,u.serialization.SerializationMap.register(x);var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return l.softsign(e)},t.className="softsign",t}(h);t.Softsign=w,u.serialization.SerializationMap.register(w);var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e){return s.tanh(e)},t.className="tanh",t}(h);t.Tanh=S,u.serialization.SerializationMap.register(S);var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=-1),s.softmax(e,t)},t.className="softmax",t}(h);t.Softmax=_,u.serialization.SerializationMap.register(_),t.serializeActivation=r,t.deserializeActivation=a,t.getActivation=o},function(e,t,n){"use strict";function r(e){return e instanceof b.Tensor}function a(e){return Array.isArray(e)}function o(e){return!r(e)&&!a(e)}function i(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=""),null==t||0===t.length){if(null!=e){var s=!1;if(a(e)&&e.length>0)s=!0;else if(o(e)){for(var u in e)if(e.hasOwnProperty(u)){s=!0;break}}else s=!0;if(s)throw new N.ValueError("Error when checking model "+i+" expected no data, but got "+e)}return[]}if(null==e)return t.map(function(e){return null});var l;if(o(e)){e=e,l=[];for(var c=0,p=t;c<p.length;c++){var h=p[c];if(null==e[h])throw new N.ValueError('No data provided for "'+h+'". Need data for each key in: '+t);l.push(e[h])}}else if(a(e)){if(e=e,e.length!==t.length)throw new N.ValueError("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the "+("model expected. Expected to see "+t.length+" Tensor(s), but ")+("instead got the following list of Tensor(s): "+e));l=e}else{if(e=e,t.length>1)throw new N.ValueError("The model "+i+" expects "+t.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+e.shape);l=[e]}for(var d=0;d<t.length;++d){var f=l[d];1===f.shape.length&&(l[d]=w.expandDims(f,1))}if(null!=n)for(var d=0;d<t.length;++d)if(null!=n[d]){var f=l[d];if(f.shape.length!==n[d].length)throw new N.ValueError("Error when checking "+i+": expected "+t[d]+" "+("to have "+n[d].length+" dimension(s). but got array with ")+("shape "+f.shape));for(var m=0;m<n[d].length;++m)if(0!==m||r){var g=f.shape[m],v=n[d][m];if(null!=v&&v>=0&&g!==v)throw new N.ValueError("Error when checking "+i+": expected "+t[d]+" "+("to have shape ["+n[d]+"], but got array with shape ")+("["+f.shape+"]."))}}return l}function s(e,t,n){var r=A.unique(e.map(function(e){return e.shape[0]}));r.sort();var a=A.unique(t.map(function(e){return e.shape[0]}));if(a.sort(),r.length>1)throw new N.ValueError("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(function(e){return e.shape})));if(a.length>1)throw new N.ValueError("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(function(e){return e.shape})));if(r.length>0&&a.length>0&&!b.util.arraysEqual(r,a))throw new N.ValueError("Input Tensors should have the same number of samples as target "+("Tensors. Found "+r[0]+" input sample(s) and "+a[0]+" target ")+"sample(s).")}function u(e,t,n){for(var r=[k.meanSquaredError,k.binaryCrossentropy,k.categoricalCrossentropy],a=0;a<e.length;++a){var o=e[a],i=t[a],s=n[a];if(null!=i){if(i===k.categoricalCrossentropy&&1===o.shape[o.shape.length-1])throw new N.ValueError("You are passing a target array of shape "+o.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(r.indexOf(i)!==-1)for(var u=o.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var p=u[c],h=l[c];if(null!=h&&p!==h)throw new N.ValueError("A target Tensor with shape "+o.shape+" was passed for an "+("output of shape "+s+", while using a loss function that ")+"expects targets to have the same shape as the output.")}}}}function l(e,t){for(var n=[],r=0,a=null;r<e;)a=r+t,a>=e&&(a=e),n.push([r,a]),r=a;return n}function c(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(function(e){return w.sliceAlongFirstAxis(e,t,n-t)}):w.sliceAlongFirstAxis(e,t,n-t)}function p(e,t){return y.tidy(function(){return null==e?null:Array.isArray(e)?e.map(function(e){return p(e,t)}):w.gather(e,"int32"===t.dtype?t:t.toInt())})}function h(e,t,n,r,a){void 0===r&&(r=!0),void 0===a&&(a="");var o;if(Array.isArray(e)){if(e.length!==t.length)throw new N.ValueError("Error when checking model "+a+": the Array of Tensors that you are passing to your model is not the size the "+("the model expected. Expected to see "+t.length+" Tensor(s),")+(" but instead got "+e.length+" Tensors(s)."));o=e}else{if(t.length>1)throw new N.ValueError("The model expects "+t.length+" "+a+" Tensors, but only received one Tensor. Found: array with shape "+(JSON.stringify(e.shape)+"."));o=[e]}if(null!=n)for(var i=0;i<t.length;++i)if(null!=n[i]){var s=o[i];if(s.shape.length!==n[i].length)throw new N.ValueError("Error when checking "+a+": expected "+t[i]+" "+("to have "+n[i].length+" dimension(s), but got array with ")+("shape "+JSON.stringify(s.shape)));for(var u=0;u<n[i].length;++u)if(0!==u||r){var l=s.shape[u],c=n[i][u];if(null!=c&&c!==l)throw new N.ValueError("Error when checking "+a+": expected "+(t[i]+" to have shape "+JSON.stringify(n[i])+" but ")+("got array with shape "+JSON.stringify(s.shape)+"."))}}}function d(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(function(e){return[]});if(Array.isArray(e))return t.map(function(t){return e});if(null!=e){for(var n=[],r=0,a=t;r<a.length;r++){var o=a[r],i=e.hasOwnProperty(o)?e[o]:[];Array.isArray(i)||(i=[i]),n.push(i)}return n}throw new TypeError("Type of metrics argument not understood. Expected an Array or Object, found: "+e)}function f(e){y.util.assert(e>0&&Number.isInteger(e),"batchSize is required to be a positive integer, but got "+e)}var m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},v=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var y=n(1),b=n(1),x=n(11),w=n(17),S=n(139),_=n(38),N=n(8),T=n(188),k=n(98),I=n(189),E=n(518),A=n(13),P=n(519),C=n(41),O=n(502),M=n(503);t.isDataTensor=r,t.isDataArray=a,t.isDataDict=o,t.standardizeInputData=i,t.checkArrayLengths=s,t.makeBatches=l,t.sliceArraysByIndices=p;var D;!function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(D=t.ModelLoggingVerbosity||(t.ModelLoggingVerbosity={}));var R=function(e){function t(t){var n=e.call(this,t)||this;return n.isTraining=!1,n}return m(t,e),t.prototype.summary=function(e,t,n){if(void 0===n&&(n=console.log),!this.built)throw new N.ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");P.printSummary(this,e,t,n)},t.prototype.compile=function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer=E.getOptimizer(e.optimizer);else{if(!(e.optimizer instanceof b.Optimizer))throw new N.ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer=e.optimizer}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new N.ValueError("When passing an Array as loss, it should have one entry per "+("model output. The model has "+this.outputs.length+" output(s), ")+("but you passed loss="+e.loss+"."));var r=e.loss;n=r.map(function(e){return k.get(e)})}else{var a=k.get(e.loss);this.outputs.map(function(e){n.push(a)})}else{e.loss=e.loss;for(var o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new N.ValueError('Unknown entry in loss dictionary: "'+o+'". Only expect the following keys: '+this.outputNames);for(var i in this.outputNames)null==e.loss[i]&&console.warn('Output "'+i+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data '+("to be passed to "+i+" during training")),n.push(k.get(e.loss[i]))}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var s=0;s<this.outputs.length;++s){var u=this.internalOutputShapes[s],l=this.outputNames[s];this.feedOutputNames.push(l),this.feedOutputShapes.push(u),this.feedLossFns.push(this.lossFunctions[s])}var c=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],_.nameScope("loss",function(){for(var e=0;e<t.outputs.length;++e)if(c.indexOf(e)===-1){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}});var p=d(e.metrics,this.outputNames),h=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};_.nameScope("metric",function(){for(var e=function(e){if(c.indexOf(e)!==-1)return"continue";var n=p[e],r=function(n){for(var r,a,o,i="",s=function(n){if(["accuracy","acc","crossentropy","ce"].indexOf(n)!==-1){var s=t.internalOutputShapes[e];1===s[s.length-1]||t.lossFunctions[e]===k.binaryCrossentropy?["accuracy","acc"].indexOf(n)!==-1?a=I.binaryAccuracy:["crossentropy","ce"].indexOf(n)!==-1&&(a=I.binaryCrossentropy):t.lossFunctions[e]===k.sparseCategoricalCrossentropy?["accuracy","acc"].indexOf(n)!==-1?a=I.sparseCategoricalAccuracy:["crossentropy","ce"].indexOf(n)!==-1&&(a=I.sparseCategoricalCrossentropy):["accuracy","acc"].indexOf(n)!==-1?a=I.categoricalAccuracy:["crossentropy","ce"].indexOf(n)!==-1&&(a=I.categoricalCrossentropy);var u=void 0;["accuracy","acc"].indexOf(n)!==-1?u="acc":["crossentropy","ce"].indexOf(n)!==-1&&(u="ce"),o=a,r=i+u}else{var l=I.get(n);o=l,r=i+n}var c;_.nameScope(r,function(){c=o}),h(e,r,c)},u=0,l=n;u<l.length;u++){var c=l[u];s(c)}};r(n)},n=0;n<t.outputs.length;++n)e(n)}),this.collectedTrainableWeights=this.trainableWeights},t.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},t.prototype.evaluate=function(e,t,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize;f(r);var a=this.standardizeUserData(e,t,!0,r),o=a[0].concat(a[1]);this.makeTestFunction();var i=this.testFunction,s=this.testLoop(i,o,r,n.verbose,n.steps);return A.singletonOrArray(s)},t.prototype.checkNumSamples=function(e,t,n,r){void 0===r&&(r="steps");var a;if(null!=n){if(a=null,null!=t)throw new N.ValueError("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+t)}else{if(null==e)throw new N.ValueError("Either the input data should have a defined shape, or "+(r+" shoud be specified."));a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a},t.prototype.execute=function(e,t){if(Array.isArray(t)&&0===t.length)throw new N.ValueError("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),o=new M.FeedDict;if(e instanceof b.Tensor&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new N.ValueError("The number of inputs provided ("+e.length+") does not match the number of inputs of this model "+("("+this.inputs.length+")."));for(var i=0;i<this.inputs.length;++i)o.add(this.inputs[i],e[i])}else for(var s=0,u=this.inputs;s<u.length;s++){var l=u[s],c=e[l.name];if(null==c)throw new N.ValueError("No value is provided for the model's input "+l.name);o.add(l,c)}var p=M.execute(a,o);return n?p:p[0]},t.prototype.retrieveSymbolicTensors=function(e){for(var t=A.pyListRepeat(null,e.length),n=e.length,r=0,a=this.layers;r<a.length;r++){for(var o=a[r],i=Array.isArray(o.output)?o.output:[o.output],s=i.map(function(e){return e.name}),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(l!==-1&&(t[u]=i[l],n--),0===n)break}if(0===n)break}if(n>0){var c=[];throw t.forEach(function(t,n){null==t&&c.push(e[n])}),new N.ValueError("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return t},t.prototype.predictLoop=function(e,t,n){var r=this;return void 0===t&&(t=32),void 0===n&&(n=!1),y.tidy(function(){var a=r.checkNumSamples(e);if(n)throw new N.NotImplementedError("Verbose predictLoop() is not implemented yet.");for(var o=l(a,t),i=[],s=function(t){var n=y.tidy(function(){var n=o[t][0],a=o[t][1],i=c(e,n,a),s=[];if(Array.isArray(i))for(var u=0;u<i.length;++u)s.push({key:r.inputs[u],value:i[u]});else s.push({key:r.inputs[0],value:i});var l=new M.FeedDict(s);return M.execute(r.outputs,l)});if(0===t)for(var a=0,s=n;a<s.length;a++){var u=s[a];i.push(u)}else for(var l=0;l<n.length;++l)i[l]=w.concatAlongFirstAxis(i[l],n[l])},u=0;u<o.length;++u)s(u);return A.singletonOrArray(i)})},t.prototype.predict=function(e,t){void 0===t&&(t={}),h(e,this.inputNames,this.feedInputShapes,!1);var n=null==t.batchSize?32:t.batchSize;return f(n),this.predictLoop(e,n)},t.prototype.predictOnBatch=function(e){return h(e,this.inputNames,this.feedInputShapes,!0),this.predictLoop(e,e.shape[0])},t.prototype.standardizeUserData=function(e,t,n,r){if(void 0===n&&(n=!0),null==this.optimizer)throw new N.RuntimeError("You must compile a model before training/testing. Use Model.compile(modelCompileConfig).");for(var a=[],o=0;o<this.feedOutputShapes.length;++o){var l=this.feedOutputShapes[o],c=this.feedLossFns[o];c===k.sparseCategoricalCrossentropy?a.push(l.slice(0,l.length-1).concat([1])):a.push(l)}if(e=i(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=i(t,this.feedOutputNames,a,!1,"target"),s(e,t,null),u(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!==0)throw new N.ValueError("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+(r+". Found: "+e[0].shape[0]+" sample(s)."));return[e,t,null]},t.prototype.fitLoop=function(e,t,n,r,a,o,i,s,u,c,h,d,f,m,x){return g(this,void 0,void 0,function(){var g,_,k,I,E,A,P,O,M,D=this;return v(this,function(R){switch(R.label){case 0:if(null==r&&(r=32),null==a&&(a=1),null==c&&(c=!0),null==d&&(d=0),g=!1,null!=s&&null!=u&&(g=!0),null!=m&&(g=!0,null==f))throw new N.ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");if(_=this.checkNumSamples(t,r,f,"steps_per_epoch"),null!=_&&(k=C.range(0,_)),this.history=new S.History,I=new S.BaseLogger(x),i=null==i?[I]:[I].concat(i),i=i.concat([this.history]),o>0)throw new N.NotImplementedError("Verbose mode is not implemented yet.");return E=new S.CallbackList(i),E.setModel(this),E.setParams({epochs:a,initialEpoch:d,samples:_,steps:f,batchSize:r,verbose:o,doValidation:g,metrics:h}),[4,E.onTrainBegin()];case 1:R.sent(),this.stopTraining_=!1,A=function(a){var o,i,h,d,m,x;return v(this,function(S){switch(S.label){case 0:return[4,E.onEpochBegin(a)];case 1:if(S.sent(),o={},null==f)return[3,2];throw new N.NotImplementedError("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===c)throw new N.NotImplementedError("batch shuffling is not implemneted yet");c&&b.util.shuffle(k),i=b.tensor1d(k),h=l(_,r),d=function(a){var l;return v(this,function(c){switch(c.label){case 0:return l={},[4,E.onBatchBegin(a,l)];case 1:return c.sent(),y.tidy(function(){var c=h[a][0],d=h[a][1],f=w.sliceAlongFirstAxis(i,c,d-c);l.batch=a,l.size=d-c;for(var m=p(t,f),v=e(m),b=0;b<n.length;++b){var x=n[b],S=v[b];l[x]=S,y.keep(S)}if(a===h.length-1&&g)for(var _=D.testLoop(s,u,r),b=0;b<n.length;++b){var x=n[b],S=_[b];y.keep(S),o["val_"+x]=S}}),[4,E.onBatchEnd(a,l)];case 2:return c.sent(),T.disposeTensorsInLogs(l),P.stopTraining_?[2,"break"]:[2]}})},m=0,S.label=3;case 3:return m<h.length?[5,d(m)]:[3,6];case 4:if(x=S.sent(),"break"===x)return[3,6];S.label=5;case 5:return++m,[3,3];case 6:i.dispose(),S.label=7;case 7:return[4,E.onEpochEnd(a,o)];case 8:return S.sent(),P.stopTraining_?[2,"break"]:[2]}})},P=this,O=d,R.label=2;case 2:return O<a?[5,A(O)]:[3,5];case 3:if(M=R.sent(),"break"===M)return[3,5];R.label=4;case 4:return++O,[3,2];case 5:return[4,E.onTrainEnd()];case 6:return R.sent(),[4,this.history.syncData()];case 7:return R.sent(),[2,this.history]}})})},t.prototype.testLoop=function(e,t,n,r,a){var o=this;return void 0===r&&(r=0),y.tidy(function(){var i=o.checkNumSamples(t,n,a,"steps"),s=[];if(1===r)throw new N.NotImplementedError("Verbose mode is not implemented yet.");if(null!=a)throw new N.NotImplementedError("steps mode in testLoop() is not implemented yet");for(var u=l(i,n),c=b.tensor1d(C.range(0,i)),h=0;h<u.length;++h){var d=u[h][0],f=u[h][1],m=w.sliceAlongFirstAxis(c,d,f-d),g=p(t,m),v=e(g);if(0===h)for(var S=0;S<v.length;++S)s.push(x.getScalar(0));for(var S=0;S<v.length;++S){var _=v[S];s[S]=y.add(s[S],y.mul(x.getScalar(f-d),_))}}for(var S=0;S<s.length;++S)s[S]=y.div(s[S],x.getScalar(i));return s})},t.prototype.getDedupedMetricsNames=function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(A.count(e,r)>1){var o=A.count(e.slice(0,n),r);a+="_"+o}t.push(a)}return t},t.prototype.makeTestFunction=function(){var e=this;this.testFunction=function(t){return y.tidy(function(){for(var n,r=[],a=t.slice(0,e.inputs.length),o=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=[],s=0;s<e.inputs.length;++s)i.push({key:e.inputs[s],value:a[s]});for(var u=new M.FeedDict(i),l=M.execute(e.outputs,u),s=0;s<e.lossFunctions.length;++s){var c=e.lossFunctions[s],p=y.mean(c(o[s],l[s]));n=0===s?p:y.add(n,p),r.push(n)}for(var s=0;s<e.metricsTensors.length;++s){var h=e.metricsTensors[s][0],d=e.metricsTensors[s][1],f=y.mean(h(o[d],l[d]));r.push(f)}return r})}},t.prototype.fit=function(e,t,n){return void 0===n&&(n={}),g(this,void 0,void 0,function(){var r,a,o,i,s,u,l,p,h,d,m,g,b,x,w,_,T,k,I,E=this;return v(this,function(v){switch(v.label){case 0:if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0,v.label=1;case 1:if(v.trys.push([1,,3,4]),r=null==n.batchSize?32:n.batchSize,f(r),a=this.standardizeUserData(e,t,!1,r),o=a[0],i=a[1],s=!1,u=void 0,l=void 0,p=void 0,h=!1,null!=n.validationData&&n.validationData.length>0){if(s=!0,2!==n.validationData.length)throw 3===n.validationData.length?new N.NotImplementedError("validationData including sample weights is not supported yet."):new N.ValueError("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+(n.validationData+" is invalid."));u=n.validationData[0],l=n.validationData[1],d=this.standardizeUserData(u,l,!0,r),u=d[0],l=d[1],p=u.concat(l)}else null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1?(s=!0,m=Math.floor(o[0].shape[0]*(1-n.validationSplit)),g=o[0].shape[0],u=c(o,m,g),o=c(o,0,m),l=c(i,m,g),i=c(i,0,m),h=!0,p=u.concat(l)):null!=n.validationSteps&&(s=!0);return b=o.concat(i),this.checkTrainableWeightsConsistency(),x=function(e){var t=[],n=[],r=e.slice(0,E.inputs.length),a=e.slice(E.inputs.length,E.inputs.length+E.outputs.length),o=[],i=function(){for(var e=[],i=0;i<E.inputs.length;++i)e.push({key:E.inputs[i],value:r[i]});for(var s,u=new M.FeedDict(e),l=M.execute(E.outputs,u,{training:!0}),i=0;i<E.lossFunctions.length;++i){var c=E.lossFunctions[i],p=c(a[i],l[i]);t.push(p);var h=y.mean(p);n.push(h),s=0===i?p:y.add(s,p)}for(var i=0;i<E.metricsTensors.length;++i){var d=E.metricsTensors[i][0],f=E.metricsTensors[i][1],m=y.mean(d(a[f],l[f]));y.keep(m),o.push(m)}return s=y.mean(s),E.calculateLosses().forEach(function(e){s=y.add(s,e)}),s},s=E.collectedTrainableWeights.map(function(e){return e.read()}),u=!0,l=E.optimizer.minimize(i,u,s);return[l].concat(o)},w=this.getDedupedMetricsNames(),_=void 0,T=void 0,s?(this.makeTestFunction(),_=this.testFunction,T=w.slice().concat(w.map(function(e){return"val_"+e}))):(_=null,p=[],T=w.slice()),k=S.standardizeCallbacks(n.callbacks),[4,this.fitLoop(x,b,w,r,n.epochs,n.verbose,k,_,p,n.shuffle,T,n.initialEpoch,null,null,n.yieldEvery)];case 2:return I=v.sent(),h&&(p.forEach(function(e){return e.dispose()}),o.forEach(function(e){return e.dispose()}),i.forEach(function(e){return e.dispose()})),this.isTraining=!1,[2,I];case 3:return this.isTraining=!1,[7];case 4:return[2]}})})},t.prototype.getNamedWeights=function(e){for(var t={},n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),o=0;o<r.length;++o)n&&!r[o].trainable||(t[r[o].originalName]=a[o]);return t},Object.defineProperty(t.prototype,"stopTraining",{set:function(e){this.stopTraining_=e},enumerable:!0,configurable:!0}),t.prototype.save=function(e,t){return g(this,void 0,void 0,function(){var n,r,a,o,i;return v(this,function(s){switch(s.label){case 0:if("string"==typeof e){if(n=b.io.getSaveHandlers(e),0===n.length)throw new N.ValueError("Cannot find any save handlers for URL '"+e+"'");if(n.length>1)throw new N.ValueError("Found more than one ("+n.length+") save handlers for "+("URL '"+e+"'"));e=n[0]}if(null==e.save)throw new N.ValueError("Model.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,b.io.encodeWeights(this.getNamedWeights(t))];case 1:return r=s.sent(),a=!1,o=null,i=this.toJSON(o,a),[2,e.save({modelTopology:i,weightData:r.data,weightSpecs:r.specs})]}})})},t.className="Model",t}(O.Container);t.Model=R,b.serialization.SerializationMap.register(R)},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t={}),o.deserializeKerasObject(e,a.serialization.SerializationMap.getMap().classNameMap,t,"layer")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(13);t.deserialize=r},function(e,t,n){"use strict";function r(e,t){return w.tidy(function(){var n=x.sum(_.square(e),t,!0),r=x.mul(w.scalar(S.epsilon()),x.onesLike(e)),a=x.sqrt(x.maximum(n,r));return x.div(e,a)})}function a(e,t){return w.tidy(function(){return x.mean(_.square(x.sub(t,e)),-1)})}function o(e,t){return w.tidy(function(){return x.mean(x.abs(x.sub(t,e)),-1)})}function i(e,t){return w.tidy(function(){var n=x.sub(e,t),r=x.clipByValue(x.abs(e),S.epsilon(),Number.MAX_VALUE),a=x.abs(x.div(n,r));return x.mul(N.getScalar(100),x.mean(a,-1))})}function s(e,t){return w.tidy(function(){var n=N.getScalar(1),r=x.clipByValue(t,S.epsilon(),Number.MAX_VALUE),a=x.log(x.add(n,r)),o=x.clipByValue(e,S.epsilon(),Number.MAX_VALUE),i=x.log(x.add(n,o));return x.mean(_.square(x.sub(a,i)),-1)})}function u(e,t){return w.tidy(function(){var n=N.getScalar(0),r=N.getScalar(1),a=x.maximum(n,x.sub(r,x.mul(e,t)));return x.mean(_.square(a),-1)})}function l(e,t){return w.tidy(function(){var n=N.getScalar(0),r=N.getScalar(1),a=x.maximum(n,x.sub(r,x.mul(e,t)));return x.mean(a,-1)})}function c(e,t){return w.tidy(function(){var n=N.getScalar(0),r=N.getScalar(1),a=x.sum(x.mul(e,t),-1),o=x.max(x.mul(x.sub(r,e),t),-1);return x.maximum(n,x.add(r,x.sub(o,a)))})}function p(e,t){return w.tidy(function(){var n=N.getScalar(Math.log(2)),r=x.sub(t,e),a=x.sub(x.add(r,x.softplus(x.mul(N.getScalar(-2),r))),n);return x.mean(a,-1)})}function h(e,t,n){return void 0===n&&(n=!1),w.tidy(function(){if(n)t=x.softmax(t);else{var r=x.sum(t,t.shape.length-1,!0);t=x.div(t,r)}return t=x.clipByValue(t,S.epsilon(),1-S.epsilon()),x.neg(x.sum(x.mul(e.toFloat(),x.log(t)),t.shape.length-1))})}function d(e,t,n){return void 0===n&&(n=!1),w.tidy(function(){var r=x.floor(_.flatten(e)).toInt(),a=t.shape,o=x.oneHot(r,a[a.length-1]).reshape(a);return h(o,t,n)})}function f(e,t){return w.tidy(function(){var n=x.maximum(t,x.zerosLike(t)),r=x.mul(t,e),a=x.log(x.add(N.getScalar(1),x.exp(x.neg(x.abs(t))))),o=x.add(x.sub(n,r),a);return o})}function m(e,t){return w.tidy(function(){var n;return n=x.clipByValue(t,S.epsilon(),1-S.epsilon()),n=x.log(x.div(n,x.sub(x.onesLike(n),n))),x.mean(f(e,n),-1)})}function g(e,t){return w.tidy(function(){var n=x.clipByValue(e,S.epsilon(),1),r=x.clipByValue(t,S.epsilon(),1);return x.sum(x.mul(e,x.log(x.div(n,r))),-1)})}function v(e,t){return w.tidy(function(){var n=x.log(x.add(N.getScalar(S.epsilon()),t));return x.mean(x.sub(t,x.mul(e,n)),-1)})}function y(e,t){return w.tidy(function(){var n=r(e,-1),a=r(t,-1),o=x.mul(n,a);return x.neg(x.sum(o,-1))})}function b(e){var t={meanSquaredError:a,meanAbsoluteError:o,meanAbsolutePercentageError:i,meanSquaredLogarithmicError:s,squaredHinge:u,hinge:l,categoricalHinge:c,logcosh:p,categoricalCrossentropy:h,sparseCategoricalCrossentropy:d,binaryCrossentropy:m,kullbackLeiblerDivergence:g,poisson:v,cosineProximity:y};if("string"==typeof e){if(e in t)return t[e];throw new T.ValueError("Unknown loss "+e)}return e}Object.defineProperty(t,"__esModule",{value:!0});var x=n(1),w=n(1),S=n(39),_=n(17),N=n(11),T=n(8);t.l2Normalize=r,t.meanSquaredError=a,t.meanAbsoluteError=o,t.meanAbsolutePercentageError=i,t.meanSquaredLogarithmicError=s,t.squaredHinge=u,t.hinge=l,t.categoricalHinge=c,t.logcosh=p,t.categoricalCrossentropy=h,t.sparseCategoricalCrossentropy=d,t.sigmoidCrossEntropyWithLogits=f,t.binaryCrossentropy=m,t.kullbackLeiblerDivergence=g,t.poisson=v,t.cosineProximity=y,t.mse=a,t.MSE=a,t.mae=o,t.MAE=o,t.mape=i,t.MAPE=i,t.msle=s,t.MSLE=s,t.kld=g,t.KLD=g,t.cosine=y,t.get=b},function(e,t,n){"use strict";function r(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}function a(e,t,n,r){return new T(e,t,n,!0,r)}function o(e,t,n){return new T(b.zeros(e),t,n)}function i(e,t,n){return new T(b.zerosLike(e),t,n)}function s(e,t,n){var r=b.ones(e);return new T(r,t,n)}function u(e,t,n){var r=b.onesLike(e);return new T(r,t,n)}function l(e,t,n){return new T(b.eye(e),t,n)}function c(e,t,n,r,a,o){return void 0===o&&(o="randomUniform"),new T(b.randomUniform(e,t,n,r),r,o)}function p(e,t,n,r,a,o){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===o&&(o="truncatedNormal"),"bool"===r)throw new _.NotImplementedError("randomNormal does not support dType bool.");
return new T(b.truncatedNormal(e,t,n,r,a),r,o)}function h(e,t,n,r,a,o){if(void 0===t&&(t=0),void 0===n&&(n=1),void 0===o&&(o="randomNormal"),"bool"===r)throw new _.NotImplementedError("randomNormalVariable does not support dType bool.");return new T(b.randomNormal(e,t,n,r,a),r,o)}function d(e,t){return e.write(t)}function f(e,t){return e.write(b.add(e.read(),t))}function m(e,t){return e.write(b.sub(e.read(),t))}function g(e){return e.map(function(e){return e.read()})}function v(e){e.map(function(e){var t=e[0];t.write(e[1])})}function y(e,t){var n=t.map(function(e){return e.read()}),r=x.variableGrads(e,n);return t.map(function(e){return r.grads[e.name]})}Object.defineProperty(t,"__esModule",{value:!0});var b=n(1),x=n(1),w=n(11),S=n(38),_=n(8),N="Variable",T=function(){function e(e,t,n,r,a){void 0===t&&(t="float32"),void 0===n&&(n=N),void 0===r&&(r=!0),void 0===a&&(a=null),this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=w.getNextUniqueTensorId(),n=null==n?N:n,this.originalName=S.getScopedTensorName(n),this.name=S.getUniqueTensorName(this.originalName),this.trainable=r,this.constraint=a,this.val=b.variable(e,this.trainable,this.name,this.dtype)}return e.prototype.read=function(){return this.assertNotDisposed(),this.val},e.prototype.write=function(e){return this.assertNotDisposed(),r(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},e.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},e.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},e}();t.LayerVariable=T,t.variable=a,t.zerosVariable=o,t.zerosLike=i,t.onesVariable=s,t.onesLike=u,t.eyeVariable=l,t.randomUniformVariable=c,t.truncatedNormalVariable=p,t.randomNormalVariable=h,t.update=d,t.updateAdd=f,t.updateSub=m,t.batchGetValue=g,t.batchSetValue=v,t.gradients=y},,,,function(e,t,n){"use strict";function r(e,t){return e.native?{x:e.x,y:e.y}:l.getRelativePosition(e,t)}function a(e,t){var n,r,a,o,i,s=e.data.datasets;for(r=0,o=s.length;r<o;++r)if(e.isDatasetVisible(r))for(n=e.getDatasetMeta(r),a=0,i=n.data.length;a<i;++a){var u=n.data[a];u._view.skip||t(u)}}function o(e,t){var n=[];return a(e,function(e){e.inRange(t.x,t.y)&&n.push(e)}),n}function i(e,t,n,r){var o=Number.POSITIVE_INFINITY,i=[];return a(e,function(e){if(!n||e.inRange(t.x,t.y)){var a=e.getCenterPoint(),s=r(t,a);s<o?(i=[e],o=s):s===o&&i.push(e)}}),i}function s(e){var t=e.indexOf("x")!==-1,n=e.indexOf("y")!==-1;return function(e,r){var a=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function u(e,t,n){var a=r(t,e);n.axis=n.axis||"x";var u=s(n.axis),l=n.intersect?o(e,a):i(e,a,!1,u),c=[];return l.length?(e.data.datasets.forEach(function(t,n){if(e.isDatasetVisible(n)){var r=e.getDatasetMeta(n),a=r.data[l[0]._index];a&&!a._view.skip&&c.push(a)}}),c):[]}var l=n(3);e.exports={modes:{single:function(e,t){var n=r(t,e),o=[];return a(e,function(e){if(e.inRange(n.x,n.y))return o.push(e),o}),o.slice(0,1)},label:u,index:u,dataset:function(e,t,n){var a=r(t,e);n.axis=n.axis||"xy";var u=s(n.axis),l=n.intersect?o(e,a):i(e,a,!1,u);return l.length>0&&(l=e.getDatasetMeta(l[0]._datasetIndex).data),l},"x-axis":function(e,t){return u(e,t,{intersect:!1})},point:function(e,t){var n=r(t,e);return o(e,n)},nearest:function(e,t,n){var a=r(t,e);n.axis=n.axis||"xy";var o=s(n.axis),u=i(e,a,n.intersect,o);return u.length>1&&u.sort(function(e,t){var n=e.getArea(),r=t.getArea(),a=n-r;return 0===a&&(a=e._datasetIndex-t._datasetIndex),a}),u.slice(0,1)},x:function(e,t,n){var o=r(t,e),i=[],s=!1;return a(e,function(e){e.inXRange(o.x)&&i.push(e),e.inRange(o.x,o.y)&&(s=!0)}),n.intersect&&!s&&(i=[]),i},y:function(e,t,n){var o=r(t,e),i=[],s=!1;return a(e,function(e){e.inYRange(o.y)&&i.push(e),e.inRange(o.x,o.y)&&(s=!0)}),n.intersect&&!s&&(i=[]),i}}}},function(e,t,n){"use strict";var r=n(5),a=n(3);r._set("global",{plugins:{}}),e.exports={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){t.indexOf(e)===-1&&t.push(e)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var r,a,o,i,s,u=this.descriptors(e),l=u.length;for(r=0;r<l;++r)if(a=u[r],o=a.plugin,s=o[t],"function"==typeof s&&(i=[e].concat(n||[]),i.push(a.options),s.apply(o,i)===!1))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],o=[],i=e&&e.config||{},s=i.options&&i.options.plugins||{};return this._plugins.concat(i.plugins||[]).forEach(function(e){var t=n.indexOf(e);if(t===-1){var i=e.id,u=s[i];u!==!1&&(u===!0&&(u=a.clone(r.global.plugins[i])),n.push(e),o.push({plugin:e,options:u||{}}))}}),t.descriptors=o,t.id=this._cacheId,o},_invalidate:function(e){delete e.$plugins}}},function(e,t,n){"use strict";var r=n(3),a=n(224),o=n(225),i=o._enabled?o:a;e.exports=r.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},i)},function(e,t,n){var r=n(238),a=n(236),o=function(e){if(e instanceof o)return e;if(!(this instanceof o))return new o(e);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var t;"string"==typeof e?(t=a.getRgba(e),t?this.setValues("rgb",t):(t=a.getHsla(e))?this.setValues("hsl",t):(t=a.getHwb(e))&&this.setValues("hwb",t)):"object"==typeof e&&(t=e,void 0!==t.r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t))};o.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e%=360,e=e<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return a.hexString(this.values.rgb)},rgbString:function(){return a.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return a.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return a.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return a.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return a.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return a.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return a.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb,t=(299*e[0]+587*e[1]+114*e[2])/1e3;return t<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=this,r=e,a=void 0===t?.5:t,o=2*a-1,i=n.alpha()-r.alpha(),s=((o*i===-1?o:(o+i)/(1+o*i))+1)/2,u=1-s;return this.rgb(s*n.red()+u*r.red(),s*n.green()+u*r.green(),s*n.blue()+u*r.blue()).alpha(n.alpha()*a+r.alpha()*(1-a))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new o,r=this.values,a=n.values;for(var i in r)r.hasOwnProperty(i)&&(e=r[i],t={}.toString.call(e),"[object Array]"===t?a[i]=e.slice(0):"[object Number]"===t?a[i]=e:console.error("unexpected color value:",e));return n}},o.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},o.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},o.prototype.getValues=function(e){for(var t=this.values,n={},r=0;r<e.length;r++)n[e.charAt(r)]=t[e][r];return 1!==t.alpha&&(n.a=t.alpha),n},o.prototype.setValues=function(e,t){var n,a=this.values,o=this.spaces,i=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)a[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)a[e][n]=t[e.charAt(n)];s=t.a}else if(void 0!==t[o[e][0]]){var u=o[e];for(n=0;n<e.length;n++)a[e][n]=t[u[n]];s=t.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===s?a.alpha:s)),"alpha"===e)return!1;var l;for(n=0;n<e.length;n++)l=Math.max(0,Math.min(i[e][n],a[e][n])),a[e][n]=Math.round(l);for(var c in o)c!==e&&(a[c]=r[e][c](a[e]));return!0},o.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},o.prototype.setChannel=function(e,t,n){var r=this.values[e];return void 0===n?r[t]:n===r[t]?this:(r[t]=n,this.setValues(e,r),this)},"undefined"!=typeof window&&(window.Color=o),e.exports=o},,,,function(e,t,n){function r(e){var t=this.__data__=new a(e);this.size=t.size}var a=n(57),o=n(327),i=n(328),s=n(329),u=n(330),l=n(331);r.prototype.clear=o,r.prototype.delete=i,r.prototype.get=s,r.prototype.has=u,r.prototype.set=l,e.exports=r},function(e,t,n){function r(e,t){t=a(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[o(t[n++])];return n&&n==r?e:void 0}var a=n(112),o=n(62);e.exports=r},function(e,t,n){function r(e,t){return a(e)?e:o(e,t)?[e]:i(s(e))}var a=n(21),o=n(82),i=n(332),s=n(347);e.exports=r},function(e,t,n){function r(e,t,n,r,l,c){var p=n&s,h=e.length,d=t.length;if(h!=d&&!(p&&d>h))return!1;var f=c.get(e);if(f&&c.get(t))return f==t;var m=-1,g=!0,v=n&u?new a:void 0;for(c.set(e,t),c.set(t,e);++m<h;){var y=e[m],b=t[m];if(r)var x=p?r(b,y,m,t,e,c):r(y,b,m,e,t,c);if(void 0!==x){if(x)continue;g=!1;break}if(v){if(!o(t,function(e,t){if(!i(v,t)&&(y===e||l(y,e,n,r,c)))return v.push(t)})){g=!1;break}}else if(y!==b&&!l(y,b,n,r,c)){g=!1;break}}return c.delete(e),c.delete(t),g}var a=n(254),o=n(262),i=n(284),s=1,u=2;e.exports=r},function(e,t){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,function(){return this}())},function(e,t){function n(e,t){var n=typeof e;return t=null==t?r:t,!!t&&("number"==n||"symbol"!=n&&a.test(e))&&e>-1&&e%1==0&&e<t}var r=9007199254740991,a=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function r(e){return e===e&&!a(e)}var a=n(63);e.exports=r},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t){function n(e){if(null!=e){try{return a.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var r=Function.prototype,a=r.toString;e.exports=n},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){var r=n(271),a=n(45),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(20),a=n(343),o="object"==typeof t&&t&&!t.nodeType&&t,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===o,u=s?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||a;e.exports=c}).call(t,n(31)(e))},function(e,t,n){function r(e){if(!o(e))return!1;var t=a(e);return t==s||t==u||t==i||t==l}var a=n(44),o=n(63),i="[object AsyncFunction]",s="[object Function]",u="[object GeneratorFunction]",l="[object Proxy]";e.exports=r},function(e,t,n){var r=n(275),a=n(283),o=n(321),i=o&&o.isTypedArray,s=i?a(i):r;e.exports=s},function(e,t,n){"use strict";function r(e){if(e.indexOf(d)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+f.getSchemes().join(","));return{scheme:e.split(d)[0],path:e.split(d)[1]}}function a(e,t,n){return void 0===n&&(n=!1),l(this,void 0,void 0,function(){var a,o,i,s,u,l,d,m,g;return c(this,function(c){switch(c.label){case 0:return p.assert(e!==t,"Old path and new path are the same: '"+e+"'"),a=h.IORouterRegistry.getLoadHandlers(e),p.assert(a.length>0,"Copying failed because no load handler is found for source URL "+e+"."),p.assert(a.length<2,"Copying failed because more than one ("+a.length+") "+("load handlers for source URL "+e+".")),o=a[0],i=h.IORouterRegistry.getSaveHandlers(t),p.assert(i.length>0,"Copying failed because no save handler is found for destination URL "+(t+".")),p.assert(i.length<2,"Copying failed because more than one ("+a.length+") "+("save handlers for destination URL "+t+".")),s=i[0],u=r(e).scheme,l=r(e).path,d=u===r(e).scheme,[4,o.load()];case 1:return m=c.sent(),n&&d?[4,f.getManager(u).removeModel(l)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[4,s.save(m)];case 4:return g=c.sent(),!n||d?[3,6]:[4,f.getManager(u).removeModel(l)];case 5:c.sent(),c.label=6;case 6:return[2,g.modelArtifactsInfo]}})})}function o(){return l(this,void 0,void 0,function(){var e,t,n,r,a,o,i,s;return c(this,function(u){switch(u.label){case 0:e=f.getSchemes(),t={},n=0,r=e,u.label=1;case 1:return n<r.length?(a=r[n],[4,f.getManager(a).listModels()]):[3,4];case 2:o=u.sent();for(i in o)s=a+d+i,t[s]=o[i];u.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})}function i(e){return l(this,void 0,void 0,function(){var t,n;return c(this,function(a){switch(a.label){case 0:return t=r(e),n=f.getManager(t.scheme),[4,n.removeModel(t.path)];case 1:return[2,a.sent()]}})})}function s(e,t){return l(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:return n=!1,[4,a(e,t,n)];case 1:return[2,r.sent()]}})})}function u(e,t){return l(this,void 0,void 0,function(){var n;return c(this,function(r){switch(r.label){case 0:return n=!0,[4,a(e,t,n)];case 1:return[2,r.sent()]}})})}var l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var p=n(2),h=n(67),d="://",f=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){p.assert(null!=t,"scheme must not be undefined or null."),t.endsWith(d)&&(t=t.slice(0,t.indexOf(d))),p.assert(t.length>0,"scheme must not be an empty string.");var r=e.getInstance();p.assert(null==r.managers[t],"A model store manager is already registered for scheme '"+t+"'."),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();t.ModelStoreManagerRegistry=f,t.listModels=o,t.removeModel=i,t.copyModel=s,t.moveModel=u},function(e,t,n){"use strict";function r(e,t,n,r,i){for(var s=Array.from(t).map(function(e,t){return{score:e,boxIndex:t}}).filter(function(e){return e.score>i}).sort(function(e,t){return t.score-e.score}),u=[],l=0;l<s.length;l++){var c=s[l],p=c.score,h=c.boxIndex;if(p<i)break;for(var d=!1,f=u.length-1;f>=0;--f){var m=a(e,h,u[f]);if(m>=r){d=!0;break}}if(!d&&(u.push(h),u.length>=n))break}return o.tensor1d(u,"int32")}function a(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),h=Math.max(a[1],a[3]),d=(s-o)*(u-i),f=(p-l)*(h-c);if(d<=0||f<=0)return 0;var m=Math.max(o,l),g=Math.max(i,c),v=Math.min(s,p),y=Math.min(u,h),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(d+f-b)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(10);t.nonMaxSuppressionImpl=r},function(e,t,n){"use strict";function r(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}}function a(e){var t,n=r();return t=null!=e?k.createWebGLRenderingContextFromCanvas(e,n):k.createWebGLRenderingContext(n),k.callAndCheck(t,function(){return t.disable(t.DEPTH_TEST)}),k.callAndCheck(t,function(){return t.disable(t.STENCIL_TEST)}),k.callAndCheck(t,function(){return t.disable(t.BLEND)}),k.callAndCheck(t,function(){return t.disable(t.DITHER)}),k.callAndCheck(t,function(){return t.disable(t.POLYGON_OFFSET_FILL)}),k.callAndCheck(t,function(){return t.disable(t.SAMPLE_COVERAGE)}),k.callAndCheck(t,function(){return t.enable(t.SCISSOR_TEST)}),k.callAndCheck(t,function(){return t.enable(t.CULL_FACE)}),k.callAndCheck(t,function(){return t.cullFace(t.BACK)}),t}function o(e){var t="\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }";return k.createVertexShader(e,t)}function i(e){var t=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return k.createStaticVertexBuffer(e,t)}function s(e){var t=new Uint16Array([0,1,2,2,1,3]);return k.createStaticIndexBuffer(e,t)}function u(e,t){var n,r,a,o,i,s,u,l,c=e;return 2===N.ENV.get("WEBGL_VERSION")?(n=c.R32F,r=c.R16F,a=c.RGBA32F,o=c.RED,s=4,u=1,l=c.HALF_FLOAT):(n=e.RGBA,r=e.RGBA,a=c.RGBA,o=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null),i=e.RGBA,{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedFloat:a,textureFormatFloat:o,downloadTextureFormat:i,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l}}function l(e,t,n,r,a,o){k.validateTextureSize(e,t,n);var i=k.createTexture(e),s=e.TEXTURE_2D;return k.callAndCheck(e,function(){return e.bindTexture(s,i)}),k.callAndCheck(e,function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),k.callAndCheck(e,function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),k.callAndCheck(e,function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)}),k.callAndCheck(e,function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)}),k.callAndCheck(e,function(){return e.texImage2D(s,0,r,t,n,0,a,o,null)}),k.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,null)}),i}function c(e,t,n,r){var a=T.getUnpackedMatrixTextureShapeWidthHeight(t,n),o=a[0],i=a[1];return l(e,o,i,r.internalFormatFloat,r.textureFormatFloat,e.FLOAT)}function p(e,t,n,r){var a=T.getUnpackedMatrixTextureShapeWidthHeight(t,n),o=a[0],i=a[1];return l(e,o,i,r.internalFormatFloat,r.textureFormatFloat,r.textureTypeHalfFloat)}function h(e,t,n,r){var a=T.getUnpackedMatrixTextureShapeWidthHeight(t,n),o=a[0],i=a[1];return l(e,o,i,e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function d(e,t,n,r){var a=T.getPackedMatrixTextureShapeWidthHeight(t,n),o=a[0],i=a[1];return l(e,o,i,r.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function f(e,t,n){var r=0,a=12,o=20;k.callAndCheck(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)});var i=k.bindVertexBufferToProgramAttribute(e,t,"clipSpacePos",n,3,o,r);return i&&k.bindVertexBufferToProgramAttribute(e,t,"uv",n,2,o,a)}function m(e,t,n){k.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,t)}),k.callAndCheck(e,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}),k.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function g(e,t,n,r,a,o){k.validateTextureSize(e,n,r),k.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,t)}),k.callAndCheck(e,function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,o,e.FLOAT,a)}),k.callAndCheck(e,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function v(e,t,n,r,a,o,i){var s,u=T.getUnpackedMatrixTextureShapeWidthHeight(n,r),l=u[0],c=u[1];1===i.defaultNumChannels?s=a:(s=new Float32Array(T.getUnpackedArraySizeFromMatrixSize(a.length,o)),T.encodeMatrixToUnpackedArray(a,s,o)),g(e,t,l,c,s,i.textureFormatFloat)}function y(e,t,n,r,a,o){var i=T.getPackedMatrixTextureShapeWidthHeight(n,r),s=i[0],u=i[1],l=new Float32Array(T.getPackedRGBAArraySizeFromMatrixShape(n,r));T.encodeMatrixToPackedRGBA(a,n,r,l),g(e,t,s,u,l,e.RGBA)}function b(e,t,n,r,a){var o=t;if(2===N.ENV.get("WEBGL_VERSION")){var i=e,s=i.createBuffer();k.callAndCheck(e,function(){return e.bindBuffer(i.PIXEL_PACK_BUFFER,s)});var u=4,l=u*T.getUnpackedArraySizeFromMatrixSize(n*r,a.downloadUnpackNumChannels);k.callAndCheck(e,function(){return e.bufferData(i.PIXEL_PACK_BUFFER,l,e.STATIC_DRAW)}),k.callAndCheck(e,function(){return i.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),k.callAndCheck(e,function(){return e.bindBuffer(i.PIXEL_PACK_BUFFER,null)}),o=s}return o}function x(e,t,n,r,a){var o=e,i=new Float32Array(T.getUnpackedArraySizeFromMatrixSize(n*r,a.downloadUnpackNumChannels));o.bindBuffer(e.ARRAY_BUFFER,t),o.getBufferSubData(e.ARRAY_BUFFER,0,i),o.bindBuffer(e.ARRAY_BUFFER,null);var s=new Float32Array(n*r);return T.decodeMatrixFromUnpackedArray(i,s,a.downloadUnpackNumChannels),s}function w(e,t,n,r){var a=T.getUnpackedMatrixTextureShapeWidthHeight(t,n),o=a[0],i=a[1],s=new Float32Array(T.getUnpackedArraySizeFromMatrixSize(t*n,r.downloadUnpackNumChannels));k.callAndCheck(e,function(){return e.readPixels(0,0,o,i,r.downloadTextureFormat,e.FLOAT,s)});var u=new Float32Array(t*n);return T.decodeMatrixFromUnpackedArray(s,u,r.downloadUnpackNumChannels),u}function S(e,t,n,r){var a=T.getUnpackedMatrixTextureShapeWidthHeight(t,n),o=a[0],i=a[1],s=4,u=new Uint8Array(T.getUnpackedArraySizeFromMatrixSize(t*n,s));return k.callAndCheck(e,function(){return e.readPixels(0,0,o,i,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function _(e,t,n,r){var a=T.getPackedMatrixTextureShapeWidthHeight(t,n),o=a[0],i=a[1],s=new Float32Array(T.getPackedRGBAArraySizeFromMatrixShape(t,n));k.callAndCheck(e,function(){return e.readPixels(0,0,o,i,e.RGBA,e.FLOAT,s)});var u=new Float32Array(t*n);return T.decodeMatrixFromPackedRGBA(s,t,n,u)}Object.defineProperty(t,"__esModule",{value:!0});var N=n(4),T=n(90),k=n(91);t.getWebGLContextAttributes=r,t.createWebGLContext=a,t.createVertexShader=o,t.createVertexBuffer=i,t.createIndexBuffer=s,t.getTextureConfig=u,t.createFloat32MatrixTexture=c,t.createFloat16MatrixTexture=p,t.createUnsignedBytesMatrixTexture=h,t.createPackedMatrixTexture=d,t.bindVertexProgramAttributeStreams=f,t.uploadPixelDataToTexture=m,t.uploadMatrixToTexture=v,t.uploadMatrixToPackedTexture=y,t.maybeCreateBufferFromOutputTexture=b,t.downloadFloat32MatrixFromBuffer=x,t.downloadFloat32MatrixFromOutputTexture=w,t.downloadByteEncodedFloatMatrixFromOutputTexture=S,t.downloadMatrixFromPackedOutputTexture=_},function(e,t,n){"use strict";function r(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var o=a.buffer(e,"int32"),i=a.buffer([n.length,e.length],"int32"),r=0;r<n.length;r++){var s=o.indexToLoc(n[r]),u=r*e.length;i.values.set(s,u)}return i.toTensor()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(74);t.whereImpl=r},function(e,t,n){"use strict";function r(e){return t.concat(e,0)}function a(e,n){return t.concat(e,n)}function o(e,n){return t.concat(e,n)}function i(e,n){return t.concat(e,n)}function s(e,n){void 0===n&&(n=0),p.assert(e.length>=1,"Pass at least one tensor to concat");var r=c.convertToTensorArray(e,"tensors","concat"),a=d.computeOutShape(r.map(function(e){return e.shape}),n);if(0===p.sizeFromShape(a))return m.tensor([],a);if(r=r.filter(function(e){return e.size>0}),1===r.length)return r[0];var o=h.parseAxisParam(n,r[0].shape)[0],i=r.map(function(e){return e.shape});d.assertParamsConsistent(i,o);var s=function(e){var r=i.map(function(e){return e[n]}),a=t.split(e,r,n);return a.map(function(e){return function(){return e}})},u=r;return l.ENV.engine.runKernel(function(e){return e.concat(r,o)},u,s)}function u(e,n,r){void 0===r&&(r=0);var a=c.convertToTensor(e,"x","split");r=h.parseAxisParam(r,a.shape)[0];var o;"number"==typeof n?(p.assert(a.shape[r]%n===0,"Number of splits must evenly divide the axis."),o=Array(n).fill(a.shape[r]/n)):(p.assert(a.shape[r]===n.reduce(function(e,t){return e+t}),"The sum of sizes must match the size of the axis dimension."),o=n);var i=function(e){return{$x:function(){return t.concat(e,r)}}};return l.ENV.engine.runKernel(function(e){return e.split(a,o,r)},{$x:a},i)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(4),c=n(7),p=n(2),h=n(34),d=n(92),f=n(6),m=n(10);t.concat=f.op({concat_:s}),t.concat1d=f.op({concat1d_:r}),t.concat2d=f.op({concat2d_:a}),t.concat3d=f.op({concat3d_:o}),t.concat4d=f.op({concat4d_:i}),t.split=f.op({split_:u})},function(e,t,n){"use strict";function r(e){var t=d.convertToTensor(e,"x","logicalNot","bool");return f.assert("bool"===t.dtype,"Error Array must be of type bool."),p.ENV.engine.runKernel(function(e){return e.logicalNot(t)},{$x:t})}function a(e,t){var n=d.convertToTensor(e,"a","logicalAnd","bool"),r=d.convertToTensor(t,"b","logicalAnd","bool");return f.assert("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),m.assertAndGetBroadcastShape(n.shape,r.shape),p.ENV.engine.runKernel(function(e){return e.logicalAnd(n,r)},{$a:n,$b:r})}function o(e,t){var n=d.convertToTensor(e,"a","logicalOr","bool"),r=d.convertToTensor(t,"b","logicalOr","bool");return f.assert("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),m.assertAndGetBroadcastShape(n.shape,r.shape),p.ENV.engine.runKernel(function(e){return e.logicalOr(n,r)},{$a:n,$b:r})}function i(e,n){var r=d.convertToTensor(e,"a","logicalXor","bool"),a=d.convertToTensor(n,"b","logicalXor","bool");return f.assert("bool"===r.dtype&&"bool"===a.dtype,"Error Array must be of type bool."),m.assertAndGetBroadcastShape(r.shape,a.shape),t.logicalOr(e,n).logicalAnd(t.logicalAnd(e,n).logicalNot())}function s(e,t,n){var r=d.convertToTensor(t,"a","where"),a=d.convertToTensor(n,"b","where"),o=d.convertToTensor(e,"condition","where","bool");f.assert("bool"===o.dtype,"Error Condition must be of type bool."),f.assertShapesMatch(r.shape,a.shape,"Error in where: "),1===o.rank?f.assert(o.shape[0]===r.shape[0],"The first dimension of `a` must match the size of `condition`."):f.assertShapesMatch(o.shape,a.shape,"Error in where: ");var i=function(e){return{$condition:function(){return v.zerosLike(o)},$a:function(){return e.mul(o.cast(r.dtype))},$b:function(){return e.mul(o.logicalNot().cast(a.dtype))}}};return p.ENV.engine.runKernel(function(e){return e.select(o,r,a)},{$condition:o,$a:r,$b:a},i)}function u(e){return l(this,void 0,void 0,function(){var t,n,r;return c(this,function(a){switch(a.label){case 0:return t=d.convertToTensor(e,"condition","where","bool"),f.assert("bool"===t.dtype,"Condition must be of type bool."),[4,t.data()];case 1:return n=a.sent(),r=h.whereImpl(t.shape,n),e!==t&&t.dispose(),[2,r]}})})}var l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var p=n(4),h=n(127),d=n(7),f=n(2),m=n(36),g=n(6),v=n(10);t.logicalAnd=g.op({logicalAnd_:a}),t.logicalNot=g.op({logicalNot_:r}),
t.logicalOr=g.op({logicalOr_:o}),t.logicalXor=g.op({logicalXor_:i}),t.where=g.op({where_:s}),t.whereAsync=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SELU_SCALEALPHA=1.7580993408473768,t.SELU_SCALE=1.0507009873554805},function(e,t,n){"use strict";function r(e,t,n){s.assert(e.rank===t.length,"Error in slice"+e.rank+"D: Length of begin "+t+" must "+("match the rank of the array ("+e.rank+").")),s.assert(e.rank===n.length,"Error in slice"+e.rank+"D: Length of size "+n+" must "+("match the rank of the array ("+e.rank+")."));for(var r=0;r<e.rank;++r)s.assert(t[r]+n[r]<=e.shape[r],"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] "+("("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"))}function a(e,t,n,r,a,s,u,l,c){if(void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=0),void 0===c&&(c=0),0!==u)throw new Error("ellipsis mask is not yet supported");if(0!==l)throw new Error("new axis mask is not yet supported");for(var p=[],h=[],d=[],f=0;f<e.length;f++)p[f]=o(a,t,r,e,f),h[f]=i(s,n,r,e,f),c&1<<f&&(h[f]=p[f]+1,d.push(f));var m=new Array(e.length).fill(0);return m=m.map(function(e,t){for(var n=0,a=p[t];!(r[t]>0?a>=h[t]:a<=h[t]);a+=r[t])n+=1;return n}),[p,m,d]}function o(e,t,n,r,a){var o=t[a];e&1<<a&&(o=n[a]>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var i=r[a];return o<0&&(o+=i),o=s.clamp(0,o,i-1)}function i(e,t,n,r,a){var o=t[a];e&1<<a&&(o=n[a]>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var i=r[a];return o<0&&(o+=i),o=n[a]>0?s.clamp(0,o,i):s.clamp(-1,o,i-1)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2);t.assertParamsValid=r,t.getStridedSlicedInfo=a,t.startForAxis=o,t.stopForAxis=i},function(e,t,n){"use strict";function r(e){var t=z.convertToTensor(e,"x","neg"),n=function(e){return{$x:function(){return e.neg()}}};return R.ENV.engine.runKernel(function(e){return e.neg(t)},{$x:t},n)}function a(e){var t=z.convertToTensor(e,"x","ceil"),n=function(e){return{$x:function(){return F.zerosLike(e)}}};return R.ENV.engine.runKernel(function(e){return e.ceil(t)},{$x:t},n)}function o(e){var t=z.convertToTensor(e,"x","floor"),n=function(e){return{$x:function(){return F.zerosLike(e)}}};return R.ENV.engine.runKernel(function(e){return e.floor(t)},{$x:t},n)}function i(e){var t=z.convertToTensor(e,"x","sign"),n=function(e){return{$x:function(){return F.zerosLike(e)}}};return R.ENV.engine.runKernel(function(e){return e.sign(t)},{$x:t},n)}function s(e){var t=z.convertToTensor(e,"x","round"),n=function(e){return{$x:function(){return F.zerosLike(e)}}};return R.ENV.engine.runKernel(function(e){return e.round(t)},{$x:t},n)}function u(e){var t=z.convertToTensor(e,"x","exp"),n=function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n)}}};return R.ENV.engine.runKernel(function(e,n){return n(e.exp(t))},{$x:t},n)}function l(e){var t=z.convertToTensor(e,"x","expm1"),n=function(e){return{$x:function(){return e.mulStrict(t.exp())}}};return R.ENV.engine.runKernel(function(e){return e.expm1(t)},{$x:t},n)}function c(e){var t=z.convertToTensor(e,"x","log"),n=function(e){return{$x:function(){return e.divStrict(t.toFloat())}}};return R.ENV.engine.runKernel(function(e){return e.log(t)},{$x:t},n)}function p(e){var t=z.convertToTensor(e,"x","log1p"),n=function(e){return{$x:function(){return e.divStrict(t.add(F.scalar(1)))}}};return R.ENV.engine.runKernel(function(e){return e.log1p(t)},{$x:t},n)}function h(e){var t=z.convertToTensor(e,"x","sqrt"),n=function(e){return{$x:function(){return e.divStrict(t.toFloat().sqrt().mul(F.scalar(2)))}}};return R.ENV.engine.runKernel(function(e){return e.sqrt(t)},{$x:t},n)}function d(e){var t=z.convertToTensor(e,"x","rsqrt"),n=function(e){return{$x:function(){return e.divStrict(t.pow(F.scalar(1.5)).mul(F.scalar(2))).neg()}}};return R.ENV.engine.runKernel(function(e){return e.rsqrt(t)},{$x:t},n)}function f(e){var t=z.convertToTensor(e,"x","square"),n=function(e){return{$x:function(){return e.mulStrict(t.toFloat().mul(F.scalar(2)))}}};return R.ENV.engine.runKernel(function(e){return e.square(t)},{$x:t},n)}function m(e){var t=z.convertToTensor(e,"x","reciprocal"),n=function(e){return{$x:function(){return e.divStrict(t.square().neg())}}};return R.ENV.engine.runKernel(function(e){return e.reciprocal(t)},{$x:t},n)}function g(e){var t=z.convertToTensor(e,"x","abs"),n=function(e){return{$x:function(){return e.mulStrict(t.toFloat().step(-1))}}};return R.ENV.engine.runKernel(function(e){return e.abs(t)},{$x:t},n)}function v(e,t,n){var r=z.convertToTensor(e,"x","clipByValue");L.assert(t<=n,"Error in clip: min ("+t+") must be "+("less than or equal to max ("+n+")."));var a=function(e){return{$x:function(){return e.where(r.greaterEqual(F.scalar(t)).logicalAnd(r.lessEqual(F.scalar(n))),F.zerosLike(e))}}};return R.ENV.engine.runKernel(function(e){return e.clip(r,t,n)},{$x:r},a)}function y(e){var t=z.convertToTensor(e,"x","sigmoid"),n=function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n.mul(F.scalar(1).sub(n)))}}};return R.ENV.engine.runKernel(function(e,n){return n(e.sigmoid(t))},{$x:t},n)}function b(e){var t=z.convertToTensor(e,"x","logSigmoid"),n=function(e){return{$x:function(){return e.mulStrict(t.neg().sigmoid())}}};return R.ENV.engine.runKernel(function(e){return e.softplus(t.neg()).neg()},{$x:t},n)}function x(e){var t=z.convertToTensor(e,"x","softplus"),n=function(e){return{$x:function(){return e.mulStrict(t.sigmoid())}}};return R.ENV.engine.runKernel(function(e){return e.softplus(t)},{$x:t},n)}function w(e){var t=z.convertToTensor(e,"x","sin"),n=function(e){return{$x:function(){return t.toFloat().cos().mulStrict(e)}}};return R.ENV.engine.runKernel(function(e){return e.sin(t)},{$x:t},n)}function S(e){var t=z.convertToTensor(e,"x","cos"),n=function(e){return{$x:function(){return t.toFloat().sin().neg().mulStrict(e)}}};return R.ENV.engine.runKernel(function(e){return e.cos(t)},{$x:t},n)}function _(e){var t=z.convertToTensor(e,"x","tan"),n=function(e){return{$x:function(){return e.divStrict(t.cos().square())}}};return R.ENV.engine.runKernel(function(e){return e.tan(t)},{$x:t},n)}function N(e){var t=z.convertToTensor(e,"x","asin"),n=function(e){return{$x:function(){return e.divStrict(F.scalar(1).sub(t.toFloat().square()).sqrt())}}};return R.ENV.engine.runKernel(function(e){return e.asin(t)},{$x:t},n)}function T(e){var t=z.convertToTensor(e,"x","acos"),n=function(e){return{$x:function(){return e.divStrict(F.scalar(1).sub(t.toFloat().square()).sqrt()).neg()}}};return R.ENV.engine.runKernel(function(e){return e.acos(t)},{$x:t},n)}function k(e){var t=z.convertToTensor(e,"x","atan"),n=function(e){return{$x:function(){return e.divStrict(F.scalar(1).add(t.toFloat().square()))}}};return R.ENV.engine.runKernel(function(e){return e.atan(t)},{$x:t},n)}function I(e){var t=z.convertToTensor(e,"x","sinh"),n=function(e){return{$x:function(){return t.toFloat().cosh().mulStrict(e)}}};return R.ENV.engine.runKernel(function(e){return e.sinh(t)},{$x:t},n)}function E(e){var t=z.convertToTensor(e,"x","cosh"),n=function(e){return{$x:function(){return t.toFloat().sinh().mulStrict(e)}}};return R.ENV.engine.runKernel(function(e){return e.cosh(t)},{$x:t},n)}function A(e){var t=z.convertToTensor(e,"x","tanh"),n=function(e,t){var n=t[0];return{$x:function(){return F.scalar(1).sub(n.square()).mulStrict(e)}}};return R.ENV.engine.runKernel(function(e,n){return n(e.tanh(t))},{$x:t},n)}function P(e){var t=z.convertToTensor(e,"x","asinh"),n=function(e){return{$x:function(){return e.divStrict(F.scalar(1).add(t.toFloat().square()).sqrt())}}};return R.ENV.engine.runKernel(function(e){return e.asinh(t)},{$x:t},n)}function C(e){var t=z.convertToTensor(e,"x","acosh"),n=function(e){return{$x:function(){return e.divStrict(t.toFloat().square().sub(F.scalar(1)).sqrt())}}};return R.ENV.engine.runKernel(function(e){return e.acosh(t)},{$x:t},n)}function O(e){var t=z.convertToTensor(e,"x","atanh"),n=function(e){return{$x:function(){return e.divStrict(F.scalar(1).sub(t.toFloat().square()))}}};return R.ENV.engine.runKernel(function(e){return e.atanh(t)},{$x:t},n)}function M(e){var t=z.convertToTensor(e,"x","erf");L.assert("int32"===t.dtype||"float32"===t.dtype,"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=t.toFloat());var n=function(e){return{$x:function(){return e.mulStrict(F.scalar(2/Math.sqrt(Math.PI)).mul(t.square().neg().exp()))}}};return R.ENV.engine.runKernel(function(e){return e.erf(t)},{$x:t},n)}function D(e,t){void 0===t&&(t=0);var n=z.convertToTensor(e,"x","step"),r=function(e){return{$x:function(){return F.zerosLike(e)}}};return R.ENV.engine.runKernel(function(e){return e.step(n,t)},{$x:n},r)}Object.defineProperty(t,"__esModule",{value:!0});var R=n(4),z=n(7),L=n(2),V=n(6),F=n(10);t.abs=V.op({abs_:g}),t.acos=V.op({acos_:T}),t.acosh=V.op({acosh_:C}),t.asin=V.op({asin_:N}),t.asinh=V.op({asinh_:P}),t.atan=V.op({atan_:k}),t.atanh=V.op({atanh_:O}),t.ceil=V.op({ceil_:a}),t.clipByValue=V.op({clipByValue_:v}),t.cos=V.op({cos_:S}),t.cosh=V.op({cosh_:E}),t.erf=V.op({erf_:M}),t.exp=V.op({exp_:u}),t.expm1=V.op({expm1_:l}),t.floor=V.op({floor_:o}),t.log=V.op({log_:c}),t.log1p=V.op({log1p_:p}),t.logSigmoid=V.op({logSigmoid_:b}),t.neg=V.op({neg_:r}),t.reciprocal=V.op({reciprocal_:m}),t.round=V.op({round_:s}),t.rsqrt=V.op({rsqrt_:d}),t.sigmoid=V.op({sigmoid_:y}),t.sign=V.op({sign_:i}),t.sin=V.op({sin_:w}),t.sinh=V.op({sinh_:I}),t.softplus=V.op({softplus_:x}),t.sqrt=V.op({sqrt_:h}),t.square=V.op({square_:f}),t.step=V.op({step_:D}),t.tan=V.op({tan_:_}),t.tanh=V.op({tanh_:A})},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(24),i=n(29),s=n(37),u=n(48),l=function(e){function t(t,n,r){void 0===r&&(r=null);var s=e.call(this)||this;return s.learningRate=t,s.rho=n,s.epsilon=r,s.accumulatedGrads={},s.accumulatedUpdates={},s.c=o.keep(i.scalar(-t)),s.rhoScalar=o.keep(i.scalar(n)),s.oneMinusRho=o.keep(i.scalar(1-n)),null===r&&(r=a.ENV.get("EPSILON")),s.epsilonScalar=o.keep(i.scalar(r)),s}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var s=a.ENV.engine.registeredVariables[n];if(null==r.accumulatedGrads[n]){var u=!1;o.tidy(function(){t.accumulatedGrads[n]=i.zerosLike(s).variable(u)})}if(null==r.accumulatedUpdates[n]){var l=!1;o.tidy(function(){t.accumulatedUpdates[n]=i.zerosLike(s).variable(l)})}var c=e[n],p=r.accumulatedGrads[n],h=r.accumulatedUpdates[n];o.tidy(function(){var e=t.rhoScalar.mul(p).add(t.oneMinusRho.mul(c.square())),r=h.add(t.epsilonScalar).sqrt().div(p.add(t.epsilonScalar).sqrt()).mul(c),a=t.rhoScalar.mul(h).add(t.oneMinusRho.mul(r.square()));t.accumulatedGrads[n].assign(e),t.accumulatedUpdates[n].assign(a);var o=t.c.mul(r).add(s);s.assign(o)})},r=this;for(var s in e)n(s)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach(function(t){return e.accumulatedUpdates[t].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(t){return e.accumulatedGrads[t].dispose()}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="AdadeltaOptimizer",t}(u.Optimizer);t.AdadeltaOptimizer=l,s.registerClass(l)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(24),i=n(29),s=n(37),u=n(48),l=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads={},r.c=o.keep(i.scalar(-t)),r.epsilon=o.keep(i.scalar(a.ENV.get("EPSILON"))),r}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var s=a.ENV.engine.registeredVariables[n];if(null==r.accumulatedGrads[n]){var u=!1;o.tidy(function(){t.accumulatedGrads[n]=i.fill(s.shape,t.initialAccumulatorValue).variable(u)})}var l=e[n],c=r.accumulatedGrads[n];o.tidy(function(){var e=c.add(l.square());t.accumulatedGrads[n].assign(e);var r=t.c.mul(l.div(e.add(t.epsilon).sqrt())).add(s);s.assign(r)})},r=this;for(var s in e)n(s)},t.prototype.dispose=function(){var e=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach(function(t){return e.accumulatedGrads[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="AdagradOptimizer",t}(u.Optimizer);t.AdagradOptimizer=l,s.registerClass(l)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(24),i=n(29),s=n(37),u=n(48),l=function(e){function t(t,n,r,s){void 0===s&&(s=null);var u=e.call(this)||this;return u.learningRate=t,u.beta1=n,u.beta2=r,u.epsilon=s,u.accumulatedFirstMoment={},u.accumulatedSecondMoment={},u.c=o.keep(i.scalar(-t)),u.beta1Scalar=o.keep(i.scalar(n)),u.beta2Scalar=o.keep(i.scalar(r)),o.tidy(function(){u.accBeta1=i.scalar(n).variable(),u.accBeta2=i.scalar(r).variable()}),u.oneMinusBeta1=o.keep(i.scalar(1-n)),u.oneMinusBeta2=o.keep(i.scalar(1-r)),u.one=o.keep(i.scalar(1)),null===s&&(s=a.ENV.get("EPSILON")),u.epsScalar=o.keep(i.scalar(s)),u}return r(t,e),t.prototype.applyGradients=function(e){var t=this;o.tidy(function(){var n=t.one.sub(t.accBeta1),r=t.one.sub(t.accBeta2);for(var o in e){var s=a.ENV.engine.registeredVariables[o];if(null==t.accumulatedFirstMoment[o]){var u=!1;t.accumulatedFirstMoment[o]=i.zerosLike(s).variable(u)}if(null==t.accumulatedSecondMoment[o]){var u=!1;t.accumulatedSecondMoment[o]=i.zerosLike(s).variable(u)}var l=e[o],c=t.accumulatedFirstMoment[o],p=t.accumulatedSecondMoment[o],h=t.beta1Scalar.mul(c).add(t.oneMinusBeta1.mul(l)),d=t.beta2Scalar.mul(p).add(t.oneMinusBeta2.mul(l.square())),f=h.div(n),m=d.div(r);t.accumulatedFirstMoment[o].assign(h),t.accumulatedSecondMoment[o].assign(d);var g=t.c.mul(f.div(t.epsScalar.add(m.sqrt()))).add(s);s.assign(g)}t.accBeta1.assign(t.accBeta1.mul(t.beta1Scalar)),t.accBeta2.assign(t.accBeta2.mul(t.beta2Scalar))})},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(t){return e.accumulatedFirstMoment[t].dispose()}),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach(function(t){return e.accumulatedSecondMoment[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="AdamOptimizer",t}(u.Optimizer);t.AdamOptimizer=l,s.registerClass(l)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(24),i=n(29),s=n(37),u=n(48),l=function(e){function t(t,n,r,s,u){void 0===s&&(s=null),void 0===u&&(u=0);var l=e.call(this)||this;return l.learningRate=t,l.beta1=n,l.beta2=r,l.epsilon=s,l.decay=u,l.accumulatedFirstMoment={},l.accumulatedWeightedInfNorm={},l.c=o.keep(i.scalar(-t)),l.beta1Scalar=o.keep(i.scalar(n)),l.beta2Scalar=o.keep(i.scalar(r)),l.decayScalar=o.keep(i.scalar(u)),o.tidy(function(){l.iteration=i.scalar(0).variable(),l.accBeta1=i.scalar(n).variable()}),l.oneMinusBeta1=o.keep(i.scalar(1-n)),l.one=o.keep(i.scalar(1)),null===s&&(s=a.ENV.get("EPSILON")),l.epsScalar=o.keep(i.scalar(s)),l}return r(t,e),t.prototype.applyGradients=function(e){var t=this;o.tidy(function(){var n=t.one.sub(t.accBeta1),r=t.c.div(t.one.add(t.decayScalar.mul(t.iteration)));for(var o in e){var s=a.ENV.engine.registeredVariables[o];if(null==t.accumulatedFirstMoment[o]){var u=!1;t.accumulatedFirstMoment[o]=i.zerosLike(s).variable(u)}if(null==t.accumulatedWeightedInfNorm[o]){var u=!1;t.accumulatedWeightedInfNorm[o]=i.zerosLike(s).variable(u)}var l=e[o],c=t.accumulatedFirstMoment[o],p=t.accumulatedWeightedInfNorm[o],h=t.beta1Scalar.mul(c).add(t.oneMinusBeta1.mul(l)),d=t.beta2Scalar.mul(p),f=l.abs(),m=d.maximum(f);t.accumulatedFirstMoment[o].assign(h),t.accumulatedWeightedInfNorm[o].assign(m);var g=r.div(n).mul(h.div(t.epsScalar.add(m))).add(s);s.assign(g)}t.iteration.assign(t.iteration.add(t.one)),t.accBeta1.assign(t.accBeta1.mul(t.beta1Scalar))})},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(t){return e.accumulatedFirstMoment[t].dispose()}),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(t){return e.accumulatedWeightedInfNorm[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="AdamaxOptimizer",t}(u.Optimizer);t.AdamaxOptimizer=l,s.registerClass(l)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(24),i=n(29),s=n(37),u=n(93),l=function(e){function t(t,n,r){void 0===r&&(r=!1);var a=e.call(this,t)||this;return a.learningRate=t,a.momentum=n,a.useNesterov=r,a.m=i.scalar(a.momentum),a.accumulations={},a}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var s=a.ENV.engine.registeredVariables[n];if(null==r.accumulations[n]){var u=!1;o.tidy(function(){t.accumulations[n]=i.zerosLike(s).variable(u)})}var l=r.accumulations[n],c=e[n];o.tidy(function(){var e,r=t.m.mul(l).add(c);e=t.useNesterov?t.c.mul(c.add(r.mul(t.m))).add(s):t.c.mul(r).add(s),t.accumulations[n].assign(r),s.assign(e)})},r=this;for(var s in e)n(s)},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var t in this.accumulations)this.accumulations[t].dispose()},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="MomentumOptimizer",t}(u.SGDOptimizer);t.MomentumOptimizer=l,s.registerClass(l)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(24),i=n(29),s=n(37),u=n(48),l=function(e){function t(t,n,r,s,u){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===s&&(s=null),void 0===u&&(u=!1);var l=e.call(this)||this;return l.learningRate=t,l.decay=n,l.momentum=r,l.epsilon=s,l.accumulatedMeanSquares={},l.accumulatedMeanGrads={},l.accumulatedMoments={},l.c=o.keep(i.scalar(t)),l.decayScalar=o.keep(i.scalar(n)),l.momentumScalar=o.keep(i.scalar(r)),l.oneMinusDecay=o.keep(i.scalar(1-n)),l.centered=u,null===s&&(s=a.ENV.get("EPSILON")),l.epsilonScalar=o.keep(i.scalar(s)),l}return r(t,e),t.prototype.applyGradients=function(e){var t=this,n=function(n){var s=a.ENV.engine.registeredVariables[n];if(null==r.accumulatedMeanSquares[n]){var u=!1;o.tidy(function(){t.accumulatedMeanSquares[n]=i.zerosLike(s).variable(u)})}if(null==r.accumulatedMeanGrads[n]&&r.centered){var l=!1;o.tidy(function(){t.accumulatedMeanGrads[n]=i.zerosLike(s).variable(l)})}if(null==r.accumulatedMoments[n]){var c=!1;o.tidy(function(){t.accumulatedMoments[n]=i.zerosLike(s).variable(c)})}var p=r.accumulatedMeanSquares[n],h=r.accumulatedMeanGrads[n],d=r.accumulatedMoments[n],f=e[n];o.tidy(function(){var e=t.decayScalar.mul(p).add(t.oneMinusDecay.mul(f.square()));if(t.centered){var r=t.decayScalar.mul(h).add(t.oneMinusDecay.mul(f)),a=t.momentumScalar.mul(d).add(t.c.mul(f).div(e.sub(r.square().add(t.epsilonScalar)).sqrt()));t.accumulatedMeanSquares[n].assign(e),t.accumulatedMeanGrads[n].assign(r),t.accumulatedMoments[n].assign(a);var o=s.sub(a);s.assign(o)}else{var i=t.decayScalar.mul(p).add(t.oneMinusDecay.mul(f.square())),a=t.momentumScalar.mul(d).add(t.c.mul(f).div(i.add(t.epsilonScalar).sqrt()));t.accumulatedMeanSquares[n].assign(i),t.accumulatedMoments[n].assign(a);var o=s.sub(a);s.assign(o)}})},r=this;for(var s in e)n(s)},t.prototype.dispose=function(){var e=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach(function(t){return e.accumulatedMeanSquares[t].dispose()}),null!=this.accumulatedMeanGrads&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(t){return e.accumulatedMeanGrads[t].dispose()}),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach(function(t){return e.accumulatedMoments[t].dispose()})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSPropOptimizer",t}(u.Optimizer);t.RMSPropOptimizer=l,s.registerClass(l)},function(e,t,n){"use strict";function r(e){if(null==e)return null;if(e instanceof p)return[e];if(Array.isArray(e)&&e[0]instanceof p)return e;var t=c.toList(e);return t.map(function(e){return new g(e)})}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=n(11),l=n(188),c=n(13),p=function(){function e(){this.validationData=null}return e.prototype.setParams=function(e){this.params=e},e.prototype.onEpochBegin=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},e.prototype.onEpochEnd=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},e.prototype.onBatchBegin=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},e.prototype.onBatchEnd=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},e.prototype.onTrainBegin=function(e){return o(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},e.prototype.onTrainEnd=function(e){return o(this,void 0,void 0,function(){return i(this,function(e){return[2]})})},e.prototype.setModel=function(e){},e}();t.BaseCallback=p;var h=function(){function e(e,t){void 0===t&&(t=10),null==e&&(e=[]),this.callbacks=e,this.queueLength=t}return e.prototype.append=function(e){this.callbacks.push(e)},e.prototype.setParams=function(e){for(var t=0,n=this.callbacks;t<n.length;t++){var r=n[t];r.setParams(e)}},e.prototype.setModel=function(e){for(var t=0,n=this.callbacks;t<n.length;t++){var r=n[t];r.setModel(e)}},e.prototype.onEpochBegin=function(e,t){return o(this,void 0,void 0,function(){var n,r,a;return i(this,function(o){switch(o.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?(a=r[n],[4,a.onEpochBegin(e,t)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onEpochEnd=function(e,t){return o(this,void 0,void 0,function(){var n,r,a;return i(this,function(o){switch(o.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?(a=r[n],[4,a.onEpochEnd(e,t)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onBatchBegin=function(e,t){return o(this,void 0,void 0,function(){var n,r,a;return i(this,function(o){switch(o.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?(a=r[n],[4,a.onBatchBegin(e,t)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onBatchEnd=function(e,t){return o(this,void 0,void 0,function(){var n,r,a;return i(this,function(o){switch(o.label){case 0:null==t&&(t={}),n=0,r=this.callbacks,o.label=1;case 1:return n<r.length?(a=r[n],[4,a.onBatchEnd(e,t)]):[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.onTrainBegin=function(e){return o(this,void 0,void 0,function(){var t,n,r;return i(this,function(a){switch(a.label){case 0:null==e&&(e={}),t=0,n=this.callbacks,a.label=1;case 1:return t<n.length?(r=n[t],[4,r.onTrainBegin(e)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e.prototype.onTrainEnd=function(e){return o(this,void 0,void 0,function(){var t,n,r;return i(this,function(a){switch(a.label){case 0:null==e&&(e={}),t=0,n=this.callbacks,a.label=1;case 1:return t<n.length?(r=n[t],[4,r.onTrainEnd(e)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},e}();t.CallbackList=h;var d=function(){function e(e){this.yieldEvery=e,this.batchCount=0,this.batchDurationsMillis=[],this.autoYieldEveryBatches=null,this.batchStartMillis=s.util.now()}return e.prototype.resolveOneTensorInLogs=function(e){return o(this,void 0,void 0,function(){var t,n,r,a,o;return i(this,function(i){switch(i.label){case 0:t=[];for(n in e)t.push(n);r=0,i.label=1;case 1:return r<t.length?(a=t[r],o=e[a],"number"==typeof o?[3,3]:[4,o.data()]):[3,4];case 2:return i.sent(),[3,4];case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.maybeYieldOnBatch=function(t){return o(this,void 0,void 0,function(){var n,r;return i(this,function(a){switch(a.label){case 0:return"auto"!==this.yieldEvery?[3,7]:(this.batchCount++,null!=this.autoYieldEveryBatches?[3,3]:[4,this.resolveOneTensorInLogs(t)]);case 1:return a.sent(),n=s.util.now(),[4,s.nextFrame()];case 2:return a.sent(),this.batchCount>e.SKIP_FIRST_BATCHES&&(this.batchDurationsMillis.push(n-this.batchStartMillis),this.batchDurationsMillis.length>=e.DECISION_BATCH_COUNT&&(r=this.batchDurationsMillis.reduce(function(e,t){return e+t})/this.batchDurationsMillis.length,this.autoYieldEveryBatches=Math.round(e.THRESHOLD_MILLIS/r),this.autoYieldEveryBatches<1&&(this.autoYieldEveryBatches=1))),this.batchStartMillis=s.util.now(),this.lastYieldBatchCount=this.batchCount,[3,6];case 3:return this.batchCount-this.lastYieldBatchCount>=this.autoYieldEveryBatches?[4,s.nextFrame()]:[3,6];case 4:return a.sent(),[4,this.resolveOneTensorInLogs(t)];case 5:a.sent(),this.lastYieldBatchCount=this.batchCount,a.label=6;case 6:return[3,9];case 7:return"batch"!==this.yieldEvery?[3,9]:[4,s.nextFrame()];case 8:a.sent(),a.label=9;case 9:return[2]}})})},e.prototype.maybeYieldOnEpoch=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return"epoch"!==this.yieldEvery?[3,2]:[4,s.nextFrame()];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.SKIP_FIRST_BATCHES=1,e.DECISION_BATCH_COUNT=2,e.THRESHOLD_MILLIS=16,e}();t.ModelTrainingYielder=d;var f=function(e){function t(t){var n=e.call(this)||this;return n.yieldEvery=t||"auto",n}return a(t,e),t.prototype.onTrainBegin=function(e){return o(this,void 0,void 0,function(){return i(this,function(e){return this.autoYielder=new d(this.yieldEvery),[2]})})},t.prototype.onEpochBegin=function(e){return o(this,void 0,void 0,function(){return i(this,function(e){return this.seen=0,this.totals={},[2]})})},t.prototype.onBatchEnd=function(e,t){return o(this,void 0,void 0,function(){var e,n,r,a,o=this;return i(this,function(i){switch(i.label){case 0:return[4,this.autoYielder.maybeYieldOnBatch(t)];case 1:i.sent(),null==t&&(t={}),e=null==t.size?0:t.size,this.seen+=e,n=function(n){var a=t[n];if("number"==typeof a)r.totals.hasOwnProperty(n)||(r.totals[n]=0),r.totals[n]=r.totals[n]+a*e;else{var i=void 0;n in r.totals?i=r.totals[n]:r.totals[n]=u.getScalar(0),r.totals[n]=s.tidy(function(){return s.add(o.totals[n],s.mul(a,u.getScalar(e)))}),null!=i&&i.dispose()}},r=this;for(a in t)n(a);return[2]}})})},t.prototype.onEpochEnd=function(e,t){return o(this,void 0,void 0,function(){var e,n,r,a,o,l=this;return i(this,function(i){switch(i.label){case 0:return[4,this.autoYielder.maybeYieldOnEpoch()];case 1:if(i.sent(),null!=t)for(e=function(e){return null==n.totals[e]?"continue":void("number"==typeof n.totals[e]?t[e]=n.totals[e]/n.seen:s.tidy(function(){t[e]=s.mul(s.div(u.getScalar(1),u.getScalar(l.seen)),l.totals[e]),
l.totals[e].dispose(),s.keep(t[e])}))},n=this,r=0,a=this.params.metrics;r<a.length;r++)o=a[r],e(o);return[2]}})})},t}(p);t.BaseLogger=f;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.onTrainBegin=function(e){return o(this,void 0,void 0,function(){return i(this,function(e){return this.epoch=[],this.history={},[2]})})},t.prototype.onEpochEnd=function(e,t){return o(this,void 0,void 0,function(){var n;return i(this,function(r){null==t&&(t={}),this.epoch.push(e);for(n in t)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(t[n]);return[2]})})},t.prototype.syncData=function(){return o(this,void 0,void 0,function(){var e,t,n,r,a,o,s,u,l,c;return i(this,function(i){switch(i.label){case 0:e=[],t=[],n=[];for(r in this.history)for(a=this.history[r],o=0;o<a.length;++o)"number"!=typeof a[o]&&(s=a[o],e.push(s.data()),t.push(r),n.push(o));return[4,Promise.all(e)];case 1:for(u=i.sent(),l=0;l<u.length;++l)c=this.history[t[l]][n[l]],c.dispose(),this.history[t[l]][n[l]]=u[l][0];return[2]}})})},t}(p);t.History=m;var g=function(e){function t(t){var n=e.call(this)||this;return n.trainBegin=t.onTrainBegin,n.trainEnd=t.onTrainEnd,n.epochBegin=t.onEpochBegin,n.epochEnd=t.onEpochEnd,n.batchBegin=t.onBatchBegin,n.batchEnd=t.onBatchEnd,n}return a(t,e),t.prototype.onEpochBegin=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return null==this.epochBegin?[3,3]:[4,l.resolveScalarsInLogs(t)];case 1:return n.sent(),[4,this.epochBegin(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.onEpochEnd=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return null==this.epochEnd?[3,3]:[4,l.resolveScalarsInLogs(t)];case 1:return n.sent(),[4,this.epochEnd(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.onBatchBegin=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,l.resolveScalarsInLogs(t)];case 1:return n.sent(),[4,this.batchBegin(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.onBatchEnd=function(e,t){return o(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return null==this.batchEnd?[3,3]:[4,l.resolveScalarsInLogs(t)];case 1:return n.sent(),[4,this.batchEnd(e,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.onTrainBegin=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return null==this.trainBegin?[3,3]:[4,l.resolveScalarsInLogs(e)];case 1:return t.sent(),[4,this.trainBegin(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.onTrainEnd=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return null==this.trainEnd?[3,3]:[4,l.resolveScalarsInLogs(e)];case 1:return t.sent(),[4,this.trainEnd(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t}(p);t.CustomCallback=g,t.standardizeCallbacks=r},function(e,t,n){"use strict";function r(e,t){return c.tidy(function(){return f.checkDataFormat(t),"channelsFirst"===t?l.transpose(e,[0,2,3,1]):e})}function a(e,t,n,r,a,o,i){return void 0===r&&(r=1),void 0===a&&(a="valid"),void 0===i&&(i=1),c.tidy(function(){if(null==o&&(o=h.imageDataFormat()),f.checkDataFormat(o),3!==e.shape.length)throw new v.ValueError("The input of a conv1dWithBias operation should be 3, but is "+(e.shape.length+" instead."));if(3!==t.shape.length)throw new v.ValueError("The kernel for a conv1dWithBias operation should be 3, but is "+(t.shape.length+" instead"));if(null!=n&&1!==n.shape.length)throw new v.ValueError("The bias for a conv1dWithBias operation should be 1, but is "+(t.shape.length+" instead"));if("channelsFirst"===o&&(e=l.transpose(e,[0,2,1])),"causal"===a)throw new v.NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=l.conv1d(e,t,r,"same"===a?"same":"valid","NWC",i);return null!=n&&(s=d.biasAdd(s,n)),s})}function o(e,t,n,r,o,i){return void 0===n&&(n=1),void 0===r&&(r="valid"),void 0===i&&(i=1),c.tidy(function(){return f.checkDataFormat(o),a(e,t,null,n,r,o,i)})}function i(e,t,n,r,a,o){return void 0===n&&(n=[1,1]),void 0===r&&(r="valid"),c.tidy(function(){return f.checkDataFormat(a),s(e,t,null,n,r,a,o)})}function s(e,t,n,a,o,i,s){return void 0===a&&(a=[1,1]),void 0===o&&(o="valid"),c.tidy(function(){if(null==i&&(i=h.imageDataFormat()),f.checkDataFormat(i),3!==e.rank&&4!==e.rank)throw new v.ValueError("conv2dWithBias expects input to be of rank 3 or 4, but received "+(e.rank+"."));if(3!==t.rank&&4!==t.rank)throw new v.ValueError("conv2dWithBias expects kernel to be of rank 3 or 4, but received "+(e.rank+"."));var u=r(e,i);if("causal"===o)throw new v.NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=l.conv2d(u,t,a,"same"===o?"same":"valid","NHWC",s),null!=n&&(u=d.biasAdd(u,n)),"channelsFirst"===i&&(u=l.transpose(u,[0,3,1,2])),u})}var u=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),c=n(1),p=n(95),h=n(39),d=n(17),f=n(38),m=n(49),g=n(15),v=n(8),y=n(50),b=n(40),x=n(142),w=n(13),S=n(19);t.preprocessConv2DInput=r,t.conv1dWithBias=a,t.conv1d=o,t.conv2d=i,t.conv2dWithBias=s;var _=function(e){function t(n,r){var a=e.call(this,r)||this;if(a.bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyConfig(r),a.rank=n,1!==a.rank&&2!==a.rank)throw new v.NotImplementedError("Convolution layer for rank other than 1 or 2 ("+a.rank+") is not implemented yet.");if(a.kernelSize=x.normalizeArray(r.kernelSize,n,"kernelSize"),a.strides=x.normalizeArray(null==r.strides?1:r.strides,n,"strides"),a.padding=null==r.padding?"valid":r.padding,f.checkPaddingMode(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,f.checkDataFormat(a.dataFormat),a.activation=p.getActivation(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=y.getInitializer(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=m.getConstraint(r.biasConstraint),a.biasRegularizer=b.getRegularizer(r.biasRegularizer),a.activityRegularizer=b.getRegularizer(r.activityRegularizer),a.dilationRate=x.normalizeArray(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new v.ValueError("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(a.dilationRate));if(2===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new v.ValueError("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(a.dilationRate));return a}return u(t,e),t.verifyConfig=function(e){if(w.assert("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!w.checkArrayTypeAndLength(e.kernelSize,"number",1,2))throw new v.ValueError("BaseConv expects config.kernelSize to be number or number[] with "+("length 1 or 2, but received "+JSON.stringify(e.kernelSize)+"."))},t.prototype.getConfig=function(){var t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:p.serializeActivation(this.activation),useBias:this.useBias,biasInitializer:y.serializeInitializer(this.biasInitializer),biasRegularizer:b.serializeRegularizer(this.biasRegularizer),activityRegularizer:b.serializeRegularizer(this.activityRegularizer),biasConstraint:m.serializeConstraint(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(g.Layer);t.BaseConv=_;var N=function(e){function t(n,r){var a=e.call(this,n,r)||this;return a.kernel=null,t.verifyConfig(r),a.filters=r.filters,a.kernelInitializer=y.getInitializer(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=m.getConstraint(r.kernelConstraint),a.kernelRegularizer=b.getRegularizer(r.kernelRegularizer),a}return u(t,e),t.prototype.build=function(e){e=S.getExactlyOneShape(e);var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new v.ValueError("The channel dimension of the input should be defined. Found "+e[t]);var n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(a={},a[t]=n,a)}],this.built=!0;var a},t.prototype.call=function(e,t){var n=this;return c.tidy(function(){e=S.getExactlyOneTensor(e);var t,r=null==n.bias?null:n.bias.read();if(1===n.rank)t=a(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=s(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else if(3===n.rank)throw new v.NotImplementedError("3D convolution is not implemented yet.");return null!=n.activation&&(t=n.activation.apply(t)),t})},t.prototype.computeOutputShape=function(e){e=S.getExactlyOneShape(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=x.convOutputLength(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var o=[e[0]];return"channelsLast"===this.dataFormat?(o=o.concat(t),o.push(this.filters)):(o.push(this.filters),o=o.concat(t)),o},t.prototype.getConfig=function(){var t={filters:this.filters,kernelInitializer:y.serializeInitializer(this.kernelInitializer),kernelRegularizer:b.serializeRegularizer(this.kernelRegularizer),kernelConstraint:m.serializeConstraint(this.kernelConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.verifyConfig=function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new v.ValueError("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))},t}(_);t.Conv=N;var T=function(e){function t(n){var r=e.call(this,2,n)||this;return t.verifyConfig(n),r}return u(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,t},t.verifyConfig=function(e){if("number"!=typeof e.kernelSize&&!w.checkArrayTypeAndLength(e.kernelSize,"number",1,2))throw new v.ValueError("Conv2D expects config.kernelSize to be number or number[] with "+("length 1 or 2, but received "+JSON.stringify(e.kernelSize)+"."))},t.className="Conv2D",t}(N);t.Conv2D=T,c.serialization.SerializationMap.register(T);var k=function(e){function t(t){var n=e.call(this,t)||this;if(n.inputSpec=[new g.InputSpec({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new v.ValueError("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return u(t,e),t.prototype.build=function(e){if(e=S.getExactlyOneShape(e),4!==e.length)throw new v.ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(e));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new v.ValueError("The channel dimension of the inputs should be defined. Found `None`.");var n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new g.InputSpec({ndim:4,axes:(a={},a[t]=n,a)})],this.built=!0;var a},t.prototype.call=function(e,t){var n=this;return l.tidy(function(){var t=S.getExactlyOneTensor(e);if(4!==t.shape.length)throw new v.ValueError("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);var r,a,o=t.shape,i=o[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=o[r],u=o[a],c=n.kernelSize[0],p=n.kernelSize[1],h=n.strides[0],f=n.strides[1],m=x.deconvLength(s,h,c,n.padding),g=x.deconvLength(u,f,p,n.padding),y=[i,m,g,n.filters];"channelsLast"!==n.dataFormat&&(t=l.transpose(t,[0,2,3,1]));var b=l.conv2dTranspose(t,n.kernel.read(),y,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(b=l.transpose(b,[0,3,1,2])),null!=n.bias&&(b=d.biasAdd(b,n.bias.read(),n.dataFormat)),null!=n.activation&&(b=n.activation.apply(b)),b})},t.prototype.computeOutputShape=function(e){e=S.getExactlyOneShape(e);var t,n,r,a=e.slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var o=this.kernelSize[0],i=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=x.deconvLength(a[n],s,o,this.padding),a[r]=x.deconvLength(a[r],u,i,this.padding),a},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.dilationRate,t},t.className="Conv2DTranspose",t}(T);t.Conv2DTranspose=k,c.serialization.SerializationMap.register(k);var I=function(e){function t(t,n){var r=e.call(this,t,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new v.ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new v.ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new v.ValueError("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=y.getInitializer(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=b.getRegularizer(n.depthwiseRegularizer),r.depthwiseConstraint=m.getConstraint(n.depthwiseConstraint),r.pointwiseInitializer=y.getInitializer(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=b.getRegularizer(n.pointwiseRegularizer),r.pointwiseConstraint=m.getConstraint(n.pointwiseConstraint),r}return u(t,e),t.prototype.build=function(e){if(e=S.getExactlyOneShape(e),e.length<this.rank+2)throw new v.ValueError("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2+", but received input shape: ")+(""+JSON.stringify(e)));var t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new v.ValueError("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[t]));for(var n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(n*this.depthMultiplier,this.filters);var i=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,i,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,i,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,i,this.biasConstraint):this.bias=null,this.inputSpec=[new g.InputSpec({ndim:this.rank+2,axes:(s={},s[t]=n,s)})],this.built=!0;var s},t.prototype.call=function(e,t){var n=this;return c.tidy(function(){e=S.getExactlyOneTensor(e);var t;if(1===n.rank)throw new v.NotImplementedError("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=l.transpose(e,[0,2,3,1])),t=l.separableConv2d(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=d.biasAdd(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=l.transpose(t,[0,3,1,2])),t})},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=y.serializeInitializer(this.depthwiseInitializer),t.pointwiseInitializer=y.serializeInitializer(this.pointwiseInitializer),t.depthwiseRegularizer=b.serializeRegularizer(this.depthwiseRegularizer),t.pointwiseRegularizer=b.serializeRegularizer(this.pointwiseRegularizer),t.depthwiseConstraint=m.serializeConstraint(this.depthwiseConstraint),t.pointwiseConstraint=m.serializeConstraint(this.pointwiseConstraint),t},t.className="SeparableConv",t}(N);t.SeparableConv=I;var E=function(e){function t(t){return e.call(this,2,t)||this}return u(t,e),t.className="SeparableConv2D",t}(I);t.SeparableConv2D=E,c.serialization.SerializationMap.register(E);var A=function(e){function t(n){var r=e.call(this,1,n)||this;return t.verifyConfig(n),r.inputSpec=[{ndim:3}],r}return u(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.dataFormat,t},t.verifyConfig=function(e){if("number"!=typeof e.kernelSize&&!w.checkArrayTypeAndLength(e.kernelSize,"number",1,1))throw new v.ValueError("Conv1D expects config.kernelSize to be number or number[] with "+("length 1, but received "+JSON.stringify(e.kernelSize)+"."))},t.className="Conv1D",t}(N);t.Conv1D=A,c.serialization.SerializationMap.register(A);var P=function(e){function t(t){var n=e.call(this,t)||this;return"number"==typeof t.cropping?n.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?n.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:n.cropping=t.cropping,n.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,n.inputSpec=[{ndim:4}],n}return u(t,e),t.prototype.computeOutputShape=function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]},t.prototype.call=function(e,t){var n=this;return c.tidy(function(){if(e=S.getExactlyOneTensor(e),"channelsLast"===n.dataFormat){var t=d.sliceAlongAxis(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return d.sliceAlongAxis(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var t=d.sliceAlongAxis(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return d.sliceAlongAxis(t,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)})},t.prototype.getConfig=function(){var t={cropping:this.cropping,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Cropping2D",t}(g.Layer);t.Cropping2D=P,c.serialization.SerializationMap.register(P);var C=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==t.size?n.DEFAULT_SIZE:t.size,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,n}return u(t,e),t.prototype.computeOutputShape=function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]},t.prototype.call=function(e,t){var n=this;return l.tidy(function(){var t=S.getExactlyOneTensor(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=l.transpose(t,[0,2,3,1]);var a=n.size[0]*r[2],o=n.size[1]*r[3],i=t.resizeNearestNeighbor([a,o]);return l.transpose(i,[0,3,1,2])}var a=n.size[0]*r[1],o=n.size[1]*r[2];return t.resizeNearestNeighbor([a,o])})},t.prototype.getConfig=function(){var t={size:this.size,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="UpSampling2D",t}(g.Layer);t.UpSampling2D=C,c.serialization.SerializationMap.register(C)},function(e,t,n){"use strict";function r(e,t,n,r){function a(e){return null==e||Array.isArray(e)?e:[e]}if(Array.isArray(e)){if(null!=t||null!=n)throw new m.ValueError("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}return t=a(t),n=a(n),{inputs:e,initialState:t,constants:n}}function a(e,t,n,r,a,o,i,u){void 0===r&&(r=!1),void 0===i&&(i=!1);var l=t.shape.length;if(l<3)throw new m.ValueError("Input should be at least 3D, but is "+l+"D.");var c=[1,0].concat(y.range(2,l));if(t=s.transpose(t,c),null!=a)throw new m.NotImplementedError("The rnn() function of the deeplearn.js backend does not support masking yet.");if(null!=o)throw new m.NotImplementedError("The rnn() functoin of the deeplearn.js backend does not support constants yet.");i&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),r&&(t=s.reverse(t,0));for(var h,d,f=n,g=t.shape[0],v=0;v<g;++v){var b=p.sliceAlongFirstAxis(t,v,1);b=b.reshape(b.shape.slice(1));var x=e(b,f);d=x[0],h=0===v?d.reshape([1].concat(d.shape)):p.concatAlongFirstAxis(h,d.reshape([1].concat(d.shape))),f=x[1]}return[d,s.transpose(h,[1,0].concat(y.range(2,h.shape.length))),f]}function o(e,t,n,r){function a(){return p.dropout(e(),c.getScalar(t))}if(void 0===n&&(n=null),void 0===r&&(r=1),r>1){for(var o=[],i=0;i<r;i++)o.push(p.inTrainPhase(a,e,n));return o.forEach(function(e){return s.keep(e)}),o}return s.keep(p.inTrainPhase(a,e,n))}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=n(1),l=n(95),c=n(11),p=n(17),h=n(49),d=n(15),f=n(15),m=n(8),g=n(50),v=n(40),y=n(41),b=n(19),x=n(99),w=n(97);t.standardizeArgs=r,t.rnn=a;var S=function(e){function t(t){var n,r=e.call(this,t)||this;if(null==t.cell)throw new m.ValueError("cell property is missing for the constructor of RNN.");if(n=Array.isArray(t.cell)?new P({cells:t.cell}):t.cell,null==n.stateSize)throw new m.ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=t.returnSequences&&t.returnSequences,r.returnState=null!=t.returnState&&t.returnState,r.goBackwards=null!=t.goBackwards&&t.goBackwards,r._stateful=null!=t.stateful&&t.stateful,r.unroll=null!=t.unroll&&t.unroll,r.supportsMasking=!0,r.inputSpec=[new d.InputSpec({ndim:3})],r.stateSpec=null,r.states=null,r.numConstants=null,r.keptStates=[],r}return i(t,e),t.prototype.getStates=function(){if(null==this.states){var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return y.range(0,e).map(function(e){return null})}return this.states},t.prototype.setStates=function(e){this.states=e},t.prototype.computeOutputShape=function(e){b.isArrayOfShapes(e)&&(e=e[0]),e=e;var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){for(var a=[],o=0,i=t;o<i.length;o++){var s=i[o];a.push([e[0],s])}return[n].concat(a)}return n},t.prototype.computeMask=function(e,t){throw new m.NotImplementedError("computeMask has not been implemented for RNN yet")},t.prototype.build=function(e){var t=null;if(null!=this.numConstants)throw new m.NotImplementedError("Constants support is not implemented in RNN yet.");b.isArrayOfShapes(e)&&(e=e[0]),e=e;var n=this.stateful?e[0]:null,r=e[e.length-1];this.inputSpec[0]=new d.InputSpec({shape:[n,null,r]});var a=[e[0]].concat(e.slice(2));if(null!=t)throw new m.NotImplementedError("Constants support is not implemented in RNN yet.");this.cell.build(a);var o;if(o=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!u.util.arraysEqual(this.stateSpec.map(function(e){return e.shape[e.shape.length-1]}),o))throw new m.ValueError("An initialState was passed that is not compatible with "+("cell.stateSize. Received stateSpec="+this.stateSpec+"; ")+("However cell.stateSize is "+this.cell.stateSize))}else this.stateSpec=o.map(function(e){return new d.InputSpec({shape:[null,e]})});this.stateful&&this.resetStates()},t.prototype.resetStates=function(e){var t=this;u.tidy(function(){if(!t.stateful)throw new m.AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");var n=t.inputSpec[0].shape[0];if(null==n)throw new m.ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==t.states)Array.isArray(t.cell.stateSize)?t.states=t.cell.stateSize.map(function(e){return s.zeros([n,e])}):t.states=[s.zeros([n,t.cell.stateSize])];else if(null==e)s.dispose(t.states),null!=t.keptStates&&(s.dispose(t.keptStates),t.keptStates=[]),Array.isArray(t.cell.stateSize)?t.states=t.cell.stateSize.map(function(e){return s.zeros([n,e])}):t.states[0]=s.zeros([n,t.cell.stateSize]);else{if(t.keptStates.push(t.states.slice()),Array.isArray(e)||(e=[e]),e.length!==t.states.length)throw new m.ValueError("Layer "+t.name+" expects "+t.states.length+" state(s), "+("but it received "+e.length+" state value(s). Input ")+("received: "+e));for(var r=0;r<t.states.length;++r){var a=e[r],o=Array.isArray(t.cell.stateSize)?t.cell.stateSize[r]:t.cell.stateSize,i=[n,o];if(!u.util.arraysEqual(a.shape,i))throw new m.ValueError("State "+r+" is incompatible with layer "+t.name+": "+("expected shape="+i+", received shape="+a.shape));t.states[r]=a}}t.states.forEach(function(e){return s.keep(e)})})},t.prototype.apply=function(t,n){var a=null==n?null:n.initialState,o=null==n?null:n.constants;null==n&&(n={});var i=r(t,a,o,this.numConstants);t=i.inputs,a=i.initialState,o=i.constants;var s=[],u=[];if(null!=a){n.initialState=a,s=s.concat(a),this.stateSpec=[];for(var l=0,c=a;l<c.length;l++){var p=c[l];this.stateSpec.push(new d.InputSpec({shape:p.shape}))}u=u.concat(this.stateSpec)}null!=o&&(n.constants=o,s=s.concat(o),this.numConstants=o.length);var h=s[0]instanceof d.SymbolicTensor;if(h){var f=[t].concat(s),m=this.inputSpec.concat(u),g=this.inputSpec;this.inputSpec=m;var v=e.prototype.apply.call(this,f,n);return this.inputSpec=g,v}return e.prototype.apply.call(this,t,n)},t.prototype.call=function(e,t){var n=this;return u.tidy(function(){var r=null==t?null:t.mask,o=null==t?null:t.training,i=null==t?null:t.initialState;if(e=b.getExactlyOneTensor(e),null==i&&(i=n.stateful?n.states:n.getInitialState(e)),null!=r)throw new m.NotImplementedError("Masking is not implemented for RNN yet");var s=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==s)throw new m.ValueError("RNN Layer has "+s+" state(s) but was passed "+(i.length+" initial state(s)."));var u=e.shape,l=u[1];n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var c={training:o},p=function(e,t){var r=n.cell.call([e].concat(t),c);return[r[0],r.slice(1)]},h=a(p,e,i,n.goBackwards,null,null,n.unroll,l),d=h[0],f=h[1],g=h[2];n.stateful&&n.resetStates(g);var v=n.returnSequences?f:d;return n.returnState?[v].concat(g):v})},t.prototype.getInitialState=function(e){var t=this;return u.tidy(function(){var n=s.zeros(e.shape);return n=s.sum(n,[1,2]),n=p.expandDims(n),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map(function(e){return e>1?p.tile(n,[1,e]):n}):t.cell.stateSize>1?[p.tile(n,[1,t.cell.stateSize])]:[n]})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);var n=this.cell.getConfig();t.cell={className:this.cell.getClassName(),config:n};var r=e.prototype.getConfig.call(this);return Object.assign(t,r),t},t.className="RNN",t}(f.Layer);t.RNN=S,u.serialization.SerializationMap.register(S);var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(f.Layer);t.RNNCell=_;var N=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=l.getActivation(null==t.activation?n.DEFAULT_ACTIVATION:t.activation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=g.getInitializer(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=g.getInitializer(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=g.getInitializer(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=v.getRegularizer(t.kernelRegularizer),n.recurrentRegularizer=v.getRegularizer(t.recurrentRegularizer),n.biasRegularizer=v.getRegularizer(t.biasRegularizer),n.kernelConstraint=h.getConstraint(t.kernelConstraint),n.recurrentConstraint=h.getConstraint(t.recurrentConstraint),n.biasConstraint=h.getConstraint(t.biasConstraint),n.dropout=y.min([1,y.max([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=y.min([1,y.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return i(t,e),t.prototype.build=function(e){e=b.getExactlyOneShape(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return u.tidy(function(){if(e=e,2!==e.length)throw new m.ValueError("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var r=e[1];e=e[0];var a=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=o(function(){return s.onesLike(e)},n.dropout,a)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=o(function(){return s.onesLike(r)},n.recurrentDropout,a));var i,u=n.dropoutMask,l=n.recurrentDropoutMask;i=null!=u?p.dot(s.mul(e,u),n.kernel.read()):p.dot(e,n.kernel.read()),null!=n.bias&&(i=p.biasAdd(i,n.bias.read())),null!=l&&(r=s.mul(r,l));var c=s.add(i,p.dot(r,n.recurrentKernel.read()));return null!=n.activation&&(c=n.activation.apply(c)),[c,c]})},t.prototype.getConfig=function(){var t={units:this.units,activation:l.serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:g.serializeInitializer(this.kernelInitializer),recurrentInitializer:g.serializeInitializer(this.recurrentInitializer),
biasInitializer:g.serializeInitializer(this.biasInitializer),kernelRegularizer:v.serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:v.serializeRegularizer(this.recurrentRegularizer),biasRegularizer:v.serializeRegularizer(this.biasRegularizer),activityRegularizer:v.serializeRegularizer(this.activityRegularizer),kernelConstraint:h.serializeConstraint(this.kernelConstraint),recurrentConstraint:h.serializeConstraint(this.recurrentConstraint),biasConstraint:h.serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="SimpleRNNCell",t}(_);t.SimpleRNNCell=N,u.serialization.SerializationMap.register(N);var T=function(e){function t(t){var n=this;return t.cell=new N(t),n=e.call(this,t)||this}return i(t,e),t.prototype.call=function(t,n){var r=this;return u.tidy(function(){null!=r.cell.dropoutMask&&(s.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(s.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,i=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:o,initialState:i})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:l.serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:g.serializeInitializer(this.kernelInitializer),recurrentInitializer:g.serializeInitializer(this.recurrentInitializer),biasInitializer:g.serializeInitializer(this.biasInitializer),kernelRegularizer:v.serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:v.serializeRegularizer(this.recurrentRegularizer),biasRegularizer:v.serializeRegularizer(this.biasRegularizer),activityRegularizer:v.serializeRegularizer(this.activityRegularizer),kernelConstraint:h.serializeConstraint(this.kernelConstraint),recurrentConstraint:h.serializeConstraint(this.recurrentConstraint),biasConstraint:h.serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.className="SimpleRNN",t}(S);t.SimpleRNN=T,u.serialization.SerializationMap.register(T);var k=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=l.getActivation(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=l.getActivation(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=g.getInitializer(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=g.getInitializer(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=g.getInitializer(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=v.getRegularizer(t.kernelRegularizer),n.recurrentRegularizer=v.getRegularizer(t.recurrentRegularizer),n.biasRegularizer=v.getRegularizer(t.biasRegularizer),n.kernelConstraint=h.getConstraint(t.kernelConstraint),n.recurrentConstraint=h.getConstraint(t.recurrentConstraint),n.biasConstraint=h.getConstraint(t.biasConstraint),n.dropout=y.min([1,y.max([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=y.min([1,y.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return i(t,e),t.prototype.build=function(e){e=b.getExactlyOneShape(e);var t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return u.tidy(function(){if(e=e,2!==e.length)throw new m.ValueError("GRUCell expects 2 input Tensors (inputs, h, c), got "+(e.length+"."));var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=o(function(){return s.onesLike(e)},n.dropout,r,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=o(function(){return s.onesLike(a)},n.recurrentDropout,r,3));var i,u,l,h=n.dropoutMask,d=n.recurrentDropoutMask;if(1===n.implementation){var f=p.sliceAlongLastAxis(n.kernel.read(),0,n.units),g=p.sliceAlongLastAxis(n.kernel.read(),n.units,n.units),v=p.sliceAlongLastAxis(n.kernel.read(),2*n.units,n.units),y=p.sliceAlongLastAxis(n.recurrentKernel.read(),0,n.units),b=p.sliceAlongLastAxis(n.recurrentKernel.read(),n.units,n.units),x=p.sliceAlongLastAxis(n.recurrentKernel.read(),2*n.units,n.units),w=void 0,S=void 0,_=void 0;0<n.dropout&&n.dropout<1?(w=s.mul(e,h[0]),S=s.mul(e,h[1]),_=s.mul(e,h[2])):(w=e,S=e,_=e);var N=p.dot(w,f),T=p.dot(S,g),k=p.dot(_,v);if(n.useBias){var I=p.sliceAlongFirstAxis(n.bias.read(),0,n.units),E=p.sliceAlongFirstAxis(n.bias.read(),n.units,n.units),A=p.sliceAlongFirstAxis(n.bias.read(),2*n.units,n.units);N=p.biasAdd(N,I),T=p.biasAdd(T,E),k=p.biasAdd(k,A)}var P=void 0,C=void 0,O=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(P=s.mul(a,d[0]),C=s.mul(a,d[1]),O=s.mul(a,d[2])):(P=a,C=a,O=a),i=n.recurrentActivation.apply(s.add(N,p.dot(P,y))),u=n.recurrentActivation.apply(s.add(T,p.dot(C,b))),l=n.activation.apply(s.add(k,p.dot(s.mul(u,O),x)))}else{0<n.dropout&&n.dropout<1&&(e=s.mul(e,h[0]));var M=p.dot(e,n.kernel.read());n.useBias&&(M=p.biasAdd(M,n.bias.read())),0<n.dropout&&n.dropout<1&&(a=s.mul(a,d[0]));var D=p.dot(a,p.sliceAlongLastAxis(n.recurrentKernel.read(),0,2*n.units)),N=p.sliceAlongLastAxis(M,0,n.units),T=p.sliceAlongLastAxis(M,n.units,n.units),R=p.sliceAlongLastAxis(D,0,n.units),z=p.sliceAlongLastAxis(D,n.units,n.units);i=n.recurrentActivation.apply(s.add(N,R)),u=n.recurrentActivation.apply(s.add(T,z));var k=p.sliceAlongLastAxis(M,2*n.units,n.units),L=p.dot(s.mul(u,a),p.sliceAlongLastAxis(n.recurrentKernel.read(),2*n.units,n.units));l=n.activation.apply(s.add(k,L))}var V=s.add(s.mul(i,a),s.mul(s.add(c.getScalar(1),s.neg(i)),l));return[V,V]})},t.prototype.getConfig=function(){var t={units:this.units,activation:l.serializeActivation(this.activation),recurrentActivation:l.serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:g.serializeInitializer(this.kernelInitializer),recurrentInitializer:g.serializeInitializer(this.recurrentInitializer),biasInitializer:g.serializeInitializer(this.biasInitializer),kernelRegularizer:v.serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:v.serializeRegularizer(this.recurrentRegularizer),biasRegularizer:v.serializeRegularizer(this.biasRegularizer),activityRegularizer:v.serializeRegularizer(this.activityRegularizer),kernelConstraint:h.serializeConstraint(this.kernelConstraint),recurrentConstraint:h.serializeConstraint(this.recurrentConstraint),biasConstraint:h.serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="GRUCell",t}(_);t.GRUCell=k,u.serialization.SerializationMap.register(k);var I=function(e){function t(t){var n=this;return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new k(t),n=e.call(this,t)||this}return i(t,e),t.prototype.call=function(t,n){var r=this;return u.tidy(function(){null!=r.cell.dropoutMask&&(s.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(s.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,i=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:o,initialState:i})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:l.serializeActivation(this.activation),recurrentActivation:l.serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:g.serializeInitializer(this.kernelInitializer),recurrentInitializer:g.serializeInitializer(this.recurrentInitializer),biasInitializer:g.serializeInitializer(this.biasInitializer),kernelRegularizer:v.serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:v.serializeRegularizer(this.recurrentRegularizer),biasRegularizer:v.serializeRegularizer(this.biasRegularizer),activityRegularizer:v.serializeRegularizer(this.activityRegularizer),kernelConstraint:h.serializeConstraint(this.kernelConstraint),recurrentConstraint:h.serializeConstraint(this.recurrentConstraint),biasConstraint:h.serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t.className="GRU",t}(S);t.GRU=I,u.serialization.SerializationMap.register(I);var E=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,n.activation=l.getActivation(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=l.getActivation(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=g.getInitializer(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=g.getInitializer(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=g.getInitializer(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=t.unitForgetBias,n.kernelRegularizer=v.getRegularizer(t.kernelRegularizer),n.recurrentRegularizer=v.getRegularizer(t.recurrentRegularizer),n.biasRegularizer=v.getRegularizer(t.biasRegularizer),n.kernelConstraint=h.getConstraint(t.kernelConstraint),n.recurrentConstraint=h.getConstraint(t.recurrentConstraint),n.biasConstraint=h.getConstraint(t.biasConstraint),n.dropout=y.min([1,y.max([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=y.min([1,y.max([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return i(t,e),t.prototype.build=function(e){e=b.getExactlyOneShape(e);var t=e[e.length-1];this.kernel=this.addWeight("kernel",[t,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);var n;if(this.useBias){if(this.unitForgetBias){var r=this.biasInitializer,a=this.units;n=new(o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.apply=function(e,t){var n=r.apply([a]),o=(new g.Ones).apply([a]),i=r.apply([2*a]);return p.concatAlongFirstAxis(p.concatAlongFirstAxis(n,o),i)},t}(g.Initializer),o.className="CustomInit",o)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0;var o},t.prototype.call=function(e,t){var n=this;return u.tidy(function(){var r=null!=t.training&&t.training;if(e=e,3!==e.length)throw new m.ValueError("LSTMCell expects 3 input Tensors (inputs, h, c), got "+(e.length+"."));var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=o(function(){return s.onesLike(e)},n.dropout,r,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=o(function(){return s.onesLike(a)},n.recurrentDropout,r,4));var u,l,c,h,d=n.dropoutMask,f=n.recurrentDropoutMask;if(1===n.implementation){var g=p.sliceAlongLastAxis(n.kernel.read(),0,n.units),v=p.sliceAlongLastAxis(n.kernel.read(),n.units,n.units),y=p.sliceAlongLastAxis(n.kernel.read(),2*n.units,n.units),b=p.sliceAlongLastAxis(n.kernel.read(),3*n.units,n.units),x=p.sliceAlongLastAxis(n.recurrentKernel.read(),0,n.units),w=p.sliceAlongLastAxis(n.recurrentKernel.read(),n.units,n.units),S=p.sliceAlongLastAxis(n.recurrentKernel.read(),2*n.units,n.units),_=p.sliceAlongLastAxis(n.recurrentKernel.read(),3*n.units,n.units),N=void 0,T=void 0,k=void 0,I=void 0;0<n.dropout&&n.dropout<1?(N=s.mul(e,d[0]),T=s.mul(e,d[1]),k=s.mul(e,d[2]),I=s.mul(e,d[3])):(N=e,T=e,k=e,I=e);var E=p.dot(N,g),A=p.dot(T,v),P=p.dot(k,y),C=p.dot(I,b);if(n.useBias){var O=p.sliceAlongFirstAxis(n.bias.read(),0,n.units),M=p.sliceAlongFirstAxis(n.bias.read(),n.units,n.units),D=p.sliceAlongFirstAxis(n.bias.read(),2*n.units,n.units),R=p.sliceAlongFirstAxis(n.bias.read(),3*n.units,n.units);E=p.biasAdd(E,O),A=p.biasAdd(A,M),P=p.biasAdd(P,D),C=p.biasAdd(C,R)}var z=void 0,L=void 0,V=void 0,F=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(z=s.mul(a,f[0]),L=s.mul(a,f[1]),V=s.mul(a,f[2]),F=s.mul(a,f[3])):(z=a,L=a,V=a,F=a),u=n.recurrentActivation.apply(s.add(E,p.dot(z,x))),l=n.recurrentActivation.apply(s.add(A,p.dot(L,w))),c=s.add(s.mul(l,i),s.mul(u,n.activation.apply(s.add(P,p.dot(V,S))))),h=n.recurrentActivation.apply(s.add(C,p.dot(F,_)))}else{0<n.dropout&&n.dropout<1&&(e=s.mul(e,d[0]));var B=p.dot(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=s.mul(a,f[0])),B=s.add(B,p.dot(a,n.recurrentKernel.read())),n.useBias&&(B=p.biasAdd(B,n.bias.read()));var j=p.sliceAlongLastAxis(B,0,n.units),U=p.sliceAlongLastAxis(B,n.units,n.units),W=p.sliceAlongLastAxis(B,2*n.units,n.units),G=p.sliceAlongLastAxis(B,3*n.units,n.units);u=n.recurrentActivation.apply(j),l=n.recurrentActivation.apply(U),c=s.add(s.mul(l,i),s.mul(u,n.activation.apply(W))),h=n.recurrentActivation.apply(G)}var H=s.mul(h,n.activation.apply(c));return[H,H,c]})},t.prototype.getConfig=function(){var t={units:this.units,activation:l.serializeActivation(this.activation),recurrentActivation:l.serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:g.serializeInitializer(this.kernelInitializer),recurrentInitializer:g.serializeInitializer(this.recurrentInitializer),biasInitializer:g.serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:v.serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:v.serializeRegularizer(this.recurrentRegularizer),biasRegularizer:v.serializeRegularizer(this.biasRegularizer),activityRegularizer:v.serializeRegularizer(this.activityRegularizer),kernelConstraint:h.serializeConstraint(this.kernelConstraint),recurrentConstraint:h.serializeConstraint(this.recurrentConstraint),biasConstraint:h.serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LSTMCell",t}(_);t.LSTMCell=E,u.serialization.SerializationMap.register(E);var A=function(e){function t(t){var n=this;return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new E(t),n=e.call(this,t)||this}return i(t,e),t.prototype.call=function(t,n){var r=this;return u.tidy(function(){null!=r.cell.dropoutMask&&(s.dispose(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&(s.dispose(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,i=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:o,initialState:i})})},Object.defineProperty(t.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={units:this.units,activation:l.serializeActivation(this.activation),recurrentActivation:l.serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:g.serializeInitializer(this.kernelInitializer),recurrentInitializer:g.serializeInitializer(this.recurrentInitializer),biasInitializer:g.serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:v.serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:v.serializeRegularizer(this.recurrentRegularizer),biasRegularizer:v.serializeRegularizer(this.biasRegularizer),activityRegularizer:v.serializeRegularizer(this.activityRegularizer),kernelConstraint:h.serializeConstraint(this.kernelConstraint),recurrentConstraint:h.serializeConstraint(this.recurrentConstraint),biasConstraint:h.serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=e.prototype.getConfig.call(this);return delete n.cell,Object.assign(t,n),t},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t.className="LSTM",t}(S);t.LSTM=A,u.serialization.SerializationMap.register(A);var P=function(e){function t(t){var n=e.call(this,t)||this;return n.cells=t.cells,n}return i(t,e),Object.defineProperty(t.prototype,"stateSize",{get:function(){for(var e=[],t=0,n=this.cells.slice().reverse();t<n.length;t++){var r=n[t];Array.isArray(r.stateSize)?e.push.apply(e,r.stateSize):e.push(r.stateSize)}return e},enumerable:!0,configurable:!0}),t.prototype.call=function(e,t){var n=this;return u.tidy(function(){e=e;for(var r=e.slice(1),a=[],o=0,i=n.cells.slice().reverse();o<i.length;o++){var s=i[o];Array.isArray(s.stateSize)?a.push(r.splice(0,s.stateSize.length)):a.push(r.splice(0,1))}a.reverse();for(var u,l=[],c=0;c<n.cells.length;++c){var s=n.cells[c];r=a[c],u=0===c?[e[0]].concat(r):[u[0]].concat(r),u=s.call(u,t),l.push(u.slice(1))}r=[];for(var p=0,h=l.slice().reverse();p<h.length;p++){var d=h[p];r.push.apply(r,d)}return[u[0]].concat(r)})},t.prototype.build=function(e){b.isArrayOfShapes(e)&&(e=e[0]),e=e;for(var t,n=0,r=this.cells;n<r.length;n++){var a=r[n];a.build(e),t=Array.isArray(a.stateSize)?a.stateSize[0]:a.stateSize,e=[e[0],t]}this.built=!0},t.prototype.getConfig=function(){for(var t=[],n=0,r=this.cells;n<r.length;n++){var a=r[n];t.push({className:this.getClassName(),config:a.getConfig()})}var o={cells:t},i=e.prototype.getConfig.call(this);return Object.assign(o,i),o},t.fromConfig=function(e,t,n){void 0===n&&(n={});for(var r=[],a=0,o=t.cells;a<o.length;a++){var i=o[a];r.push(w.deserialize(i,n))}return new e({cells:r})},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.nonTrainableWeights)}if(!this.trainable){for(var a=[],o=0,i=this.cells;o<i.length;o++){var r=i[o];a.push.apply(a,r.trainableWeights)}return a.concat(e)}return e},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){for(var e=[],t=0,n=this.cells;t<n.length;t++){var r=n[t];e.push.apply(e,r.weights)}return x.batchGetValue(e)},t.prototype.setWeights=function(e){for(var t=[],n=0,r=this.cells;n<r.length;n++)for(var a=r[n],o=a.weights.length,i=e.splice(o),s=0;s<a.weights.length;++s)t.push([a.weights[s],i[s]]);x.batchSetValue(t)},t.className="StackedRNNCells",t}(_);t.StackedRNNCells=P,u.serialization.SerializationMap.register(P)},function(e,t,n){"use strict";function r(e,t,n){if("number"==typeof e)return s.pyListRepeat(e,t);if(e.length!==t)throw new i.ValueError("The "+n+" argument must be a tuple of "+t+" integers. Received: "+(e.length+" elements."));for(var r=0;r<t;++r){var a=e[r];if(!u.isInteger(a))throw new i.ValueError("The "+n+" argument must be a tuple of "+t+" integers. Received: "+(JSON.stringify(e)+" including a non-integer number ")+(""+a))}return e}function a(e,t,n,r,a){if(void 0===a&&(a=1),null==e)return e;var o,i=t+(t-1)*(a-1);return o="same"===n?e:e-i+1,Math.floor((o+r-1)/r)}function o(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+u.max([n-t,0]);else{if("same"!==r)throw new i.ValueError("Unsupport padding mode: "+r+".");e*=t}return e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),s=n(13),u=n(41);t.normalizeArray=r,t.convOutputLength=a,t.deconvLength=o},,,,,,,,,function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(1)),r(n(187)),r(n(162));var a=n(1),o=n(187),i=n(162),s=n(520);t.version={"tfjs-core":a.version_core,"tfjs-layers":o.version_layers,"tfjs-converter":i.version_converter,tfjs:s.version}},,,,,,,,,,function(e,t,n){"use strict";var r=n(560),a=r.Reader,o=r.util,i=r.roots.default||(r.roots.default={});i.tensorflow=function(){var e={};return e.Any=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.typeUrl="",e.prototype.value=o.newBuffer([]),e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.Any;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.typeUrl=e.string();break;case 2:r.value=e.bytes();break;default:e.skipType(7&o)}}return r},e}(),e.DataType=function(){var e={},t=Object.create(e);return t[e[0]="DT_INVALID"]=0,t[e[1]="DT_FLOAT"]=1,t[e[2]="DT_DOUBLE"]=2,t[e[3]="DT_INT32"]=3,t[e[4]="DT_UINT8"]=4,t[e[5]="DT_INT16"]=5,t[e[6]="DT_INT8"]=6,t[e[7]="DT_STRING"]=7,t[e[8]="DT_COMPLEX64"]=8,t[e[9]="DT_INT64"]=9,t[e[10]="DT_BOOL"]=10,t[e[11]="DT_QINT8"]=11,t[e[12]="DT_QUINT8"]=12,t[e[13]="DT_QINT32"]=13,t[e[14]="DT_BFLOAT16"]=14,t[e[101]="DT_FLOAT_REF"]=101,t[e[102]="DT_DOUBLE_REF"]=102,t[e[103]="DT_INT32_REF"]=103,t[e[104]="DT_UINT8_REF"]=104,t[e[105]="DT_INT16_REF"]=105,t[e[106]="DT_INT8_REF"]=106,t[e[107]="DT_STRING_REF"]=107,t[e[108]="DT_COMPLEX64_REF"]=108,t[e[109]="DT_INT64_REF"]=109,t[e[110]="DT_BOOL_REF"]=110,t[e[111]="DT_QINT8_REF"]=111,t[e[112]="DT_QUINT8_REF"]=112,t[e[113]="DT_QINT32_REF"]=113,t[e[114]="DT_BFLOAT16_REF"]=114,t}(),e.TensorShape=function(){function e(e){if(this.dim=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dim=o.emptyArray,e.prototype.unknownRank=!1,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.TensorShape;e.pos<n;){var o=e.uint32();switch(o>>>3){case 2:r.dim&&r.dim.length||(r.dim=[]),r.dim.push(i.tensorflow.TensorShape.Dim.decode(e,e.uint32()));break;case 3:r.unknownRank=e.bool();break;default:e.skipType(7&o)}}return r},e.Dim=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.size=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.name="",e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.TensorShape.Dim;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.size=e.int64();break;case 2:r.name=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),e.Tensor=function(){function e(e){if(this.floatVal=[],this.doubleVal=[],this.intVal=[],this.stringVal=[],this.scomplexVal=[],this.int64Val=[],this.boolVal=[],this.uint32Val=[],this.uint64Val=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.dtype=0,e.prototype.tensorShape=null,e.prototype.versionNumber=0,e.prototype.tensorContent=o.newBuffer([]),e.prototype.floatVal=o.emptyArray,e.prototype.doubleVal=o.emptyArray,e.prototype.intVal=o.emptyArray,e.prototype.stringVal=o.emptyArray,e.prototype.scomplexVal=o.emptyArray,e.prototype.int64Val=o.emptyArray,e.prototype.boolVal=o.emptyArray,e.prototype.uint32Val=o.emptyArray,e.prototype.uint64Val=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.Tensor;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.dtype=e.int32();break;case 2:r.tensorShape=i.tensorflow.TensorShape.decode(e,e.uint32());break;case 3:r.versionNumber=e.int32();break;case 4:r.tensorContent=e.bytes();break;case 5:if(r.floatVal&&r.floatVal.length||(r.floatVal=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.floatVal.push(e.float());else r.floatVal.push(e.float());break;case 6:if(r.doubleVal&&r.doubleVal.length||(r.doubleVal=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.doubleVal.push(e.double());else r.doubleVal.push(e.double());break;case 7:if(r.intVal&&r.intVal.length||(r.intVal=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.intVal.push(e.int32());else r.intVal.push(e.int32());break;case 8:r.stringVal&&r.stringVal.length||(r.stringVal=[]),r.stringVal.push(e.bytes());break;case 9:if(r.scomplexVal&&r.scomplexVal.length||(r.scomplexVal=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.scomplexVal.push(e.float());else r.scomplexVal.push(e.float());break;case 10:if(r.int64Val&&r.int64Val.length||(r.int64Val=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.int64Val.push(e.int64());else r.int64Val.push(e.int64());break;case 11:if(r.boolVal&&r.boolVal.length||(r.boolVal=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.boolVal.push(e.bool());else r.boolVal.push(e.bool());break;case 16:if(r.uint32Val&&r.uint32Val.length||(r.uint32Val=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.uint32Val.push(e.uint32());else r.uint32Val.push(e.uint32());
break;case 17:if(r.uint64Val&&r.uint64Val.length||(r.uint64Val=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.uint64Val.push(e.uint64());else r.uint64Val.push(e.uint64());break;default:e.skipType(7&o)}}return r},e}(),e.AttrValue=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}e.prototype.list=null,e.prototype.s=o.newBuffer([]),e.prototype.i=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.f=0,e.prototype.b=!1,e.prototype.type=0,e.prototype.shape=null,e.prototype.tensor=null,e.prototype.placeholder="",e.prototype.func=null;var t;return Object.defineProperty(e.prototype,"value",{get:o.oneOfGetter(t=["list","s","i","f","b","type","shape","tensor","placeholder","func"]),set:o.oneOfSetter(t)}),e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.AttrValue;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.list=i.tensorflow.AttrValue.ListValue.decode(e,e.uint32());break;case 2:r.s=e.bytes();break;case 3:r.i=e.int64();break;case 4:r.f=e.float();break;case 5:r.b=e.bool();break;case 6:r.type=e.int32();break;case 7:r.shape=i.tensorflow.TensorShape.decode(e,e.uint32());break;case 8:r.tensor=i.tensorflow.Tensor.decode(e,e.uint32());break;case 9:r.placeholder=e.string();break;case 10:r.func=i.tensorflow.NameAttrList.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.ListValue=function(){function e(e){if(this.s=[],this.i=[],this.f=[],this.b=[],this.type=[],this.shape=[],this.tensor=[],this.func=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.s=o.emptyArray,e.prototype.i=o.emptyArray,e.prototype.f=o.emptyArray,e.prototype.b=o.emptyArray,e.prototype.type=o.emptyArray,e.prototype.shape=o.emptyArray,e.prototype.tensor=o.emptyArray,e.prototype.func=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.AttrValue.ListValue;e.pos<n;){var o=e.uint32();switch(o>>>3){case 2:r.s&&r.s.length||(r.s=[]),r.s.push(e.bytes());break;case 3:if(r.i&&r.i.length||(r.i=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.i.push(e.int64());else r.i.push(e.int64());break;case 4:if(r.f&&r.f.length||(r.f=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.f.push(e.float());else r.f.push(e.float());break;case 5:if(r.b&&r.b.length||(r.b=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.b.push(e.bool());else r.b.push(e.bool());break;case 6:if(r.type&&r.type.length||(r.type=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.type.push(e.int32());else r.type.push(e.int32());break;case 7:r.shape&&r.shape.length||(r.shape=[]),r.shape.push(i.tensorflow.TensorShape.decode(e,e.uint32()));break;case 8:r.tensor&&r.tensor.length||(r.tensor=[]),r.tensor.push(i.tensorflow.Tensor.decode(e,e.uint32()));break;case 9:r.func&&r.func.length||(r.func=[]),r.func.push(i.tensorflow.NameAttrList.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e}(),e.NameAttrList=function(){function e(e){if(this.attr={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.attr=o.emptyObject,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,r=void 0===t?e.len:e.pos+t,s=new i.tensorflow.NameAttrList;e.pos<r;){var u=e.uint32();switch(u>>>3){case 1:s.name=e.string();break;case 2:e.skip().pos++,s.attr===o.emptyObject&&(s.attr={}),n=e.string(),e.pos++,s.attr[n]=i.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&u)}}return s},e}(),e.NodeDef=function(){function e(e){if(this.input=[],this.attr={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.op="",e.prototype.input=o.emptyArray,e.prototype.device="",e.prototype.attr=o.emptyObject,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,r=void 0===t?e.len:e.pos+t,s=new i.tensorflow.NodeDef;e.pos<r;){var u=e.uint32();switch(u>>>3){case 1:s.name=e.string();break;case 2:s.op=e.string();break;case 3:s.input&&s.input.length||(s.input=[]),s.input.push(e.string());break;case 4:s.device=e.string();break;case 5:e.skip().pos++,s.attr===o.emptyObject&&(s.attr={}),n=e.string(),e.pos++,s.attr[n]=i.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&u)}}return s},e}(),e.VersionDef=function(){function e(e){if(this.badConsumers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.producer=0,e.prototype.minConsumer=0,e.prototype.badConsumers=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.VersionDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.producer=e.int32();break;case 2:r.minConsumer=e.int32();break;case 3:if(r.badConsumers&&r.badConsumers.length||(r.badConsumers=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.badConsumers.push(e.int32());else r.badConsumers.push(e.int32());break;default:e.skipType(7&o)}}return r},e}(),e.GraphDef=function(){function e(e){if(this.node=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.node=o.emptyArray,e.prototype.versions=null,e.prototype.library=null,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.GraphDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push(i.tensorflow.NodeDef.decode(e,e.uint32()));break;case 4:r.versions=i.tensorflow.VersionDef.decode(e,e.uint32());break;case 2:r.library=i.tensorflow.FunctionDefLibrary.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),e.CollectionDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}e.prototype.nodeList=null,e.prototype.bytesList=null,e.prototype.int64List=null,e.prototype.floatList=null,e.prototype.anyList=null;var t;return Object.defineProperty(e.prototype,"kind",{get:o.oneOfGetter(t=["nodeList","bytesList","int64List","floatList","anyList"]),set:o.oneOfSetter(t)}),e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.CollectionDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.nodeList=i.tensorflow.CollectionDef.NodeList.decode(e,e.uint32());break;case 2:r.bytesList=i.tensorflow.CollectionDef.BytesList.decode(e,e.uint32());break;case 3:r.int64List=i.tensorflow.CollectionDef.Int64List.decode(e,e.uint32());break;case 4:r.floatList=i.tensorflow.CollectionDef.FloatList.decode(e,e.uint32());break;case 5:r.anyList=i.tensorflow.CollectionDef.AnyList.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.NodeList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.CollectionDef.NodeList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(e.string());break;default:e.skipType(7&o)}}return r},e}(),e.BytesList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.CollectionDef.BytesList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(e.bytes());break;default:e.skipType(7&o)}}return r},e}(),e.Int64List=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.CollectionDef.Int64List;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.value.push(e.int64());else r.value.push(e.int64());break;default:e.skipType(7&o)}}return r},e}(),e.FloatList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.CollectionDef.FloatList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2===(7&o))for(var s=e.uint32()+e.pos;e.pos<s;)r.value.push(e.float());else r.value.push(e.float());break;default:e.skipType(7&o)}}return r},e}(),e.AnyList=function(){function e(e){if(this.value=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.CollectionDef.AnyList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(i.tensorflow.Any.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e}(),e.SaverDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.filenameTensorName="",e.prototype.saveTensorName="",e.prototype.restoreOpName="",e.prototype.maxToKeep=0,e.prototype.sharded=!1,e.prototype.keepCheckpointEveryNHours=0,e.prototype.version=0,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.SaverDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.filenameTensorName=e.string();break;case 2:r.saveTensorName=e.string();break;case 3:r.restoreOpName=e.string();break;case 4:r.maxToKeep=e.int32();break;case 5:r.sharded=e.bool();break;case 6:r.keepCheckpointEveryNHours=e.float();break;case 7:r.version=e.int32();break;default:e.skipType(7&o)}}return r},e.CheckpointFormatVersion=function(){var e={},t=Object.create(e);return t[e[0]="LEGACY"]=0,t[e[1]="V1"]=1,t[e[2]="V2"]=2,t}(),e}(),e.TensorInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}e.prototype.name="",e.prototype.cooSparse=null,e.prototype.dtype=0,e.prototype.tensorShape=null;var t;return Object.defineProperty(e.prototype,"encoding",{get:o.oneOfGetter(t=["name","cooSparse"]),set:o.oneOfSetter(t)}),e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.TensorInfo;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 4:r.cooSparse=i.tensorflow.TensorInfo.CooSparse.decode(e,e.uint32());break;case 2:r.dtype=e.int32();break;case 3:r.tensorShape=i.tensorflow.TensorShape.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e.CooSparse=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.valuesTensorName="",e.prototype.indicesTensorName="",e.prototype.denseShapeTensorName="",e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.TensorInfo.CooSparse;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.valuesTensorName=e.string();break;case 2:r.indicesTensorName=e.string();break;case 3:r.denseShapeTensorName=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),e.SignatureDef=function(){function e(e){if(this.inputs={},this.outputs={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.inputs=o.emptyObject,e.prototype.outputs=o.emptyObject,e.prototype.methodName="",e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,r=void 0===t?e.len:e.pos+t,s=new i.tensorflow.SignatureDef;e.pos<r;){var u=e.uint32();switch(u>>>3){case 1:e.skip().pos++,s.inputs===o.emptyObject&&(s.inputs={}),n=e.string(),e.pos++,s.inputs[n]=i.tensorflow.TensorInfo.decode(e,e.uint32());break;case 2:e.skip().pos++,s.outputs===o.emptyObject&&(s.outputs={}),n=e.string(),e.pos++,s.outputs[n]=i.tensorflow.TensorInfo.decode(e,e.uint32());break;case 3:s.methodName=e.string();break;default:e.skipType(7&u)}}return s},e}(),e.AssetFileDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.tensorInfo=null,e.prototype.filename="",e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.AssetFileDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.tensorInfo=i.tensorflow.TensorInfo.decode(e,e.uint32());break;case 2:r.filename=e.string();break;default:e.skipType(7&o)}}return r},e}(),e.OpDef=function(){function e(e){if(this.inputArg=[],this.outputArg=[],this.attr=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.inputArg=o.emptyArray,e.prototype.outputArg=o.emptyArray,e.prototype.attr=o.emptyArray,e.prototype.deprecation=null,e.prototype.summary="",e.prototype.description="",e.prototype.isCommutative=!1,e.prototype.isAggregate=!1,e.prototype.isStateful=!1,e.prototype.allowsUninitializedInput=!1,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.OpDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 2:r.inputArg&&r.inputArg.length||(r.inputArg=[]),r.inputArg.push(i.tensorflow.OpDef.ArgDef.decode(e,e.uint32()));break;case 3:r.outputArg&&r.outputArg.length||(r.outputArg=[]),r.outputArg.push(i.tensorflow.OpDef.ArgDef.decode(e,e.uint32()));break;case 4:r.attr&&r.attr.length||(r.attr=[]),r.attr.push(i.tensorflow.OpDef.AttrDef.decode(e,e.uint32()));break;case 8:r.deprecation=i.tensorflow.OpDef.OpDeprecation.decode(e,e.uint32());break;case 5:r.summary=e.string();break;case 6:r.description=e.string();break;case 18:r.isCommutative=e.bool();break;case 16:r.isAggregate=e.bool();break;case 17:r.isStateful=e.bool();break;case 19:r.allowsUninitializedInput=e.bool();break;default:e.skipType(7&o)}}return r},e.ArgDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.description="",e.prototype.type=0,e.prototype.typeAttr="",e.prototype.numberAttr="",e.prototype.typeListAttr="",e.prototype.isRef=!1,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.OpDef.ArgDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 2:r.description=e.string();break;case 3:r.type=e.int32();break;case 4:r.typeAttr=e.string();break;case 5:r.numberAttr=e.string();break;case 6:r.typeListAttr=e.string();break;case 16:r.isRef=e.bool();break;default:e.skipType(7&o)}}return r},e}(),e.AttrDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.name="",e.prototype.type="",e.prototype.defaultValue=null,e.prototype.description="",e.prototype.hasMinimum=!1,e.prototype.minimum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.allowedValues=null,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.OpDef.AttrDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.name=e.string();break;case 2:r.type=e.string();break;case 3:r.defaultValue=i.tensorflow.AttrValue.decode(e,e.uint32());break;case 4:r.description=e.string();break;case 5:r.hasMinimum=e.bool();break;case 6:r.minimum=e.int64();break;case 7:r.allowedValues=i.tensorflow.AttrValue.decode(e,e.uint32());break;default:e.skipType(7&o)}}return r},e}(),e.OpDeprecation=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.explanation="",e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.OpDef.OpDeprecation;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.version=e.int32();break;case 2:r.explanation=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),e.OpList=function(){function e(e){if(this.op=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.op=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.OpList;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.op&&r.op.length||(r.op=[]),r.op.push(i.tensorflow.OpDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.MetaGraphDef=function(){function e(e){if(this.collectionDef={},this.signatureDef={},this.assetFileDef=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metaInfoDef=null,e.prototype.graphDef=null,e.prototype.saverDef=null,e.prototype.collectionDef=o.emptyObject,e.prototype.signatureDef=o.emptyObject,e.prototype.assetFileDef=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,r=void 0===t?e.len:e.pos+t,s=new i.tensorflow.MetaGraphDef;e.pos<r;){var u=e.uint32();switch(u>>>3){case 1:s.metaInfoDef=i.tensorflow.MetaGraphDef.MetaInfoDef.decode(e,e.uint32());break;case 2:s.graphDef=i.tensorflow.GraphDef.decode(e,e.uint32());break;case 3:s.saverDef=i.tensorflow.SaverDef.decode(e,e.uint32());break;case 4:e.skip().pos++,s.collectionDef===o.emptyObject&&(s.collectionDef={}),n=e.string(),e.pos++,s.collectionDef[n]=i.tensorflow.CollectionDef.decode(e,e.uint32());break;case 5:e.skip().pos++,s.signatureDef===o.emptyObject&&(s.signatureDef={}),n=e.string(),e.pos++,s.signatureDef[n]=i.tensorflow.SignatureDef.decode(e,e.uint32());break;case 6:s.assetFileDef&&s.assetFileDef.length||(s.assetFileDef=[]),s.assetFileDef.push(i.tensorflow.AssetFileDef.decode(e,e.uint32()));break;default:e.skipType(7&u)}}return s},e.MetaInfoDef=function(){function e(e){if(this.tags=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.metaGraphVersion="",e.prototype.strippedOpList=null,e.prototype.anyInfo=null,e.prototype.tags=o.emptyArray,e.prototype.tensorflowVersion="",e.prototype.tensorflowGitVersion="",e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.MetaGraphDef.MetaInfoDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.metaGraphVersion=e.string();break;case 2:r.strippedOpList=i.tensorflow.OpList.decode(e,e.uint32());break;case 3:r.anyInfo=i.tensorflow.Any.decode(e,e.uint32());break;case 4:r.tags&&r.tags.length||(r.tags=[]),r.tags.push(e.string());break;case 5:r.tensorflowVersion=e.string();break;case 6:r.tensorflowGitVersion=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),e.SavedModel=function(){function e(e){if(this.metaGraphs=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.savedModelSchemaVersion=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.metaGraphs=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.SavedModel;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.savedModelSchemaVersion=e.int64();break;case 2:r.metaGraphs&&r.metaGraphs.length||(r.metaGraphs=[]),r.metaGraphs.push(i.tensorflow.MetaGraphDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.FunctionDefLibrary=function(){function e(e){if(this.function=[],this.gradient=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.function=o.emptyArray,e.prototype.gradient=o.emptyArray,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.FunctionDefLibrary;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.function&&r.function.length||(r.function=[]),r.function.push(i.tensorflow.FunctionDef.decode(e,e.uint32()));break;case 2:r.gradient&&r.gradient.length||(r.gradient=[]),r.gradient.push(i.tensorflow.GradientDef.decode(e,e.uint32()));break;default:e.skipType(7&o)}}return r},e}(),e.FunctionDef=function(){function e(e){if(this.attr={},this.nodeDef=[],this.ret={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.signature=null,e.prototype.attr=o.emptyObject,e.prototype.nodeDef=o.emptyArray,e.prototype.ret=o.emptyObject,e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n,r=void 0===t?e.len:e.pos+t,s=new i.tensorflow.FunctionDef;e.pos<r;){var u=e.uint32();switch(u>>>3){case 1:s.signature=i.tensorflow.OpDef.decode(e,e.uint32());break;case 5:e.skip().pos++,s.attr===o.emptyObject&&(s.attr={}),n=e.string(),e.pos++,s.attr[n]=i.tensorflow.AttrValue.decode(e,e.uint32());break;case 3:s.nodeDef&&s.nodeDef.length||(s.nodeDef=[]),s.nodeDef.push(i.tensorflow.NodeDef.decode(e,e.uint32()));break;case 4:e.skip().pos++,s.ret===o.emptyObject&&(s.ret={}),n=e.string(),e.pos++,s.ret[n]=e.string();break;default:e.skipType(7&u)}}return s},e}(),e.GradientDef=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.functionName="",e.prototype.gradientFunc="",e.decode=function(e,t){e instanceof a||(e=a.create(e));for(var n=void 0===t?e.len:e.pos+t,r=new i.tensorflow.GradientDef;e.pos<n;){var o=e.uint32();switch(o>>>3){case 1:r.functionName=e.string();break;case 2:r.gradientFunc=e.string();break;default:e.skipType(7&o)}}return r},e}(),e}(),e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(391);t.FrozenModel=r.FrozenModel,t.loadFrozenModel=r.loadFrozenModel;var a=n(426);t.version_converter=a.version},function(e,t,n){"use strict";function r(e,t){return p.ENV.engine.tidy(e,t,!0)}function a(e){return d.assert(d.isFunction(e),"The f passed in grad(f) must be a function"),function(t,n){return d.assert(t instanceof h.Tensor,"The x passed in grad(f)(x) must be a tensor"),d.assert(null==n||n instanceof h.Tensor,"The dy passed in grad(f)(x, dy) must be a tensor"),p.ENV.engine.tidy(function(){var r=p.ENV.engine.gradients(function(){return e(t)},[t],n),a=r.value,o=r.grads;return null!=n&&d.assertShapesMatch(a.shape,n.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),c(o),o[0]})}}function o(e){return d.assert(d.isFunction(e),"The f passed in grads(f) must be a function"),function(t,n){return d.assert(Array.isArray(t)&&t.every(function(e){return e instanceof h.Tensor}),"The args passed in grads(f)(args) must be an array of tensors"),d.assert(null==n||n instanceof h.Tensor,"The dy passed in grads(f)(args, dy) must be a tensor"),p.ENV.engine.tidy(function(){var r=p.ENV.engine.gradients(function(){return e.apply(void 0,t)},t,n),a=r.value,o=r.grads;return null!=n&&d.assertShapesMatch(a.shape,n.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(o),o})}}function i(e){return d.assert(d.isFunction(e),"The f passed in valueAndGrad(f) must be a function"),function(t,n){d.assert(t instanceof h.Tensor,"The x passed in valueAndGrad(f)(x) must be a tensor"),d.assert(null==n||n instanceof h.Tensor,"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");var r=p.ENV.engine.gradients(function(){return e(t)},[t],n),a=r.grads,o=r.value;return c(a),{grad:a[0],value:o}}}function s(e){return d.assert(d.isFunction(e),"The f passed in valueAndGrads(f) must be a function"),function(t,n){d.assert(Array.isArray(t)&&t.every(function(e){return e instanceof h.Tensor}),"The args passed in valueAndGrads(f)(args) must be array of tensors"),d.assert(null==n||n instanceof h.Tensor,"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");var r=p.ENV.engine.gradients(function(){return e.apply(void 0,t)},t,n);return null!=n&&d.assertShapesMatch(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),c(r.grads),r}}function u(e,t){if(d.assert(d.isFunction(e),"The f passed in variableGrads(f) must be a function"),d.assert(null==t||Array.isArray(t)&&t.every(function(e){return e instanceof h.Variable}),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==t){t=[];for(var n in p.ENV.engine.registeredVariables)t.push(p.ENV.engine.registeredVariables[n])}var r=t.length;t=t.filter(function(e){return e.trainable}),d.assert(t.length>0,"variableGrads() expects at least one of the input variables to be "+("trainable, but none of the "+r+" variables is ")+"trainable.");var a=!0,o=p.ENV.engine.gradients(e,t,null,a),i=o.value,s=o.grads;d.assert(s.some(function(e){return null!=e}),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),d.assert(0===i.rank,"The f passed in variableGrads(f) must return a scalar, but it "+("returned a rank-"+i.rank+" tensor"));var u={};return t.forEach(function(e,t){null!=s[t]&&(u[e.name]=s[t])}),{value:i,grads:u}}function l(e){return p.ENV.engine.customGrad(e)}function c(e){var t=e.filter(function(e){return null==e}).length;if(t>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}Object.defineProperty(t,"__esModule",{value:!0});var p=n(4),h=n(18),d=n(2);t.gradScope=r,t.grad=a,t.grads=o,t.valueAndGrad=i,t.valueAndGrads=s,t.variableGrads=u,t.customGrad=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DTYPE_VALUE_SIZE_MAP={float32:4,int32:4,uint16:2,uint8:1,bool:1}},function(e,t,n){"use strict";function r(e,t){return o(this,void 0,void 0,function(){var n,r,a;return i(this,function(o){switch(o.label){case 0:return n=e.map(function(e){return fetch(e,t)}),[4,Promise.all(n)];case 1:return r=o.sent(),[4,Promise.all(r.map(function(e){return e.arrayBuffer()}))];case 2:return a=o.sent(),[2,a]}})})}function a(e,t,n,a){return void 0===t&&(t=""),o(this,void 0,void 0,function(){var o,c,p,h,d,f,m,g,v,y;return i(this,function(i){switch(i.label){case 0:if(o=e.map(function(){return!1}),c={},p=null!=n?n.map(function(){return!1}):[],h=[],e.forEach(function(e,t){var r=0;e.weights.forEach(function(e){var a="quantization"in e?e.quantization.dtype:e.dtype,i=l.DTYPE_VALUE_SIZE_MAP[a]*s.sizeFromShape(e.shape),u=function(){o[t]=!0,null==c[t]&&(c[t]=[]),c[t].push({manifestEntry:e,groupOffset:r,sizeBytes:i})};null!=n?n.forEach(function(t,n){t===e.name&&(u(),p[n]=!0)}):u(),h.push(e.name),r+=i})}),!p.every(function(e){return e}))throw d=n.filter(function(e,t){return!p[t]}),new Error("Could not find weights in manifest with names: "+(d.join(", ")+". \n")+"Manifest JSON has weights with names: "+(h.join(", ")+"."));return f=o.reduce(function(e,t,n){return t&&e.push(n),e},[]),m=[],f.forEach(function(n){e[n].paths.forEach(function(e){var n=t+(t.endsWith("/")?"":"/")+e;m.push(n)})}),[4,r(m,a)];case 1:return g=i.sent(),v={},y=0,f.forEach(function(t){for(var n=e[t].paths.length,r=0,a=0;a<n;a++)r+=g[y+a].byteLength;for(var o=new ArrayBuffer(r),i=new Uint8Array(o),s=0,l=0;l<n;l++){var p=new Uint8Array(g[y+l]);i.set(p,s),s+=p.byteLength}var h=c[t];h.forEach(function(e){var t=o.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=u.decodeWeights(t,[e.manifestEntry]);for(var r in n)v[r]=n[r]}),y+=n}),[2,v]}})})}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),u=n(66),l=n(164);t.loadWeightsAsArrayBuffer=r,t.loadWeights=a},function(e,t,n){"use strict";function r(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=o.zeros(e.shape),a=e.toFloat(),u=n.complex(a,r);return r.dispose(),a.dispose(),u}if(!s.hasEncodingLoss(e.dtype,t))return i.Tensor.make(e.shape,{dataId:e.dataId},t);if("complex64"===e.dtype){var l=n.real(e),u=l.cast(t);return l.dispose(),u}if("int32"===t)return n.int(e);if("bool"===t){var c=o.scalar(0,e.dtype),u=n.notEqual(e,c);return c.dispose(),u}throw new Error("Error in Cast: unknown dtype argument ("+t+")")}function a(e,t){return i.Tensor.make(t,{dataId:e.dataId},e.dtype)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(10),i=n(18),s=n(2);t.castTensor=r,t.reshapeTensor=a},function(e,t,n){"use strict";function r(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}function a(e,t){return e instanceof Float32Array?e:new Float32Array(e)}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),u=n(24),l=n(175),c=n(176),p=n(34),h=n(92),d=n(183),f=n(488),m=n(131),g=n(185),v=n(10),y=n(18),b=n(94),x=n(2),w=n(2),S=n(166),_=n(168),N=n(125),T=n(169),k=n(170),I=n(438),E=n(439),A=n(440),P=n(171),C=n(171),O=n(172),M=n(172),D=n(441),R=n(442),z=n(443),L=n(444),V=n(445),F=n(447),B=n(446),j=n(448),U=n(449),W=n(450),G=n(451),H=n(452),q=n(173),Y=n(453),$=n(126),K=n(454),X=n(455),Z=n(456),J=n(457),Q=n(458),ee=n(459),te=n(460),ne=n(461),re=n(462),ae=n(463),oe=n(464),ie=n(465),se=n(466),ue=n(467),le=n(468),ce=n(469),pe=n(470),he=n(471),de=n(90),fe=n(472),me=n(473),ge=n(474),ve=n(174),ye=n(174),be=n(91),xe=n(127),we=300;
t.SIZE_UPLOAD_UNIFORM=32;var Se=function(){function e(e,t){if(void 0===t&&(t=!0),this.gpgpu=e,this.delayedStorage=t,this.texData=new WeakMap,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,s.ENV.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");s.ENV.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas")),null==e?(this.gpgpu=new q.GPGPUContext($.createWebGLContext(this.canvas)),this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,this.NUM_BYTES_BEFORE_PAGING=window.screen.height*window.screen.width*window.devicePixelRatio*we,this.textureManager=new fe.TextureManager(this.gpgpu)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:t,dtype:n,values:null,texture:null,complexTensors:null,texShape:null,usage:de.TextureUsage.RENDER})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.fromPixels() can not be null");var n=[e.height,e.width],r=[e.height,e.width,t];if(!(e instanceof HTMLVideoElement||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageData))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(e instanceof HTMLVideoElement){if(null==this.fromPixelsCanvas){if(!s.ENV.get("IS_BROWSER"))throw new Error("Can't read pixels from HTMLImageElement outside the browser.");if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixelsCanvas=document.createElement("canvas")}this.fromPixelsCanvas.width=e.width,this.fromPixelsCanvas.height=e.height,this.fromPixelsCanvas.getContext("2d").drawImage(e,0,0,e.width,e.height),e=this.fromPixelsCanvas}var a=y.Tensor.make(n,{},"int32");this.texData.get(a.dataId).usage=de.TextureUsage.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(a.dataId),e);var o=new G.FromPixelsProgram(r),i=this.compileAndRun(o,[a]);return a.dispose(),i},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null");this.throwIfNoData(e);var n=this.texData.get(e),r=n.texture,a=n.texShape,o=n.usage,i=n.dtype;if("complex64"===i)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");null!=r&&(this.releaseTexture(e,r,a,o),n.texture=null,n.texShape=null),n.usage=de.TextureUsage.UPLOAD,n.values=t,this.delayedStorage||this.uploadToGPU(e)},e.prototype.readSync=function(e){this.throwIfNoData(e);var t=this.texData.get(e),n=t.shape,r=t.texture,a=t.values,o=t.texShape,i=t.dtype,s=t.complexTensors;if(null!=a)return this.cacheOnCPU(e),a;var u,l=null!=this.activeTimers;l&&(u=performance.now());var c;if("complex64"===i){var p=s.real.dataSync(),h=s.imag.dataSync();c=_.mergeRealAndImagArrays(p,h)}else c=this.getValuesFromTexture(r,e,i,o,n);return l&&(this.downloadWaitMs+=performance.now()-u),this.cacheOnCPU(e,c),t.values},e.prototype.read=function(e){return o(this,void 0,void 0,function(){var t,n,r,a,o,u,l,c,p,h;return i(this,function(i){switch(i.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise(function(e){return t.push(e)})];if(this.throwIfNoData(e),n=this.texData.get(e),r=n.shape,a=n.texture,o=n.values,u=n.texShape,l=n.dtype,null!=o)return this.cacheOnCPU(e),[2,o];if(this.pendingRead.set(e,[]),!s.ENV.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===s.ENV.get("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return c=this.gpgpu.maybeCreateBufferFromTexture(a,u[0],u[1]),[4,this.gpgpu.createAndWaitForFence()];case 1:return i.sent(),p=c instanceof WebGLTexture?this.getValuesFromTexture(a,e,l,u,r):this.gpgpu.downloadFloat32MatrixFromBuffer(c,u[0],u[1]),this.cacheOnCPU(e,p),h=this.pendingRead.get(e),this.pendingRead.delete(e),h.forEach(function(e){return e(p)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,p]}})})},e.prototype.getValuesFromTexture=function(e,t,n,r,a){if(s.ENV.get("WEBGL_DOWNLOAD_FLOAT_ENABLED"))return this.gpgpu.downloadFloat32MatrixFromOutputTexture(e,r[0],r[1]);var o=y.Tensor.make(a,{});this.texData.get(o.dataId).usage=de.TextureUsage.DOWNLOAD;var i=y.Tensor.make(a,{dataId:t},n),u=new W.EncodeFloatProgram(a),l=!1;this.compileAndRun(u,[i],o,null,l);var c=this.texData.get(o.dataId),p=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(c.texture,c.texShape[0],c.texShape[1]);return i.dispose(),o.dispose(),p},e.prototype.time=function(e){return o(this,void 0,void 0,function(){var t,n,r,a,o,s;return i(this,function(i){switch(i.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),a=x.flatten(this.activeTimers),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(a).then(function(e){var t=0;return e.forEach(function(e){return t+=e}),t})];case 1:return o=i.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:o,wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}})})},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},e.prototype.endTimer=function(e){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=performance.now(),e)},e.prototype.getQueryTime=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){return s.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:(t=e,[2,t.endMs-t.startMs])})})},e.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return void this.pendingDisposal.add(e);if(this.texData.has(e)){var t=this.texData.get(e),n=t.texture,r=t.texShape,a=t.usage,o=t.complexTensors;null!=n&&this.releaseTexture(e,n,r,a),null!=o&&(o.real.dispose(),o.imag.dispose()),this.texData.delete(e)}}},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.getCanvas=function(){return this.canvas},e.prototype.complex=function(e,t){var n=y.Tensor.make(e.shape,{},"complex64"),r=this.texData.get(n.dataId);return r.complexTensors={real:s.ENV.engine.keep(e.clone()),imag:s.ENV.engine.keep(t.clone())},n},e.prototype.real=function(e){var t=this.texData.get(e.dataId);return t.complexTensors.real.clone()},e.prototype.imag=function(e){var t=this.texData.get(e.dataId);return t.complexTensors.imag.clone()},e.prototype.slice=function(e,t,n){var r=new pe.SliceProgram(n),a=r.getCustomSetupFunc(t);return this.compileAndRun(r,[e],null,a)},e.prototype.stridedSlice=function(e,t,n,r,a,o,i,s,u){var l=m.getStridedSlicedInfo(e.shape,t,n,r,a,o,i,s,u),c=l[0],p=l[1],h=l[2],d=p.filter(function(e,t){return h.indexOf(t)===-1});if(d.some(function(e){return 0===e}))return v.tensor([],d);var f=new he.StridedSliceProgram(c,r,p,h);return this.compileAndRun(f,[e])},e.prototype.reverse=function(e,t){var n=new ue.ReverseProgram(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.concat2Tensors=function(e,t,n){var r=h.computeOutShape([e.shape,t.shape],n),a=e.as2D(-1,w.sizeFromShape(e.shape.slice(n))),o=t.as2D(-1,w.sizeFromShape(t.shape.slice(n))),i=new R.ConcatProgram(a.shape,o.shape),s=this.compileAndRun(i,[a,o]);return s.reshape(r)},e.prototype.concat=function(e,t){if(1===e.length)return e[0];for(var n=e[0],r=1;r<e.length;++r)n=this.concat2Tensors(n,e[r],t);return n},e.prototype.neg=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.NEG);return this.compileAndRun(t,[e])},e.prototype.batchMatMul=function(e,t,n,r){var a=new J.MatMulProgram(e.shape,t.shape,n,r);return this.compileAndRun(a,[e,t])},e.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),a=new C.BinaryOpComplexProgram(P.COMPLEX_MULTIPLY.REAL,e.shape,t.shape),o=new C.BinaryOpComplexProgram(P.COMPLEX_MULTIPLY.IMAG,e.shape,t.shape),i=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag),this.makeComplexComponentTensorHandle(t,r.complexTensors.real),this.makeComplexComponentTensorHandle(t,r.complexTensors.imag)],s=this.compileAndRun(a,i),u=this.compileAndRun(o,i),l=this.complex(s,u);return s.dispose(),u.dispose(),l}var c=new M.BinaryOpProgram(O.MUL,e.shape,t.shape),p=this.makeOutputArray(c.outputShape,e.dtype);return this.compileAndRun(c,[e,t],p)},e.prototype.batchNormalization=function(e,t,n,r,a,o){var i=[e,t,n],s=null;null!=o&&(s=o.shape,i.push(o));var u=null;null!=a&&(u=a.shape,i.push(a));var l=new A.BatchNormProgram(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(l,i)},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){var o=new K.LRNProgram(e.shape,t,n,r,a);return this.compileAndRun(o,[e])},e.prototype.LRNGrad=function(e,t,n,r,a,o,i){var s=new X.LRNGradProgram(t.shape,r,a,o,i);return this.compileAndRun(s,[t,n,e])},e.prototype.tile=function(e,t){var n=new me.TileProgram(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.pad=function(e,t,n){var r=new te.PadProgram(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){var n=new ge.TransposeProgram(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){var r=new H.GatherProgram(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},e.prototype.batchToSpaceND=function(e,t,n){x.assert(e.rank<=4,"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");var r=t.reduce(function(e,t){return e*t}),a=c.getReshaped(e.shape,t,r),o=c.getPermuted(a.length,t.length),i=c.getReshapedPermuted(e.shape,t,r),s=c.getSliceBeginCoords(n,t.length),u=c.getSliceSize(i,n,t.length);return e.reshape(a).transpose(o).reshape(i).slice(s,u)},e.prototype.spaceToBatchND=function(e,t,n){x.assert(e.rank<=4,"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");var r=t.reduce(function(e,t){return e*t}),a=[[0,0]];a.push.apply(a,n);for(var o=1+t.length;o<e.shape.length;++o)a.push([0,0]);var i=e.pad(a),s=c.getReshaped(i.shape,t,r,!1),u=c.getPermuted(s.length,t.length,!1),l=c.getReshapedPermuted(i.shape,t,r,!1);return i.reshape(s).transpose(u).reshape(l)},e.prototype.reduce=function(e,t,n){var r=e.shape[0],a=e.shape[1],o=d.computeOptimalWindowSize(a),i={windowSize:o,inSize:a,batchSize:r},s=new re.ReduceProgram(i,t),u=s.outputShape,l=u[0],c=u[1],p=this.makeOutputArray([l,c],n);return this.compileAndRun(s,[e],p),1===p.shape[1]?p:this.reduce(p,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],a=e.shape[1];null!=n&&(r=n.shape[0],a=n.shape[1]);var o=d.computeOptimalWindowSize(a),i={windowSize:o,inSize:a,batchSize:r},s=new I.ArgMinMaxProgram(i,t,null==n),u=s.outputShape,l=u[0],c=u[1],p=this.makeOutputArray([l,c],"int32"),h=[e];return null!=n&&h.push(n),this.compileAndRun(s,h,p),1===p.shape[1]?p:this.argReduce(e,t,p)},e.prototype.sum=function(e,t){p.assertAxesAreInnerMostDims("sum",t,e.rank);var n=p.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=x.sizeFromShape(a),i=e.as2D(-1,o),s=b.sumOutType(e.dtype);return this.reduce(i,"sum",s).reshape(r)},e.prototype.unsortedSegmentSum=function(e,t,n){var r=0,a=p.getAxesPermutation([r],e.rank),o=e;null!=a&&(o=e.transpose(a),r=p.getInnerMostAxes(1,e.rank)[0]);var i=f.computeOutShape(o.shape,r,n),s=x.sizeFromShape([o.shape[r]]),u=o.as2D(-1,s),l=b.sumOutType(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(i);return null!=a&&(c=c.transpose(p.getUndoAxesPermutation(a))),c},e.prototype.segOpCompute=function(e,t,n,r,a){var o=e.shape[0],i=e.shape[1],s=f.segOpComputeOptimalWindowSize(i,a),u={windowSize:s,inSize:i,batchSize:o,numSegments:a},l=new le.SegmentOpProgram(u,t),c=l.outputShape,p=c[0],h=c[1],d=this.makeOutputArray([p,h],r);return this.compileAndRun(l,[e,n],d),d.shape[1]===a?d:(n=v.range(0,a).tile([i/s]),this.segOpCompute(d,t,n,r,a))},e.prototype.argMin=function(e,t){var n=[t];p.assertAxesAreInnerMostDims("argMin",n,e.rank);var r=p.computeOutAndReduceShapes(e.shape,n),a=r[0],o=r[1],i=x.sizeFromShape(o),s=e.as2D(-1,i);return this.argReduce(s,"min").reshape(a)},e.prototype.argMax=function(e,t){var n=[t];p.assertAxesAreInnerMostDims("argMax",n,e.rank);var r=p.computeOutAndReduceShapes(e.shape,n),a=r[0],o=r[1],i=x.sizeFromShape(o),s=e.as2D(-1,i);return this.argReduce(s,"max").reshape(a)},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var a=new j.CumSumProgram(e.shape,n,r);return this.compileAndRun(a,[e])},e.prototype.equal=function(e,t){var n=new M.BinaryOpProgram(O.EQUAL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){var n=new M.BinaryOpProgram(O.NOT_EQUAL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){var n=new M.BinaryOpProgram(O.LESS,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){var n=new M.BinaryOpProgram(O.LESS_EQUAL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){var n=new M.BinaryOpProgram(O.GREATER,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){var n=new M.BinaryOpProgram(O.GREATER_EQUAL,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.LOGICAL_NOT);return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){var n=new M.BinaryOpProgram(O.LOGICAL_AND,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){var n=new M.BinaryOpProgram(O.LOGICAL_OR,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.select=function(e,t,n){var r=new ce.SelectProgram(e.rank,t.shape,t.rank),a=this.makeOutputArray(r.outputShape,b.upcastType(t.dtype,n.dtype));return this.compileAndRun(r,[e,t,n],a)},e.prototype.where=function(e){l.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return xe.whereImpl(e.shape,t)},e.prototype.topk=function(e,t,n){var r=e.dataSync();return k.topkImpl(r,e.shape,e.dtype,t,n)},e.prototype.min=function(e,t){p.assertAxesAreInnerMostDims("min",t,e.rank);var n=p.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=x.sizeFromShape(a),i=e.as2D(-1,o);return this.reduce(i,"min",i.dtype).reshape(r)},e.prototype.minimum=function(e,t){var n=new M.BinaryOpProgram(O.MIN,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.mod=function(e,t){var n=new M.BinaryOpProgram(O.MOD,e.shape,t.shape),r=n.getCustomSetupFunc();return this.compileAndRun(n,[e,t],null,r)},e.prototype.max=function(e,t){p.assertAxesAreInnerMostDims("max",t,e.rank);var n=p.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=x.sizeFromShape(a),i=e.as2D(-1,o);return this.reduce(i,"max",i.dtype).reshape(r)},e.prototype.maximum=function(e,t){var n=new M.BinaryOpProgram(O.MAX,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.all=function(e,t){p.assertAxesAreInnerMostDims("all",t,e.rank);var n=p.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=x.sizeFromShape(a),i=e.as2D(-1,o);return this.reduce(i,"all",i.dtype).reshape(r)},e.prototype.any=function(e,t){p.assertAxesAreInnerMostDims("any",t,e.rank);var n=p.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=x.sizeFromShape(a),i=e.as2D(-1,o);return this.reduce(i,"any",i.dtype).reshape(r)},e.prototype.squaredDifference=function(e,t){var n=new M.BinaryOpProgram(O.SQUARED_DIFFERENCE,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.realDivide=function(e,t){var n=O.DIV,r="float32",a=new M.BinaryOpProgram(n,e.shape,t.shape),o=this.makeOutputArray(a.outputShape,r);return this.compileAndRun(a,[e,t],o)},e.prototype.floorDiv=function(e,t){var n=O.INT_DIV,r="int32",a=new M.BinaryOpProgram(n,e.shape,t.shape),o=this.makeOutputArray(a.outputShape,r);return this.compileAndRun(a,[e,t],o)},e.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,O.ADD);var n=new M.BinaryOpProgram(O.ADD,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,b.upcastType(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,a=this.texData.get(e.dataId),o=this.texData.get(t.dataId),i=[[a.complexTensors.real,o.complexTensors.real],[a.complexTensors.imag,o.complexTensors.imag]].map(function(a){var o=a[0],i=a[1],s=new M.BinaryOpProgram(n,e.shape,t.shape),u=r.makeOutputArray(s.outputShape,b.upcastType(o.dtype,i.dtype)),l=r.makeComplexComponentTensorHandle(e,o),c=r.makeComplexComponentTensorHandle(t,i);return r.compileAndRun(s,[l,c],u)}),s=i[0],u=i[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},e.prototype.makeComplexComponentTensorHandle=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},e.prototype.addN=function(e){for(var t=e[0],n=1;n<e.length;n++)t=this.add(t,e[n]);return t},e.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,O.SUB);var n=new M.BinaryOpProgram(O.SUB,e.shape,t.shape),r=this.makeOutputArray(n.outputShape,b.upcastType(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],r)},e.prototype.pow=function(e,t){var n=new M.BinaryOpProgram(O.POW,e.shape,t.shape),r=n.getCustomSetupFunc(),a=this.makeOutputArray(n.outputShape,b.upcastType(e.dtype,t.dtype));return this.compileAndRun(n,[e,t],a,r)},e.prototype.ceil=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.CEIL);return this.compileAndRun(t,[e])},e.prototype.floor=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.FLOOR);return this.compileAndRun(t,[e])},e.prototype.sign=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.SIGN);return this.compileAndRun(t,[e])},e.prototype.round=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ROUND);return this.compileAndRun(t,[e])},e.prototype.exp=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.EXP);return this.compileAndRun(t,[e])},e.prototype.expm1=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.EXPM1);return this.compileAndRun(t,[e])},e.prototype.log=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.LOG),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.log1p=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.LOG1P);return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.SQRT);return this.compileAndRun(t,[e])},e.prototype.rsqrt=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.RSQRT);return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.SQUARE);return this.compileAndRun(t,[e])},e.prototype.reciprocal=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.RECIPROCAL);return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.RELU);return this.compileAndRun(t,[e])},e.prototype.elu=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ELU);return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e,t){var n=new M.BinaryOpProgram(O.ELU_DER,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.selu=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.SELU);return this.compileAndRun(t,[e])},e.prototype.int=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.TO_INT),n=this.makeOutputArray(t.outputShape,"int32");return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r=new D.ClipProgram(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.abs=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ABS);return this.compileAndRun(t,[e])},e.prototype.sigmoid=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.SIGMOID);return this.compileAndRun(t,[e])},e.prototype.softplus=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.SOFTPLUS);return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.SIN);return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.COS);return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.TAN);return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ASIN);return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ACOS);return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ATAN);return this.compileAndRun(t,[e])},e.prototype.atan2=function(e,t){var n=new M.BinaryOpProgram(O.ATAN2,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.sinh=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.SINH);return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.COSH);return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.TANH);return this.compileAndRun(t,[e])},e.prototype.asinh=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ASINH);return this.compileAndRun(t,[e])},e.prototype.acosh=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ACOSH),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.atanh=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ATANH),n=t.getCustomSetupFunc();return this.compileAndRun(t,[e],null,n)},e.prototype.erf=function(e){var t=new ye.UnaryOpProgram(e.shape,ve.ERF);return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new ye.UnaryOpProgram(e.shape,ve.STEP(t));return this.compileAndRun(n,[e])},e.prototype.conv2d=function(e,t,n){var r=new V.Conv2DProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new z.Conv2DDerInputProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new z.Conv2DDerFilterProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2D=function(e,t,n){var r=new B.DepthwiseConv2DProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new L.DepthwiseConv2DDerInputProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new L.DepthwiseConv2DDerFilterProgram(n);return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new ne.Pool2DProgram(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new ne.Pool2DProgram(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n,r){var a=!0,o=new ne.Pool2DProgram(r,"max",a),i=this.compileAndRun(o,[t]),s=new Z.MaxPool2DBackpropProgram(r),u=this.makeOutputArray(s.outputShape,t.dtype),l=this.compileAndRun(s,[e,i],u);return i.dispose(),l},e.prototype.avgPoolBackprop=function(e,t,n){var r=new E.AvgPool2DBackpropProgram(n),a=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[e],a)},e.prototype.cast=function(e,t){return S.castTensor(e,t,this)},e.prototype.reshape=function(e,t){return S.reshapeTensor(e,t)},e.prototype.resizeBilinear=function(e,t,n,r){var a=new oe.ResizeBilinearProgram(e.shape,t,n,r);return this.compileAndRun(a,[e])},e.prototype.resizeBilinearBackprop=function(e,t,n){var r=new ae.ResizeBilinearBackpropProgram(e,t,n);return this.compileAndRun(r,[e])},e.prototype.resizeNearestNeighbor=function(e,t,n,r){var a=new se.ResizeNearestNeighborProgram(e.shape,t,n,r);return this.compileAndRun(a,[e])},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new ie.ResizeNearestNeigborBackpropProgram(e,t,n);return this.compileAndRun(r,[e])},e.prototype.multinomial=function(e,t,n,r){var a=t?e:g.softmax(e),o=a.shape[0],i=a.shape[1],s=new Q.MultinomialProgram(o,i,n),u=this.makeOutputArray(s.outputShape,"int32"),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[a],u,l)},e.prototype.oneHot=function(e,t,n,r){var a=new ee.OneHotProgram(e.size,t,n,r);return this.compileAndRun(a,[e])},e.prototype.nonMaxSuppression=function(e,t,n,r,a){l.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=e.dataSync(),i=t.dataSync();return N.nonMaxSuppressionImpl(o,i,n,r,a)},e.prototype.cropAndResize=function(e,t,n,r,a,o){var i=new F.CropAndResizeProgram(e.shape,t.shape,r,a,o);return this.compileAndRun(i,[e,t,n])},e.prototype.depthToSpace=function(e,t,n){x.assert(t>1,"blockSize should be > 1 for depthToSpace, but was: "+t);var r=e.shape[0],a="NHWC"===n?e.shape[1]:e.shape[2],o="NHWC"===n?e.shape[2]:e.shape[3],i="NHWC"===n?e.shape[3]:e.shape[1],s=a*t,u=o*t,l=i/(t*t),c="NHWC"===n?[r,s,u,l]:[r,l,s,u],p=new U.DepthToSpaceProgram(c,t,n);return this.compileAndRun(p,[e])},e.prototype.split=function(e,t,n){return T.split(e,t,n)},e.prototype.makeOutputArray=function(e,t){return y.Tensor.make(e,{},t)},e.prototype.compileAndRun=function(e,n,r,a,o){var i=this;if(void 0===o&&(o=!0),null==r&&(r=this.makeOutputArray(e.outputShape,n[0].dtype)),0===r.size)return this.texData.get(r.dataId).values=w.getTypedArrayFromDType(r.dtype,0),r;var s=n.map(function(e){if("complex64"===e.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(e.dataId);return null==n.texture&&x.sizeFromShape(e.shape)<=t.SIZE_UPLOAD_UNIFORM?{shape:e.shape,texData:null,isUniform:!0,uniformValues:i.readSync(e.dataId)}:(i.uploadToGPU(e.dataId),{shape:e.shape,texData:n,isUniform:!1})});this.uploadToGPU(r.dataId);var u,l={shape:r.shape,texData:this.texData.get(r.dataId),isUniform:!1},c=Y.makeShaderKey(e,s,l),p=this.getAndSaveBinary(c,function(){return Y.compileProgram(i.gpgpu,e,s,l)}),h=null!=this.activeTimers;if(h&&(u=this.startTimer()),Y.runProgram(p,s,l,a),o&&this.numBytesInGPU>this.NUM_BYTES_BEFORE_PAGING)for(var d=this.numBytesInGPU-this.NUM_BYTES_BEFORE_PAGING;d>0&&this.lruDataGPU.length>0;){var f=this.lruDataGPU.shift(),m=this.texData.get(f),g=m.shape,v=m.dtype;d-=this.computeBytes(g,v),this.read(f)}return h&&(u=this.endTimer(u),this.activeTimers.push(this.getQueryTime(u))),r},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){if(!this.disposed){for(var e in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixelsCanvas&&this.fromPixelsCanvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},e.prototype.floatPrecision=function(){var e=this;return u.tidy(function(){return e.abs(v.scalar(1e-8)).get()>0?32:16})},e.prototype.throwIfNoData=function(e){if(!this.texData.has(e))throw new Error("WebGL backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},e.prototype.uploadToGPU=function(e){this.throwIfNoData(e);var t=this.texData.get(e),n=t.shape,r=t.values,o=t.texture,i=t.dtype,s=t.usage;if(null!=o){var u=this.lruDataGPU.indexOf(e);return void(u>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(e),1),this.lruDataGPU.push(e)))}var l,c=null!=this.activeTimers;c&&(l=performance.now());var p=be.getTextureShapeFromLogicalShape(this.gpgpu.gl,n);t.texShape=p;var h=this.acquireTexture(e,p,s);t.texture=h,null!=r&&(this.gpgpu.uploadMatrixToTexture(h,p[0],p[1],a(r,i)),t.values=null,c&&(this.uploadWaitMs+=performance.now()-l))},e.prototype.cacheOnCPU=function(e,t){var n=this.delayedStorage,a=this.texData.get(e),o=a.texture,i=a.texShape,s=a.dtype,u=a.usage;n&&null!=o&&(this.releaseTexture(e,o,i,u),a.texture=null,a.texShape=null),a.usage=de.TextureUsage.UPLOAD,null!=t&&(a.values=r(t,s))},e.prototype.releaseTexture=function(e,t,n,r){var a=this.texData.get(e),o=a.shape,i=a.dtype,s=this.lruDataGPU.indexOf(e);s>=0&&this.lruDataGPU.splice(s,1),this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(t,n,r)},e.prototype.acquireTexture=function(e,t,n){var r=this.texData.get(e),a=r.shape,o=r.dtype;return this.lruDataGPU.push(e),this.numBytesInGPU+=this.computeBytes(a,o),this.textureManager.acquireTexture(t,n)},e.prototype.computeBytes=function(e,t){return x.sizeFromShape(e)*x.bytesPerElement(t)},e}();t.MathBackendWebGL=Se,s.ENV.get("IS_BROWSER")&&s.ENV.registerBackend("webgl",function(){return new Se},2,y.setTensorTracker)},function(e,t){"use strict";function n(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+(e.length+", imag: "+t.length+"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function r(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeRealAndImagArrays=n,t.splitRealAndImagArrays=r},function(e,t){"use strict";function n(e,t,n){var r=Array(e.rank).fill(0),a=e.shape.slice();return t.map(function(t){a[n]=t;var o=e.slice(r,a);return r[n]+=t,o})}Object.defineProperty(t,"__esModule",{value:!0}),t.split=n},function(e,t,n){"use strict";function r(e,t,n,r,i){for(var s=t[t.length-1],u=[e.length/s,s],l=u[0],c=u[1],p=o.getTypedArrayFromDType(n,l*r),h=o.getTypedArrayFromDType("int32",l*r),d=0;d<l;d++){for(var f=d*c,m=e.subarray(f,f+c),g=[],v=0;v<m.length;v++)g.push({value:m[v],index:v});g.sort(function(e,t){return t.value-e.value});for(var y=d*r,b=p.subarray(y,y+r),x=h.subarray(y,y+r),v=0;v<r;v++)b[v]=g[v].value,x[v]=g[v].index}var w=t.slice();return w[w.length-1]=r,[a.tensor(p,w,n),a.tensor(h,w,"int32")]}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10),o=n(2);t.topkImpl=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36);t.COMPLEX_MULTIPLY={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};var a=function(){function e(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.supportsBroadcasting=!0,this.outputShape=r.assertAndGetBroadcastShape(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "}return e}();t.BinaryOpComplexProgram=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),a="\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n";t.ADD="return a + b;",t.SUB="return a - b;",t.MUL="return a * b;",t.DIV="if (a == b) return 1.0;\n  return a / b;",t.INT_DIV="\n  float resultSign = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  int result = ia / ib;\n  int amodb = ia - ib * result;\n\n  if (resultSign < 0.0 && amodb != 0) {\n    result -= 1;\n  }\n  return float(result);\n",
t.POW="\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.SQUARED_DIFFERENCE="return (a - b) * (a - b);",t.EQUAL="return float(a == b);",t.NOT_EQUAL="return float(a != b);",t.LESS="return float(a < b);",t.LESS_EQUAL="return float(a <= b);",t.GREATER="return float(a > b);",t.GREATER_EQUAL="return float(a >= b);",t.LOGICAL_AND="return float(a >= 1.0 && b >= 1.0);",t.LOGICAL_OR="return float(a >= 1.0 || b >= 1.0);",t.MAX=a+"\n  return max(a, b);\n",t.MIN=a+"\n  return min(a, b);\n",t.MOD="if (b == 0.0) return NAN;\n  return mod(a, b);",t.ATAN2=a+"\n  return atan(a, b);\n",t.ELU_DER="return (b >= 1.0) ? a : a * (b + 1.0);";var o=function(){function e(e,t,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=r.assertAndGetBroadcastShape(t,n),this.userCode="\n      uniform float NAN;\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(){var e=this;return function(t,n){null==e.startLoc&&(e.startLoc=t.getUniformLocationNoThrow(n,"NAN"),null==e.startLoc)||t.gl.uniform1f(e.startLoc,NaN)}},e}();t.BinaryOpProgram=o},function(e,t,n){"use strict";function r(e){for(var t=0,n=e.length-1,r=-1;t<=n;){var a=t+n>>1,o=e[a]();o?(r=a,t=a+1):n=a-1}return r}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(2),u=n(126),l=n(90),c=n(91),p=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[],null!=e?this.gl=e:this.gl=u.createWebGLContext(),1===i.ENV.get("WEBGL_VERSION")?(this.textureFloatExtension=c.getExtensionOrThrow(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),i.ENV.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=c.getExtensionOrThrow(this.gl,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=c.getExtensionOrThrow(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=c.getExtensionOrThrow(this.gl,"WEBGL_lose_context"),this.vertexBuffer=u.createVertexBuffer(this.gl),this.indexBuffer=u.createIndexBuffer(this.gl),this.framebuffer=c.createFramebuffer(this.gl),this.textureConfig=u.getTextureConfig(this.gl,this.textureHalfFloatExtension)}return e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;c.callAndCheck(t,function(){return t.finish()}),c.callAndCheck(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),c.callAndCheck(t,function(){return t.deleteFramebuffer(e.framebuffer)}),c.callAndCheck(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,null)}),c.callAndCheck(t,function(){return t.deleteBuffer(e.vertexBuffer)}),c.callAndCheck(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)}),c.callAndCheck(t,function(){return t.deleteBuffer(e.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0}},e.prototype.enableAutomaticDebugValidation=function(e){this.autoDebugValidate=e,c.enableDebugWebGLErrorChecking(e)},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),u.createFloat32MatrixTexture(this.gl,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),u.createFloat16MatrixTexture(this.gl,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),u.createUnsignedBytesMatrixTexture(this.gl,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),u.uploadPixelDataToTexture(this.gl,e,t)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),u.createPackedMatrixTexture(this.gl,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),c.callAndCheck(this.gl,function(){return t.gl.deleteTexture(e)})},e.prototype.uploadMatrixToTexture=function(e,t,n,r){this.throwIfDisposed();var a=c.getNumChannels();return u.uploadMatrixToTexture(this.gl,e,t,n,r,a,this.textureConfig)},e.prototype.uploadMatrixToPackedTexture=function(e,t,n,r){return this.throwIfDisposed(),u.uploadMatrixToPackedTexture(this.gl,e,t,n,r,this.textureConfig)},e.prototype.downloadFloat32MatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return u.downloadFloat32MatrixFromOutputTexture(r.gl,t,n,r.textureConfig)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return u.downloadByteEncodedFloatMatrixFromOutputTexture(r.gl,t,n,r.textureConfig)})},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t,n){return u.downloadFloat32MatrixFromBuffer(this.gl,e,t,n,this.textureConfig)},e.prototype.maybeCreateBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=u.maybeCreateBufferFromOutputTexture(this.gl,e,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(i.ENV.get("WEBGL_FENCE_API_ENABLED")){var a=e,o=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(o,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=o}else i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,function(){return u.downloadMatrixFromPackedOutputTexture(r.gl,t,n,r.textureConfig)})},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=c.createFragmentShader(t,e),r=u.createVertexShader(t),a=c.createProgram(t);return c.callAndCheck(t,function(){return t.attachShader(a,r)}),c.callAndCheck(t,function(){return t.attachShader(a,n)}),c.linkProgram(t,a),this.autoDebugValidate&&c.validateProgram(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=u.bindVertexProgramAttributeStreams(t,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&c.callAndCheck(this.gl,function(){return t.gl.deleteProgram(e)})},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.autoDebugValidate&&c.validateProgram(this.gl,this.program),c.callAndCheck(this.gl,function(){return t.gl.useProgram(e)})},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?c.getProgramUniformLocationOrThrow(this.gl,e,t):c.getProgramUniformLocation(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return n.gl.getAttribLocation(e,t)})},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),c.bindTextureToProgramUniformSampler(this.gl,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=l.getPackedMatrixTextureShapeWidthHeight(t,n),a=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,a,o)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&c.validateProgram(this.gl,this.program),c.validateFramebuffer(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.autoDebugValidate&&this.debugValidate(),c.callAndCheck(e,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return e.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=c.getExtensionOrThrow(this.gl,2===i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(2===i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}var n=this.getQueryTimerExtensionWebGL1();n.endQueryEXT(n.TIME_ELAPSED_EXT)},e.prototype.waitForQueryAndGetTime=function(e){return a(this,void 0,void 0,function(){var t=this;return o(this,function(n){switch(n.label){case 0:return[4,s.repeatedTry(function(){return t.isQueryAvailable(e,i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(e,i.ENV.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl,r=n.getQueryParameter(e,n.QUERY_RESULT);return r/1e6}var a=this.getQueryTimerExtensionWebGL1(),r=a.getQueryObjectEXT(e,a.QUERY_RESULT_EXT);return r/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var r=this.getQueryTimerExtensionWebGL1(),a=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise(function(n){t.addItemToPoll(function(){return e.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var e=r(this.itemsToPoll.map(function(e){return e.isDoneFn})),t=0;t<=e;++t){var n=this.itemsToPoll[t].resolveFn;n()}this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||s.repeatedTry(function(){return n.pollItems(),0===n.itemsToPoll.length})},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),c.bindColorTextureToFramebuffer(this.gl,e,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(c.bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(this.gl)):c.unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;c.bindColorTextureToFramebuffer(r,e,this.framebuffer),this.autoDebugValidate&&c.validateFramebuffer(r),this.outputTexture=e,c.callAndCheck(r,function(){return r.viewport(0,0,t,n)}),c.callAndCheck(r,function(){return r.scissor(0,0,t,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),c.callAndCheck(this.gl,function(){return a.gl.scissor(e,t,n,r)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();t.GPGPUContext=p,t.binSearchLastTrue=r},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=0),s+("\n    return x > 0.0 ? 1.0 : float("+e+");\n  ")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(180),o=n(130),i=function(){function e(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float NAN;\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(){var e=this;return function(t,n){null==e.startLoc&&(e.startLoc=t.getUniformLocationNoThrow(n,"NAN"),null==e.startLoc)||t.gl.uniform1f(e.startLoc,NaN)}},e}();t.UnaryOpProgram=i;var s="if (isNaN(x)) return x;";t.ABS="return abs(x);",t.RELU=s+"\n  return (x < 0.0) ? 0.0 : x;\n",t.ELU="return (x >= 0.0) ? x : (exp(x) - 1.0);",t.SELU="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+o.SELU_SCALEALPHA+";\n  float scale = "+o.SELU_SCALE+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",t.STEP=r,t.NEG="return -x;",t.CEIL="return ceil(x);",t.FLOOR="return floor(x);",t.SIGN="\n  if (isNaN(x)) { return 0.0; }\n  return sign(x);\n",t.ROUND="\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n",t.EXP="return exp(x);",t.EXPM1="return exp(x) - 1.0;",t.LOG="if (x < 0.0) return NAN;\n  return log(x);",t.LOG1P="return log(1.0 + x);",t.SQRT="return sqrt(x);",t.RSQRT="return inversesqrt(x);",t.SIGMOID="return 1.0 / (1.0 + exp(-1.0 * x));",t.SOFTPLUS="\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n",t.SIN=s+"\n  return sin(x);\n",t.COS=s+"\n  return cos(x);\n",t.TAN="return tan(x);",t.ASIN="return asin(x);",t.ACOS="return acos(x);",t.ATAN=s+"\n  return atan(x);\n",t.SINH="\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n",t.COSH="\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n",t.TANH="\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n",t.ASINH="return log(x + sqrt(x * x + 1.0));",t.ACOSH=s+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",t.ATANH=s+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",t.ERF='\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '+a.ERF_P+";\n  float a1 = "+a.ERF_A1+";\n  float a2 = "+a.ERF_A2+";\n  float a3 = "+a.ERF_A3+";\n  float a4 = "+a.ERF_A4+";\n  float a5 = "+a.ERF_A5+";\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n",t.SQUARE="return x * x;",t.RECIPROCAL="return 1.0 / x;",t.LOGICAL_NOT="return float(!(x >= 1.0));",t.TO_INT="return float(int(x));"},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.ENV.get("IS_TEST")||console.warn.apply(console,e)}function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];o.ENV.get("IS_TEST")||console.log.apply(console,e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4);t.warn=r,t.log=a},function(e,t){"use strict";function n(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)a=a.concat(t.slice(0)),a.push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var o=t.length,i=0;i<o;++i)a=a.concat([e[i+1]/t[i],t[i]]);a=a.concat(e.slice(o+1))}return a}function r(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var o=[],i=[],a=1;a<e;++a)a>=2*t+1||a%2===1?i.push(a):o.push(a);r.push.apply(r,o),r.push(0),r.push.apply(r,i)}return r}function a(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?a.push(t[o-1]*e[o]):a.push(e[o]/t[o-1]):a.push(e[o]);return a}function o(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function i(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.getReshaped=n,t.getPermuted=r,t.getReshapedPermuted=a,t.getSliceBeginCoords=o,t.getSliceSize=i},function(e,t,n){"use strict";function r(e,t){var n=v.convertToTensor(e,"a","notEqual"),r=v.convertToTensor(t,"b","notEqual");return g.assertTypesMatch(n,r),b.assertAndGetBroadcastShape(n.shape,r.shape),m.ENV.engine.runKernel(function(e){return e.notEqual(n,r)},{$a:n,$b:r})}function a(e,t){var n=v.convertToTensor(e,"a","notEqualStrict"),r=v.convertToTensor(t,"b","notEqualStrict");return y.assertShapesMatch(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}function o(e,t){var n=v.convertToTensor(e,"a","less"),r=v.convertToTensor(t,"b","less");return g.assertTypesMatch(n,r),b.assertAndGetBroadcastShape(n.shape,r.shape),m.ENV.engine.runKernel(function(e){return e.less(n,r)},{$a:n,$b:r})}function i(e,t){var n=v.convertToTensor(e,"a","lessStrict"),r=v.convertToTensor(t,"b","lessStrict");return y.assertShapesMatch(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}function s(e,t){var n=v.convertToTensor(e,"a","equal"),r=v.convertToTensor(t,"b","equal");return g.assertTypesMatch(n,r),b.assertAndGetBroadcastShape(n.shape,r.shape),m.ENV.engine.runKernel(function(e){return e.equal(n,r)},{$a:n,$b:r})}function u(e,t){var n=v.convertToTensor(e,"a","equalStrict"),r=v.convertToTensor(t,"b","equalStrict");return y.assertShapesMatch(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}function l(e,t){var n=v.convertToTensor(e,"a","lessEqual"),r=v.convertToTensor(t,"b","lessEqual");return g.assertTypesMatch(n,r),b.assertAndGetBroadcastShape(n.shape,r.shape),m.ENV.engine.runKernel(function(e){return e.lessEqual(n,r)},{$a:n,$b:r})}function c(e,t){var n=v.convertToTensor(e,"a","lessEqualStrict"),r=v.convertToTensor(t,"b","lessEqualStrict");return y.assertShapesMatch(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}function p(e,t){var n=v.convertToTensor(e,"a","greater"),r=v.convertToTensor(t,"b","greater");return g.assertTypesMatch(n,r),b.assertAndGetBroadcastShape(n.shape,r.shape),m.ENV.engine.runKernel(function(e){return e.greater(n,r)},{$a:n,$b:r})}function h(e,t){var n=v.convertToTensor(e,"a","greaterStrict"),r=v.convertToTensor(t,"b","greaterStrict");return y.assertShapesMatch(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}function d(e,t){var n=v.convertToTensor(e,"a","greaterEqual"),r=v.convertToTensor(t,"b","greaterEqual");g.assertTypesMatch(n,r),b.assertAndGetBroadcastShape(n.shape,r.shape);var a=function(e){return{$a:function(){return w.zerosLike(n)},$b:function(){return w.zerosLike(r)}}};return m.ENV.engine.runKernel(function(e){return e.greaterEqual(n,r)},{$a:n,$b:r},a)}function f(e,t){var n=v.convertToTensor(e,"a","greaterEqualStrict"),r=v.convertToTensor(t,"b","greaterEqualStrict");return y.assertShapesMatch(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(4),g=n(76),v=n(7),y=n(2),b=n(36),x=n(6),w=n(10);t.equal=x.op({equal_:s}),t.equalStrict=x.op({equalStrict_:u}),t.greater=x.op({greater_:p}),t.greaterEqual=x.op({greaterEqual_:d}),t.greaterEqualStrict=x.op({greaterEqualStrict_:f}),t.greaterStrict=x.op({greaterStrict_:h}),t.less=x.op({less_:o}),t.lessEqual=x.op({lessEqual_:l}),t.lessEqualStrict=x.op({lessEqualStrict_:c}),t.lessStrict=x.op({lessStrict_:i}),t.notEqual=x.op({notEqual_:r}),t.notEqualStrict=x.op({notEqualStrict_:a})},function(e,t,n){"use strict";function r(e,t){var n=s.convertToTensor(e,"real","complex"),r=s.convertToTensor(t,"imag","complex");return u.assertShapesMatch(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),i.ENV.engine.runKernel(function(e){return e.complex(n,r)},{$real:n,$imag:r})}function a(e){var t=s.convertToTensor(e,"input","real");return i.ENV.engine.runKernel(function(e){return e.real(t)},{$input:t})}function o(e){var t=s.convertToTensor(e,"input","imag");return i.ENV.engine.runKernel(function(e){return e.imag(t)},{$input:t})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(7),u=n(2),l=n(6);t.complex=l.op({complex_:r}),t.real=l.op({real_:a}),t.imag=l.op({imag_:o})},function(e,t,n){"use strict";function r(e,t,n,r,o,i){void 0===i&&(i="channelsLast");var u,l=s(t),c=l[0],p=l[1];if("channelsLast"===i)u=[c,p,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);u=[c,p,e[1],e[1]]}var h=1;return a(e,u,n,h,r,o,!1,i)}function a(e,t,n,r,a,o,i,c){void 0===i&&(i=!1),void 0===c&&(c="channelsLast");var p=[-1,-1,-1,-1],h=p[0],d=p[1],f=p[2],m=p[3];if("channelsLast"===c)h=e[0],d=e[1],f=e[2],m=e[3];else{if("channelsFirst"!==c)throw new Error("Unknown dataFormat "+c);h=e[0],m=e[1],d=e[2],f=e[3]}var g,v=t[0],y=t[1],b=t[3],x=s(n),w=x[0],S=x[1],_=s(r),N=_[0],T=_[1],k=u(v,N),I=u(y,T),E=l(a,d,f,w,S,k,I,o),A=E.padInfo,P=E.outHeight,C=E.outWidth,O=i?b*m:b;return"channelsFirst"===c?g=[h,O,P,C]:"channelsLast"===c&&(g=[h,P,C,O]),{batchSize:h,dataFormat:c,inHeight:d,inWidth:f,inChannels:m,outHeight:P,outWidth:C,outChannels:O,padInfo:A,strideHeight:w,strideWidth:S,filterHeight:v,filterWidth:y,dilationHeight:N,dilationWidth:T,inShape:e,outShape:g,filterShape:t}}function o(e,t,n,r,a,o){null==a&&(a=i(e,t,r));var s=e[0],u=e[1],l=c((s-t+2*a)/r+1,o);p.assert(p.isInt(l),"The output # of rows ("+l+") must be an integer. Change the stride and/or zero pad parameters");var h=c((u-t+2*a)/r+1,o);return p.assert(p.isInt(h),"The output # of columns ("+h+") must be an integer. Change the stride and/or zero pad parameters"),[l,h,n]}function i(e,t,n,r){void 0===r&&(r=1);var a=u(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function s(e){return"number"==typeof e?[e,e]:e}function u(e,t){return t<=1?e:e+(e-1)*(t-1)}function l(e,t,n,r,a,i,s,u){var l,c,p;if("number"==typeof e){var h=0===e?"VALID":"NUMBER";l={top:e,bottom:e,left:e,right:e,type:h};var d=o([t,n,1],i,1,r,e,u);c=d[0],p=d[1]}else if("same"===e){c=Math.ceil(t/r),p=Math.ceil(n/a);var f=(c-1)*r+i-t,m=(p-1)*a+s-n,g=Math.floor(f/2),v=f-g,y=Math.floor(m/2),b=m-y;l={top:g,bottom:v,left:y,right:b,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),p=Math.ceil((n-s+1)/a)}return{padInfo:l,outHeight:c,outWidth:p}}function c(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}Object.defineProperty(t,"__esModule",{value:!0});var p=n(2);t.computePool2DInfo=r,t.computeConv2DInfo=a,t.computeDefaultPad=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ERF_P=.3275911,t.ERF_A1=.254829592,t.ERF_A2=-.284496736,t.ERF_A3=1.421413741,t.ERF_A4=-1.453152027,t.ERF_A5=1.061405429},function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n=f.SUM_BY_NONZERO_WEIGHTS);var r=g.convertToTensor(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=g.convertToTensor(t,"weights","computeWeightedLoss"));var o=null==a?r:r.mul(a);if(n===f.NONE)return o;if(n===f.SUM)return o.sum();if(n===f.MEAN){if(null==a)return o.mean();var i=v.sizeFromShape(r.shape)/v.sizeFromShape(a.shape),s=o.sum().div(a.sum());return i>1?s.div(w.scalar(i)):s}if(n===f.SUM_BY_NONZERO_WEIGHTS){if(null==a)return o.sum().div(w.scalar(r.size));var u=a.mul(w.ones(r.shape)),l=u.notEqual(w.scalar(0)).sum().toFloat();return o.sum().div(l)}throw Error("Unknown reduction: "+n)}function a(e,n,r,a){void 0===a&&(a=f.SUM_BY_NONZERO_WEIGHTS);var o=g.convertToTensor(e,"labels","absoluteDifference"),i=g.convertToTensor(n,"predictions","absoluteDifference"),s=null;null!=r&&(s=g.convertToTensor(r,"weights","absoluteDifference")),v.assertShapesMatch(o.shape,i.shape,"Error in absoluteDifference: ");var u=o.sub(i).abs();return t.computeWeightedLoss(u,s,a)}function o(e,n,r,a){void 0===a&&(a=f.SUM_BY_NONZERO_WEIGHTS);var o=g.convertToTensor(e,"labels","meanSquaredError"),i=g.convertToTensor(n,"predictions","meanSquaredError"),s=null;null!=r&&(s=g.convertToTensor(r,"weights","meanSquaredError")),v.assertShapesMatch(o.shape,i.shape,"Error in meanSquaredError: ");var u=o.squaredDifference(i);return t.computeWeightedLoss(u,s,a)}function i(e,n,r,a,o){void 0===o&&(o=f.SUM_BY_NONZERO_WEIGHTS);var i=g.convertToTensor(e,"labels","cosineDistance"),s=g.convertToTensor(n,"predictions","cosineDistance"),u=null;null!=a&&(u=g.convertToTensor(a,"weights","cosineDistance")),v.assertShapesMatch(i.shape,s.shape,"Error in cosineDistance: ");var l=w.scalar(1),c=l.sub(i.mul(s).sum(r,!0));return t.computeWeightedLoss(c,u,o)}function s(e,n,r,a){void 0===a&&(a=f.SUM_BY_NONZERO_WEIGHTS);var o=g.convertToTensor(e,"labels","hingeLoss"),i=g.convertToTensor(n,"predictions","hingeLoss"),s=null;null!=r&&(s=g.convertToTensor(r,"weights","hingeLoss")),v.assertShapesMatch(o.shape,i.shape,"Error in hingeLoss: ");var u=w.scalar(1);o=w.scalar(2).mul(o).sub(u);var l=u.sub(o.mul(i)).relu();return t.computeWeightedLoss(l,s,a)}function u(e,n,r,a,o){void 0===a&&(a=1e-7),void 0===o&&(o=f.SUM_BY_NONZERO_WEIGHTS);var i=g.convertToTensor(e,"labels","logLoss"),s=g.convertToTensor(n,"predictions","logLoss"),u=null;null!=r&&(u=g.convertToTensor(r,"weights","logLoss")),v.assertShapesMatch(i.shape,s.shape,"Error in logLoss: ");var l=w.scalar(1),c=w.scalar(a),p=i.mul(s.add(c).log()).neg().sub(l.sub(i).mul(l.sub(s).add(c).log()));return t.computeWeightedLoss(p,u,o)}function l(e,t){var n=g.convertToTensor(e,"labels","sigmoidCrossEntropyWithLogits"),r=g.convertToTensor(t,"logits","sigmoidCrossEntropyWithLogits");v.assertShapesMatch(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=r.relu(),o=r.mul(n),i=r.abs().neg().exp().log1p();return a.sub(o).add(i)}function c(e,n,r,a,o){void 0===a&&(a=0),void 0===o&&(o=f.SUM_BY_NONZERO_WEIGHTS);var i=g.convertToTensor(e,"multiClassLabels","sigmoidCrossEntropy"),s=g.convertToTensor(n,"logits","sigmoidCrossEntropy"),u=null;if(null!=r&&(u=g.convertToTensor(r,"weights","sigmoidCrossEntropy")),v.assertShapesMatch(i.shape,s.shape,"Error in sigmoidCrossEntropy: "),a>0){var c=w.scalar(a),p=w.scalar(1),h=w.scalar(.5);i=i.mul(p.sub(c)).add(h.mul(c))}var d=l(i,s);return t.computeWeightedLoss(d,u,o)}function p(e,n,r,a,o){void 0===a&&(a=1),void 0===o&&(o=f.SUM_BY_NONZERO_WEIGHTS);var i=g.convertToTensor(e,"labels","huberLoss"),s=g.convertToTensor(n,"predictions","huberLoss"),u=null;null!=r&&(u=g.convertToTensor(r,"weights","huberLoss")),v.assertShapesMatch(i.shape,s.shape,"Error in huberLoss: ");var l=w.scalar(a),c=s.sub(i).abs(),p=b.minimum(c,l),h=c.sub(p),d=w.scalar(.5).mul(p.square()).add(l.mul(h));return t.computeWeightedLoss(d,u,o)}function h(e,t,n){if(void 0===n&&(n=-1),n===-1&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+("supported. Labels / logits was rank "+t.rank+" ")+("and dim was "+n));var r=m.customGrad(function(e,t){var r=!0,a=t.logSumExp([n],r),o=t.toFloat().sub(a),i=o.mul(e).neg(),s=i.sum([n]),u=function(t){var r=y.expandShapeToKeepDim(t.shape,[n]);return[t.reshape(r).mul(e.toFloat().sub(o.exp())),t.reshape(r).mul(o.exp().sub(e.toFloat()))]};return{value:s,gradFunc:u}});return r(e,t)}function d(e,n,r,a,o){void 0===a&&(a=0),void 0===o&&(o=f.SUM_BY_NONZERO_WEIGHTS);var i=g.convertToTensor(e,"onehotLabels","softmaxCrossEntropy"),s=g.convertToTensor(n,"logits","softmaxCrossEntropy"),u=null;if(null!=r&&(u=g.convertToTensor(r,"weights","softmaxCrossEntropy")),v.assertShapesMatch(i.shape,s.shape,"Error in softmaxCrossEntropy: "),a>0){var l=w.scalar(a),c=w.scalar(1),p=w.scalar(i.shape[1]);i=i.mul(c.sub(l)).add(l.div(p))}var d=h(i,s);return t.computeWeightedLoss(d,u,o)}Object.defineProperty(t,"__esModule",{value:!0});var f,m=n(24),g=n(7),v=n(2),y=n(34),b=n(75),x=n(6),w=n(10);!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(f=t.Reduction||(t.Reduction={})),t.absoluteDifference=x.op({absoluteDifference_:a}),t.computeWeightedLoss=x.op({computeWeightedLoss_:r}),t.cosineDistance=x.op({cosineDistance_:i}),t.hingeLoss=x.op({hingeLoss_:s}),t.huberLoss=x.op({huberLoss_:p}),t.logLoss=x.op({logLoss_:u}),t.meanSquaredError=x.op({meanSquaredError_:o}),t.sigmoidCrossEntropy=x.op({sigmoidCrossEntropy_:c}),t.softmaxCrossEntropy=x.op({softmaxCrossEntropy_:d})},function(e,t,n){"use strict";function r(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1),e=o.convertToTensor(e,"x","norm");var s=a(e,t,n),u=s.shape;if(r){var l=i.parseAxisParam(n,e.shape);u=i.expandShapeToKeepDim(s.shape,l)}return s.reshape(u);
}function a(e,t,n){if(void 0===n&&(n=null),0===e.rank)return e.abs();if(1!==e.rank&&null===n)return a(e.reshape([-1]),t,n);if(1===e.rank||"number"==typeof n||n instanceof Array&&1===n.length){if(1===t)return e.abs().sum(n);if(t===1/0)return e.abs().max(n);if(t===-(1/0))return e.abs().min(n);if("euclidean"===t||2===t)return e.abs().pow(u.scalar(2,"int32")).sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+t)}if(n instanceof Array&&2===n.length){if(1===t)return e.abs().sum(n[0]).max(n[1]-1);if(t===1/0)return e.abs().sum(n[1]).max(n[0]);if(t===-(1/0))return e.abs().sum(n[1]).min(n[0]);if("fro"===t||"euclidean"===t)return e.square().sum(n).sqrt();throw new Error("Error in norm: invalid ord value: "+t)}throw new Error("Error in norm: invalid axis: "+n)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=n(34),s=n(6),u=n(10);t.norm=s.op({norm_:r})},function(e,t,n){"use strict";function r(e){return e<=t.PARALLELIZE_THRESHOLD?e:a.nearestDivisor(e,Math.floor(Math.sqrt(e)))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2);t.PARALLELIZE_THRESHOLD=30,t.computeOptimalWindowSize=r},function(e,t,n){"use strict";function r(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=m.convertToTensor(e,"x","logSumExp"),a=v.parseAxisParam(t,r.shape),o=r.max(a,!0),i=r.sub(o),s=i.exp(),u=s.sum(a),l=u.log(),c=o.reshape(l.shape).add(l);if(n){var p=v.expandShapeToKeepDim(c.shape,a);return c.reshape(p)}return c}function a(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=m.convertToTensor(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var a=v.parseAxisParam(t,r.shape),o=f.customGrad(function(e){var t=v.getAxesPermutation(a,e.rank),r=a,o=e;null!=t&&(o=e.transpose(t),r=v.getInnerMostAxes(r.length,e.rank));var i=d.ENV.engine.runKernel(function(e){return e.sum(o,r)},{permutedX:o});if(n){var s=v.expandShapeToKeepDim(i.shape,a);i=i.reshape(s)}var u=function(t){var n=e.shape.slice();a.forEach(function(e){n[e]=1});var r=t.reshape(n),o=r.mul(b.ones(e.shape,"float32"));return o};return{value:i,gradFunc:u}});return o(r)}function o(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=m.convertToTensor(e,"x","mean"),a=v.parseAxisParam(t,r.shape),o=v.computeOutAndReduceShapes(r.shape,a),i=o[1],s=g.sizeFromShape(i),u=f.customGrad(function(e){var r=b.scalar(s),o=r.dtype===e.dtype?e:e.cast(r.dtype),i=o.div(r),u=i.sum(t,n),l=function(t){var n=e.shape.slice();a.forEach(function(e){n[e]=1});var o=t.reshape(n),i=o.mul(b.ones(e.shape,"float32")).div(r);return i};return{value:u,gradFunc:l}});return u(r)}function i(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=m.convertToTensor(e,"x","min"),a=v.parseAxisParam(t,r.shape),o=a,i=v.getAxesPermutation(o,r.rank);null!=i&&(r=r.transpose(i),o=v.getInnerMostAxes(o.length,r.rank));var s=d.ENV.engine.runKernel(function(e){return e.min(r,o)},{$x:r});if(n){var u=v.expandShapeToKeepDim(s.shape,a);return s.reshape(u)}return s}function s(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=m.convertToTensor(e,"x","max"),a=v.parseAxisParam(t,r.shape),o=a,i=v.getAxesPermutation(o,r.rank);null!=i&&(r=r.transpose(i),o=v.getInnerMostAxes(o.length,r.rank));var s=d.ENV.engine.runKernel(function(e){return e.max(r,o)},{$x:r});if(n){var u=v.expandShapeToKeepDim(s.shape,a);return s.reshape(u)}return s}function u(e,t){void 0===t&&(t=0);var n=m.convertToTensor(e,"x","argMin");null==t&&(t=0);var r=v.parseAxisParam(t,n.shape),a=v.getAxesPermutation(r,n.rank);null!=a&&(n=n.transpose(a),r=v.getInnerMostAxes(r.length,n.rank));var o=function(e){return{$x:function(){return b.zerosLike(n)}}};return d.ENV.engine.runKernel(function(e){return e.argMin(n,r[0])},{$x:n},o)}function l(e,t){void 0===t&&(t=0);var n=m.convertToTensor(e,"x","argMax");null==t&&(t=0);var r=v.parseAxisParam(t,n.shape),a=v.getAxesPermutation(r,n.rank);null!=a&&(n=n.transpose(a),r=v.getInnerMostAxes(r.length,n.rank));var o=function(e){return{$x:function(){return b.zerosLike(n)}}};return d.ENV.engine.runKernel(function(e){return e.argMax(n,r[0])},{$x:n},o)}function c(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=m.convertToTensor(e,"x","all","bool");g.assert("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var a=v.parseAxisParam(t,r.shape),o=a,i=v.getAxesPermutation(o,r.rank);null!=i&&(r=r.transpose(i),o=v.getInnerMostAxes(o.length,r.rank));var s=d.ENV.engine.runKernel(function(e){return e.all(r,o)},{$x:r});if(n){var u=v.expandShapeToKeepDim(s.shape,a);return s.reshape(u)}return s}function p(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=m.convertToTensor(e,"x","any","bool");g.assert("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var a=v.parseAxisParam(t,r.shape),o=a,i=v.getAxesPermutation(o,r.rank);null!=i&&(r=r.transpose(i),o=v.getInnerMostAxes(o.length,r.rank));var s=d.ENV.engine.runKernel(function(e){return e.any(r,o)},{$x:r});if(n){var u=v.expandShapeToKeepDim(s.shape,a);return s.reshape(u)}return s}function h(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),e=m.convertToTensor(e,"x","moments");var r=v.parseAxisParam(t,e.shape),a=e.mean(r,n),o=a.shape;n||(o=v.expandShapeToKeepDim(a.shape,r));var i=e.toFloat().sub(a.reshape(o)).square(),s=i.mean(r,n);return{mean:a,variance:s}}Object.defineProperty(t,"__esModule",{value:!0});var d=n(4),f=n(24),m=n(7),g=n(2),v=n(34),y=n(6),b=n(10);t.all=y.op({all_:c}),t.any=y.op({any_:p}),t.argMax=y.op({argMax_:l}),t.argMin=y.op({argMin_:u}),t.logSumExp=y.op({logSumExp_:r}),t.max=y.op({max_:s}),t.mean=y.op({mean_:o}),t.min=y.op({min_:i}),t.moments=y.op({moments_:h}),t.sum=y.op({sum_:a})},function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=-1);var n=o.convertToTensor(e,"logits","softmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+("Logits was rank "+n.rank+" and dim was "+t));var r=a.customGrad(function(e){var n=!0,r=e.logSumExp([t],n),a=e.toFloat().sub(r),o=a.exp(),i=function(e){var n=e.mul(o),r=!0;return n.sub(n.sum([t],r).mul(o))};return{value:o,gradFunc:i}});return r(n)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(163),o=n(7),i=n(6);t.softmax=i.op({softmax_:r})},function(e,t,n){"use strict";function r(e){return new u.Model(e)}function a(e){return new l.Sequential(e)}function o(e,t){return void 0===t&&(t=!0),l.loadModelInternal(e,t)}function i(e){return s.Input(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(77),u=n(96),l=n(190);t.model=r,t.sequential=a,t.loadModel=o,t.input=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(504);t.constraints=r;var a=n(505);t.initializers=a;var o=n(506);t.layers=o;var i=n(507);t.metrics=i;var s=n(508);t.regularizers=s;var u=n(139);t.CallbackList=u.CallbackList,t.CustomCallback=u.CustomCallback,t.History=u.History;var l=n(501);t.Callback=l.Callback;var c=n(15);t.SymbolicTensor=c.SymbolicTensor;var p=n(96);t.Model=p.Model;var h=n(186);t.input=h.input,t.loadModel=h.loadModel,t.model=h.model,t.sequential=h.sequential;var d=n(141);t.RNN=d.RNN;var f=n(190);t.Sequential=f.Sequential;var m=n(99);t.LayerVariable=m.LayerVariable;var g=n(193);t.version_layers=g.version},function(e,t,n){"use strict";function r(e){return o(this,void 0,void 0,function(){var t,n,r,a,o,u,l,c;return i(this,function(i){switch(i.label){case 0:if(null==e)return[2];t=[],n=[],r=[];for(a in e)o=e[a],"number"!=typeof o&&(u=o,t.push(u.data()),n.push(a),r.push(u));return[4,Promise.all(t)];case 1:for(l=i.sent(),c=0;c<l.length;++c)e[n[c]]=l[c][0];return s.dispose(r),[2]}})})}function a(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(1);t.resolveScalarsInLogs=r,t.disposeTensorsInLogs=a},function(e,t,n){"use strict";function r(e,t){return p.tidy(function(){var n=c.mul(d.getScalar(.5),c.onesLike(t)),r=h.cast(c.greater(t,n),e.dtype);return c.mean(c.equal(e,r),-1)})}function a(e,t){return p.tidy(function(){return h.cast(c.equal(c.argMax(e,-1),c.argMax(t,-1)),"float32")})}function o(e,t){return g.binaryCrossentropy(e,t)}function i(e,t){throw new f.NotImplementedError}function s(e,t){throw new f.NotImplementedError}function u(e,t){throw new f.NotImplementedError}function l(e){var n={binaryAccuracy:r,categoricalAccuracy:a,categoricalCrossentropy:t.categoricalCrossentropy,sparseCategoricalCrossentropy:t.sparseCategoricalCrossentropy,mse:t.mse,MSE:t.MSE,mae:t.mae,MAE:t.MAE,mape:t.mape,MAPE:t.MAPE,cosine:t.cosine};if("string"==typeof e&&e in n)return n[e];if("string"!=typeof e&&null!=e)return e;throw new f.ValueError("Unknown metric "+e)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),p=n(1),h=n(17),d=n(11),f=n(8),m=n(98),g=n(98);t.binaryAccuracy=r,t.categoricalAccuracy=a,t.binaryCrossentropy=o,t.sparseCategoricalAccuracy=i,t.topKCategoricalAccuracy=s,t.sparseTopKCategoricalAccuracy=u,t.mse=m.meanSquaredError,t.MSE=m.meanSquaredError,t.mae=m.meanAbsoluteError,t.MAE=m.meanAbsoluteError,t.mape=m.meanAbsolutePercentageError,t.MAPE=m.meanAbsolutePercentageError,t.categoricalCrossentropy=m.categoricalCrossentropy,t.cosine=m.cosineProximity,t.sparseCategoricalCrossentropy=m.sparseCategoricalCrossentropy,t.get=l},function(e,t,n){"use strict";function r(e,t){return s(this,void 0,void 0,function(){var n,r,a,o,i,s,c,p,h,d;return u(this,function(u){switch(u.label){case 0:return n=e.modelTopology,null!=n.model_config&&(n=n.model_config),r=v.convertPythonicToTs(n),a=m.deserialize(r,t),null==e.weightsManifest?[3,2]:[4,l.io.loadWeights(e.weightsManifest,e.pathPrefix,a.weights.map(function(e){return e.originalName}))];case 1:for(o=u.sent(),i={},s=0,c=a.weights;s<c.length;s++)p=c[s],i[p.originalName]=o[p.originalName];h=null,d=!0,a.loadWeights(i,h,d),u.label=2;case 2:return[2,a]}})})}function a(e,t){return void 0===t&&(t=!0),s(this,void 0,void 0,function(){var n;return u(this,function(r){if("string"==typeof e){if(n=l.io.getLoadHandlers(e),0===n.length)n.push(l.io.browserHTTPRequest(e));else if(n.length>1)throw new f.ValueError("Found more than one ("+n.length+") load handlers for "+("URL '"+e+"'"));e=n[0]}return[2,o(e,void 0,t)]})})}function o(e,t,n){return void 0===n&&(n=!0),s(this,void 0,void 0,function(){var r,a,o,i,s;return u(this,function(u){switch(u.label){case 0:if(null==e.load)throw new f.ValueError("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,e.load()];case 1:if(r=u.sent(),a=r.modelTopology,null!=a.model_config&&(a=a.model_config),o=m.deserialize(v.convertPythonicToTs(a),t),null!=r.weightData){if(null==r.weightSpecs)throw new f.ValueError("Model artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");i=!1,s=!0,o.loadWeights(l.io.decodeWeights(r.weightData,r.weightSpecs),i,s,n)}return[2,o]}})})}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var l=n(1),c=n(11),p=n(77),h=n(15),d=n(96),f=n(8),m=n(97),g=n(13),v=n(191),y=n(19);t.modelFromJSON=r,t.loadModelInternal=a,t.loadModelFromIOHandler=o;var b=function(e){function t(t){var n=e.call(this,{inputs:[],outputs:[]})||this;if(t=t||{},n.trainable=!0,n._updatable=!0,n.built=!1,n.name=null!=t.name?t.name:c.getUid("sequential_"),null!=t.layers)for(var r=0,a=t.layers;r<a.length;r++){var o=a[r];n.add(o)}return n}return i(t,e),t.prototype.add=function(e){var n,r=e instanceof t||e instanceof d.Model;if(r){if(n=e,1!==n.outputs.length)throw new f.ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new f.ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new f.ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=p.Input({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new f.ValueError("A layer added to a Sequential model must not already be "+("connected somewhere else. Model received layer "+e.name+" ")+("which has "+e.inboundNodes.length+" pre-existing inbound ")+"connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new f.ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=h.getSourceInputs(this.outputs[0])}this.inboundNodes=[],new h.Node({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:g.pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(e){return e.shape}),outputShapes:this.outputs[0].shape})}else{var o=e.apply(this.outputs[0]);if(Array.isArray(o))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.outputs=[o],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1},t.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},t.prototype.call=function(e,t){return null==this.model&&this.build(),this.model.call(e,t)},t.prototype.build=function(e){if(y.getExactlyOneShape(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new d.Model({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.model.updatable=this.updatable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},t.prototype.countParams=function(){return this.built||this.build(),e.prototype.countParams.call(this)},t.prototype.summary=function(t,n,r){void 0===r&&(r=console.log),this.built||this.build(),e.prototype.summary.call(this,t,n,r)},t.prototype.setWeights=function(e){null==this.model&&this.build(),this.model.setWeights(e)},Object.defineProperty(t.prototype,"updatable",{get:function(){return this._updatable},set:function(e){this.built&&(this.model.updatable=e),this._updatable=e},enumerable:!0,configurable:!0}),t.prototype.evaluate=function(e,t,n){if(void 0===n&&(n={}),!this.built)throw new f.RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)},t.prototype.predict=function(e,t){return void 0===t&&(t={}),null==this.model&&this.build(),this.model.predict(e,t)},t.prototype.predictOnBatch=function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)},t.prototype.compile=function(e){this.build(),this.model.compile(e),this.optimizer=this.model.optimizer,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},t.prototype.fit=function(e,t,n){return void 0===n&&(n={}),s(this,void 0,void 0,function(){return u(this,function(r){if(!this.built)throw new f.RuntimeError("The model needs to be compiled before being used.");return[2,this.model.fit(e,t,n)]})})},t.fromConfig=function(e,n){var r=new e({});if(!(r instanceof t))throw new f.ValueError("Sequential.fromConfig called on non-Sequential input: "+r);if(!(n instanceof Array))throw new f.ValueError("Sequential.fromConfig called without an array of configs");if(null==n[0].className||"Merge"===n[0].className)throw new f.ValueError("Legacy serialization format not supported yet.");for(var a=0,o=n;a<o.length;a++){var i=o[a],s=m.deserialize(i);r.add(s)}return r},Object.defineProperty(t.prototype,"stopTraining",{set:function(e){this.model.stopTraining=e},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e.push({className:r.getClassName(),config:r.getConfig()})}return e},t.className="Sequential",t}(d.Model);t.Sequential=b,l.serialization.SerializationMap.register(b)},function(e,t,n){"use strict";function r(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function a(e,t){if(null===e)return null;if("string"==typeof e)return i.toCamelCase(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],o=e.length,s=0;s<o;++s){var u=e[s];r(t,s,u)?n.push(u):n.push(a(u,t))}return n}for(var l={},c=0,p=Object.keys(e);c<p.length;c++){var h=p[c],d=e[h];if("name"===h&&"string"==typeof d)l[h]=d;else{var f=i.toCamelCase(h);l[f]=a(d,f)}}return l}function o(e,t){if(null===e||void 0===e)return null;if("string"==typeof e)return i.toSnakeCase(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],a=e.length,s=0;s<a;++s){var u=e[s];r(t,s,u)?n.push(u):n.push(o(u,t))}return n}for(var l={},c=0,p=Object.keys(e);c<p.length;c++){var h=p[c],d=e[h],f=i.toSnakeCase(h);"name"!==h&&"className"!==h||"string"!=typeof d?l[f]=o(d,h):l[f]=d}return l}Object.defineProperty(t,"__esModule",{value:!0});var i=n(13);t.convertPythonicToTs=a,t.convertTsToPythonic=o},function(e,t){"use strict";function n(e){for(var t=0,n=0,r=e;n<r.length;n++){var a=r[n];t+=0===a.shape.length?1:a.shape.reduce(function(e,t){return e*t})}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.countParamsInWeights=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="0.7.5";t.version=n},function(e,t,n){var r=n(213)();r.helpers=n(3),n(212)(r),r.defaults=n(5),r.Element=n(16),r.elements=n(25),r.Interaction=n(103),r.layouts=n(42),r.platform=n(105),r.plugins=n(104),r.Ticks=n(43),n(209)(r),n(210)(r),n(211)(r),n(215)(r),n(214)(r),n(216)(r),n(232)(r),n(230)(r),n(231)(r),n(233)(r),n(234)(r),n(235)(r),n(202)(r),n(203)(r),n(204)(r),n(205)(r),n(206)(r),n(207)(r),n(208)(r),n(195)(r),n(196)(r),n(197)(r),n(198)(r),n(199)(r),n(200)(r),n(201)(r);var a=n(226);for(var o in a)a.hasOwnProperty(o)&&r.plugins.register(a[o]);r.platform.initialize(),e.exports=r,"undefined"!=typeof window&&(window.Chart=r),r.Legend=a.legend._element,r.Title=a.title._element,r.pluginService=r.plugins,r.PluginBase=r.Element.extend({}),r.canvasHelpers=r.helpers.canvas,r.layoutService=r.layouts},function(e,t){"use strict";e.exports=function(e){e.Bar=function(t,n){return n.type="bar",new e(t,n)}}},function(e,t){"use strict";e.exports=function(e){e.Bubble=function(t,n){return n.type="bubble",new e(t,n)}}},function(e,t){"use strict";e.exports=function(e){e.Doughnut=function(t,n){return n.type="doughnut",new e(t,n)}}},function(e,t){"use strict";e.exports=function(e){e.Line=function(t,n){return n.type="line",new e(t,n)}}},function(e,t){"use strict";e.exports=function(e){e.PolarArea=function(t,n){return n.type="polarArea",new e(t,n)}}},function(e,t){"use strict";e.exports=function(e){e.Radar=function(t,n){return n.type="radar",new e(t,n)}}},function(e,t){"use strict";e.exports=function(e){e.Scatter=function(t,n){return n.type="scatter",new e(t,n)}}},function(e,t,n){"use strict";function r(e,t){var n,r,a,o,i=e.isHorizontal()?e.width:e.height,s=e.getTicks();for(a=1,o=t.length;a<o;++a)i=Math.min(i,t[a]-t[a-1]);for(a=0,o=s.length;a<o;++a)r=e.getPixelForTick(a),i=a>0?Math.min(i,r-n):i,n=r;return i}function a(e,t,n){var r,a,o=n.barThickness,i=t.stackCount,s=t.pixels[e];return u.isNullOrUndef(o)?(r=t.min*n.categoryPercentage,a=n.barPercentage):(r=o*i,a=1),{chunk:r/i,ratio:a,start:s-r/2}}function o(e,t,n){var r,a,o=t.pixels,i=o[e],s=e>0?o[e-1]:null,u=e<o.length-1?o[e+1]:null,l=n.categoryPercentage;return null===s&&(s=i-(null===u?t.end-i:u-i)),null===u&&(u=i+i-s),r=i-(i-s)/2*l,a=(u-s)/2*l,{chunk:a/t.stackCount,ratio:n.barPercentage,start:r}}var i=n(5),s=n(25),u=n(3);i._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),i._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(e,t){var n="";return e.length>0&&(e[0].yLabel?n=e[0].yLabel:t.labels.length>0&&e[0].index<t.labels.length&&(n=t.labels[e[0].index])),n},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n+": "+e.xLabel}},mode:"index",axis:"y"}}),e.exports=function(e){e.controllers.bar=e.DatasetController.extend({dataElementType:s.Rectangle,initialize:function(){var t,n=this;e.DatasetController.prototype.initialize.apply(n,arguments),t=n.getMeta(),t.stack=n.getDataset().stack,t.bar=!0},update:function(e){var t,n,r=this,a=r.getMeta().data;for(r._ruler=r.getRuler(),t=0,n=a.length;t<n;++t)r.updateElement(a[t],t,e)},updateElement:function(e,t,n){var r=this,a=r.chart,o=r.getMeta(),i=r.getDataset(),s=e.custom||{},l=a.options.elements.rectangle;e._xScale=r.getScaleForId(o.xAxisID),e._yScale=r.getScaleForId(o.yAxisID),e._datasetIndex=r.index,e._index=t,e._model={datasetLabel:i.label,label:a.data.labels[t],borderSkipped:s.borderSkipped?s.borderSkipped:l.borderSkipped,backgroundColor:s.backgroundColor?s.backgroundColor:u.valueAtIndexOrDefault(i.backgroundColor,t,l.backgroundColor),borderColor:s.borderColor?s.borderColor:u.valueAtIndexOrDefault(i.borderColor,t,l.borderColor),borderWidth:s.borderWidth?s.borderWidth:u.valueAtIndexOrDefault(i.borderWidth,t,l.borderWidth)},r.updateElementGeometry(e,t,n),e.pivot()},updateElementGeometry:function(e,t,n){var r=this,a=e._model,o=r.getValueScale(),i=o.getBasePixel(),s=o.isHorizontal(),u=r._ruler||r.getRuler(),l=r.calculateBarValuePixels(r.index,t),c=r.calculateBarIndexPixels(r.index,t,u);a.horizontal=s,a.base=n?i:l.base,a.x=s?n?i:l.head:c.center,a.y=s?c.center:n?i:l.head,a.height=s?c.size:void 0,a.width=s?void 0:c.size},getValueScaleId:function(){return this.getMeta().yAxisID},getIndexScaleId:function(){return this.getMeta().xAxisID},getValueScale:function(){return this.getScaleForId(this.getValueScaleId())},getIndexScale:function(){return this.getScaleForId(this.getIndexScaleId())},_getStacks:function(e){var t,n,r=this,a=r.chart,o=r.getIndexScale(),i=o.options.stacked,s=void 0===e?a.data.datasets.length:e+1,u=[];for(t=0;t<s;++t)n=a.getDatasetMeta(t),n.bar&&a.isDatasetVisible(t)&&(i===!1||i===!0&&u.indexOf(n.stack)===-1||void 0===i&&(void 0===n.stack||u.indexOf(n.stack)===-1))&&u.push(n.stack);return u},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),r=void 0!==t?n.indexOf(t):-1;return r===-1?n.length-1:r},getRuler:function(){var e,t,n,a=this,o=a.getIndexScale(),i=a.getStackCount(),s=a.index,l=o.isHorizontal(),c=l?o.left:o.top,p=c+(l?o.width:o.height),h=[];for(e=0,t=a.getMeta().data.length;e<t;++e)h.push(o.getPixelForValue(null,e,s));return n=u.isNullOrUndef(o.options.barThickness)?r(o,h):-1,{min:n,pixels:h,start:c,end:p,stackCount:i,scale:o}},calculateBarValuePixels:function(e,t){var n,r,a,o,i,s,u=this,l=u.chart,c=u.getMeta(),p=u.getValueScale(),h=l.data.datasets,d=p.getRightValue(h[e].data[t]),f=p.options.stacked,m=c.stack,g=0;if(f||void 0===f&&void 0!==m)for(n=0;n<e;++n)r=l.getDatasetMeta(n),r.bar&&r.stack===m&&r.controller.getValueScaleId()===p.id&&l.isDatasetVisible(n)&&(a=p.getRightValue(h[n].data[t]),(d<0&&a<0||d>=0&&a>0)&&(g+=a));return o=p.getPixelForValue(g),i=p.getPixelForValue(g+d),s=(i-o)/2,{size:s,base:o,head:i,center:i+s/2}},calculateBarIndexPixels:function(e,t,n){var r=this,i=n.scale.options,s="flex"===i.barThickness?o(t,n,i):a(t,n,i),l=r.getStackIndex(e,r.getMeta().stack),c=s.start+s.chunk*l+s.chunk/2,p=Math.min(u.valueOrDefault(i.maxBarThickness,1/0),s.chunk*s.ratio);return{base:c-p/2,head:c+p/2,center:c,size:p}},draw:function(){var e=this,t=e.chart,n=e.getValueScale(),r=e.getMeta().data,a=e.getDataset(),o=r.length,i=0;for(u.canvas.clipArea(t.ctx,t.chartArea);i<o;++i)isNaN(n.getRightValue(a.data[i]))||r[i].draw();u.canvas.unclipArea(t.ctx)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},a=e._model;a.backgroundColor=r.hoverBackgroundColor?r.hoverBackgroundColor:u.valueAtIndexOrDefault(t.hoverBackgroundColor,n,u.getHoverColor(a.backgroundColor)),a.borderColor=r.hoverBorderColor?r.hoverBorderColor:u.valueAtIndexOrDefault(t.hoverBorderColor,n,u.getHoverColor(a.borderColor)),a.borderWidth=r.hoverBorderWidth?r.hoverBorderWidth:u.valueAtIndexOrDefault(t.hoverBorderWidth,n,a.borderWidth)},removeHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},a=e._model,o=this.chart.options.elements.rectangle;a.backgroundColor=r.backgroundColor?r.backgroundColor:u.valueAtIndexOrDefault(t.backgroundColor,n,o.backgroundColor),a.borderColor=r.borderColor?r.borderColor:u.valueAtIndexOrDefault(t.borderColor,n,o.borderColor),a.borderWidth=r.borderWidth?r.borderWidth:u.valueAtIndexOrDefault(t.borderWidth,n,o.borderWidth)}}),e.controllers.horizontalBar=e.controllers.bar.extend({getValueScaleId:function(){return this.getMeta().xAxisID},getIndexScaleId:function(){return this.getMeta().yAxisID}})}},function(e,t,n){"use strict";var r=n(5),a=n(25),o=n(3);r._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"",r=t.datasets[e.datasetIndex].data[e.index];return n+": ("+e.xLabel+", "+e.yLabel+", "+r.r+")"}}}}),e.exports=function(e){e.controllers.bubble=e.DatasetController.extend({dataElementType:a.Point,update:function(e){var t=this,n=t.getMeta(),r=n.data;o.each(r,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){var r=this,a=r.getMeta(),o=e.custom||{},i=r.getScaleForId(a.xAxisID),s=r.getScaleForId(a.yAxisID),u=r._resolveElementOptions(e,t),l=r.getDataset().data[t],c=r.index,p=n?i.getPixelForDecimal(.5):i.getPixelForValue("object"==typeof l?l:NaN,t,c),h=n?s.getBasePixel():s.getPixelForValue(l,t,c);e._xScale=i,e._yScale=s,e._options=u,e._datasetIndex=c,e._index=t,e._model={backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,hitRadius:u.hitRadius,pointStyle:u.pointStyle,radius:n?0:u.radius,skip:o.skip||isNaN(p)||isNaN(h),x:p,y:h},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options;t.backgroundColor=o.valueOrDefault(n.hoverBackgroundColor,o.getHoverColor(n.backgroundColor)),t.borderColor=o.valueOrDefault(n.hoverBorderColor,o.getHoverColor(n.borderColor)),t.borderWidth=o.valueOrDefault(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},removeHoverStyle:function(e){var t=e._model,n=e._options;t.backgroundColor=n.backgroundColor,t.borderColor=n.borderColor,t.borderWidth=n.borderWidth,t.radius=n.radius},_resolveElementOptions:function(e,t){var n,r,a,i=this,s=i.chart,u=s.data.datasets,l=u[i.index],c=e.custom||{},p=s.options.elements.point,h=o.options.resolve,d=l.data[t],f={},m={chart:s,dataIndex:t,dataset:l,datasetIndex:i.index},g=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle"];for(n=0,r=g.length;n<r;++n)a=g[n],f[a]=h([c[a],l[a],p[a]],m,t);return f.radius=h([c.radius,d?d.r:void 0,l.radius,p.radius],m,t),f}})}},function(e,t,n){"use strict";var r=n(5),a=n(25),o=n(3);r._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var n=e.data,r=n.datasets,a=n.labels;if(r.length)for(var o=0;o<r[0].data.length;++o)t.push('<li><span style="background-color:'+r[0].backgroundColor[o]+'"></span>'),a[o]&&t.push(a[o]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var a=e.getDatasetMeta(0),i=t.datasets[0],s=a.data[r],u=s&&s.custom||{},l=o.valueAtIndexOrDefault,c=e.options.elements.arc,p=u.backgroundColor?u.backgroundColor:l(i.backgroundColor,r,c.backgroundColor),h=u.borderColor?u.borderColor:l(i.borderColor,r,c.borderColor),d=u.borderWidth?u.borderWidth:l(i.borderWidth,r,c.borderWidth);
return{text:n,fillStyle:p,strokeStyle:h,lineWidth:d,hidden:isNaN(i.data[r])||a.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,a,o=t.index,i=this.chart;for(n=0,r=(i.data.datasets||[]).length;n<r;++n)a=i.getDatasetMeta(n),a.data[o]&&(a.data[o].hidden=!a.data[o].hidden);i.update()}},cutoutPercentage:50,rotation:Math.PI*-.5,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],r=": "+t.datasets[e.datasetIndex].data[e.index];return o.isArray(n)?(n=n.slice(),n[0]+=r):n+=r,n}}}}),r._set("pie",o.clone(r.doughnut)),r._set("pie",{cutoutPercentage:0}),e.exports=function(e){e.controllers.doughnut=e.controllers.pie=e.DatasetController.extend({dataElementType:a.Arc,linkScales:o.noop,getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t=this,n=t.chart,r=n.chartArea,a=n.options,i=a.elements.arc,s=r.right-r.left-i.borderWidth,u=r.bottom-r.top-i.borderWidth,l=Math.min(s,u),c={x:0,y:0},p=t.getMeta(),h=a.cutoutPercentage,d=a.circumference;if(d<2*Math.PI){var f=a.rotation%(2*Math.PI);f+=2*Math.PI*(f>=Math.PI?-1:f<-Math.PI?1:0);var m=f+d,g={x:Math.cos(f),y:Math.sin(f)},v={x:Math.cos(m),y:Math.sin(m)},y=f<=0&&m>=0||f<=2*Math.PI&&2*Math.PI<=m,b=f<=.5*Math.PI&&.5*Math.PI<=m||f<=2.5*Math.PI&&2.5*Math.PI<=m,x=f<=-Math.PI&&-Math.PI<=m||f<=Math.PI&&Math.PI<=m,w=f<=.5*-Math.PI&&.5*-Math.PI<=m||f<=1.5*Math.PI&&1.5*Math.PI<=m,S=h/100,_={x:x?-1:Math.min(g.x*(g.x<0?1:S),v.x*(v.x<0?1:S)),y:w?-1:Math.min(g.y*(g.y<0?1:S),v.y*(v.y<0?1:S))},N={x:y?1:Math.max(g.x*(g.x>0?1:S),v.x*(v.x>0?1:S)),y:b?1:Math.max(g.y*(g.y>0?1:S),v.y*(v.y>0?1:S))},T={width:.5*(N.x-_.x),height:.5*(N.y-_.y)};l=Math.min(s/T.width,u/T.height),c={x:(N.x+_.x)*-.5,y:(N.y+_.y)*-.5}}n.borderWidth=t.getMaxBorderWidth(p.data),n.outerRadius=Math.max((l-n.borderWidth)/2,0),n.innerRadius=Math.max(h?n.outerRadius/100*h:0,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),n.offsetX=c.x*n.outerRadius,n.offsetY=c.y*n.outerRadius,p.total=t.calculateTotal(),t.outerRadius=n.outerRadius-n.radiusLength*t.getRingIndex(t.index),t.innerRadius=Math.max(t.outerRadius-n.radiusLength,0),o.each(p.data,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){var r=this,a=r.chart,i=a.chartArea,s=a.options,u=s.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,p=s.rotation,h=s.rotation,d=r.getDataset(),f=n&&u.animateRotate?0:e.hidden?0:r.calculateCircumference(d.data[t])*(s.circumference/(2*Math.PI)),m=n&&u.animateScale?0:r.innerRadius,g=n&&u.animateScale?0:r.outerRadius,v=o.valueAtIndexOrDefault;o.extend(e,{_datasetIndex:r.index,_index:t,_model:{x:l+a.offsetX,y:c+a.offsetY,startAngle:p,endAngle:h,circumference:f,outerRadius:g,innerRadius:m,label:v(d.label,t,a.data.labels[t])}});var y=e._model;this.removeHoverStyle(e),n&&u.animateRotate||(0===t?y.startAngle=s.rotation:y.startAngle=r.getMeta().data[t-1]._model.endAngle,y.endAngle=y.startAngle+y.circumference),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),r=0;return o.each(n.data,function(n,a){e=t.data[a],isNaN(e)||n.hidden||(r+=Math.abs(e))}),r},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){for(var t,n,r=0,a=this.index,o=e.length,i=0;i<o;i++)t=e[i]._model?e[i]._model.borderWidth:0,n=e[i]._chart?e[i]._chart.config.data.datasets[a].hoverBorderWidth:0,r=t>r?t:r,r=n>r?n:r;return r}})}},function(e,t,n){"use strict";var r=n(5),a=n(25),o=n(3);r._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}}),e.exports=function(e){function t(e,t){return o.valueOrDefault(e.showLine,t.showLines)}e.controllers.line=e.DatasetController.extend({datasetElementType:a.Line,dataElementType:a.Point,update:function(e){var n,r,a,i=this,s=i.getMeta(),u=s.dataset,l=s.data||[],c=i.chart.options,p=c.elements.line,h=i.getScaleForId(s.yAxisID),d=i.getDataset(),f=t(d,c);for(f&&(a=u.custom||{},void 0!==d.tension&&void 0===d.lineTension&&(d.lineTension=d.tension),u._scale=h,u._datasetIndex=i.index,u._children=l,u._model={spanGaps:d.spanGaps?d.spanGaps:c.spanGaps,tension:a.tension?a.tension:o.valueOrDefault(d.lineTension,p.tension),backgroundColor:a.backgroundColor?a.backgroundColor:d.backgroundColor||p.backgroundColor,borderWidth:a.borderWidth?a.borderWidth:d.borderWidth||p.borderWidth,borderColor:a.borderColor?a.borderColor:d.borderColor||p.borderColor,borderCapStyle:a.borderCapStyle?a.borderCapStyle:d.borderCapStyle||p.borderCapStyle,borderDash:a.borderDash?a.borderDash:d.borderDash||p.borderDash,borderDashOffset:a.borderDashOffset?a.borderDashOffset:d.borderDashOffset||p.borderDashOffset,borderJoinStyle:a.borderJoinStyle?a.borderJoinStyle:d.borderJoinStyle||p.borderJoinStyle,fill:a.fill?a.fill:void 0!==d.fill?d.fill:p.fill,steppedLine:a.steppedLine?a.steppedLine:o.valueOrDefault(d.steppedLine,p.stepped),cubicInterpolationMode:a.cubicInterpolationMode?a.cubicInterpolationMode:o.valueOrDefault(d.cubicInterpolationMode,p.cubicInterpolationMode)},u.pivot()),n=0,r=l.length;n<r;++n)i.updateElement(l[n],n,e);for(f&&0!==u._model.tension&&i.updateBezierControlPoints(),n=0,r=l.length;n<r;++n)l[n].pivot()},getPointBackgroundColor:function(e,t){var n=this.chart.options.elements.point.backgroundColor,r=this.getDataset(),a=e.custom||{};return a.backgroundColor?n=a.backgroundColor:r.pointBackgroundColor?n=o.valueAtIndexOrDefault(r.pointBackgroundColor,t,n):r.backgroundColor&&(n=r.backgroundColor),n},getPointBorderColor:function(e,t){var n=this.chart.options.elements.point.borderColor,r=this.getDataset(),a=e.custom||{};return a.borderColor?n=a.borderColor:r.pointBorderColor?n=o.valueAtIndexOrDefault(r.pointBorderColor,t,n):r.borderColor&&(n=r.borderColor),n},getPointBorderWidth:function(e,t){var n=this.chart.options.elements.point.borderWidth,r=this.getDataset(),a=e.custom||{};return isNaN(a.borderWidth)?!isNaN(r.pointBorderWidth)||o.isArray(r.pointBorderWidth)?n=o.valueAtIndexOrDefault(r.pointBorderWidth,t,n):isNaN(r.borderWidth)||(n=r.borderWidth):n=a.borderWidth,n},updateElement:function(e,t,n){var r,a,i=this,s=i.getMeta(),u=e.custom||{},l=i.getDataset(),c=i.index,p=l.data[t],h=i.getScaleForId(s.yAxisID),d=i.getScaleForId(s.xAxisID),f=i.chart.options.elements.point;void 0!==l.radius&&void 0===l.pointRadius&&(l.pointRadius=l.radius),void 0!==l.hitRadius&&void 0===l.pointHitRadius&&(l.pointHitRadius=l.hitRadius),r=d.getPixelForValue("object"==typeof p?p:NaN,t,c),a=n?h.getBasePixel():i.calculatePointY(p,t,c),e._xScale=d,e._yScale=h,e._datasetIndex=c,e._index=t,e._model={x:r,y:a,skip:u.skip||isNaN(r)||isNaN(a),radius:u.radius||o.valueAtIndexOrDefault(l.pointRadius,t,f.radius),pointStyle:u.pointStyle||o.valueAtIndexOrDefault(l.pointStyle,t,f.pointStyle),backgroundColor:i.getPointBackgroundColor(e,t),borderColor:i.getPointBorderColor(e,t),borderWidth:i.getPointBorderWidth(e,t),tension:s.dataset._model?s.dataset._model.tension:0,steppedLine:!!s.dataset._model&&s.dataset._model.steppedLine,hitRadius:u.hitRadius||o.valueAtIndexOrDefault(l.pointHitRadius,t,f.hitRadius)}},calculatePointY:function(e,t,n){var r,a,o,i=this,s=i.chart,u=i.getMeta(),l=i.getScaleForId(u.yAxisID),c=0,p=0;if(l.options.stacked){for(r=0;r<n;r++)if(a=s.data.datasets[r],o=s.getDatasetMeta(r),"line"===o.type&&o.yAxisID===l.id&&s.isDatasetVisible(r)){var h=Number(l.getRightValue(a.data[t]));h<0?p+=h||0:c+=h||0}var d=Number(l.getRightValue(e));return d<0?l.getPixelForValue(p+d):l.getPixelForValue(c+d)}return l.getPixelForValue(e)},updateBezierControlPoints:function(){function e(e,t,n){return Math.max(Math.min(e,n),t)}var t,n,r,a,i,s=this,u=s.getMeta(),l=s.chart.chartArea,c=u.data||[];if(u.dataset._model.spanGaps&&(c=c.filter(function(e){return!e._model.skip})),"monotone"===u.dataset._model.cubicInterpolationMode)o.splineCurveMonotone(c);else for(t=0,n=c.length;t<n;++t)r=c[t],a=r._model,i=o.splineCurve(o.previousItem(c,t)._model,a,o.nextItem(c,t)._model,u.dataset._model.tension),a.controlPointPreviousX=i.previous.x,a.controlPointPreviousY=i.previous.y,a.controlPointNextX=i.next.x,a.controlPointNextY=i.next.y;if(s.chart.options.elements.line.capBezierPoints)for(t=0,n=c.length;t<n;++t)a=c[t]._model,a.controlPointPreviousX=e(a.controlPointPreviousX,l.left,l.right),a.controlPointPreviousY=e(a.controlPointPreviousY,l.top,l.bottom),a.controlPointNextX=e(a.controlPointNextX,l.left,l.right),a.controlPointNextY=e(a.controlPointNextY,l.top,l.bottom)},draw:function(){var e=this,n=e.chart,r=e.getMeta(),a=r.data||[],i=n.chartArea,s=a.length,u=0;for(o.canvas.clipArea(n.ctx,i),t(e.getDataset(),n.options)&&r.dataset.draw(),o.canvas.unclipArea(n.ctx);u<s;++u)a[u].draw(i)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},a=e._model;a.radius=r.hoverRadius||o.valueAtIndexOrDefault(t.pointHoverRadius,n,this.chart.options.elements.point.hoverRadius),a.backgroundColor=r.hoverBackgroundColor||o.valueAtIndexOrDefault(t.pointHoverBackgroundColor,n,o.getHoverColor(a.backgroundColor)),a.borderColor=r.hoverBorderColor||o.valueAtIndexOrDefault(t.pointHoverBorderColor,n,o.getHoverColor(a.borderColor)),a.borderWidth=r.hoverBorderWidth||o.valueAtIndexOrDefault(t.pointHoverBorderWidth,n,a.borderWidth)},removeHoverStyle:function(e){var t=this,n=t.chart.data.datasets[e._datasetIndex],r=e._index,a=e.custom||{},i=e._model;void 0!==n.radius&&void 0===n.pointRadius&&(n.pointRadius=n.radius),i.radius=a.radius||o.valueAtIndexOrDefault(n.pointRadius,r,t.chart.options.elements.point.radius),i.backgroundColor=t.getPointBackgroundColor(e,r),i.borderColor=t.getPointBorderColor(e,r),i.borderWidth=t.getPointBorderWidth(e,r)}})}},function(e,t,n){"use strict";var r=n(5),a=n(25),o=n(3);r._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var n=e.data,r=n.datasets,a=n.labels;if(r.length)for(var o=0;o<r[0].data.length;++o)t.push('<li><span style="background-color:'+r[0].backgroundColor[o]+'"></span>'),a[o]&&t.push(a[o]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var a=e.getDatasetMeta(0),i=t.datasets[0],s=a.data[r],u=s.custom||{},l=o.valueAtIndexOrDefault,c=e.options.elements.arc,p=u.backgroundColor?u.backgroundColor:l(i.backgroundColor,r,c.backgroundColor),h=u.borderColor?u.borderColor:l(i.borderColor,r,c.borderColor),d=u.borderWidth?u.borderWidth:l(i.borderWidth,r,c.borderWidth);return{text:n,fillStyle:p,strokeStyle:h,lineWidth:d,hidden:isNaN(i.data[r])||a.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,a,o=t.index,i=this.chart;for(n=0,r=(i.data.datasets||[]).length;n<r;++n)a=i.getDatasetMeta(n),a.data[o].hidden=!a.data[o].hidden;i.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}}),e.exports=function(e){e.controllers.polarArea=e.DatasetController.extend({dataElementType:a.Arc,linkScales:o.noop,update:function(e){var t=this,n=t.chart,r=n.chartArea,a=t.getMeta(),i=n.options,s=i.elements.arc,u=Math.min(r.right-r.left,r.bottom-r.top);n.outerRadius=Math.max((u-s.borderWidth/2)/2,0),n.innerRadius=Math.max(i.cutoutPercentage?n.outerRadius/100*i.cutoutPercentage:1,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),t.outerRadius=n.outerRadius-n.radiusLength*t.index,t.innerRadius=t.outerRadius-n.radiusLength,a.count=t.countVisibleElements(),o.each(a.data,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){for(var r=this,a=r.chart,i=r.getDataset(),s=a.options,u=s.animation,l=a.scale,c=a.data.labels,p=r.calculateCircumference(i.data[t]),h=l.xCenter,d=l.yCenter,f=0,m=r.getMeta(),g=0;g<t;++g)isNaN(i.data[g])||m.data[g].hidden||++f;var v=s.startAngle,y=e.hidden?0:l.getDistanceFromCenterForValue(i.data[t]),b=v+p*f,x=b+(e.hidden?0:p),w=u.animateScale?0:l.getDistanceFromCenterForValue(i.data[t]);o.extend(e,{_datasetIndex:r.index,_index:t,_scale:l,_model:{x:h,y:d,innerRadius:0,outerRadius:n?w:y,startAngle:n&&u.animateRotate?v:b,endAngle:n&&u.animateRotate?v:x,label:o.valueAtIndexOrDefault(c,t,c[t])}}),r.removeHoverStyle(e),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return o.each(t.data,function(t,r){isNaN(e.data[r])||t.hidden||n++}),n},calculateCircumference:function(e){var t=this.getMeta().count;return t>0&&!isNaN(e)?2*Math.PI/t:0}})}},function(e,t,n){"use strict";var r=n(5),a=n(25),o=n(3);r._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}}),e.exports=function(e){e.controllers.radar=e.DatasetController.extend({datasetElementType:a.Line,dataElementType:a.Point,linkScales:o.noop,update:function(e){var t=this,n=t.getMeta(),r=n.dataset,a=n.data,i=r.custom||{},s=t.getDataset(),u=t.chart.options.elements.line,l=t.chart.scale;void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),o.extend(n.dataset,{_datasetIndex:t.index,_scale:l,_children:a,_loop:!0,_model:{tension:i.tension?i.tension:o.valueOrDefault(s.lineTension,u.tension),backgroundColor:i.backgroundColor?i.backgroundColor:s.backgroundColor||u.backgroundColor,borderWidth:i.borderWidth?i.borderWidth:s.borderWidth||u.borderWidth,borderColor:i.borderColor?i.borderColor:s.borderColor||u.borderColor,fill:i.fill?i.fill:void 0!==s.fill?s.fill:u.fill,borderCapStyle:i.borderCapStyle?i.borderCapStyle:s.borderCapStyle||u.borderCapStyle,borderDash:i.borderDash?i.borderDash:s.borderDash||u.borderDash,borderDashOffset:i.borderDashOffset?i.borderDashOffset:s.borderDashOffset||u.borderDashOffset,borderJoinStyle:i.borderJoinStyle?i.borderJoinStyle:s.borderJoinStyle||u.borderJoinStyle}}),n.dataset.pivot(),o.each(a,function(n,r){t.updateElement(n,r,e)},t),t.updateBezierControlPoints()},updateElement:function(e,t,n){var r=this,a=e.custom||{},i=r.getDataset(),s=r.chart.scale,u=r.chart.options.elements.point,l=s.getPointPositionForValue(t,i.data[t]);void 0!==i.radius&&void 0===i.pointRadius&&(i.pointRadius=i.radius),void 0!==i.hitRadius&&void 0===i.pointHitRadius&&(i.pointHitRadius=i.hitRadius),o.extend(e,{_datasetIndex:r.index,_index:t,_scale:s,_model:{x:n?s.xCenter:l.x,y:n?s.yCenter:l.y,tension:a.tension?a.tension:o.valueOrDefault(i.lineTension,r.chart.options.elements.line.tension),radius:a.radius?a.radius:o.valueAtIndexOrDefault(i.pointRadius,t,u.radius),backgroundColor:a.backgroundColor?a.backgroundColor:o.valueAtIndexOrDefault(i.pointBackgroundColor,t,u.backgroundColor),borderColor:a.borderColor?a.borderColor:o.valueAtIndexOrDefault(i.pointBorderColor,t,u.borderColor),borderWidth:a.borderWidth?a.borderWidth:o.valueAtIndexOrDefault(i.pointBorderWidth,t,u.borderWidth),pointStyle:a.pointStyle?a.pointStyle:o.valueAtIndexOrDefault(i.pointStyle,t,u.pointStyle),hitRadius:a.hitRadius?a.hitRadius:o.valueAtIndexOrDefault(i.pointHitRadius,t,u.hitRadius)}}),e._model.skip=a.skip?a.skip:isNaN(e._model.x)||isNaN(e._model.y)},updateBezierControlPoints:function(){var e=this.chart.chartArea,t=this.getMeta();o.each(t.data,function(n,r){var a=n._model,i=o.splineCurve(o.previousItem(t.data,r,!0)._model,a,o.nextItem(t.data,r,!0)._model,a.tension);a.controlPointPreviousX=Math.max(Math.min(i.previous.x,e.right),e.left),a.controlPointPreviousY=Math.max(Math.min(i.previous.y,e.bottom),e.top),a.controlPointNextX=Math.max(Math.min(i.next.x,e.right),e.left),a.controlPointNextY=Math.max(Math.min(i.next.y,e.bottom),e.top),n.pivot()})},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e.custom||{},r=e._index,a=e._model;a.radius=n.hoverRadius?n.hoverRadius:o.valueAtIndexOrDefault(t.pointHoverRadius,r,this.chart.options.elements.point.hoverRadius),a.backgroundColor=n.hoverBackgroundColor?n.hoverBackgroundColor:o.valueAtIndexOrDefault(t.pointHoverBackgroundColor,r,o.getHoverColor(a.backgroundColor)),a.borderColor=n.hoverBorderColor?n.hoverBorderColor:o.valueAtIndexOrDefault(t.pointHoverBorderColor,r,o.getHoverColor(a.borderColor)),a.borderWidth=n.hoverBorderWidth?n.hoverBorderWidth:o.valueAtIndexOrDefault(t.pointHoverBorderWidth,r,a.borderWidth)},removeHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e.custom||{},r=e._index,a=e._model,i=this.chart.options.elements.point;a.radius=n.radius?n.radius:o.valueAtIndexOrDefault(t.pointRadius,r,i.radius),a.backgroundColor=n.backgroundColor?n.backgroundColor:o.valueAtIndexOrDefault(t.pointBackgroundColor,r,i.backgroundColor),a.borderColor=n.borderColor?n.borderColor:o.valueAtIndexOrDefault(t.pointBorderColor,r,i.borderColor),a.borderWidth=n.borderWidth?n.borderWidth:o.valueAtIndexOrDefault(t.pointBorderWidth,r,i.borderWidth)}})}},function(e,t,n){"use strict";var r=n(5);r._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),e.exports=function(e){e.controllers.scatter=e.controllers.line}},function(e,t,n){"use strict";var r=n(5),a=n(16),o=n(3);r._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:o.noop,onComplete:o.noop}}),e.exports=function(e){e.Animation=a.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),e.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(e,t,n,r){var a,o,i=this.animations;for(t.chart=e,r||(e.animating=!0),a=0,o=i.length;a<o;++a)if(i[a].chart===e)return void(i[a]=t);i.push(t),1===i.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=o.findIndex(this.animations,function(t){return t.chart===e});t!==-1&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=o.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){var e=this,t=Date.now(),n=0;e.dropFrames>1&&(n=Math.floor(e.dropFrames),e.dropFrames=e.dropFrames%1),e.advance(1+n);var r=Date.now();e.dropFrames+=(r-t)/e.frameDuration,e.animations.length>0&&e.requestAnimationFrame()},advance:function(e){for(var t,n,r=this.animations,a=0;a<r.length;)t=r[a],n=t.chart,t.currentStep=(t.currentStep||0)+e,t.currentStep=Math.min(t.currentStep,t.numSteps),o.callback(t.render,[n,t],n),o.callback(t.onAnimationProgress,[t],n),t.currentStep>=t.numSteps?(o.callback(t.onAnimationComplete,[t],n),n.animating=!1,r.splice(a,1)):++a}},Object.defineProperty(e.Animation.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(e.Animation.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}})}},function(e,t,n){"use strict";var r=n(5),a=n(3),o=n(103),i=n(42),s=n(105),u=n(104);e.exports=function(e){function t(e){e=e||{};var t=e.data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=a.configMerge(r.global,r[e.type],e.options||{}),e}function n(t){var n=t.options;a.each(t.scales,function(e){i.removeBox(t,e)}),n=a.configMerge(e.defaults.global,e.defaults[t.config.type],n),t.options=t.config.options=n,t.ensureScalesHaveIDs(),t.buildOrUpdateScales(),t.tooltip._options=n.tooltips,t.tooltip.initialize()}function l(e){return"top"===e||"bottom"===e}e.types={},e.instances={},e.controllers={},a.extend(e.prototype,{construct:function(n,r){var o=this;r=t(r);var i=s.acquireContext(n,r),u=i&&i.canvas,l=u&&u.height,c=u&&u.width;return o.id=a.uid(),o.ctx=i,o.canvas=u,o.config=r,o.width=c,o.height=l,o.aspectRatio=l?c/l:null,o.options=r.options,o._bufferedRender=!1,o.chart=o,o.controller=o,e.instances[o.id]=o,Object.defineProperty(o,"data",{get:function(){return o.config.data},set:function(e){o.config.data=e}}),i&&u?(o.initialize(),void o.update()):void console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return u.notify(e,"beforeInit"),a.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.initToolTip(),u.notify(e,"afterInit"),e},clear:function(){return a.canvas.clear(this),this},stop:function(){return e.animationService.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,r=t.canvas,o=n.maintainAspectRatio&&t.aspectRatio||null,i=Math.max(0,Math.floor(a.getMaximumWidth(r))),s=Math.max(0,Math.floor(o?i/o:a.getMaximumHeight(r)));if((t.width!==i||t.height!==s)&&(r.width=t.width=i,r.height=t.height=s,r.style.width=i+"px",r.style.height=s+"px",a.retinaScale(t,n.devicePixelRatio),!e)){var l={width:i,height:s};u.notify(t,"resize",[l]),t.options.onResize&&t.options.onResize(t,l),t.stop(),t.update(t.options.responsiveAnimationDuration)}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;a.each(t.xAxes,function(e,t){e.id=e.id||"x-axis-"+t}),a.each(t.yAxes,function(e,t){e.id=e.id||"y-axis-"+t}),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var t=this,n=t.options,r=t.scales||{},o=[],i=Object.keys(r).reduce(function(e,t){return e[t]=!1,e},{});n.scales&&(o=o.concat((n.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category",dposition:"bottom"}}),(n.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear",dposition:"left"}}))),n.scale&&o.push({options:n.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),a.each(o,function(n){var o=n.options,s=o.id,u=a.valueOrDefault(o.type,n.dtype);l(o.position)!==l(n.dposition)&&(o.position=n.dposition),i[s]=!0;var c=null;if(s in r&&r[s].type===u)c=r[s],c.options=o,c.ctx=t.ctx,c.chart=t;else{var p=e.scaleService.getScaleConstructor(u);if(!p)return;c=new p({id:s,type:u,options:o,ctx:t.ctx,chart:t}),r[c.id]=c}c.mergeTicksOptions(),n.isDefault&&(t.scale=c)}),a.each(i,function(e,t){e||delete r[t]}),t.scales=r,e.scaleService.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this,n=[],r=[];return a.each(t.data.datasets,function(a,o){var i=t.getDatasetMeta(o),s=a.type||t.config.type;if(i.type&&i.type!==s&&(t.destroyDatasetMeta(o),i=t.getDatasetMeta(o)),i.type=s,n.push(i.type),i.controller)i.controller.updateIndex(o),i.controller.linkScales();else{var u=e.controllers[i.type];if(void 0===u)throw new Error('"'+i.type+'" is not a chart type.');i.controller=new u(t,o),r.push(i.controller)}},t),r},resetElements:function(){var e=this;a.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),n(t),u._invalidate(t),u.notify(t,"beforeUpdate")!==!1){t.tooltip._data=t.data;var r=t.buildOrUpdateControllers();a.each(t.data.datasets,function(e,n){t.getDatasetMeta(n).controller.buildOrUpdateElements()},t),t.updateLayout(),t.options.animation&&t.options.animation.duration&&a.each(r,function(e){e.reset()}),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],u.notify(t,"afterUpdate"),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){var e=this;u.notify(e,"beforeLayout")!==!1&&(i.update(this,this.width,this.height),u.notify(e,"afterScaleUpdate"),u.notify(e,"afterLayout"))},updateDatasets:function(){var e=this;if(u.notify(e,"beforeDatasetsUpdate")!==!1){for(var t=0,n=e.data.datasets.length;t<n;++t)e.updateDataset(t);u.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,n=t.getDatasetMeta(e),r={meta:n,index:e};u.notify(t,"beforeDatasetUpdate",[r])!==!1&&(n.controller.update(),u.notify(t,"afterDatasetUpdate",[r]))},render:function(t){var n=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var r=t.duration,o=t.lazy;if(u.notify(n,"beforeRender")!==!1){var i=n.options.animation,s=function(e){u.notify(n,"afterRender"),a.callback(i&&i.onComplete,[e],n)};if(i&&("undefined"!=typeof r&&0!==r||"undefined"==typeof r&&0!==i.duration)){var l=new e.Animation({numSteps:(r||i.duration)/16.66,easing:t.easing||i.easing,render:function(e,t){var n=a.easing.effects[t.easing],r=t.currentStep,o=r/t.numSteps;e.draw(n(o),o,r)},onAnimationProgress:i.onProgress,onAnimationComplete:s});e.animationService.addAnimation(n,l,r,o)}else n.draw(),s(new e.Animation({numSteps:0,chart:n}));return n}},draw:function(e){var t=this;t.clear(),a.isNullOrUndef(e)&&(e=1),t.transition(e),u.notify(t,"beforeDraw",[e])!==!1&&(a.each(t.boxes,function(e){e.draw(t.chartArea)},t),t.scale&&t.scale.draw(),t.drawDatasets(e),t._drawTooltip(e),u.notify(t,"afterDraw",[e]))},transition:function(e){for(var t=this,n=0,r=(t.data.datasets||[]).length;n<r;++n)t.isDatasetVisible(n)&&t.getDatasetMeta(n).controller.transition(e);t.tooltip.transition(e)},drawDatasets:function(e){var t=this;if(u.notify(t,"beforeDatasetsDraw",[e])!==!1){for(var n=(t.data.datasets||[]).length-1;n>=0;--n)t.isDatasetVisible(n)&&t.drawDataset(n,e);u.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n=this,r=n.getDatasetMeta(e),a={meta:r,index:e,easingValue:t};u.notify(n,"beforeDatasetDraw",[a])!==!1&&(r.controller.draw(t),u.notify(n,"afterDatasetDraw",[a]))},_drawTooltip:function(e){var t=this,n=t.tooltip,r={tooltip:n,easingValue:e};u.notify(t,"beforeTooltipDraw",[r])!==!1&&(n.draw(),u.notify(t,"afterTooltipDraw",[r]))},getElementAtEvent:function(e){return o.modes.single(this,e)},getElementsAtEvent:function(e){return o.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return o.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var r=o.modes[t];return"function"==typeof r?r(this,e,n):[]},getDatasetAtEvent:function(e){return o.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,n=t.data.datasets[e];n._meta||(n._meta={});var r=n._meta[t.id];return r||(r=n._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),r},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],r=n._meta&&n._meta[t];r&&(r.controller.destroy(),delete n._meta[t])},destroy:function(){var t,n,r=this,o=r.canvas;for(r.stop(),t=0,n=r.data.datasets.length;t<n;++t)r.destroyDatasetMeta(t);o&&(r.unbindEvents(),a.canvas.clear(r),s.releaseContext(r.ctx),r.canvas=null,r.ctx=null),u.notify(r,"destroy"),delete e.instances[r.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new e.Tooltip({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};a.each(e.options.events,function(r){s.addEventListener(e,r,n),t[r]=n}),e.options.responsive&&(n=function(){e.resize()},s.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,a.each(t,function(t,n){s.removeEventListener(e,n,t)}))},updateHoverStyle:function(e,t,n){var r,a,o,i=n?"setHoverStyle":"removeHoverStyle";for(a=0,o=e.length;a<o;++a)r=e[a],r&&this.getDatasetMeta(r._datasetIndex).controller[i](r)},eventHandler:function(e){var t=this,n=t.tooltip;if(u.notify(t,"beforeEvent",[e])!==!1){t._bufferedRender=!0,t._bufferedRequest=null;var r=t.handleEvent(e);n&&(r=n._start?n.handleEvent(e):r|n.handleEvent(e)),u.notify(t,"afterEvent",[e]);var a=t._bufferedRequest;return a?t.render(a):r&&!t.animating&&(t.stop(),t.render(t.options.hover.animationDuration,!0)),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t=this,n=t.options||{},r=n.hover,o=!1;return t.lastActive=t.lastActive||[],"mouseout"===e.type?t.active=[]:t.active=t.getElementsAtEventForMode(e,r.mode,r),a.callback(n.onHover||n.hover.onHover,[e.native,t.active],t),"mouseup"!==e.type&&"click"!==e.type||n.onClick&&n.onClick.call(t,e.native,t.active),t.lastActive.length&&t.updateHoverStyle(t.lastActive,r.mode,!1),t.active.length&&r.mode&&t.updateHoverStyle(t.active,r.mode,!0),o=!a.arrayEquals(t.active,t.lastActive),t.lastActive=t.active,o}}),e.Controller=e}},function(e,t,n){"use strict";var r=n(3);e.exports=function(e){function t(e,t){return e._chartjs?void e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),void a.forEach(function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),a=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),o=a.apply(this,t);return r.each(e._chartjs.listeners,function(e){"function"==typeof e[n]&&e[n].apply(e,t)}),o}})}))}function n(e,t){var n=e._chartjs;if(n){var r=n.listeners,o=r.indexOf(t);o!==-1&&r.splice(o,1),r.length>0||(a.forEach(function(t){delete e[t]}),delete e._chartjs)}}var a=["push","pop","shift","splice","unshift"];e.DatasetController=function(e,t){this.initialize(e,t)},r.extend(e.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),n=e.getDataset();null!==t.xAxisID&&t.xAxisID in e.chart.scales||(t.xAxisID=n.xAxisID||e.chart.options.scales.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in e.chart.scales||(t.yAxisID=n.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},reset:function(){this.update(!0)},destroy:function(){this._data&&n(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,n=t.dataElementType;return n&&new n({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,n=this,r=n.getMeta(),a=n.getDataset().data||[],o=r.data;for(e=0,t=a.length;e<t;++e)o[e]=o[e]||n.createMetaData(e);r.dataset=r.dataset||n.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,r=e.getDataset(),a=r.data||(r.data=[]);e._data!==a&&(e._data&&n(e._data,e),t(a,e),e._data=a),e.resyncElements()},update:r.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],r=n.length,a=0;a<r;++a)n[a].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,r=0;for(e.dataset&&e.dataset.draw();r<n;++r)t[r].draw()},removeHoverStyle:function(e,t){var n=this.chart.data.datasets[e._datasetIndex],a=e._index,o=e.custom||{},i=r.valueAtIndexOrDefault,s=e._model;s.backgroundColor=o.backgroundColor?o.backgroundColor:i(n.backgroundColor,a,t.backgroundColor),s.borderColor=o.borderColor?o.borderColor:i(n.borderColor,a,t.borderColor),s.borderWidth=o.borderWidth?o.borderWidth:i(n.borderWidth,a,t.borderWidth)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,a=e.custom||{},o=r.valueAtIndexOrDefault,i=r.getHoverColor,s=e._model;
s.backgroundColor=a.hoverBackgroundColor?a.hoverBackgroundColor:o(t.hoverBackgroundColor,n,i(s.backgroundColor)),s.borderColor=a.hoverBorderColor?a.hoverBorderColor:o(t.hoverBorderColor,n,i(s.borderColor)),s.borderWidth=a.hoverBorderWidth?a.hoverBorderWidth:o(t.hoverBorderWidth,n,s.borderWidth)},resyncElements:function(){var e=this,t=e.getMeta(),n=e.getDataset().data,r=t.data.length,a=n.length;a<r?t.data.splice(a,r-a):a>r&&e.insertElements(r,a-r)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),e.DatasetController.extend=r.inherits}},function(e,t,n){"use strict";var r=n(106),a=n(5),o=n(3);e.exports=function(e){function t(e,t,n){var r;return"string"==typeof e?(r=parseInt(e,10),e.indexOf("%")!==-1&&(r=r/100*t.parentNode[n])):r=e,r}function n(e){return void 0!==e&&null!==e&&"none"!==e}function i(e,r,a){var o=document.defaultView,i=e.parentNode,s=o.getComputedStyle(e)[r],u=o.getComputedStyle(i)[r],l=n(s),c=n(u),p=Number.POSITIVE_INFINITY;return l||c?Math.min(l?t(s,e,a):p,c?t(u,i,a):p):"none"}o.configMerge=function(){return o.merge(o.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(t,n,r,a){var i=n[t]||{},s=r[t];"scales"===t?n[t]=o.scaleMerge(i,s):"scale"===t?n[t]=o.merge(i,[e.scaleService.getScaleDefaults(s.type),s]):o._merger(t,n,r,a)}})},o.scaleMerge=function(){return o.merge(o.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(t,n,r,a){if("xAxes"===t||"yAxes"===t){var i,s,u,l=r[t].length;for(n[t]||(n[t]=[]),i=0;i<l;++i)u=r[t][i],s=o.valueOrDefault(u.type,"xAxes"===t?"category":"linear"),i>=n[t].length&&n[t].push({}),!n[t][i].type||u.type&&u.type!==n[t][i].type?o.merge(n[t][i],[e.scaleService.getScaleDefaults(s),u]):o.merge(n[t][i],u)}else o._merger(t,n,r,a)}})},o.where=function(e,t){if(o.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return o.each(e,function(e){t(e)&&n.push(e)}),n},o.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var r=0,a=e.length;r<a;++r)if(t.call(n,e[r],r,e))return r;return-1},o.findNextWhere=function(e,t,n){o.isNullOrUndef(n)&&(n=-1);for(var r=n+1;r<e.length;r++){var a=e[r];if(t(a))return a}},o.findPreviousWhere=function(e,t,n){o.isNullOrUndef(n)&&(n=e.length);for(var r=n-1;r>=0;r--){var a=e[r];if(t(a))return a}},o.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},o.almostEquals=function(e,t,n){return Math.abs(e-t)<n},o.almostWhole=function(e,t){var n=Math.round(e);return n-t<e&&n+t>e},o.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},o.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},o.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},o.log10=Math.log10?function(e){return Math.log10(e)}:function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t),r=e===Math.pow(10,n);return r?n:t},o.toRadians=function(e){return e*(Math.PI/180)},o.toDegrees=function(e){return e*(180/Math.PI)},o.getAngleFromPoint=function(e,t){var n=t.x-e.x,r=t.y-e.y,a=Math.sqrt(n*n+r*r),o=Math.atan2(r,n);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:a}},o.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},o.aliasPixel=function(e){return e%2===0?0:.5},o.splineCurve=function(e,t,n,r){var a=e.skip?t:e,o=t,i=n.skip?t:n,s=Math.sqrt(Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)),u=Math.sqrt(Math.pow(i.x-o.x,2)+Math.pow(i.y-o.y,2)),l=s/(s+u),c=u/(s+u);l=isNaN(l)?0:l,c=isNaN(c)?0:c;var p=r*l,h=r*c;return{previous:{x:o.x-p*(i.x-a.x),y:o.y-p*(i.y-a.y)},next:{x:o.x+h*(i.x-a.x),y:o.y+h*(i.y-a.y)}}},o.EPSILON=Number.EPSILON||1e-14,o.splineCurveMonotone=function(e){var t,n,r,a,i=(e||[]).map(function(e){return{model:e._model,deltaK:0,mK:0}}),s=i.length;for(t=0;t<s;++t)if(r=i[t],!r.model.skip){if(n=t>0?i[t-1]:null,a=t<s-1?i[t+1]:null,a&&!a.model.skip){var u=a.model.x-r.model.x;r.deltaK=0!==u?(a.model.y-r.model.y)/u:0}!n||n.model.skip?r.mK=r.deltaK:!a||a.model.skip?r.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(r.deltaK)?r.mK=0:r.mK=(n.deltaK+r.deltaK)/2}var l,c,p,h;for(t=0;t<s-1;++t)r=i[t],a=i[t+1],r.model.skip||a.model.skip||(o.almostEquals(r.deltaK,0,this.EPSILON)?r.mK=a.mK=0:(l=r.mK/r.deltaK,c=a.mK/r.deltaK,h=Math.pow(l,2)+Math.pow(c,2),h<=9||(p=3/Math.sqrt(h),r.mK=l*p*r.deltaK,a.mK=c*p*r.deltaK)));var d;for(t=0;t<s;++t)r=i[t],r.model.skip||(n=t>0?i[t-1]:null,a=t<s-1?i[t+1]:null,n&&!n.model.skip&&(d=(r.model.x-n.model.x)/3,r.model.controlPointPreviousX=r.model.x-d,r.model.controlPointPreviousY=r.model.y-d*r.mK),a&&!a.model.skip&&(d=(a.model.x-r.model.x)/3,r.model.controlPointNextX=r.model.x+d,r.model.controlPointNextY=r.model.y+d*r.mK))},o.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},o.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},o.niceNum=function(e,t){var n,r=Math.floor(o.log10(e)),a=e/Math.pow(10,r);return n=t?a<1.5?1:a<3?2:a<7?5:10:a<=1?1:a<=2?2:a<=5?5:10,n*Math.pow(10,r)},o.requestAnimFrame=function(){return"undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),o.getRelativePosition=function(e,t){var n,r,a=e.originalEvent||e,i=e.currentTarget||e.srcElement,s=i.getBoundingClientRect(),u=a.touches;u&&u.length>0?(n=u[0].clientX,r=u[0].clientY):(n=a.clientX,r=a.clientY);var l=parseFloat(o.getStyle(i,"padding-left")),c=parseFloat(o.getStyle(i,"padding-top")),p=parseFloat(o.getStyle(i,"padding-right")),h=parseFloat(o.getStyle(i,"padding-bottom")),d=s.right-s.left-l-p,f=s.bottom-s.top-c-h;return n=Math.round((n-s.left-l)/d*i.width/t.currentDevicePixelRatio),r=Math.round((r-s.top-c)/f*i.height/t.currentDevicePixelRatio),{x:n,y:r}},o.getConstraintWidth=function(e){return i(e,"max-width","clientWidth")},o.getConstraintHeight=function(e){return i(e,"max-height","clientHeight")},o.getMaximumWidth=function(e){var t=e.parentNode;if(!t)return e.clientWidth;var n=parseInt(o.getStyle(t,"padding-left"),10),r=parseInt(o.getStyle(t,"padding-right"),10),a=t.clientWidth-n-r,i=o.getConstraintWidth(e);return isNaN(i)?a:Math.min(a,i)},o.getMaximumHeight=function(e){var t=e.parentNode;if(!t)return e.clientHeight;var n=parseInt(o.getStyle(t,"padding-top"),10),r=parseInt(o.getStyle(t,"padding-bottom"),10),a=t.clientHeight-n-r,i=o.getConstraintHeight(e);return isNaN(i)?a:Math.min(a,i)},o.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},o.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||window.devicePixelRatio||1;if(1!==n){var r=e.canvas,a=e.height,o=e.width;r.height=a*n,r.width=o*n,e.ctx.scale(n,n),r.style.height||r.style.width||(r.style.height=a+"px",r.style.width=o+"px")}},o.fontString=function(e,t,n){return t+" "+e+"px "+n},o.longestText=function(e,t,n,r){r=r||{};var a=r.data=r.data||{},i=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},i=r.garbageCollect=[],r.font=t),e.font=t;var s=0;o.each(n,function(t){void 0!==t&&null!==t&&o.isArray(t)!==!0?s=o.measureText(e,a,i,s,t):o.isArray(t)&&o.each(t,function(t){void 0===t||null===t||o.isArray(t)||(s=o.measureText(e,a,i,s,t))})});var u=i.length/2;if(u>n.length){for(var l=0;l<u;l++)delete a[i[l]];i.splice(0,u)}return s},o.measureText=function(e,t,n,r,a){var o=t[a];return o||(o=t[a]=e.measureText(a).width,n.push(a)),o>r&&(r=o),r},o.numberOfLabelLines=function(e){var t=1;return o.each(e,function(e){o.isArray(e)&&e.length>t&&(t=e.length)}),t},o.color=r?function(e){return e instanceof CanvasGradient&&(e=a.global.defaultColor),r(e)}:function(e){return console.error("Color.js not found!"),e},o.getHoverColor=function(e){return e instanceof CanvasPattern?e:o.color(e).saturate(.5).darken(.1).rgbString()}}},function(e,t,n){"use strict";var r=n(5);r._set("global",{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},layout:{padding:{top:0,right:0,bottom:0,left:0}}}),e.exports=function(){var e=function(e,t){return this.construct(e,t),this};return e.Chart=e,e}},function(e,t,n){"use strict";function r(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push(e[t].label);return r}function a(e,t,n){var r=e.getPixelForTick(t);return n&&(r-=0===t?(e.getPixelForTick(1)-r)/2:(r-e.getPixelForTick(t-1))/2),r}var o=n(5),i=n(16),s=n(3),u=n(43);o._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",lineHeight:1.2,padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:u.formatters.values,minor:{},major:{}}}),e.exports=function(e){function t(e,t,n){return s.isArray(t)?s.longestText(e,n,t):e.measureText(t).width}function n(e){var t=s.valueOrDefault,n=o.global,r=t(e.fontSize,n.defaultFontSize),a=t(e.fontStyle,n.defaultFontStyle),i=t(e.fontFamily,n.defaultFontFamily);return{size:r,style:a,family:i,font:s.fontString(r,a,i)}}function u(e){return s.options.toLineHeight(s.valueOrDefault(e.lineHeight,1.2),s.valueOrDefault(e.fontSize,o.global.defaultFontSize))}e.Scale=i.extend({getPadding:function(){var e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var e=this.options.ticks;e.minor===!1&&(e.minor={display:!1}),e.major===!1&&(e.major={display:!1});for(var t in e)"major"!==t&&"minor"!==t&&("undefined"==typeof e.minor[t]&&(e.minor[t]=e[t]),"undefined"==typeof e.major[t]&&(e.major[t]=e[t]))},beforeUpdate:function(){s.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var r,a,o,i,u,l,c=this;for(c.beforeUpdate(),c.maxWidth=e,c.maxHeight=t,c.margins=s.extend({left:0,right:0,top:0,bottom:0},n),c.longestTextCache=c.longestTextCache||{},c.beforeSetDimensions(),c.setDimensions(),c.afterSetDimensions(),c.beforeDataLimits(),c.determineDataLimits(),c.afterDataLimits(),c.beforeBuildTicks(),u=c.buildTicks()||[],c.afterBuildTicks(),c.beforeTickToLabelConversion(),o=c.convertTicksToLabels(u)||c.ticks,c.afterTickToLabelConversion(),c.ticks=o,r=0,a=o.length;r<a;++r)i=o[r],l=u[r],l?l.label=i:u.push(l={label:i,major:!1});return c._ticks=u,c.beforeCalculateTickRotation(),c.calculateTickRotation(),c.afterCalculateTickRotation(),c.beforeFit(),c.fit(),c.afterFit(),c.afterUpdate(),c.minSize},afterUpdate:function(){s.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){s.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){s.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){s.callback(this.options.beforeDataLimits,[this])},determineDataLimits:s.noop,afterDataLimits:function(){s.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){s.callback(this.options.beforeBuildTicks,[this])},buildTicks:s.noop,afterBuildTicks:function(){s.callback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){s.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this,t=e.options.ticks;e.ticks=e.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){s.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){s.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e=this,t=e.ctx,a=e.options.ticks,o=r(e._ticks),i=n(a);t.font=i.font;var u=a.minRotation||0;if(o.length&&e.options.display&&e.isHorizontal())for(var l,c,p=s.longestText(t,i.font,o,e.longestTextCache),h=p,d=e.getPixelForTick(1)-e.getPixelForTick(0)-6;h>d&&u<a.maxRotation;){var f=s.toRadians(u);if(l=Math.cos(f),c=Math.sin(f),c*p>e.maxHeight){u--;break}u++,h=l*p}e.labelRotation=u},afterCalculateTickRotation:function(){s.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){s.callback(this.options.beforeFit,[this])},fit:function(){var e=this,a=e.minSize={width:0,height:0},o=r(e._ticks),i=e.options,l=i.ticks,c=i.scaleLabel,p=i.gridLines,h=i.display,d=e.isHorizontal(),f=n(l),m=i.gridLines.tickMarkLength;if(d?a.width=e.isFullWidth()?e.maxWidth-e.margins.left-e.margins.right:e.maxWidth:a.width=h&&p.drawTicks?m:0,d?a.height=h&&p.drawTicks?m:0:a.height=e.maxHeight,c.display&&h){var g=u(c),v=s.options.toPadding(c.padding),y=g+v.height;d?a.height+=y:a.width+=y}if(l.display&&h){var b=s.longestText(e.ctx,f.font,o,e.longestTextCache),x=s.numberOfLabelLines(o),w=.5*f.size,S=e.options.ticks.padding;if(d){e.longestLabelWidth=b;var _=s.toRadians(e.labelRotation),N=Math.cos(_),T=Math.sin(_),k=T*b+f.size*x+w*(x-1)+w;a.height=Math.min(e.maxHeight,a.height+k+S),e.ctx.font=f.font;var I=t(e.ctx,o[0],f.font),E=t(e.ctx,o[o.length-1],f.font);0!==e.labelRotation?(e.paddingLeft="bottom"===i.position?N*I+3:N*w+3,e.paddingRight="bottom"===i.position?N*w+3:N*E+3):(e.paddingLeft=I/2+3,e.paddingRight=E/2+3)}else l.mirror?b=0:b+=S+w,a.width=Math.min(e.maxWidth,a.width+b),e.paddingTop=f.size/2,e.paddingBottom=f.size/2}e.handleMargins(),e.width=a.width,e.height=a.height},handleMargins:function(){var e=this;e.margins&&(e.paddingLeft=Math.max(e.paddingLeft-e.margins.left,0),e.paddingTop=Math.max(e.paddingTop-e.margins.top,0),e.paddingRight=Math.max(e.paddingRight-e.margins.right,0),e.paddingBottom=Math.max(e.paddingBottom-e.margins.bottom,0))},afterFit:function(){s.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(s.isNullOrUndef(e))return NaN;if("number"==typeof e&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},getLabelForIndex:s.noop,getPixelForValue:s.noop,getValueForPixel:s.noop,getPixelForTick:function(e){var t=this,n=t.options.offset;if(t.isHorizontal()){var r=t.width-(t.paddingLeft+t.paddingRight),a=r/Math.max(t._ticks.length-(n?0:1),1),o=a*e+t.paddingLeft;n&&(o+=a/2);var i=t.left+Math.round(o);return i+=t.isFullWidth()?t.margins.left:0}var s=t.height-(t.paddingTop+t.paddingBottom);return t.top+e*(s/(t._ticks.length-1))},getPixelForDecimal:function(e){var t=this;if(t.isHorizontal()){var n=t.width-(t.paddingLeft+t.paddingRight),r=n*e+t.paddingLeft,a=t.left+Math.round(r);return a+=t.isFullWidth()?t.margins.left:0}return t.top+e*t.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this,t=e.min,n=e.max;return e.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0},_autoSkip:function(e){var t,n,r,a,o,i=this,u=i.isHorizontal(),l=i.options.ticks.minor,c=e.length,p=s.toRadians(i.labelRotation),h=Math.cos(p),d=i.longestLabelWidth*h,f=[];for(l.maxTicksLimit&&(o=l.maxTicksLimit),u&&(t=!1,(d+l.autoSkipPadding)*c>i.width-(i.paddingLeft+i.paddingRight)&&(t=1+Math.floor((d+l.autoSkipPadding)*c/(i.width-(i.paddingLeft+i.paddingRight)))),o&&c>o&&(t=Math.max(t,Math.floor(c/o)))),n=0;n<c;n++)r=e[n],a=t>1&&n%t>0||n%t===0&&n+t>=c,a&&n!==c-1&&delete r.label,f.push(r);return f},draw:function(e){var t=this,r=t.options;if(r.display){var i=t.ctx,l=o.global,c=r.ticks.minor,p=r.ticks.major||c,h=r.gridLines,d=r.scaleLabel,f=0!==t.labelRotation,m=t.isHorizontal(),g=c.autoSkip?t._autoSkip(t.getTicks()):t.getTicks(),v=s.valueOrDefault(c.fontColor,l.defaultFontColor),y=n(c),b=s.valueOrDefault(p.fontColor,l.defaultFontColor),x=n(p),w=h.drawTicks?h.tickMarkLength:0,S=s.valueOrDefault(d.fontColor,l.defaultFontColor),_=n(d),N=s.options.toPadding(d.padding),T=s.toRadians(t.labelRotation),k=[],I=t.options.gridLines.lineWidth,E="right"===r.position?t.right:t.right-I-w,A="right"===r.position?t.right+w:t.right,P="bottom"===r.position?t.top+I:t.bottom-w-I,C="bottom"===r.position?t.top+I+w:t.bottom+I;if(s.each(g,function(n,o){if(!s.isNullOrUndef(n.label)){var i,u,p,d,v=n.label;o===t.zeroLineIndex&&r.offset===h.offsetGridLines?(i=h.zeroLineWidth,u=h.zeroLineColor,p=h.zeroLineBorderDash,d=h.zeroLineBorderDashOffset):(i=s.valueAtIndexOrDefault(h.lineWidth,o),u=s.valueAtIndexOrDefault(h.color,o),p=s.valueOrDefault(h.borderDash,l.borderDash),d=s.valueOrDefault(h.borderDashOffset,l.borderDashOffset));var y,b,x,S,_,N,O,M,D,R,z="middle",L="middle",V=c.padding;if(m){var F=w+V;"bottom"===r.position?(L=f?"middle":"top",z=f?"right":"center",R=t.top+F):(L=f?"middle":"bottom",z=f?"left":"center",R=t.bottom-F);var B=a(t,o,h.offsetGridLines&&g.length>1);B<t.left&&(u="rgba(0,0,0,0)"),B+=s.aliasPixel(i),D=t.getPixelForTick(o)+c.labelOffset,y=x=_=O=B,b=P,S=C,N=e.top,M=e.bottom+I}else{var j,U="left"===r.position;c.mirror?(z=U?"left":"right",j=V):(z=U?"right":"left",j=w+V),D=U?t.right-j:t.left+j;var W=a(t,o,h.offsetGridLines&&g.length>1);W<t.top&&(u="rgba(0,0,0,0)"),W+=s.aliasPixel(i),R=t.getPixelForTick(o)+c.labelOffset,y=E,x=A,_=e.left,O=e.right+I,b=S=N=M=W}k.push({tx1:y,ty1:b,tx2:x,ty2:S,x1:_,y1:N,x2:O,y2:M,labelX:D,labelY:R,glWidth:i,glColor:u,glBorderDash:p,glBorderDashOffset:d,rotation:-1*T,label:v,major:n.major,textBaseline:L,textAlign:z})}}),s.each(k,function(e){if(h.display&&(i.save(),i.lineWidth=e.glWidth,i.strokeStyle=e.glColor,i.setLineDash&&(i.setLineDash(e.glBorderDash),i.lineDashOffset=e.glBorderDashOffset),i.beginPath(),h.drawTicks&&(i.moveTo(e.tx1,e.ty1),i.lineTo(e.tx2,e.ty2)),h.drawOnChartArea&&(i.moveTo(e.x1,e.y1),i.lineTo(e.x2,e.y2)),i.stroke(),i.restore()),c.display){i.save(),i.translate(e.labelX,e.labelY),i.rotate(e.rotation),i.font=e.major?x.font:y.font,i.fillStyle=e.major?b:v,i.textBaseline=e.textBaseline,i.textAlign=e.textAlign;var n=e.label;if(s.isArray(n))for(var r=n.length,a=1.5*y.size,o=t.isHorizontal()?0:-a*(r-1)/2,u=0;u<r;++u)i.fillText(""+n[u],0,o),o+=a;else i.fillText(n,0,0);i.restore()}}),d.display){var O,M,D=0,R=u(d)/2;if(m)O=t.left+(t.right-t.left)/2,M="bottom"===r.position?t.bottom-R-N.bottom:t.top+R+N.top;else{var z="left"===r.position;O=z?t.left+R+N.top:t.right-R-N.top,M=t.top+(t.bottom-t.top)/2,D=z?-.5*Math.PI:.5*Math.PI}i.save(),i.translate(O,M),i.rotate(D),i.textAlign="center",i.textBaseline="middle",i.fillStyle=S,i.font=_.font,i.fillText(d.labelString,0,0),i.restore()}if(h.drawBorder){i.lineWidth=s.valueAtIndexOrDefault(h.lineWidth,0),i.strokeStyle=s.valueAtIndexOrDefault(h.color,0);var L=t.left,V=t.right+I,F=t.top,B=t.bottom+I,j=s.aliasPixel(i.lineWidth);m?(F=B="top"===r.position?t.bottom:t.top,F+=j,B+=j):(L=V="left"===r.position?t.right:t.left,L+=j,V+=j),i.beginPath(),i.moveTo(L,F),i.lineTo(V,B),i.stroke()}}}})}},function(e,t,n){"use strict";var r=n(5),a=n(3),o=n(42);e.exports=function(e){e.scaleService={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=a.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?a.merge({},[r.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var n=this;n.defaults.hasOwnProperty(e)&&(n.defaults[e]=a.extend(n.defaults[e],t))},addScalesToLayout:function(e){a.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,o.addBox(e,t)})}}}},function(e,t,n){"use strict";var r=n(5),a=n(16),o=n(3);r._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:o.noop,title:function(e,t){var n="",r=t.labels,a=r?r.length:0;if(e.length>0){var o=e[0];o.xLabel?n=o.xLabel:a>0&&o.index<a&&(n=r[o.index])}return n},afterTitle:o.noop,beforeBody:o.noop,beforeLabel:o.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),n+=e.yLabel},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex),r=n.data[e.index],a=r._view;return{borderColor:a.borderColor,backgroundColor:a.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:o.noop,afterBody:o.noop,beforeFooter:o.noop,footer:o.noop,afterFooter:o.noop}}}),e.exports=function(e){function t(e,t){var n=o.color(e);return n.alpha(t*n.alpha()).rgbaString()}function n(e,t){return t&&(o.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function i(e){var t=e._xScale,n=e._yScale||e._scale,r=e._index,a=e._datasetIndex;return{xLabel:t?t.getLabelForIndex(r,a):"",yLabel:n?n.getLabelForIndex(r,a):"",index:r,datasetIndex:a,x:e._model.x,y:e._model.y}}function s(e){var t=r.global,n=o.valueOrDefault;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:n(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:n(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:n(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:n(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:n(e.titleFontStyle,t.defaultFontStyle),titleFontSize:n(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:n(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:n(e.footerFontStyle,t.defaultFontStyle),footerFontSize:n(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function u(e,t){var n=e._chart.ctx,r=2*t.yPadding,a=0,i=t.body,s=i.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);s+=t.beforeBody.length+t.afterBody.length;var u=t.title.length,l=t.footer.length,c=t.titleFontSize,p=t.bodyFontSize,h=t.footerFontSize;r+=u*c,r+=u?(u-1)*t.titleSpacing:0,r+=u?t.titleMarginBottom:0,r+=s*p,r+=s?(s-1)*t.bodySpacing:0,r+=l?t.footerMarginTop:0,r+=l*h,r+=l?(l-1)*t.footerSpacing:0;var d=0,f=function(e){a=Math.max(a,n.measureText(e).width+d)};return n.font=o.fontString(c,t._titleFontStyle,t._titleFontFamily),o.each(t.title,f),n.font=o.fontString(p,t._bodyFontStyle,t._bodyFontFamily),o.each(t.beforeBody.concat(t.afterBody),f),d=t.displayColors?p+2:0,o.each(i,function(e){o.each(e.before,f),o.each(e.lines,f),o.each(e.after,f)}),d=0,n.font=o.fontString(h,t._footerFontStyle,t._footerFontFamily),o.each(t.footer,f),a+=2*t.xPadding,{width:a,height:r}}function l(e,t){var n=e._model,r=e._chart,a=e._chart.chartArea,o="center",i="center";n.y<t.height?i="top":n.y>r.height-t.height&&(i="bottom");var s,u,l,c,p,h=(a.left+a.right)/2,d=(a.top+a.bottom)/2;"center"===i?(s=function(e){return e<=h},u=function(e){return e>h}):(s=function(e){return e<=t.width/2},u=function(e){return e>=r.width-t.width/2}),l=function(e){return e+t.width+n.caretSize+n.caretPadding>r.width},c=function(e){return e-t.width-n.caretSize-n.caretPadding<0},p=function(e){return e<=d?"top":"bottom"},s(n.x)?(o="left",l(n.x)&&(o="center",i=p(n.y))):u(n.x)&&(o="right",c(n.x)&&(o="center",i=p(n.y)));var f=e._options;return{xAlign:f.xAlign?f.xAlign:o,yAlign:f.yAlign?f.yAlign:i}}function c(e,t,n,r){var a=e.x,o=e.y,i=e.caretSize,s=e.caretPadding,u=e.cornerRadius,l=n.xAlign,c=n.yAlign,p=i+s,h=u+s;return"right"===l?a-=t.width:"center"===l&&(a-=t.width/2,a+t.width>r.width&&(a=r.width-t.width),a<0&&(a=0)),"top"===c?o+=p:o-="bottom"===c?t.height+p:t.height/2,"center"===c?"left"===l?a+=p:"right"===l&&(a-=p):"left"===l?a-=h:"right"===l&&(a+=h),{x:a,y:o}}e.Tooltip=a.extend({initialize:function(){this._model=s(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,r=t.callbacks,a=r.beforeTitle.apply(e,arguments),o=r.title.apply(e,arguments),i=r.afterTitle.apply(e,arguments),s=[];return s=n(s,a),s=n(s,o),s=n(s,i)},getBeforeBody:function(){var e=this._options.callbacks.beforeBody.apply(this,arguments);return o.isArray(e)?e:void 0!==e?[e]:[]},getBody:function(e,t){var r=this,a=r._options.callbacks,i=[];return o.each(e,function(e){var o={before:[],lines:[],after:[]};n(o.before,a.beforeLabel.call(r,e,t)),n(o.lines,a.label.call(r,e,t)),n(o.after,a.afterLabel.call(r,e,t)),i.push(o)}),i},getAfterBody:function(){var e=this._options.callbacks.afterBody.apply(this,arguments);return o.isArray(e)?e:void 0!==e?[e]:[]},getFooter:function(){var e=this,t=e._options.callbacks,r=t.beforeFooter.apply(e,arguments),a=t.footer.apply(e,arguments),o=t.afterFooter.apply(e,arguments),i=[];return i=n(i,r),i=n(i,a),i=n(i,o)},update:function(t){var n,r,a=this,p=a._options,h=a._model,d=a._model=s(p),f=a._active,m=a._data,g={xAlign:h.xAlign,yAlign:h.yAlign},v={x:h.x,y:h.y},y={width:h.width,height:h.height},b={x:h.caretX,y:h.caretY};if(f.length){d.opacity=1;var x=[],w=[];b=e.Tooltip.positioners[p.position].call(a,f,a._eventPosition);var S=[];for(n=0,r=f.length;n<r;++n)S.push(i(f[n]));p.filter&&(S=S.filter(function(e){return p.filter(e,m)})),p.itemSort&&(S=S.sort(function(e,t){return p.itemSort(e,t,m)})),o.each(S,function(e){x.push(p.callbacks.labelColor.call(a,e,a._chart)),w.push(p.callbacks.labelTextColor.call(a,e,a._chart))}),d.title=a.getTitle(S,m),d.beforeBody=a.getBeforeBody(S,m),d.body=a.getBody(S,m),d.afterBody=a.getAfterBody(S,m),d.footer=a.getFooter(S,m),d.x=Math.round(b.x),d.y=Math.round(b.y),d.caretPadding=p.caretPadding,d.labelColors=x,d.labelTextColors=w,d.dataPoints=S,y=u(this,d),g=l(this,y),v=c(d,y,g,a._chart)}else d.opacity=0;return d.xAlign=g.xAlign,d.yAlign=g.yAlign,d.x=v.x,d.y=v.y,d.width=y.width,d.height=y.height,d.caretX=b.x,d.caretY=b.y,a._model=d,t&&p.custom&&p.custom.call(a,d),a},drawCaret:function(e,t){var n=this._chart.ctx,r=this._view,a=this.getCaretPosition(e,t,r);n.lineTo(a.x1,a.y1),n.lineTo(a.x2,a.y2),n.lineTo(a.x3,a.y3)},getCaretPosition:function(e,t,n){var r,a,o,i,s,u,l=n.caretSize,c=n.cornerRadius,p=n.xAlign,h=n.yAlign,d=e.x,f=e.y,m=t.width,g=t.height;if("center"===h)s=f+g/2,"left"===p?(r=d,a=r-l,o=r,i=s+l,u=s-l):(r=d+m,a=r+l,o=r,i=s-l,u=s+l);else if("left"===p?(a=d+c+l,r=a-l,o=a+l):"right"===p?(a=d+m-c-l,r=a-l,o=a+l):(a=n.caretX,r=a-l,o=a+l),"top"===h)i=f,s=i-l,u=i;else{i=f+g,s=i+l,u=i;var v=o;o=r,r=v}return{x1:r,x2:a,x3:o,y1:i,y2:s,y3:u}},drawTitle:function(e,n,r,a){var i=n.title;if(i.length){r.textAlign=n._titleAlign,r.textBaseline="top";var s=n.titleFontSize,u=n.titleSpacing;r.fillStyle=t(n.titleFontColor,a),r.font=o.fontString(s,n._titleFontStyle,n._titleFontFamily);var l,c;for(l=0,c=i.length;l<c;++l)r.fillText(i[l],e.x,e.y),e.y+=s+u,l+1===i.length&&(e.y+=n.titleMarginBottom-u)}},drawBody:function(e,n,r,a){var i=n.bodyFontSize,s=n.bodySpacing,u=n.body;r.textAlign=n._bodyAlign,r.textBaseline="top",r.font=o.fontString(i,n._bodyFontStyle,n._bodyFontFamily);var l=0,c=function(t){r.fillText(t,e.x+l,e.y),e.y+=i+s};r.fillStyle=t(n.bodyFontColor,a),o.each(n.beforeBody,c);var p=n.displayColors;l=p?i+2:0,o.each(u,function(s,u){var l=t(n.labelTextColors[u],a);r.fillStyle=l,o.each(s.before,c),o.each(s.lines,function(o){p&&(r.fillStyle=t(n.legendColorBackground,a),r.fillRect(e.x,e.y,i,i),r.lineWidth=1,r.strokeStyle=t(n.labelColors[u].borderColor,a),r.strokeRect(e.x,e.y,i,i),r.fillStyle=t(n.labelColors[u].backgroundColor,a),r.fillRect(e.x+1,e.y+1,i-2,i-2),r.fillStyle=l),c(o)}),o.each(s.after,c)}),l=0,o.each(n.afterBody,c),e.y-=s},drawFooter:function(e,n,r,a){var i=n.footer;i.length&&(e.y+=n.footerMarginTop,r.textAlign=n._footerAlign,r.textBaseline="top",r.fillStyle=t(n.footerFontColor,a),r.font=o.fontString(n.footerFontSize,n._footerFontStyle,n._footerFontFamily),o.each(i,function(t){r.fillText(t,e.x,e.y),e.y+=n.footerFontSize+n.footerSpacing}))},drawBackground:function(e,n,r,a,o){r.fillStyle=t(n.backgroundColor,o),r.strokeStyle=t(n.borderColor,o),r.lineWidth=n.borderWidth;var i=n.xAlign,s=n.yAlign,u=e.x,l=e.y,c=a.width,p=a.height,h=n.cornerRadius;r.beginPath(),r.moveTo(u+h,l),"top"===s&&this.drawCaret(e,a),r.lineTo(u+c-h,l),r.quadraticCurveTo(u+c,l,u+c,l+h),"center"===s&&"right"===i&&this.drawCaret(e,a),r.lineTo(u+c,l+p-h),r.quadraticCurveTo(u+c,l+p,u+c-h,l+p),"bottom"===s&&this.drawCaret(e,a),r.lineTo(u+h,l+p),r.quadraticCurveTo(u,l+p,u,l+p-h),"center"===s&&"left"===i&&this.drawCaret(e,a),r.lineTo(u,l+h),r.quadraticCurveTo(u,l,u+h,l),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},r={x:t.x,y:t.y},a=Math.abs(t.opacity<.001)?0:t.opacity,o=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&o&&(this.drawBackground(r,t,e,n,a),r.x+=t.xPadding,r.y+=t.yPadding,this.drawTitle(r,t,e,a),this.drawBody(r,t,e,a),this.drawFooter(r,t,e,a))}},handleEvent:function(e){var t=this,n=t._options,r=!1;return t._lastActive=t._lastActive||[],"mouseout"===e.type?t._active=[]:t._active=t._chart.getElementsAtEventForMode(e,n.mode,n),r=!o.arrayEquals(t._active,t._lastActive),r&&(t._lastActive=t._active,(n.enabled||n.custom)&&(t._eventPosition={x:e.x,y:e.y},t.update(!0),t.pivot())),r}}),e.Tooltip.positioners={average:function(e){if(!e.length)return!1;var t,n,r=0,a=0,o=0;for(t=0,n=e.length;t<n;++t){var i=e[t];if(i&&i.hasValue()){var s=i.tooltipPosition();r+=s.x,a+=s.y,++o}}return{x:Math.round(r/o),y:Math.round(a/o)}},nearest:function(e,t){var n,r,a,i=t.x,s=t.y,u=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var l=e[n];if(l&&l.hasValue()){var c=l.getCenterPoint(),p=o.distanceBetweenPoints(t,c);p<u&&(u=p,a=l)}}if(a){var h=a.tooltipPosition();i=h.x,s=h.y}return{x:i,y:s}}}}},function(e,t,n){"use strict";var r=n(5),a=n(16),o=n(3);r._set("global",{elements:{arc:{backgroundColor:r.global.defaultColor,borderColor:"#fff",borderWidth:2}}}),e.exports=a.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var r=o.getAngleFromPoint(n,{x:e,y:t}),a=r.angle,i=r.distance,s=n.startAngle,u=n.endAngle;u<s;)u+=2*Math.PI;for(;a>u;)a-=2*Math.PI;for(;a<s;)a+=2*Math.PI;var l=a>=s&&a<=u,c=i>=n.innerRadius&&i<=n.outerRadius;return l&&c}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;
return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e=this._chart.ctx,t=this._view,n=t.startAngle,r=t.endAngle;e.beginPath(),e.arc(t.x,t.y,t.outerRadius,n,r),e.arc(t.x,t.y,t.innerRadius,r,n,!0),e.closePath(),e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth,e.fillStyle=t.backgroundColor,e.fill(),e.lineJoin="bevel",t.borderWidth&&e.stroke()}})},function(e,t,n){"use strict";var r=n(5),a=n(16),o=n(3),i=r.global;r._set("global",{elements:{line:{tension:.4,backgroundColor:i.defaultColor,borderWidth:3,borderColor:i.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}}),e.exports=a.extend({draw:function(){var e,t,n,r,a=this,s=a._view,u=a._chart.ctx,l=s.spanGaps,c=a._children.slice(),p=i.elements.line,h=-1;for(a._loop&&c.length&&c.push(c[0]),u.save(),u.lineCap=s.borderCapStyle||p.borderCapStyle,u.setLineDash&&u.setLineDash(s.borderDash||p.borderDash),u.lineDashOffset=s.borderDashOffset||p.borderDashOffset,u.lineJoin=s.borderJoinStyle||p.borderJoinStyle,u.lineWidth=s.borderWidth||p.borderWidth,u.strokeStyle=s.borderColor||i.defaultColor,u.beginPath(),h=-1,e=0;e<c.length;++e)t=c[e],n=o.previousItem(c,e),r=t._view,0===e?r.skip||(u.moveTo(r.x,r.y),h=e):(n=h===-1?n:c[h],r.skip||(h!==e-1&&!l||h===-1?u.moveTo(r.x,r.y):o.canvas.lineTo(u,n._view,t._view),h=e));u.stroke(),u.restore()}})},function(e,t,n){"use strict";function r(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}function a(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius}var o=n(5),i=n(16),s=n(3),u=o.global.defaultColor;o._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:u,borderColor:u,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}}),e.exports=i.extend({inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:r,inXRange:r,inYRange:a,getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._model,r=this._chart.ctx,a=t.pointStyle,i=t.radius,l=t.x,c=t.y,p=s.color,h=1.01,d=0;t.skip||(r.strokeStyle=t.borderColor||u,r.lineWidth=s.valueOrDefault(t.borderWidth,o.global.elements.point.borderWidth),r.fillStyle=t.backgroundColor||u,void 0!==e&&(n.x<e.left||e.right*h<n.x||n.y<e.top||e.bottom*h<n.y)&&(n.x<e.left?d=(l-n.x)/(e.left-n.x):e.right*h<n.x?d=(n.x-l)/(n.x-e.right):n.y<e.top?d=(c-n.y)/(e.top-n.y):e.bottom*h<n.y&&(d=(n.y-c)/(n.y-e.bottom)),d=Math.round(100*d)/100,r.strokeStyle=p(r.strokeStyle).alpha(d).rgbString(),r.fillStyle=p(r.fillStyle).alpha(d).rgbString()),s.canvas.drawPoint(r,a,i,l,c))}})},function(e,t,n){"use strict";function r(e){return void 0!==e._view.width}function a(e){var t,n,a,o,i=e._view;if(r(e)){var s=i.width/2;t=i.x-s,n=i.x+s,a=Math.min(i.y,i.base),o=Math.max(i.y,i.base)}else{var u=i.height/2;t=Math.min(i.x,i.base),n=Math.max(i.x,i.base),a=i.y-u,o=i.y+u}return{left:t,top:a,right:n,bottom:o}}var o=n(5),i=n(16);o._set("global",{elements:{rectangle:{backgroundColor:o.global.defaultColor,borderColor:o.global.defaultColor,borderSkipped:"bottom",borderWidth:0}}}),e.exports=i.extend({draw:function(){function e(e){return v[(b+e)%4]}var t,n,r,a,o,i,s,u=this._chart.ctx,l=this._view,c=l.borderWidth;if(l.horizontal?(t=l.base,n=l.x,r=l.y-l.height/2,a=l.y+l.height/2,o=n>t?1:-1,i=1,s=l.borderSkipped||"left"):(t=l.x-l.width/2,n=l.x+l.width/2,r=l.y,a=l.base,o=1,i=a>r?1:-1,s=l.borderSkipped||"bottom"),c){var p=Math.min(Math.abs(t-n),Math.abs(r-a));c=c>p?p:c;var h=c/2,d=t+("left"!==s?h*o:0),f=n+("right"!==s?-h*o:0),m=r+("top"!==s?h*i:0),g=a+("bottom"!==s?-h*i:0);d!==f&&(r=m,a=g),m!==g&&(t=d,n=f)}u.beginPath(),u.fillStyle=l.backgroundColor,u.strokeStyle=l.borderColor,u.lineWidth=c;var v=[[t,a],[t,r],[n,r],[n,a]],y=["bottom","left","top","right"],b=y.indexOf(s,0);b===-1&&(b=0);var x=e(0);u.moveTo(x[0],x[1]);for(var w=1;w<4;w++)x=e(w),u.lineTo(x[0],x[1]);u.fill(),c&&u.stroke()},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){var n=!1;if(this._view){var r=a(this);n=e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom}return n},inLabelRange:function(e,t){var n=this;if(!n._view)return!1;var o=!1,i=a(n);return o=r(n)?e>=i.left&&e<=i.right:t>=i.top&&t<=i.bottom},inXRange:function(e){var t=a(this);return e>=t.left&&e<=t.right},inYRange:function(e){var t=a(this);return e>=t.top&&e<=t.bottom},getCenterPoint:function(){var e,t,n=this._view;return r(this)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return e.width*Math.abs(e.y-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}})},function(e,t,n){"use strict";var r=n(54),t=e.exports={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,r,a,o){if(o){var i=Math.min(o,r/2),s=Math.min(o,a/2);e.moveTo(t+i,n),e.lineTo(t+r-i,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+a-s),e.quadraticCurveTo(t+r,n+a,t+r-i,n+a),e.lineTo(t+i,n+a),e.quadraticCurveTo(t,n+a,t,n+a-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+i,n)}else e.rect(t,n,r,a)},drawPoint:function(e,t,n,r,a){var o,i,s,u,l,c;if(t&&"object"==typeof t&&(o=t.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return void e.drawImage(t,r-t.width/2,a-t.height/2,t.width,t.height);if(!(isNaN(n)||n<=0)){switch(t){default:e.beginPath(),e.arc(r,a,n,0,2*Math.PI),e.closePath(),e.fill();break;case"triangle":e.beginPath(),i=3*n/Math.sqrt(3),l=i*Math.sqrt(3)/2,e.moveTo(r-i/2,a+l/3),e.lineTo(r+i/2,a+l/3),e.lineTo(r,a-2*l/3),e.closePath(),e.fill();break;case"rect":c=1/Math.SQRT2*n,e.beginPath(),e.fillRect(r-c,a-c,2*c,2*c),e.strokeRect(r-c,a-c,2*c,2*c);break;case"rectRounded":var p=n/Math.SQRT2,h=r-p,d=a-p,f=Math.SQRT2*n;e.beginPath(),this.roundedRect(e,h,d,f,f,n/2),e.closePath(),e.fill();break;case"rectRot":c=1/Math.SQRT2*n,e.beginPath(),e.moveTo(r-c,a),e.lineTo(r,a+c),e.lineTo(r+c,a),e.lineTo(r,a-c),e.closePath(),e.fill();break;case"cross":e.beginPath(),e.moveTo(r,a+n),e.lineTo(r,a-n),e.moveTo(r-n,a),e.lineTo(r+n,a),e.closePath();break;case"crossRot":e.beginPath(),s=Math.cos(Math.PI/4)*n,u=Math.sin(Math.PI/4)*n,e.moveTo(r-s,a-u),e.lineTo(r+s,a+u),e.moveTo(r-s,a+u),e.lineTo(r+s,a-u),e.closePath();break;case"star":e.beginPath(),e.moveTo(r,a+n),e.lineTo(r,a-n),e.moveTo(r-n,a),e.lineTo(r+n,a),s=Math.cos(Math.PI/4)*n,u=Math.sin(Math.PI/4)*n,e.moveTo(r-s,a-u),e.lineTo(r+s,a+u),e.moveTo(r-s,a+u),e.lineTo(r+s,a-u),e.closePath();break;case"line":e.beginPath(),e.moveTo(r-n,a),e.lineTo(r+n,a),e.closePath();break;case"dash":e.beginPath(),e.moveTo(r,a),e.lineTo(r+n,a),e.closePath()}e.stroke()}},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,r){return n.steppedLine?("after"===n.steppedLine&&!r||"after"!==n.steppedLine&&r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y),void e.lineTo(n.x,n.y)):n.tension?void e.bezierCurveTo(r?t.controlPointPreviousX:t.controlPointNextX,r?t.controlPointPreviousY:t.controlPointNextY,r?n.controlPointNextX:n.controlPointPreviousX,r?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):void e.lineTo(n.x,n.y)}};r.clear=t.clear,r.drawRoundedRectangle=function(e){e.beginPath(),t.roundedRect.apply(t,arguments),e.closePath()}},function(e,t,n){"use strict";var r=n(54),a={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},easeOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:2===(e/=.5)?1:(n||(n=.45),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),e<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-a.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*a.easeInBounce(2*e):.5*a.easeOutBounce(2*e-1)+.5}};e.exports={effects:a},r.easingEffects=a},function(e,t,n){"use strict";var r=n(54);e.exports={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,a,o;return r.isObject(e)?(t=+e.top||0,n=+e.right||0,a=+e.bottom||0,o=+e.left||0):t=n=a=o=+e||0,{top:t,right:n,bottom:a,left:o,height:t+a,width:o+n}},resolve:function(e,t,n){var a,o,i;for(a=0,o=e.length;a<o;++a)if(i=e[a],void 0!==i&&(void 0!==t&&"function"==typeof i&&(i=i(t)),void 0!==n&&r.isArray(i)&&(i=i[n]),void 0!==i))return i}}},function(e,t){e.exports={acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}}},function(e,t,n){"use strict";function r(e,t){var n=g.getStyle(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?Number(r[1]):void 0}function a(e,t){var n=e.style,a=e.getAttribute("height"),o=e.getAttribute("width");if(e[v]={initial:{height:a,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===o||""===o){var i=r(e,"width");void 0!==i&&(e.width=i)}if(null===a||""===a)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var s=r(e,"height");void 0!==i&&(e.height=s)}return e}function o(e,t,n){e.addEventListener(t,n,N)}function i(e,t,n){e.removeEventListener(t,n,N)}function s(e,t,n,r,a){return{type:e,chart:t,native:a||null,x:void 0!==n?n:null,y:void 0!==r?r:null}}function u(e,t){var n=S[e.type]||e.type,r=g.getRelativePosition(e,t);return s(n,t,r.x,r.y,e)}function l(e,t){var n=!1,r=[];return function(){r=Array.prototype.slice.call(arguments),t=t||this,n||(n=!0,g.requestAnimFrame.call(window,function(){n=!1,e.apply(t,r)}))}}function c(e){var t=document.createElement("div"),n=y+"size-monitor",r=1e6,a="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;";t.style.cssText=a,t.className=n,t.innerHTML='<div class="'+n+'-expand" style="'+a+'"><div style="position:absolute;width:'+r+"px;height:"+r+'px;left:0;top:0"></div></div><div class="'+n+'-shrink" style="'+a+'"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div>';var i=t.childNodes[0],s=t.childNodes[1];t._reset=function(){i.scrollLeft=r,i.scrollTop=r,s.scrollLeft=r,s.scrollTop=r};var u=function(){t._reset(),e()};return o(i,"scroll",u.bind(i,"expand")),o(s,"scroll",u.bind(s,"shrink")),t}function p(e,t){var n=e[v]||(e[v]={}),r=n.renderProxy=function(e){e.animationName===x&&t()};g.each(w,function(t){o(e,t,r)}),n.reflow=!!e.offsetParent,e.classList.add(b)}function h(e){var t=e[v]||{},n=t.renderProxy;n&&(g.each(w,function(t){i(e,t,n)}),delete t.renderProxy),e.classList.remove(b)}function d(e,t,n){var r=e[v]||(e[v]={}),a=r.resizer=c(l(function(){if(r.resizer)return t(s("resize",n))}));p(e,function(){if(r.resizer){var t=e.parentNode;t&&t!==a.parentNode&&t.insertBefore(a,t.firstChild),a._reset()}})}function f(e){var t=e[v]||{},n=t.resizer;delete t.resizer,h(e),n&&n.parentNode&&n.parentNode.removeChild(n)}function m(e,t){var n=e._style||document.createElement("style");e._style||(e._style=n,t="/* Chart.js */\n"+t,n.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(n)),n.appendChild(document.createTextNode(t))}var g=n(3),v="$chartjs",y="chartjs-",b=y+"render-monitor",x=y+"render-animation",w=["animationstart","webkitAnimationStart"],S={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}(),N=!!_&&{passive:!0};e.exports={_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,initialize:function(){var e="from{opacity:0.99}to{opacity:1}";m(this,"@-webkit-keyframes "+x+"{"+e+"}@keyframes "+x+"{"+e+"}."+b+"{-webkit-animation:"+x+" 0.001s;animation:"+x+" 0.001s;}")},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(a(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t[v]){var n=t[v].initial;["height","width"].forEach(function(e){var r=n[e];g.isNullOrUndef(r)?t.removeAttribute(e):t.setAttribute(e,r)}),g.each(n.style||{},function(e,n){t.style[n]=e}),t.width=t.width,delete t[v]}},addEventListener:function(e,t,n){var r=e.canvas;if("resize"===t)return void d(r,n,e);var a=n[v]||(n[v]={}),i=a.proxies||(a.proxies={}),s=i[e.id+"_"+t]=function(t){n(u(t,e))};o(r,t,s)},removeEventListener:function(e,t,n){var r=e.canvas;if("resize"===t)return void f(r,n);var a=n[v]||{},o=a.proxies||{},s=o[e.id+"_"+t];s&&i(r,t,s)}},g.addEvent=o,g.removeEvent=i},function(e,t,n){"use strict";e.exports={},e.exports.filler=n(227),e.exports.legend=n(228),e.exports.title=n(229)},function(e,t,n){"use strict";function r(e,t,n){var r,a=e._model||{},o=a.fill;if(void 0===o&&(o=!!a.backgroundColor),o===!1||null===o)return!1;if(o===!0)return"origin";if(r=parseFloat(o,10),isFinite(r)&&Math.floor(r)===r)return"-"!==o[0]&&"+"!==o[0]||(r=t+r),!(r===t||r<0||r>=n)&&r;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function a(e){var t,n=e.el._model||{},r=e.el._scale||{},a=e.fill,o=null;if(isFinite(a))return null;if("start"===a?o=void 0===n.scaleBottom?r.bottom:n.scaleBottom:"end"===a?o=void 0===n.scaleTop?r.top:n.scaleTop:void 0!==n.scaleZero?o=n.scaleZero:r.getBasePosition?o=r.getBasePosition():r.getBasePixel&&(o=r.getBasePixel()),void 0!==o&&null!==o){if(void 0!==o.x&&void 0!==o.y)return o;if("number"==typeof o&&isFinite(o))return t=r.isHorizontal(),{x:t?o:null,y:t?null:o}}return null}function o(e,t,n){var r,a=e[t],o=a.fill,i=[t];if(!n)return o;for(;o!==!1&&i.indexOf(o)===-1;){if(!isFinite(o))return o;if(r=e[o],!r)return!1;if(r.visible)return o;i.push(o),o=r.fill}return!1}function i(e){var t=e.fill,n="dataset";return t===!1?null:(isFinite(t)||(n="boundary"),d[n](e))}function s(e){return e&&!e.skip}function u(e,t,n,r,a){var o;if(r&&a){for(e.moveTo(t[0].x,t[0].y),o=1;o<r;++o)h.canvas.lineTo(e,t[o-1],t[o]);for(e.lineTo(n[a-1].x,n[a-1].y),o=a-1;o>0;--o)h.canvas.lineTo(e,n[o],n[o-1],!0)}}function l(e,t,n,r,a,o){var i,l,c,p,h,d,f,m=t.length,g=r.spanGaps,v=[],y=[],b=0,x=0;for(e.beginPath(),i=0,l=m+!!o;i<l;++i)c=i%m,p=t[c]._view,h=n(p,c,r),d=s(p),f=s(h),d&&f?(b=v.push(p),x=y.push(h)):b&&x&&(g?(d&&v.push(p),f&&y.push(h)):(u(e,v,y,b,x),b=x=0,v=[],y=[]));u(e,v,y,b,x),e.closePath(),e.fillStyle=a,e.fill()}var c=n(5),p=n(25),h=n(3);c._set("global",{plugins:{filler:{propagate:!0}}});var d={dataset:function(e){var t=e.fill,n=e.chart,r=n.getDatasetMeta(t),a=r&&n.isDatasetVisible(t),o=a&&r.dataset._children||[],i=o.length||0;return i?function(e,t){return t<i&&o[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,r=t?t.y:null;return function(e){return{x:null===n?e.x:n,y:null===r?e.y:r}}}};e.exports={id:"filler",afterDatasetsUpdate:function(e,t){var n,s,u,l,c=(e.data.datasets||[]).length,h=t.propagate,d=[];for(s=0;s<c;++s)n=e.getDatasetMeta(s),u=n.dataset,l=null,u&&u._model&&u instanceof p.Line&&(l={visible:e.isDatasetVisible(s),fill:r(u,s,c),chart:e,el:u}),n.$filler=l,d.push(l);for(s=0;s<c;++s)l=d[s],l&&(l.fill=o(d,s,h),l.boundary=a(l),l.mapper=i(l))},beforeDatasetDraw:function(e,t){var n=t.meta.$filler;if(n){var r=e.ctx,a=n.el,o=a._view,i=a._children||[],s=n.mapper,u=o.backgroundColor||c.global.defaultColor;s&&u&&i.length&&(h.canvas.clipArea(r,e.chartArea),l(r,i,s,o,u,a._loop),h.canvas.unclipArea(r))}}}},function(e,t,n){"use strict";function r(e,t){return e.usePointStyle?t*Math.SQRT2:e.boxWidth}function a(e,t){var n=new c({ctx:e.ctx,options:t,chart:e});u.configure(e,n,t),u.addBox(e,n),e.legend=n}var o=n(5),i=n(16),s=n(3),u=n(42),l=s.noop;o._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,r=this.chart,a=r.getDatasetMeta(n);a.hidden=null===a.hidden?!r.data.datasets[n].hidden:null,r.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return s.isArray(t.datasets)?t.datasets.map(function(t,n){return{text:t.label,fillStyle:s.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(n),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:n}},this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var n=0;n<e.data.datasets.length;n++)t.push('<li><span style="background-color:'+e.data.datasets[n].backgroundColor+'"></span>'),e.data.datasets[n].label&&t.push(e.data.datasets[n].label),t.push("</li>");return t.push("</ul>"),t.join("")}});var c=i.extend({initialize:function(e){s.extend(this,e),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:l,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:l,beforeSetDimensions:l,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:l,beforeBuildLabels:l,buildLabels:function(){var e=this,t=e.options.labels||{},n=s.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(n){return t.filter(n,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:l,beforeFit:l,fit:function(){var e=this,t=e.options,n=t.labels,a=t.display,i=e.ctx,u=o.global,l=s.valueOrDefault,c=l(n.fontSize,u.defaultFontSize),p=l(n.fontStyle,u.defaultFontStyle),h=l(n.fontFamily,u.defaultFontFamily),d=s.fontString(c,p,h),f=e.legendHitBoxes=[],m=e.minSize,g=e.isHorizontal();if(g?(m.width=e.maxWidth,m.height=a?10:0):(m.width=a?10:0,m.height=e.maxHeight),a)if(i.font=d,g){var v=e.lineWidths=[0],y=e.legendItems.length?c+n.padding:0;i.textAlign="left",i.textBaseline="top",s.each(e.legendItems,function(t,a){var o=r(n,c),s=o+c/2+i.measureText(t.text).width;v[v.length-1]+s+n.padding>=e.width&&(y+=c+n.padding,v[v.length]=e.left),f[a]={left:0,top:0,width:s,height:c},v[v.length-1]+=s+n.padding}),m.height+=y}else{var b=n.padding,x=e.columnWidths=[],w=n.padding,S=0,_=0,N=c+b;s.each(e.legendItems,function(e,t){var a=r(n,c),o=a+c/2+i.measureText(e.text).width;_+N>m.height&&(w+=S+n.padding,x.push(S),S=0,_=0),S=Math.max(S,o),_+=N,f[t]={left:0,top:0,width:o,height:c}}),w+=S,x.push(S),m.width+=w}e.width=m.width,e.height=m.height},afterFit:l,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,n=t.labels,a=o.global,i=a.elements.line,u=e.width,l=e.lineWidths;if(t.display){var c,p=e.ctx,h=s.valueOrDefault,d=h(n.fontColor,a.defaultFontColor),f=h(n.fontSize,a.defaultFontSize),m=h(n.fontStyle,a.defaultFontStyle),g=h(n.fontFamily,a.defaultFontFamily),v=s.fontString(f,m,g);p.textAlign="left",p.textBaseline="middle",p.lineWidth=.5,p.strokeStyle=d,p.fillStyle=d,p.font=v;var y=r(n,f),b=e.legendHitBoxes,x=function(e,n,r){if(!(isNaN(y)||y<=0)){p.save(),p.fillStyle=h(r.fillStyle,a.defaultColor),p.lineCap=h(r.lineCap,i.borderCapStyle),p.lineDashOffset=h(r.lineDashOffset,i.borderDashOffset),p.lineJoin=h(r.lineJoin,i.borderJoinStyle),p.lineWidth=h(r.lineWidth,i.borderWidth),p.strokeStyle=h(r.strokeStyle,a.defaultColor);var o=0===h(r.lineWidth,i.borderWidth);if(p.setLineDash&&p.setLineDash(h(r.lineDash,i.borderDash)),t.labels&&t.labels.usePointStyle){var u=f*Math.SQRT2/2,l=u/Math.SQRT2,c=e+l,d=n+l;s.canvas.drawPoint(p,r.pointStyle,u,c,d)}else o||p.strokeRect(e,n,y,f),p.fillRect(e,n,y,f);p.restore()}},w=function(e,t,n,r){var a=f/2,o=y+a+e,i=t+a;p.fillText(n.text,o,i),n.hidden&&(p.beginPath(),p.lineWidth=2,p.moveTo(o,i),p.lineTo(o+r,i),p.stroke())},S=e.isHorizontal();c=S?{x:e.left+(u-l[0])/2,y:e.top+n.padding,line:0}:{x:e.left+n.padding,y:e.top+n.padding,line:0};var _=f+n.padding;s.each(e.legendItems,function(t,r){var a=p.measureText(t.text).width,o=y+f/2+a,i=c.x,s=c.y;S?i+o>=u&&(s=c.y+=_,c.line++,i=c.x=e.left+(u-l[c.line])/2):s+_>e.bottom&&(i=c.x=i+e.columnWidths[c.line]+n.padding,s=c.y=e.top+n.padding,c.line++),x(i,s,t),b[r].left=i,b[r].top=s,w(i,s,t,a),S?c.x+=o+n.padding:c.y+=_})}},handleEvent:function(e){var t=this,n=t.options,r="mouseup"===e.type?"click":e.type,a=!1;if("mousemove"===r){if(!n.onHover)return}else{if("click"!==r)return;if(!n.onClick)return}var o=e.x,i=e.y;if(o>=t.left&&o<=t.right&&i>=t.top&&i<=t.bottom)for(var s=t.legendHitBoxes,u=0;u<s.length;++u){var l=s[u];if(o>=l.left&&o<=l.left+l.width&&i>=l.top&&i<=l.top+l.height){if("click"===r){n.onClick.call(t,e.native,t.legendItems[u]),a=!0;break}if("mousemove"===r){n.onHover.call(t,e.native,t.legendItems[u]),a=!0;break}}}return a}});e.exports={id:"legend",_element:c,beforeInit:function(e){var t=e.options.legend;t&&a(e,t)},beforeUpdate:function(e){var t=e.options.legend,n=e.legend;t?(s.mergeIf(t,o.global.legend),n?(u.configure(e,n,t),n.options=t):a(e,t)):n&&(u.removeBox(e,n),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}}},function(e,t,n){"use strict";function r(e,t){var n=new l({ctx:e.ctx,options:t,chart:e});s.configure(e,n,t),s.addBox(e,n),e.titleBlock=n}var a=n(5),o=n(16),i=n(3),s=n(42),u=i.noop;a._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,lineHeight:1.2,padding:10,position:"top",text:"",weight:2e3}});var l=o.extend({initialize:function(e){var t=this;i.extend(t,e),t.legendHitBoxes=[]},beforeUpdate:u,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:u,beforeSetDimensions:u,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:u,beforeBuildLabels:u,buildLabels:u,afterBuildLabels:u,beforeFit:u,fit:function(){var e=this,t=i.valueOrDefault,n=e.options,r=n.display,o=t(n.fontSize,a.global.defaultFontSize),s=e.minSize,u=i.isArray(n.text)?n.text.length:1,l=i.options.toLineHeight(n.lineHeight,o),c=r?u*l+2*n.padding:0;e.isHorizontal()?(s.width=e.maxWidth,s.height=c):(s.width=c,s.height=e.maxHeight),e.width=s.width,e.height=s.height},afterFit:u,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=i.valueOrDefault,r=e.options,o=a.global;if(r.display){var s,u,l,c=n(r.fontSize,o.defaultFontSize),p=n(r.fontStyle,o.defaultFontStyle),h=n(r.fontFamily,o.defaultFontFamily),d=i.fontString(c,p,h),f=i.options.toLineHeight(r.lineHeight,c),m=f/2+r.padding,g=0,v=e.top,y=e.left,b=e.bottom,x=e.right;t.fillStyle=n(r.fontColor,o.defaultFontColor),t.font=d,e.isHorizontal()?(u=y+(x-y)/2,l=v+m,s=x-y):(u="left"===r.position?y+m:x-m,l=v+(b-v)/2,s=b-v,g=Math.PI*("left"===r.position?-.5:.5)),t.save(),t.translate(u,l),t.rotate(g),t.textAlign="center",t.textBaseline="middle";var w=r.text;if(i.isArray(w))for(var S=0,_=0;_<w.length;++_)t.fillText(w[_],0,S,s),S+=f;else t.fillText(w,0,0,s);t.restore()}}});e.exports={id:"title",_element:l,beforeInit:function(e){var t=e.options.title;t&&r(e,t)},beforeUpdate:function(e){var t=e.options.title,n=e.titleBlock;t?(i.mergeIf(t,a.global.title),n?(s.configure(e,n,t),n.options=t):r(e,t)):n&&(s.removeBox(e,n),delete e.titleBlock)}}},function(e,t){"use strict";e.exports=function(e){var t={position:"bottom"},n=e.Scale.extend({getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e=this,t=e.getLabels();e.minIndex=0,e.maxIndex=t.length-1;var n;void 0!==e.options.ticks.min&&(n=t.indexOf(e.options.ticks.min),e.minIndex=n!==-1?n:e.minIndex),void 0!==e.options.ticks.max&&(n=t.indexOf(e.options.ticks.max),e.maxIndex=n!==-1?n:e.maxIndex),e.min=t[e.minIndex],e.max=t[e.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var n=this,r=n.chart.data,a=n.isHorizontal();return r.yLabels&&!a?n.getRightValue(r.datasets[t].data[e]):n.ticks[e-n.minIndex]},getPixelForValue:function(e,t){var n,r=this,a=r.options.offset,o=Math.max(r.maxIndex+1-r.minIndex-(a?0:1),1);if(void 0!==e&&null!==e&&(n=r.isHorizontal()?e.x:e.y),void 0!==n||void 0!==e&&isNaN(t)){var i=r.getLabels();e=n||e;var s=i.indexOf(e);t=s!==-1?s:t}if(r.isHorizontal()){var u=r.width/o,l=u*(t-r.minIndex);return a&&(l+=u/2),r.left+Math.round(l)}var c=r.height/o,p=c*(t-r.minIndex);return a&&(p+=c/2),r.top+Math.round(p)},getPixelForTick:function(e){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null)},getValueForPixel:function(e){var t,n=this,r=n.options.offset,a=Math.max(n._ticks.length-(r?0:1),1),o=n.isHorizontal(),i=(o?n.width:n.height)/a;return e-=o?n.left:n.top,r&&(e-=i/2),t=e<=0?0:Math.round(e/i),t+n.minIndex},getBasePixel:function(){return this.bottom}});e.scaleService.registerScaleType("category",n,t)}},function(e,t,n){"use strict";var r=n(5),a=n(3),o=n(43);e.exports=function(e){var t={position:"left",ticks:{callback:o.formatters.linear}},n=e.LinearScaleBase.extend({determineDataLimits:function(){function e(e){return s?e.xAxisID===t.id:e.yAxisID===t.id}var t=this,n=t.options,r=t.chart,o=r.data,i=o.datasets,s=t.isHorizontal(),u=0,l=1;t.min=null,t.max=null;var c=n.stacked;if(void 0===c&&a.each(i,function(t,n){if(!c){var a=r.getDatasetMeta(n);r.isDatasetVisible(n)&&e(a)&&void 0!==a.stack&&(c=!0)}}),n.stacked||c){var p={};a.each(i,function(o,i){var s=r.getDatasetMeta(i),u=[s.type,void 0===n.stacked&&void 0===s.stack?i:"",s.stack].join(".");void 0===p[u]&&(p[u]={positiveValues:[],negativeValues:[]});var l=p[u].positiveValues,c=p[u].negativeValues;r.isDatasetVisible(i)&&e(s)&&a.each(o.data,function(e,r){var a=+t.getRightValue(e);isNaN(a)||s.data[r].hidden||(l[r]=l[r]||0,c[r]=c[r]||0,n.relativePoints?l[r]=100:a<0?c[r]+=a:l[r]+=a)})}),a.each(p,function(e){var n=e.positiveValues.concat(e.negativeValues),r=a.min(n),o=a.max(n);t.min=null===t.min?r:Math.min(t.min,r),t.max=null===t.max?o:Math.max(t.max,o)})}else a.each(i,function(n,o){var i=r.getDatasetMeta(o);r.isDatasetVisible(o)&&e(i)&&a.each(n.data,function(e,n){var r=+t.getRightValue(e);isNaN(r)||i.data[n].hidden||(null===t.min?t.min=r:r<t.min&&(t.min=r),null===t.max?t.max=r:r>t.max&&(t.max=r))})});t.min=isFinite(t.min)&&!isNaN(t.min)?t.min:u,t.max=isFinite(t.max)&&!isNaN(t.max)?t.max:l,this.handleTickRangeOptions()},getTickLimit:function(){var e,t=this,n=t.options.ticks;if(t.isHorizontal())e=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(t.width/50));else{var o=a.valueOrDefault(n.fontSize,r.global.defaultFontSize);e=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(t.height/(2*o)))}return e},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t,n=this,r=n.start,a=+n.getRightValue(e),o=n.end-r;return t=n.isHorizontal()?n.left+n.width/o*(a-r):n.bottom-n.height/o*(a-r)},getValueForPixel:function(e){var t=this,n=t.isHorizontal(),r=n?t.width:t.height,a=(n?e-t.left:t.bottom-e)/r;return t.start+(t.end-t.start)*a},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}});e.scaleService.registerScaleType("linear",n,t)}},function(e,t,n){"use strict";function r(e,t){var n,r=[];if(e.stepSize&&e.stepSize>0)n=e.stepSize;else{var o=a.niceNum(t.max-t.min,!1);n=a.niceNum(o/(e.maxTicks-1),!0)}var i=Math.floor(t.min/n)*n,s=Math.ceil(t.max/n)*n;e.min&&e.max&&e.stepSize&&a.almostWhole((e.max-e.min)/e.stepSize,n/1e3)&&(i=e.min,s=e.max);var u=(s-i)/n;u=a.almostEquals(u,Math.round(u),n/1e3)?Math.round(u):Math.ceil(u);var l=1;n<1&&(l=Math.pow(10,n.toString().length-2),i=Math.round(i*l)/l,s=Math.round(s*l)/l),r.push(void 0!==e.min?e.min:i);for(var c=1;c<u;++c)r.push(Math.round((i+c*n)*l)/l);return r.push(void 0!==e.max?e.max:s),r}var a=n(3);e.exports=function(e){var t=a.noop;e.LinearScaleBase=e.Scale.extend({getRightValue:function(t){return"string"==typeof t?+t:e.Scale.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var e=this,t=e.options,n=t.ticks;if(n.beginAtZero){var r=a.sign(e.min),o=a.sign(e.max);r<0&&o<0?e.max=0:r>0&&o>0&&(e.min=0)}var i=void 0!==n.min||void 0!==n.suggestedMin,s=void 0!==n.max||void 0!==n.suggestedMax;void 0!==n.min?e.min=n.min:void 0!==n.suggestedMin&&(null===e.min?e.min=n.suggestedMin:e.min=Math.min(e.min,n.suggestedMin)),void 0!==n.max?e.max=n.max:void 0!==n.suggestedMax&&(null===e.max?e.max=n.suggestedMax:e.max=Math.max(e.max,n.suggestedMax)),i!==s&&e.min>=e.max&&(i?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,n.beginAtZero||e.min--)},getTickLimit:t,handleDirectionalChanges:t,
buildTicks:function(){var e=this,t=e.options,n=t.ticks,o=e.getTickLimit();o=Math.max(2,o);var i={maxTicks:o,min:n.min,max:n.max,stepSize:a.valueOrDefault(n.fixedStepSize,n.stepSize)},s=e.ticks=r(i,e);e.handleDirectionalChanges(),e.max=a.max(s),e.min=a.min(s),n.reverse?(s.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),e.Scale.prototype.convertTicksToLabels.call(t)}})}},function(e,t,n){"use strict";function r(e,t){var n,r,o=[],i=a.valueOrDefault,s=i(e.min,Math.pow(10,Math.floor(a.log10(t.min)))),u=Math.floor(a.log10(t.max)),l=Math.ceil(t.max/Math.pow(10,u));0===s?(n=Math.floor(a.log10(t.minNotZero)),r=Math.floor(t.minNotZero/Math.pow(10,n)),o.push(s),s=r*Math.pow(10,n)):(n=Math.floor(a.log10(s)),r=Math.floor(s/Math.pow(10,n)));var c=n<0?Math.pow(10,Math.abs(n)):1;do o.push(s),++r,10===r&&(r=1,++n,c=n>=0?1:c),s=Math.round(r*Math.pow(10,n)*c)/c;while(n<u||n===u&&r<l);var p=i(e.max,s);return o.push(p),o}var a=n(3),o=n(43);e.exports=function(e){var t={position:"left",ticks:{callback:o.formatters.logarithmic}},n=e.Scale.extend({determineDataLimits:function(){function e(e){return s?e.xAxisID===t.id:e.yAxisID===t.id}var t=this,n=t.options,r=t.chart,o=r.data,i=o.datasets,s=t.isHorizontal();t.min=null,t.max=null,t.minNotZero=null;var u=n.stacked;if(void 0===u&&a.each(i,function(t,n){if(!u){var a=r.getDatasetMeta(n);r.isDatasetVisible(n)&&e(a)&&void 0!==a.stack&&(u=!0)}}),n.stacked||u){var l={};a.each(i,function(o,i){var s=r.getDatasetMeta(i),u=[s.type,void 0===n.stacked&&void 0===s.stack?i:"",s.stack].join(".");r.isDatasetVisible(i)&&e(s)&&(void 0===l[u]&&(l[u]=[]),a.each(o.data,function(e,n){var r=l[u],a=+t.getRightValue(e);isNaN(a)||s.data[n].hidden||a<0||(r[n]=r[n]||0,r[n]+=a)}))}),a.each(l,function(e){if(e.length>0){var n=a.min(e),r=a.max(e);t.min=null===t.min?n:Math.min(t.min,n),t.max=null===t.max?r:Math.max(t.max,r)}})}else a.each(i,function(n,o){var i=r.getDatasetMeta(o);r.isDatasetVisible(o)&&e(i)&&a.each(n.data,function(e,n){var r=+t.getRightValue(e);isNaN(r)||i.data[n].hidden||r<0||(null===t.min?t.min=r:r<t.min&&(t.min=r),null===t.max?t.max=r:r>t.max&&(t.max=r),0!==r&&(null===t.minNotZero||r<t.minNotZero)&&(t.minNotZero=r))})});this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options,n=t.ticks,r=a.valueOrDefault,o=1,i=10;e.min=r(n.min,e.min),e.max=r(n.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(a.log10(e.min))-1),e.max=Math.pow(10,Math.floor(a.log10(e.max))+1)):(e.min=o,e.max=i)),null===e.min&&(e.min=Math.pow(10,Math.floor(a.log10(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(a.log10(e.min))+1):i),null===e.minNotZero&&(e.min>0?e.minNotZero=e.min:e.max<1?e.minNotZero=Math.pow(10,Math.floor(a.log10(e.max))):e.minNotZero=o)},buildTicks:function(){var e=this,t=e.options,n=t.ticks,o=!e.isHorizontal(),i={min:n.min,max:n.max},s=e.ticks=r(i,e);e.max=a.max(s),e.min=a.min(s),n.reverse?(o=!o,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),o&&s.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),e.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},_getFirstTickValue:function(e){var t=Math.floor(a.log10(e)),n=Math.floor(e/Math.pow(10,t));return n*Math.pow(10,t)},getPixelForValue:function(t){var n,r,o,i,s,u=this,l=u.options.ticks.reverse,c=a.log10,p=u._getFirstTickValue(u.minNotZero),h=0;return t=+u.getRightValue(t),l?(o=u.end,i=u.start,s=-1):(o=u.start,i=u.end,s=1),u.isHorizontal()?(n=u.width,r=l?u.right:u.left):(n=u.height,s*=-1,r=l?u.top:u.bottom),t!==o&&(0===o&&(h=a.getValueOrDefault(u.options.ticks.fontSize,e.defaults.global.defaultFontSize),n-=h,o=p),0!==t&&(h+=n/(c(i)-c(o))*(c(t)-c(o))),r+=s*h),r},getValueForPixel:function(t){var n,r,o,i,s=this,u=s.options.ticks.reverse,l=a.log10,c=s._getFirstTickValue(s.minNotZero);if(u?(r=s.end,o=s.start):(r=s.start,o=s.end),s.isHorizontal()?(n=s.width,i=u?s.right-t:t-s.left):(n=s.height,i=u?t-s.top:s.bottom-t),i!==r){if(0===r){var p=a.getValueOrDefault(s.options.ticks.fontSize,e.defaults.global.defaultFontSize);i-=p,n-=p,r=c}i*=l(o)-l(r),i/=n,i=Math.pow(10,l(r)+i)}return i}});e.scaleService.registerScaleType("logarithmic",n,t)}},function(e,t,n){"use strict";var r=n(5),a=n(3),o=n(43);e.exports=function(e){function t(e){var t=e.options;return t.angleLines.display||t.pointLabels.display?e.chart.data.labels.length:0}function n(e){var t=e.options.pointLabels,n=a.valueOrDefault(t.fontSize,g.defaultFontSize),r=a.valueOrDefault(t.fontStyle,g.defaultFontStyle),o=a.valueOrDefault(t.fontFamily,g.defaultFontFamily),i=a.fontString(n,r,o);return{size:n,style:r,family:o,font:i}}function i(e,t,n){return a.isArray(n)?{w:a.longestText(e,e.font,n),h:n.length*t+1.5*(n.length-1)*t}:{w:e.measureText(n).width,h:t}}function s(e,t,n,r,a){return e===r||e===a?{start:t-n/2,end:t+n/2}:e<r||e>a?{start:t-n-5,end:t}:{start:t,end:t+n+5}}function u(e){var r,o,u,l=n(e),c=Math.min(e.height/2,e.width/2),p={r:e.width,l:0,t:e.height,b:0},h={};e.ctx.font=l.font,e._pointLabelSizes=[];var d=t(e);for(r=0;r<d;r++){u=e.getPointPosition(r,c),o=i(e.ctx,l.size,e.pointLabels[r]||""),e._pointLabelSizes[r]=o;var f=e.getIndexAngle(r),m=a.toDegrees(f)%360,g=s(m,u.x,o.w,0,180),v=s(m,u.y,o.h,90,270);g.start<p.l&&(p.l=g.start,h.l=f),g.end>p.r&&(p.r=g.end,h.r=f),v.start<p.t&&(p.t=v.start,h.t=f),v.end>p.b&&(p.b=v.end,h.b=f)}e.setReductions(c,p,h)}function l(e){var t=Math.min(e.height/2,e.width/2);e.drawingArea=Math.round(t),e.setCenterPoint(0,0,0,0)}function c(e){return 0===e||180===e?"center":e<180?"left":"right"}function p(e,t,n,r){if(a.isArray(t))for(var o=n.y,i=1.5*r,s=0;s<t.length;++s)e.fillText(t[s],n.x,o),o+=i;else e.fillText(t,n.x,n.y)}function h(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function d(e){var r=e.ctx,o=e.options,i=o.angleLines,s=o.pointLabels;r.lineWidth=i.lineWidth,r.strokeStyle=i.color;var u=e.getDistanceFromCenterForValue(o.ticks.reverse?e.min:e.max),l=n(e);r.textBaseline="top";for(var d=t(e)-1;d>=0;d--){if(i.display){var f=e.getPointPosition(d,u);r.beginPath(),r.moveTo(e.xCenter,e.yCenter),r.lineTo(f.x,f.y),r.stroke(),r.closePath()}if(s.display){var m=e.getPointPosition(d,u+5),v=a.valueAtIndexOrDefault(s.fontColor,d,g.defaultFontColor);r.font=l.font,r.fillStyle=v;var y=e.getIndexAngle(d),b=a.toDegrees(y);r.textAlign=c(b),h(b,e._pointLabelSizes[d],m),p(r,e.pointLabels[d]||"",m,l.size)}}}function f(e,n,r,o){var i=e.ctx;if(i.strokeStyle=a.valueAtIndexOrDefault(n.color,o-1),i.lineWidth=a.valueAtIndexOrDefault(n.lineWidth,o-1),e.options.gridLines.circular)i.beginPath(),i.arc(e.xCenter,e.yCenter,r,0,2*Math.PI),i.closePath(),i.stroke();else{var s=t(e);if(0===s)return;i.beginPath();var u=e.getPointPosition(0,r);i.moveTo(u.x,u.y);for(var l=1;l<s;l++)u=e.getPointPosition(l,r),i.lineTo(u.x,u.y);i.closePath(),i.stroke()}}function m(e){return a.isNumber(e)?e:0}var g=r.global,v={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:o.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}},y=e.LinearScaleBase.extend({setDimensions:function(){var e=this,t=e.options,n=t.ticks;e.width=e.maxWidth,e.height=e.maxHeight,e.xCenter=Math.round(e.width/2),e.yCenter=Math.round(e.height/2);var r=a.min([e.height,e.width]),o=a.valueOrDefault(n.fontSize,g.defaultFontSize);e.drawingArea=t.display?r/2-(o/2+n.backdropPaddingY):r/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;a.each(t.data.datasets,function(o,i){if(t.isDatasetVisible(i)){var s=t.getDatasetMeta(i);a.each(o.data,function(t,a){var o=+e.getRightValue(t);isNaN(o)||s.data[a].hidden||(n=Math.min(o,n),r=Math.max(o,r))})}}),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=r===Number.NEGATIVE_INFINITY?0:r,e.handleTickRangeOptions()},getTickLimit:function(){var e=this.options.ticks,t=a.valueOrDefault(e.fontSize,g.defaultFontSize);return Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*t)))},convertTicksToLabels:function(){var t=this;e.LinearScaleBase.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){this.options.pointLabels.display?u(this):l(this)},setReductions:function(e,t,n){var r=this,a=t.l/Math.sin(n.l),o=Math.max(t.r-r.width,0)/Math.sin(n.r),i=-t.t/Math.cos(n.t),s=-Math.max(t.b-r.height,0)/Math.cos(n.b);a=m(a),o=m(o),i=m(i),s=m(s),r.drawingArea=Math.min(Math.round(e-(a+o)/2),Math.round(e-(i+s)/2)),r.setCenterPoint(a,o,i,s)},setCenterPoint:function(e,t,n,r){var a=this,o=a.width-t-a.drawingArea,i=e+a.drawingArea,s=n+a.drawingArea,u=a.height-r-a.drawingArea;a.xCenter=Math.round((i+o)/2+a.left),a.yCenter=Math.round((s+u)/2+a.top)},getIndexAngle:function(e){var n=2*Math.PI/t(this),r=this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0,a=r*Math.PI*2/360;return e*n+a},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this,r=n.getIndexAngle(e)-Math.PI/2;return{x:Math.round(Math.cos(r)*t)+n.xCenter,y:Math.round(Math.sin(r)*t)+n.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this,t=e.min,n=e.max;return e.getPointPositionForValue(0,e.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0)},draw:function(){var e=this,t=e.options,n=t.gridLines,r=t.ticks,o=a.valueOrDefault;if(t.display){var i=e.ctx,s=this.getIndexAngle(0),u=o(r.fontSize,g.defaultFontSize),l=o(r.fontStyle,g.defaultFontStyle),c=o(r.fontFamily,g.defaultFontFamily),p=a.fontString(u,l,c);a.each(e.ticks,function(t,a){if(a>0||r.reverse){var l=e.getDistanceFromCenterForValue(e.ticksAsNumbers[a]);if(n.display&&0!==a&&f(e,n,l,a),r.display){var c=o(r.fontColor,g.defaultFontColor);if(i.font=p,i.save(),i.translate(e.xCenter,e.yCenter),i.rotate(s),r.showLabelBackdrop){var h=i.measureText(t).width;i.fillStyle=r.backdropColor,i.fillRect(-h/2-r.backdropPaddingX,-l-u/2-r.backdropPaddingY,h+2*r.backdropPaddingX,u+2*r.backdropPaddingY)}i.textAlign="center",i.textBaseline="middle",i.fillStyle=c,i.fillText(t,0,-l),i.restore()}}}),(t.angleLines.display||t.pointLabels.display)&&d(e)}}});e.scaleService.registerScaleType("radialLinear",y,v)}},function(e,t,n){"use strict";function r(e,t){return e-t}function a(e){var t,n,r,a={},o=[];for(t=0,n=e.length;t<n;++t)r=e[t],a[r]||(a[r]=!0,o.push(r));return o}function o(e,t,n,r){if("linear"===r||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var a,o,i,s,u,l=[],c=[t];for(a=0,o=e.length;a<o;++a)s=e[a],s>t&&s<n&&c.push(s);for(c.push(n),a=0,o=c.length;a<o;++a)u=c[a+1],i=c[a-1],s=c[a],void 0!==i&&void 0!==u&&Math.round((u+i)/2)===s||l.push({time:s,pos:a/(o-1)});return l}function i(e,t,n){for(var r,a,o,i=0,s=e.length-1;i>=0&&i<=s;){if(r=i+s>>1,a=e[r-1]||null,o=e[r],!a)return{lo:null,hi:o};if(o[t]<n)i=r+1;else{if(!(a[t]>n))return{lo:a,hi:o};s=r-1}}return{lo:o,hi:null}}function s(e,t,n,r){var a=i(e,t,n),o=a.lo?a.hi?a.lo:e[e.length-2]:e[0],s=a.lo?a.hi?a.hi:e[e.length-1]:e[1],u=s[t]-o[t],l=u?(n-o[t])/u:0,c=(s[r]-o[r])*l;return o[r]+c}function u(e,t){var n=t.parser,r=t.parser||t.format;return"function"==typeof n?n(e):"string"==typeof e&&"string"==typeof r?y(e,r):(e instanceof y||(e=y(e)),e.isValid()?e:"function"==typeof r?r(e):e)}function l(e,t){if(x.isNullOrUndef(e))return null;var n=t.options.time,r=u(t.getRightValue(e),n);return r.isValid()?(n.round&&r.startOf(n.round),r.valueOf()):null}function c(e,t,n,r){var a,o,i,s=t-e,u=_[n],l=u.size,c=u.steps;if(!c)return Math.ceil(s/(r*l));for(a=0,o=c.length;a<o&&(i=c[a],!(Math.ceil(s/(l*i))<=r));++a);return i}function p(e,t,n,r){var a,o,i,s=N.length;for(a=N.indexOf(e);a<s-1;++a)if(o=_[N[a]],i=o.steps?o.steps[o.steps.length-1]:S,o.common&&Math.ceil((n-t)/(i*o.size))<=r)return N[a];return N[s-1]}function h(e,t,n,r){var a,o,i=y.duration(y(r).diff(y(n))),s=N.length;for(a=s-1;a>=N.indexOf(t);a--)if(o=N[a],_[o].common&&i.as(o)>=e.length)return o;return N[t?N.indexOf(t):0]}function d(e){for(var t=N.indexOf(e)+1,n=N.length;t<n;++t)if(_[N[t]].common)return N[t]}function f(e,t,n,r){var a,o=r.time,i=o.unit||p(o.minUnit,e,t,n),s=d(i),u=x.valueOrDefault(o.stepSize,o.unitStepSize),l="week"===i&&o.isoWeekday,h=r.ticks.major.enabled,f=_[i],m=y(e),g=y(t),v=[];for(u||(u=c(e,t,i,n)),l&&(m=m.isoWeekday(l),g=g.isoWeekday(l)),m=m.startOf(l?"day":i),g=g.startOf(l?"day":i),g<t&&g.add(1,i),a=y(m),h&&s&&!l&&!o.round&&(a.startOf(s),a.add(~~((m-a)/(f.size*u))*u,i));a<g;a.add(u,i))v.push(+a);return v.push(+a),v}function m(e,t,n,r,a){var o,i,u=0,l=0;return a.offset&&t.length&&(a.time.min||(o=t.length>1?t[1]:r,i=t[0],u=(s(e,"time",o,"pos")-s(e,"time",i,"pos"))/2),a.time.max||(o=t[t.length-1],i=t.length>1?t[t.length-2]:n,l=(s(e,"time",o,"pos")-s(e,"time",i,"pos"))/2)),{left:u,right:l}}function g(e,t){var n,r,a,o,i=[];for(n=0,r=e.length;n<r;++n)a=e[n],o=!!t&&a===+y(a).startOf(t),i.push({value:a,major:o});return i}function v(e,t){var n,r,a,o=e.length;for(n=0;n<o;n++){if(r=u(e[n],t),0!==r.millisecond())return"MMM D, YYYY h:mm:ss.SSS a";0===r.second()&&0===r.minute()&&0===r.hour()||(a=!0)}return a?"MMM D, YYYY h:mm:ss a":"MMM D, YYYY"}var y=n(348);y="function"==typeof y?y:window.moment;var b=n(5),x=n(3),w=Number.MIN_SAFE_INTEGER||-9007199254740991,S=Number.MAX_SAFE_INTEGER||9007199254740991,_={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},N=Object.keys(_);e.exports=function(e){var t={position:"bottom",distribution:"linear",bounds:"data",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},n=e.Scale.extend({initialize:function(){if(!y)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");this.mergeTicksOptions(),e.Scale.prototype.initialize.call(this)},update:function(){var t=this,n=t.options;return n.time&&n.time.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),e.Scale.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),e.Scale.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var e,t,n,o,i,s,u=this,c=u.chart,p=u.options.time,h=p.unit||"day",d=S,f=w,m=[],g=[],v=[];for(e=0,n=c.data.labels.length;e<n;++e)v.push(l(c.data.labels[e],u));for(e=0,n=(c.data.datasets||[]).length;e<n;++e)if(c.isDatasetVisible(e))if(i=c.data.datasets[e].data,x.isObject(i[0]))for(g[e]=[],t=0,o=i.length;t<o;++t)s=l(i[t],u),m.push(s),g[e][t]=s;else m.push.apply(m,v),g[e]=v.slice(0);else g[e]=[];v.length&&(v=a(v).sort(r),d=Math.min(d,v[0]),f=Math.max(f,v[v.length-1])),m.length&&(m=a(m).sort(r),d=Math.min(d,m[0]),f=Math.max(f,m[m.length-1])),d=l(p.min,u)||d,f=l(p.max,u)||f,d=d===S?+y().startOf(h):d,f=f===w?+y().endOf(h)+1:f,u.min=Math.min(d,f),u.max=Math.max(d+1,f),u._horizontal=u.isHorizontal(),u._table=[],u._timestamps={data:m,datasets:g,labels:v}},buildTicks:function(){var e,t,n,r=this,a=r.min,i=r.max,s=r.options,u=s.time,c=[],p=[];switch(s.ticks.source){case"data":c=r._timestamps.data;break;case"labels":c=r._timestamps.labels;break;case"auto":default:c=f(a,i,r.getLabelCapacity(a),s)}for("ticks"===s.bounds&&c.length&&(a=c[0],i=c[c.length-1]),a=l(u.min,r)||a,i=l(u.max,r)||i,e=0,t=c.length;e<t;++e)n=c[e],n>=a&&n<=i&&p.push(n);return r.min=a,r.max=i,r._unit=u.unit||h(p,u.minUnit,r.min,r.max),r._majorUnit=d(r._unit),r._table=o(r._timestamps.data,a,i,s.distribution),r._offsets=m(r._table,p,a,i,s),r._labelFormat=v(r._timestamps.data,u),g(p,r._majorUnit)},getLabelForIndex:function(e,t){var n=this,r=n.chart.data,a=n.options.time,o=r.labels&&e<r.labels.length?r.labels[e]:"",i=r.datasets[t].data[e];return x.isObject(i)&&(o=n.getRightValue(i)),a.tooltipFormat?u(o,a).format(a.tooltipFormat):"string"==typeof o?o:u(o,a).format(n._labelFormat)},tickFormatFunction:function(e,t,n,r){var a=this,o=a.options,i=e.valueOf(),s=o.time.displayFormats,u=s[a._unit],l=a._majorUnit,c=s[l],p=e.clone().startOf(l).valueOf(),h=o.ticks.major,d=h.enabled&&l&&c&&i===p,f=e.format(r?r:d?c:u),m=d?h:o.ticks.minor,g=x.valueOrDefault(m.callback,m.userCallback);return g?g(f,t,n):f},convertTicksToLabels:function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push(this.tickFormatFunction(y(e[t].value),t,e));return r},getPixelForOffset:function(e){var t=this,n=t._horizontal?t.width:t.height,r=t._horizontal?t.left:t.top,a=s(t._table,"time",e,"pos");return r+n*(t._offsets.left+a)/(t._offsets.left+1+t._offsets.right)},getPixelForValue:function(e,t,n){var r=this,a=null;if(void 0!==t&&void 0!==n&&(a=r._timestamps.datasets[n][t]),null===a&&(a=l(e,r)),null!==a)return r.getPixelForOffset(a)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,n=t._horizontal?t.width:t.height,r=t._horizontal?t.left:t.top,a=(n?(e-r)/n:0)*(t._offsets.left+1+t._offsets.left)-t._offsets.right,o=s(t._table,"pos",a,"time");return y(o)},getLabelWidth:function(e){var t=this,n=t.options.ticks,r=t.ctx.measureText(e).width,a=x.toRadians(n.maxRotation),o=Math.cos(a),i=Math.sin(a),s=x.valueOrDefault(n.fontSize,b.global.defaultFontSize);return r*o+s*i},getLabelCapacity:function(e){var t=this,n=t.options.time.displayFormats.millisecond,r=t.tickFormatFunction(y(e),0,[],n),a=t.getLabelWidth(r),o=t.isHorizontal()?t.width:t.height,i=Math.floor(o/a);return i>0?i:1}});e.scaleService.registerScaleType("time",n,t)}},function(e,t,n){function r(e){if(e){var t=/^#([a-fA-F0-9]{3})$/i,n=/^#([a-fA-F0-9]{6})$/i,r=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,a=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/(\w+)/,i=[0,0,0],s=1,u=e.match(t);if(u){u=u[1];for(var l=0;l<i.length;l++)i[l]=parseInt(u[l]+u[l],16)}else if(u=e.match(n)){u=u[1];for(var l=0;l<i.length;l++)i[l]=parseInt(u.slice(2*l,2*l+2),16)}else if(u=e.match(r)){for(var l=0;l<i.length;l++)i[l]=parseInt(u[l+1]);s=parseFloat(u[4])}else if(u=e.match(a)){for(var l=0;l<i.length;l++)i[l]=Math.round(2.55*parseFloat(u[l+1]));s=parseFloat(u[4])}else if(u=e.match(o)){if("transparent"==u[1])return[0,0,0,0];if(i=x[u[1]],!i)return}for(var l=0;l<i.length;l++)i[l]=y(i[l],0,255);return s=s||0==s?y(s,0,1):1,i[3]=s,i}}function a(e){if(e){var t=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=e.match(t);if(n){var r=parseFloat(n[4]),a=y(parseInt(n[1]),0,360),o=y(parseFloat(n[2]),0,100),i=y(parseFloat(n[3]),0,100),s=y(isNaN(r)?1:r,0,1);return[a,o,i,s]}}}function o(e){if(e){var t=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=e.match(t);if(n){var r=parseFloat(n[4]),a=y(parseInt(n[1]),0,360),o=y(parseFloat(n[2]),0,100),i=y(parseFloat(n[3]),0,100),s=y(isNaN(r)?1:r,0,1);return[a,o,i,s]}}}function i(e){var t=r(e);return t&&t.slice(0,3)}function s(e){var t=a(e);return t&&t.slice(0,3)}function u(e){var t=r(e);return t?t[3]:(t=a(e))?t[3]:(t=o(e))?t[3]:void 0}function l(e){return"#"+b(e[0])+b(e[1])+b(e[2])}function c(e,t){return t<1||e[3]&&e[3]<1?p(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function p(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function h(e,t){if(t<1||e[3]&&e[3]<1)return d(e,t);var n=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),a=Math.round(e[2]/255*100);return"rgb("+n+"%, "+r+"%, "+a+"%)"}function d(e,t){var n=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),a=Math.round(e[2]/255*100);return"rgba("+n+"%, "+r+"%, "+a+"%, "+(t||e[3]||1)+")"}function f(e,t){return t<1||e[3]&&e[3]<1?m(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"}function m(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function g(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function v(e){return w[e.slice(0,3)]}function y(e,t,n){return Math.min(Math.max(t,e),n)}function b(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var x=n(239);e.exports={getRgba:r,getHsla:a,getRgb:i,getHsl:s,getHwb:o,getAlpha:u,hexString:l,rgbString:c,rgbaString:p,percentString:h,percentaString:d,hslString:f,hslaString:m,hwbString:g,keyword:v};var w={};for(var S in x)w[x[S]]=S},function(e,t){function n(e){var t,n,r,a=e[0]/255,o=e[1]/255,i=e[2]/255,s=Math.min(a,o,i),u=Math.max(a,o,i),l=u-s;return u==s?t=0:a==u?t=(o-i)/l:o==u?t=2+(i-a)/l:i==u&&(t=4+(a-o)/l),t=Math.min(60*t,360),t<0&&(t+=360),r=(s+u)/2,n=u==s?0:r<=.5?l/(u+s):l/(2-u-s),[t,100*n,100*r]}function a(e){var t,n,r,a=e[0],o=e[1],i=e[2],s=Math.min(a,o,i),u=Math.max(a,o,i),l=u-s;return n=0==u?0:l/u*1e3/10,u==s?t=0:a==u?t=(o-i)/l:o==u?t=2+(i-a)/l:i==u&&(t=4+(a-o)/l),t=Math.min(60*t,360),t<0&&(t+=360),r=u/255*1e3/10,[t,n,r]}function o(e){var t=e[0],r=e[1],a=e[2],o=n(e)[0],i=1/255*Math.min(t,Math.min(r,a)),a=1-1/255*Math.max(t,Math.max(r,a));return[o,100*i,100*a]}function i(e){var t,n,r,a,o=e[0]/255,i=e[1]/255,s=e[2]/255;return a=Math.min(1-o,1-i,1-s),t=(1-o-a)/(1-a)||0,n=(1-i-a)/(1-a)||0,r=(1-s-a)/(1-a)||0,[100*t,100*n,100*r,100*a]}function s(e){return X[JSON.stringify(e)]}function u(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var a=.4124*t+.3576*n+.1805*r,o=.2126*t+.7152*n+.0722*r,i=.0193*t+.1192*n+.9505*r;return[100*a,100*o,100*i]}function l(e){var t,n,r,a=u(e),o=a[0],i=a[1],s=a[2];return o/=95.047,i/=100,s/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,t=116*i-16,n=500*(o-i),r=200*(i-s),[t,n,r]}function c(e){return L(l(e))}function p(e){var t,n,r,a,o,i=e[0]/360,s=e[1]/100,u=e[2]/100;if(0==s)return o=255*u,[o,o,o];n=u<.5?u*(1+s):u+s-u*s,t=2*u-n,a=[0,0,0];for(var l=0;l<3;l++)r=i+1/3*-(l-1),r<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,a[l]=255*o;return a}function h(e){var t,n,r=e[0],a=e[1]/100,o=e[2]/100;return 0===o?[0,0,0]:(o*=2,a*=o<=1?o:2-o,n=(o+a)/2,t=2*a/(o+a),[r,100*t,100*n])}function d(e){return o(p(e))}function f(e){return i(p(e))}function m(e){return s(p(e))}function v(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,a=Math.floor(t)%6,o=t-Math.floor(t),i=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o)),r=255*r;switch(a){case 0:return[r,u,i];case 1:return[s,r,i];case 2:return[i,r,u];case 3:return[i,s,r];case 4:return[u,i,r];case 5:return[r,i,s]}}function y(e){var t,n,r=e[0],a=e[1]/100,o=e[2]/100;return n=(2-a)*o,t=a*o,t/=n<=1?n:2-n,t=t||0,n/=2,[r,100*t,100*n]}function x(e){return o(v(e))}function w(e){return i(v(e))}function S(e){return s(v(e))}function _(e){var t,n,a,o,i=e[0]/360,s=e[1]/100,u=e[2]/100,l=s+u;switch(l>1&&(s/=l,u/=l),t=Math.floor(6*i),n=1-u,a=6*i-t,0!=(1&t)&&(a=1-a),o=s+a*(n-s),t){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function N(e){return n(_(e))}function T(e){return a(_(e))}function k(e){return i(_(e))}function I(e){return s(_(e))}function E(e){var t,n,r,a=e[0]/100,o=e[1]/100,i=e[2]/100,s=e[3]/100;return t=1-Math.min(1,a*(1-s)+s),n=1-Math.min(1,o*(1-s)+s),r=1-Math.min(1,i*(1-s)+s),[255*t,255*n,255*r]}function A(e){return n(E(e))}function P(e){return a(E(e))}function C(e){return o(E(e))}function O(e){return s(E(e))}function M(e){var t,n,r,a=e[0]/100,o=e[1]/100,i=e[2]/100;return t=3.2406*a+o*-1.5372+i*-.4986,n=a*-.9689+1.8758*o+.0415*i,r=.0557*a+o*-.204+1.057*i,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,t=Math.min(Math.max(0,t),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*t,255*n,255*r]}function D(e){var t,n,r,a=e[0],o=e[1],i=e[2];return a/=95.047,o/=100,i/=108.883,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,t=116*o-16,n=500*(a-o),r=200*(o-i),[t,n,r]}function R(e){return L(D(e))}function z(e){var t,n,r,a,o=e[0],i=e[1],s=e[2];return o<=8?(n=100*o/903.3,a=7.787*(n/100)+16/116):(n=100*Math.pow((o+16)/116,3),a=Math.pow(n/100,1/3)),t=t/95.047<=.008856?t=95.047*(i/500+a-16/116)/7.787:95.047*Math.pow(i/500+a,3),r=r/108.883<=.008859?r=108.883*(a-s/200-16/116)/7.787:108.883*Math.pow(a-s/200,3),[t,n,r]}function L(e){var t,n,r,a=e[0],o=e[1],i=e[2];return t=Math.atan2(i,o),n=360*t/2/Math.PI,n<0&&(n+=360),r=Math.sqrt(o*o+i*i),[a,r,n]}function V(e){return M(z(e))}function F(e){var t,n,r,a=e[0],o=e[1],i=e[2];return r=i/360*2*Math.PI,t=o*Math.cos(r),n=o*Math.sin(r),[a,t,n]}function B(e){return z(F(e))}function j(e){return V(F(e))}function U(e){return K[e]}function W(e){return n(U(e))}function G(e){return a(U(e))}function H(e){return o(U(e))}function q(e){return i(U(e))}function Y(e){return l(U(e))}function $(e){return u(U(e))}e.exports={rgb2hsl:n,rgb2hsv:a,rgb2hwb:o,rgb2cmyk:i,rgb2keyword:s,rgb2xyz:u,rgb2lab:l,rgb2lch:c,hsl2rgb:p,hsl2hsv:h,hsl2hwb:d,hsl2cmyk:f,hsl2keyword:m,hsv2rgb:v,hsv2hsl:y,hsv2hwb:x,hsv2cmyk:w,hsv2keyword:S,hwb2rgb:_,hwb2hsl:N,hwb2hsv:T,hwb2cmyk:k,hwb2keyword:I,cmyk2rgb:E,cmyk2hsl:A,cmyk2hsv:P,cmyk2hwb:C,cmyk2keyword:O,keyword2rgb:U,keyword2hsl:W,keyword2hsv:G,keyword2hwb:H,keyword2cmyk:q,keyword2lab:Y,keyword2xyz:$,xyz2rgb:M,xyz2lab:D,xyz2lch:R,lab2xyz:z,lab2rgb:V,lab2lch:L,lch2lab:F,lch2xyz:B,lch2rgb:j};var K={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},X={};for(var Z in K)X[JSON.stringify(K[Z])]=Z},function(e,t,n){var r=n(237),a=function(){return new l};for(var o in r){a[o+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),r[e](t)}}(o);var i=/(\w+)2(\w+)/.exec(o),s=i[1],u=i[2];a[s]=a[s]||{},a[s][u]=a[o]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var n=r[e](t);if("string"==typeof n||void 0===n)return n;for(var a=0;a<n.length;a++)n[a]=Math.round(n[a]);return n}}(o)}var l=function(){this.convs={}};l.prototype.routeSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n))},l.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},l.prototype.getValues=function(e){var t=this.convs[e];if(!t){var n=this.space,r=this.convs[n];t=a[n][e](r),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){l.prototype[e]=function(t){return this.routeSpace(e,arguments)}}),e.exports=a},function(e,t){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],
darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},,,,,,,,,,,function(e,t,n){var r=n(30),a=n(20),o=r(a,"DataView");e.exports=o},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}var a=n(300),o=n(301),i=n(302),s=n(303),u=n(304);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=i,r.prototype.has=s,r.prototype.set=u,e.exports=r},function(e,t,n){var r=n(30),a=n(20),o=r(a,"Promise");e.exports=o},function(e,t,n){var r=n(30),a=n(20),o=r(a,"Set");e.exports=o},function(e,t,n){function r(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new a;++t<n;)this.add(e[t])}var a=n(79),o=n(324),i=n(325);r.prototype.add=r.prototype.push=o,r.prototype.has=i,e.exports=r},function(e,t,n){var r=n(20),a=r.Uint8Array;e.exports=a},function(e,t,n){var r=n(30),a=n(20),o=r(a,"WeakMap");e.exports=o},function(e,t){function n(e,t,n,r){for(var a=-1,o=null==e?0:e.length;++a<o;){var i=e[a];t(r,i,n(i),e)}return r}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}e.exports=n},function(e,t,n){function r(e,t){var n=i(e),r=!n&&o(e),c=!n&&!r&&s(e),h=!n&&!r&&!c&&l(e),d=n||r||c||h,f=d?a(e.length,String):[],m=f.length;for(var g in e)!t&&!p.call(e,g)||d&&("length"==g||c&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,m))||f.push(g);return f}var a=n(281),o=n(120),i=n(21),s=n(121),u=n(115),l=n(123),c=Object.prototype,p=c.hasOwnProperty;e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}e.exports=n},function(e,t){function n(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t,n){function r(e,t,n,r){return a(e,function(e,a,o){t(r,e,n(e),o)}),r}var a=n(265);e.exports=r},function(e,t,n){function r(e,t,n){"__proto__"==t&&a?a(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var a=n(290);e.exports=r},function(e,t,n){var r=n(268),a=n(287),o=a(r);e.exports=o},function(e,t){function n(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}e.exports=n},function(e,t,n){var r=n(288),a=r();e.exports=a},function(e,t,n){function r(e,t){return e&&a(e,t,o)}var a=n(267),o=n(65);e.exports=r},function(e,t,n){function r(e,t,n){var r=t(e);return o(e)?r:a(r,n(e))}var a=n(261),o=n(21);e.exports=r},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function r(e){return o(e)&&a(e)==i}var a=n(44),o=n(45),i="[object Arguments]";e.exports=r},function(e,t,n){function r(e,t,n,r,g,y){var b=l(e),x=l(t),w=b?f:u(e),S=x?f:u(t);w=w==d?m:w,S=S==d?m:S;var _=w==m,N=S==m,T=w==S;if(T&&c(e)){if(!c(t))return!1;b=!0,_=!1}if(T&&!_)return y||(y=new a),b||p(e)?o(e,t,n,r,g,y):i(e,t,w,n,r,g,y);if(!(n&h)){var k=_&&v.call(e,"__wrapped__"),I=N&&v.call(t,"__wrapped__");if(k||I){var E=k?e.value():e,A=I?t.value():t;return y||(y=new a),g(E,A,n,r,y)}}return!!T&&(y||(y=new a),s(e,t,n,r,g,y))}var a=n(110),o=n(113),i=n(291),s=n(292),u=n(297),l=n(21),c=n(121),p=n(123),h=1,d="[object Arguments]",f="[object Array]",m="[object Object]",g=Object.prototype,v=g.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t,n,r){var u=n.length,l=u,c=!r;if(null==e)return!l;for(e=Object(e);u--;){var p=n[u];if(c&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++u<l;){p=n[u];var h=p[0],d=e[h],f=p[1];if(c&&p[2]){if(void 0===d&&!(h in e))return!1}else{var m=new a;if(r)var g=r(d,f,h,e,t,m);if(!(void 0===g?o(f,d,i|s,r,m):g))return!1}}return!0}var a=n(110),o=n(80),i=1,s=2;e.exports=r},function(e,t,n){function r(e){if(!i(e)||o(e))return!1;var t=a(e)?f:l;return t.test(s(e))}var a=n(122),o=n(306),i=n(63),s=n(118),u=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,p=Object.prototype,h=c.toString,d=p.hasOwnProperty,f=RegExp("^"+h.call(d).replace(u,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},function(e,t,n){function r(e){return i(e)&&o(e.length)&&!!C[a(e)]}var a=n(44),o=n(84),i=n(45),s="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",p="[object Error]",h="[object Function]",d="[object Map]",f="[object Number]",m="[object Object]",g="[object RegExp]",v="[object Set]",y="[object String]",b="[object WeakMap]",x="[object ArrayBuffer]",w="[object DataView]",S="[object Float32Array]",_="[object Float64Array]",N="[object Int8Array]",T="[object Int16Array]",k="[object Int32Array]",I="[object Uint8Array]",E="[object Uint8ClampedArray]",A="[object Uint16Array]",P="[object Uint32Array]",C={};C[S]=C[_]=C[N]=C[T]=C[k]=C[I]=C[E]=C[A]=C[P]=!0,C[s]=C[u]=C[x]=C[l]=C[w]=C[c]=C[p]=C[h]=C[d]=C[f]=C[m]=C[g]=C[v]=C[y]=C[b]=!1,e.exports=r},function(e,t,n){function r(e){if(!a(e))return o(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}var a=n(307),o=n(320),i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=o(e);return 1==t.length&&t[0][2]?i(t[0][0],t[0][1]):function(n){return n===e||a(n,e,t)}}var a=n(273),o=n(294),i=n(117);e.exports=r},function(e,t,n){function r(e,t){return s(e)&&u(t)?l(c(e),t):function(n){var r=o(n,e);return void 0===r&&r===t?i(n,e):a(t,r,p|h)}}var a=n(80),o=n(335),i=n(336),s=n(82),u=n(116),l=n(117),c=n(62),p=1,h=2;e.exports=r},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function r(e){return function(t){return a(t,e)}}var a=n(111);e.exports=r},function(e,t){function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}e.exports=n},function(e,t,n){function r(e){if("string"==typeof e)return e;if(i(e))return o(e,r)+"";if(s(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-u?"-0":t}var a=n(58),o=n(260),i=n(21),s=n(64),u=1/0,l=a?a.prototype:void 0,c=l?l.toString:void 0;e.exports=r},function(e,t){function n(e){return function(t){return e(t)}}e.exports=n},function(e,t){function n(e,t){return e.has(t)}e.exports=n},function(e,t,n){var r=n(20),a=r["__core-js_shared__"];e.exports=a},function(e,t,n){function r(e,t){return function(n,r){var u=s(n)?a:o,l=t?t():{};return u(n,e,i(r,2),l)}}var a=n(257),o=n(263),i=n(81),s=n(21);e.exports=r},function(e,t,n){function r(e,t){return function(n,r){if(null==n)return n;if(!a(n))return e(n,r);for(var o=n.length,i=t?o:-1,s=Object(n);(t?i--:++i<o)&&r(s[i],i,s)!==!1;);return n}}var a=n(83);e.exports=r},function(e,t){function n(e){return function(t,n,r){for(var a=-1,o=Object(t),i=r(t),s=i.length;s--;){var u=i[e?s:++a];if(n(o[u],u,o)===!1)break}return t}}e.exports=n},function(e,t,n){function r(e){return function(t,n,r){var s=Object(t);if(!o(t)){var u=a(n,3);t=i(t),n=function(e){return u(s[e],e,s)}}var l=e(t,n,r);return l>-1?s[u?t[l]:l]:void 0}}var a=n(81),o=n(83),i=n(65);e.exports=r},function(e,t,n){var r=n(30),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},function(e,t,n){function r(e,t,n,r,a,_,T){switch(n){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!_(new o(e),new o(t)));case h:case d:case g:return i(+e,+t);case f:return e.name==t.name&&e.message==t.message;case v:case b:return e==t+"";case m:var k=u;case y:var I=r&c;if(k||(k=l),e.size!=t.size&&!I)return!1;var E=T.get(e);if(E)return E==t;r|=p,T.set(e,t);var A=s(k(e),k(t),r,a,_,T);return T.delete(e),A;case x:if(N)return N.call(e)==N.call(t)}return!1}var a=n(58),o=n(255),i=n(119),s=n(113),u=n(318),l=n(326),c=1,p=2,h="[object Boolean]",d="[object Date]",f="[object Error]",m="[object Map]",g="[object Number]",v="[object RegExp]",y="[object Set]",b="[object String]",x="[object Symbol]",w="[object ArrayBuffer]",S="[object DataView]",_=a?a.prototype:void 0,N=_?_.valueOf:void 0;e.exports=r},function(e,t,n){function r(e,t,n,r,i,u){var l=n&o,c=a(e),p=c.length,h=a(t),d=h.length;if(p!=d&&!l)return!1;for(var f=p;f--;){var m=c[f];if(!(l?m in t:s.call(t,m)))return!1}var g=u.get(e);if(g&&u.get(t))return g==t;var v=!0;u.set(e,t),u.set(t,e);for(var y=l;++f<p;){m=c[f];var b=e[m],x=t[m];if(r)var w=l?r(x,b,m,t,e,u):r(b,x,m,e,t,u);if(!(void 0===w?b===x||i(b,x,n,r,u):w)){v=!1;break}y||(y="constructor"==m)}if(v&&!y){var S=e.constructor,_=t.constructor;S!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof S&&S instanceof S&&"function"==typeof _&&_ instanceof _)&&(v=!1)}return u.delete(e),u.delete(t),v}var a=n(293),o=1,i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){return a(e,i,o)}var a=n(269),o=n(296),i=n(65);e.exports=r},function(e,t,n){function r(e){for(var t=o(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,a(i)]}return t}var a=n(116),o=n(65);e.exports=r},function(e,t,n){function r(e){var t=i.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var a=s.call(e);return r&&(t?e[u]=n:delete e[u]),a}var a=n(58),o=Object.prototype,i=o.hasOwnProperty,s=o.toString,u=a?a.toStringTag:void 0;e.exports=r},function(e,t,n){var r=n(258),a=n(342),o=Object.prototype,i=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,u=s?function(e){return null==e?[]:(e=Object(e),r(s(e),function(t){return i.call(e,t)}))}:a;e.exports=u},function(e,t,n){var r=n(250),a=n(78),o=n(252),i=n(253),s=n(256),u=n(44),l=n(118),c="[object Map]",p="[object Object]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",m="[object DataView]",g=l(r),v=l(a),y=l(o),b=l(i),x=l(s),w=u;(r&&w(new r(new ArrayBuffer(1)))!=m||a&&w(new a)!=c||o&&w(o.resolve())!=h||i&&w(new i)!=d||s&&w(new s)!=f)&&(w=function(e){var t=u(e),n=t==p?e.constructor:void 0,r=n?l(n):"";if(r)switch(r){case g:return m;case v:return c;case y:return h;case b:return d;case x:return f}return t}),e.exports=w},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function r(e,t,n){t=a(t,e);for(var r=-1,c=t.length,p=!1;++r<c;){var h=l(t[r]);if(!(p=null!=e&&n(e,h)))break;e=e[h]}return p||++r!=c?p:(c=null==e?0:e.length,!!c&&u(c)&&s(h,c)&&(i(e)||o(e)))}var a=n(112),o=n(120),i=n(21),s=n(115),u=n(84),l=n(62);e.exports=r},function(e,t,n){function r(){this.__data__=a?a(null):{},this.size=0}var a=n(61);e.exports=r},function(e,t){function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=n},function(e,t,n){function r(e){var t=this.__data__;if(a){var n=t[e];return n===o?void 0:n}return s.call(t,e)?t[e]:void 0}var a=n(61),o="__lodash_hash_undefined__",i=Object.prototype,s=i.hasOwnProperty;e.exports=r},function(e,t,n){function r(e){var t=this.__data__;return a?void 0!==t[e]:i.call(t,e)}var a=n(61),o=Object.prototype,i=o.hasOwnProperty;e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=a&&void 0===t?o:t,this}var a=n(61),o="__lodash_hash_undefined__";e.exports=r},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function r(e){return!!o&&o in e}var a=n(285),o=function(){var e=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=r},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||r;return e===n}var r=Object.prototype;e.exports=n},function(e,t){function n(){this.__data__=[],this.size=0}e.exports=n},function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():i.call(t,n,1),--this.size,!0}var a=n(59),o=Array.prototype,i=o.splice;e.exports=r},function(e,t,n){function r(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]}var a=n(59);e.exports=r},function(e,t,n){function r(e){return a(this.__data__,e)>-1}var a=n(59);e.exports=r},function(e,t,n){function r(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var a=n(59);e.exports=r},function(e,t,n){function r(){this.size=0,this.__data__={hash:new a,map:new(i||o),string:new a}}var a=n(251),o=n(57),i=n(78);e.exports=r},function(e,t,n){function r(e){var t=a(this,e).delete(e);return this.size-=t?1:0,t}var a=n(60);e.exports=r},function(e,t,n){function r(e){return a(this,e).get(e)}var a=n(60);e.exports=r},function(e,t,n){function r(e){return a(this,e).has(e)}var a=n(60);e.exports=r},function(e,t,n){function r(e,t){var n=a(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var a=n(60);e.exports=r},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}e.exports=n},function(e,t,n){function r(e){var t=a(e,function(e){return n.size===o&&n.clear(),e}),n=t.cache;return t}var a=n(340),o=500;e.exports=r},function(e,t,n){var r=n(323),a=r(Object.keys,Object);e.exports=a},function(e,t,n){(function(e){var r=n(114),a="object"==typeof t&&t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,i=o&&o.exports===a,s=i&&r.process,u=function(){try{var e=o&&o.require&&o.require("util").types;return e?e:s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=u}).call(t,n(31)(e))},function(e,t){function n(e){return a.call(e)}var r=Object.prototype,a=r.toString;e.exports=n},function(e,t){function n(e,t){return function(n){return e(t(n))}}e.exports=n},function(e,t){function n(e){return this.__data__.set(e,r),this}var r="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function r(){this.__data__=new a,this.size=0}var a=n(57);e.exports=r},function(e,t){function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function r(e,t){var n=this.__data__;if(n instanceof a){var r=n.__data__;if(!o||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new i(r)}return n.set(e,t),this.size=n.size,this}var a=n(57),o=n(78),i=n(79),s=200;e.exports=r},function(e,t,n){var r=n(319),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,n,r,a){t.push(r?a.replace(o,"$1"):n||e)}),t});e.exports=i},function(e,t,n){var r=n(289),a=n(334),o=r(a);e.exports=o},function(e,t,n){function r(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var u=null==n?0:i(n);return u<0&&(u=s(r+u,0)),a(e,o(t,3),u)}var a=n(266),o=n(81),i=n(345),s=Math.max;e.exports=r},function(e,t,n){function r(e,t,n){var r=null==e?void 0:a(e,t);return void 0===r?n:r}var a=n(111);e.exports=r},function(e,t,n){function r(e,t){return null!=e&&o(e,t,a)}var a=n(270),o=n(299);e.exports=r},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function r(e,t){return a(e,t)}var a=n(80);e.exports=r},function(e,t,n){var r=n(264),a=n(286),o=a(function(e,t,n){r(e,n,t)});e.exports=o},function(e,t,n){function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(o);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var i=e.apply(this,r);return n.cache=o.set(a,i)||o,i};return n.cache=new(r.Cache||a),n}var a=n(79),o="Expected a function";r.Cache=a,e.exports=r},function(e,t,n){function r(e){return i(e)?a(s(e)):o(e)}var a=n(279),o=n(280),i=n(82),s=n(62);e.exports=r},function(e,t){function n(){return[]}e.exports=n},function(e,t){function n(){return!1}e.exports=n},function(e,t,n){function r(e){if(!e)return 0===e?e:0;if(e=a(e),e===o||e===-o){var t=e<0?-1:1;return t*i}return e===e?e:0}var a=n(346),o=1/0,i=1.7976931348623157e308;e.exports=r},function(e,t,n){function r(e){var t=a(e),n=t%1;return t===t?n?t-n:t:0}var a=n(344);e.exports=r},function(e,t,n){function r(e){if("number"==typeof e)return e;if(o(e))return i;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=l.test(e);return n||c.test(e)?p(e.slice(2),n?2:8):u.test(e)?i:+e}var a=n(63),o=n(64),i=NaN,s=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,p=parseInt;e.exports=r},function(e,t,n){function r(e){return null==e?"":a(e)}var a=n(282);e.exports=r},function(e,t,n){(function(e){!function(t,n){e.exports=n()}(this,function(){"use strict";function t(){return Er.apply(null,arguments)}function n(e){Er=e}function r(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e){return void 0===e}function s(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function l(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p(e,t){for(var n in t)c(t,n)&&(e[n]=t[n]);return c(t,"toString")&&(e.toString=t.toString),c(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,r){return Tt(e,t,n,r,!0).utc()}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(e){return null==e._pf&&(e._pf=d()),e._pf}function m(e){if(null==e._isValid){var t=f(e),n=Ar.call(t.parsedDateParts,function(e){return null!=e}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return r;e._isValid=r}return e._isValid}function g(e){var t=h(NaN);return null!=e?p(f(t),e):f(t).userInvalidated=!0,t}function v(e,t){var n,r,a;if(i(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),i(t._i)||(e._i=t._i),i(t._f)||(e._f=t._f),i(t._l)||(e._l=t._l),i(t._strict)||(e._strict=t._strict),i(t._tzm)||(e._tzm=t._tzm),i(t._isUTC)||(e._isUTC=t._isUTC),i(t._offset)||(e._offset=t._offset),i(t._pf)||(e._pf=f(t)),i(t._locale)||(e._locale=t._locale),Pr.length>0)for(n=0;n<Pr.length;n++)r=Pr[n],a=t[r],i(a)||(e[r]=a);return e}function y(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Cr===!1&&(Cr=!0,t.updateOffset(this),Cr=!1)}function b(e){return e instanceof y||null!=e&&null!=e._isAMomentObject}function x(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function w(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=x(t)),n}function S(e,t,n){var r,a=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),i=0;for(r=0;r<a;r++)(n&&e[r]!==t[r]||!n&&w(e[r])!==w(t[r]))&&i++;return i+o}function _(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function N(e,n){var r=!0;return p(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),r){for(var a,o=[],i=0;i<arguments.length;i++){if(a="","object"==typeof arguments[i]){a+="\n["+i+"] ";for(var s in arguments[0])a+=s+": "+arguments[0][s]+", ";a=a.slice(0,-2)}else a=arguments[i];o.push(a)}_(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),r=!1}return n.apply(this,arguments)},n)}function T(e,n){null!=t.deprecationHandler&&t.deprecationHandler(e,n),Or[e]||(_(n),Or[e]=!0)}function k(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function I(e){var t,n;for(n in e)t=e[n],k(t)?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function E(e,t){var n,r=p({},e);for(n in t)c(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},p(r[n],e[n]),p(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)c(e,n)&&!c(t,n)&&a(e[n])&&(r[n]=p({},r[n]));return r}function A(e){null!=e&&this.set(e)}function P(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return k(r)?r.call(t,n):r}function C(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function O(){return this._invalidDate}function M(e){return this._ordinal.replace("%d",e)}function D(e,t,n,r){var a=this._relativeTime[n];return k(a)?a(e,t,n,r):a.replace(/%d/i,e)}function R(e,t){var n=this._relativeTime[e>0?"future":"past"];return k(n)?n(t):n.replace(/%s/i,t)}function z(e,t){var n=e.toLowerCase();Br[n]=Br[n+"s"]=Br[t]=e}function L(e){return"string"==typeof e?Br[e]||Br[e.toLowerCase()]:void 0}function V(e){var t,n,r={};for(n in e)c(e,n)&&(t=L(n),t&&(r[t]=e[n]));return r}function F(e,t){jr[e]=t}function B(e){var t=[];for(var n in e)t.push({unit:n,priority:jr[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function j(e,t,n){var r=""+Math.abs(e),a=t-r.length,o=e>=0;return(o?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}function U(e,t,n,r){var a=r;"string"==typeof r&&(a=function(){return this[r]()}),e&&(Hr[e]=a),t&&(Hr[t[0]]=function(){return j(a.apply(this,arguments),t[1],t[2])}),n&&(Hr[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function W(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function G(e){var t,n,r=e.match(Ur);for(t=0,n=r.length;t<n;t++)Hr[r[t]]?r[t]=Hr[r[t]]:r[t]=W(r[t]);return function(t){var a,o="";for(a=0;a<n;a++)o+=k(r[a])?r[a].call(t,e):r[a];return o}}function H(e,t){return e.isValid()?(t=q(t,e.localeData()),Gr[t]=Gr[t]||G(t),Gr[t](e)):e.localeData().invalidDate()}function q(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Wr.lastIndex=0;r>=0&&Wr.test(e);)e=e.replace(Wr,n),Wr.lastIndex=0,r-=1;return e}function Y(e,t,n){la[e]=k(t)?t:function(e,r){return e&&n?n:t}}function $(e,t){return c(la,e)?la[e](t._strict,t._locale):new RegExp(K(e))}function K(e){return X(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,a){return t||n||r||a}))}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),s(t)&&(r=function(e,n){n[t]=w(e)}),n=0;n<e.length;n++)ca[e[n]]=r}function J(e,t){Z(e,function(e,n,r,a){r._w=r._w||{},t(e,r._w,r,a)})}function Q(e,t,n){null!=t&&c(ca,e)&&ca[e](t,n._a,n,e)}function ee(e){return te(e)?366:365}function te(e){return e%4===0&&e%100!==0||e%400===0}function ne(){return te(this.year())}function re(e,n){return function(r){return null!=r?(oe(this,e,r),t.updateOffset(this,n),this):ae(this,e)}}function ae(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function oe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&te(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),le(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function ie(e){return e=L(e),k(this[e])?this[e]():this}function se(e,t){if("object"==typeof e){e=V(e);for(var n=B(e),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit])}else if(e=L(e),k(this[e]))return this[e](t);return this}function ue(e,t){return(e%t+t)%t}function le(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=ue(t,12);return e+=(t-n)/12,1===n?te(e)?29:28:31-n%7%2}function ce(e,t){return e?r(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Sa).test(t)?"format":"standalone"][e.month()]:r(this._months)?this._months:this._months.standalone}function pe(e,t){return e?r(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Sa.test(t)?"format":"standalone"][e.month()]:r(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function he(e,t,n){var r,a,o,i=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=h([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?(a=xa.call(this._shortMonthsParse,i),a!==-1?a:null):(a=xa.call(this._longMonthsParse,i),a!==-1?a:null):"MMM"===t?(a=xa.call(this._shortMonthsParse,i),a!==-1?a:(a=xa.call(this._longMonthsParse,i),a!==-1?a:null)):(a=xa.call(this._longMonthsParse,i),a!==-1?a:(a=xa.call(this._shortMonthsParse,i),a!==-1?a:null))}function de(e,t,n){var r,a,o;if(this._monthsParseExact)return he.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=h([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function fe(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=w(t);else if(t=e.localeData().monthsParse(t),!s(t))return e;return n=Math.min(e.date(),le(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function me(e){return null!=e?(fe(this,e),t.updateOffset(this,!0),this):ae(this,"Month")}function ge(){return le(this.year(),this.month())}function ve(e){return this._monthsParseExact?(c(this,"_monthsRegex")||be.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(c(this,"_monthsShortRegex")||(this._monthsShortRegex=Ta),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function ye(e){return this._monthsParseExact?(c(this,"_monthsRegex")||be.call(this),e?this._monthsStrictRegex:this._monthsRegex):(c(this,"_monthsRegex")||(this._monthsRegex=ka),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function be(){function e(e,t){return t.length-e.length}var t,n,r=[],a=[],o=[];for(t=0;t<12;t++)n=h([2e3,t]),r.push(this.monthsShort(n,"")),a.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),a.sort(e),o.sort(e),t=0;t<12;t++)r[t]=X(r[t]),a[t]=X(a[t]);for(t=0;t<24;t++)o[t]=X(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function xe(e,t,n,r,a,o,i){var s=new Date(e,t,n,r,a,o,i);return e<100&&e>=0&&isFinite(s.getFullYear())&&s.setFullYear(e),s}function we(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Se(e,t,n){var r=7+t-n,a=(7+we(e,0,r).getUTCDay()-t)%7;return-a+r-1}function _e(e,t,n,r,a){var o,i,s=(7+n-r)%7,u=Se(e,r,a),l=1+7*(t-1)+s+u;return l<=0?(o=e-1,i=ee(o)+l):l>ee(e)?(o=e+1,i=l-ee(e)):(o=e,i=l),{year:o,dayOfYear:i}}function Ne(e,t,n){var r,a,o=Se(e.year(),t,n),i=Math.floor((e.dayOfYear()-o-1)/7)+1;return i<1?(a=e.year()-1,r=i+Te(a,t,n)):i>Te(e.year(),t,n)?(r=i-Te(e.year(),t,n),a=e.year()+1):(a=e.year(),r=i),{week:r,year:a}}function Te(e,t,n){var r=Se(e,t,n),a=Se(e+1,t,n);return(ee(e)-r+a)/7}function ke(e){return Ne(e,this._week.dow,this._week.doy).week}function Ie(){return this._week.dow}function Ee(){return this._week.doy}function Ae(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Pe(e){var t=Ne(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ce(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Oe(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Me(e,t){return e?r(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:r(this._weekdays)?this._weekdays:this._weekdays.standalone}function De(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Re(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function ze(e,t,n){var r,a,o,i=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=h([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?(a=xa.call(this._weekdaysParse,i),a!==-1?a:null):"ddd"===t?(a=xa.call(this._shortWeekdaysParse,i),a!==-1?a:null):(a=xa.call(this._minWeekdaysParse,i),a!==-1?a:null):"dddd"===t?(a=xa.call(this._weekdaysParse,i),a!==-1?a:(a=xa.call(this._shortWeekdaysParse,i),a!==-1?a:(a=xa.call(this._minWeekdaysParse,i),a!==-1?a:null))):"ddd"===t?(a=xa.call(this._shortWeekdaysParse,i),a!==-1?a:(a=xa.call(this._weekdaysParse,i),a!==-1?a:(a=xa.call(this._minWeekdaysParse,i),
a!==-1?a:null))):(a=xa.call(this._minWeekdaysParse,i),a!==-1?a:(a=xa.call(this._weekdaysParse,i),a!==-1?a:(a=xa.call(this._shortWeekdaysParse,i),a!==-1?a:null)))}function Le(e,t,n){var r,a,o;if(this._weekdaysParseExact)return ze.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=h([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Ve(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ce(e,this.localeData()),this.add(e-t,"d")):t}function Fe(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Be(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Oe(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function je(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(c(this,"_weekdaysRegex")||(this._weekdaysRegex=Ca),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ue(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(c(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Oa),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function We(e){return this._weekdaysParseExact?(c(this,"_weekdaysRegex")||Ge.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(c(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ma),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ge(){function e(e,t){return t.length-e.length}var t,n,r,a,o,i=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=h([2e3,1]).day(t),r=this.weekdaysMin(n,""),a=this.weekdaysShort(n,""),o=this.weekdays(n,""),i.push(r),s.push(a),u.push(o),l.push(r),l.push(a),l.push(o);for(i.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=X(s[t]),u[t]=X(u[t]),l[t]=X(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+i.join("|")+")","i")}function He(){return this.hours()%12||12}function qe(){return this.hours()||24}function Ye(e,t){U(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function $e(e,t){return t._meridiemParse}function Ke(e){return"p"===(e+"").toLowerCase().charAt(0)}function Xe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Ze(e){return e?e.toLowerCase().replace("_","-"):e}function Je(e){for(var t,n,r,a,o=0;o<e.length;){for(a=Ze(e[o]).split("-"),t=a.length,n=Ze(e[o+1]),n=n?n.split("-"):null;t>0;){if(r=Qe(a.slice(0,t).join("-")))return r;if(n&&n.length>=t&&S(a,n,!0)>=t-1)break;t--}o++}return Da}function Qe(t){var n=null;if(!Va[t]&&"undefined"!=typeof e&&e&&e.exports)try{n=Da._abbr;!function(){var e=new Error('Cannot find module "./locale"');throw e.code="MODULE_NOT_FOUND",e}(),et(n)}catch(e){}return Va[t]}function et(e,t){var n;return e&&(n=i(t)?rt(e):tt(e,t),n?Da=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Da._abbr}function tt(e,t){if(null!==t){var n,r=La;if(t.abbr=e,null!=Va[e])T("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Va[e]._config;else if(null!=t.parentLocale)if(null!=Va[t.parentLocale])r=Va[t.parentLocale]._config;else{if(n=Qe(t.parentLocale),null==n)return Fa[t.parentLocale]||(Fa[t.parentLocale]=[]),Fa[t.parentLocale].push({name:e,config:t}),null;r=n._config}return Va[e]=new A(E(r,t)),Fa[e]&&Fa[e].forEach(function(e){tt(e.name,e.config)}),et(e),Va[e]}return delete Va[e],null}function nt(e,t){if(null!=t){var n,r,a=La;r=Qe(e),null!=r&&(a=r._config),t=E(a,t),n=new A(t),n.parentLocale=Va[e],Va[e]=n,et(e)}else null!=Va[e]&&(null!=Va[e].parentLocale?Va[e]=Va[e].parentLocale:null!=Va[e]&&delete Va[e]);return Va[e]}function rt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Da;if(!r(e)){if(t=Qe(e))return t;e=[e]}return Je(e)}function at(){return Mr(Va)}function ot(e){var t,n=e._a;return n&&f(e).overflow===-2&&(t=n[ha]<0||n[ha]>11?ha:n[da]<1||n[da]>le(n[pa],n[ha])?da:n[fa]<0||n[fa]>24||24===n[fa]&&(0!==n[ma]||0!==n[ga]||0!==n[va])?fa:n[ma]<0||n[ma]>59?ma:n[ga]<0||n[ga]>59?ga:n[va]<0||n[va]>999?va:-1,f(e)._overflowDayOfYear&&(t<pa||t>da)&&(t=da),f(e)._overflowWeeks&&t===-1&&(t=ya),f(e)._overflowWeekday&&t===-1&&(t=ba),f(e).overflow=t),e}function it(e,t,n){return null!=e?e:null!=t?t:n}function st(e){var n=new Date(t.now());return e._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function ut(e){var t,n,r,a,o,i=[];if(!e._d){for(r=st(e),e._w&&null==e._a[da]&&null==e._a[ha]&&lt(e),null!=e._dayOfYear&&(o=it(e._a[pa],r[pa]),(e._dayOfYear>ee(o)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),n=we(o,0,e._dayOfYear),e._a[ha]=n.getUTCMonth(),e._a[da]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=i[t]=r[t];for(;t<7;t++)e._a[t]=i[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[fa]&&0===e._a[ma]&&0===e._a[ga]&&0===e._a[va]&&(e._nextDay=!0,e._a[fa]=0),e._d=(e._useUTC?we:xe).apply(null,i),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[fa]=24),e._w&&"undefined"!=typeof e._w.d&&e._w.d!==a&&(f(e).weekdayMismatch=!0)}}function lt(e){var t,n,r,a,o,i,s,u;if(t=e._w,null!=t.GG||null!=t.W||null!=t.E)o=1,i=4,n=it(t.GG,e._a[pa],Ne(kt(),1,4).year),r=it(t.W,1),a=it(t.E,1),(a<1||a>7)&&(u=!0);else{o=e._locale._week.dow,i=e._locale._week.doy;var l=Ne(kt(),o,i);n=it(t.gg,e._a[pa],l.year),r=it(t.w,l.week),null!=t.d?(a=t.d,(a<0||a>6)&&(u=!0)):null!=t.e?(a=t.e+o,(t.e<0||t.e>6)&&(u=!0)):a=o}r<1||r>Te(n,o,i)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(s=_e(n,r,a,o,i),e._a[pa]=s.year,e._dayOfYear=s.dayOfYear)}function ct(e){var t,n,r,a,o,i,s=e._i,u=Ba.exec(s)||ja.exec(s);if(u){for(f(e).iso=!0,t=0,n=Wa.length;t<n;t++)if(Wa[t][1].exec(u[1])){a=Wa[t][0],r=Wa[t][2]!==!1;break}if(null==a)return void(e._isValid=!1);if(u[3]){for(t=0,n=Ga.length;t<n;t++)if(Ga[t][1].exec(u[3])){o=(u[2]||" ")+Ga[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!Ua.exec(u[4]))return void(e._isValid=!1);i="Z"}e._f=a+(o||"")+(i||""),yt(e)}else e._isValid=!1}function pt(e,t,n,r,a,o){var i=[ht(e),Na.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(a,10)];return o&&i.push(parseInt(o,10)),i}function ht(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function dt(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function ft(e,t,n){if(e){var r=Aa.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(r!==a)return f(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function mt(e,t,n){if(e)return Ya[e];if(t)return 0;var r=parseInt(n,10),a=r%100,o=(r-a)/100;return 60*o+a}function gt(e){var t=qa.exec(dt(e._i));if(t){var n=pt(t[4],t[3],t[2],t[5],t[6],t[7]);if(!ft(t[1],n,e))return;e._a=n,e._tzm=mt(t[8],t[9],t[10]),e._d=we.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),f(e).rfc2822=!0}else e._isValid=!1}function vt(e){var n=Ha.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(ct(e),void(e._isValid===!1&&(delete e._isValid,gt(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e)))))}function yt(e){if(e._f===t.ISO_8601)return void ct(e);if(e._f===t.RFC_2822)return void gt(e);e._a=[],f(e).empty=!0;var n,r,a,o,i,s=""+e._i,u=s.length,l=0;for(a=q(e._f,e._locale).match(Ur)||[],n=0;n<a.length;n++)o=a[n],r=(s.match($(o,e))||[])[0],r&&(i=s.substr(0,s.indexOf(r)),i.length>0&&f(e).unusedInput.push(i),s=s.slice(s.indexOf(r)+r.length),l+=r.length),Hr[o]?(r?f(e).empty=!1:f(e).unusedTokens.push(o),Q(o,r,e)):e._strict&&!r&&f(e).unusedTokens.push(o);f(e).charsLeftOver=u-l,s.length>0&&f(e).unusedInput.push(s),e._a[fa]<=12&&f(e).bigHour===!0&&e._a[fa]>0&&(f(e).bigHour=void 0),f(e).parsedDateParts=e._a.slice(0),f(e).meridiem=e._meridiem,e._a[fa]=bt(e._locale,e._a[fa],e._meridiem),ut(e),ot(e)}function bt(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function xt(e){var t,n,r,a,o;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<e._f.length;a++)o=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],yt(t),m(t)&&(o+=f(t).charsLeftOver,o+=10*f(t).unusedTokens.length,f(t).score=o,(null==r||o<r)&&(r=o,n=t));p(e,n||t)}function wt(e){if(!e._d){var t=V(e._i);e._a=l([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ut(e)}}function St(e){var t=new y(ot(_t(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function _t(e){var t=e._i,n=e._f;return e._locale=e._locale||rt(e._l),null===t||void 0===n&&""===t?g({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new y(ot(t)):(u(t)?e._d=t:r(n)?xt(e):n?yt(e):Nt(e),m(e)||(e._d=null),e))}function Nt(e){var n=e._i;i(n)?e._d=new Date(t.now()):u(n)?e._d=new Date(n.valueOf()):"string"==typeof n?vt(e):r(n)?(e._a=l(n.slice(0),function(e){return parseInt(e,10)}),ut(e)):a(n)?wt(e):s(n)?e._d=new Date(n):t.createFromInputFallback(e)}function Tt(e,t,n,i,s){var u={};return n!==!0&&n!==!1||(i=n,n=void 0),(a(e)&&o(e)||r(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=s,u._l=n,u._i=e,u._f=t,u._strict=i,St(u)}function kt(e,t,n,r){return Tt(e,t,n,r,!1)}function It(e,t){var n,a;if(1===t.length&&r(t[0])&&(t=t[0]),!t.length)return kt();for(n=t[0],a=1;a<t.length;++a)t[a].isValid()&&!t[a][e](n)||(n=t[a]);return n}function Et(){var e=[].slice.call(arguments,0);return It("isBefore",e)}function At(){var e=[].slice.call(arguments,0);return It("isAfter",e)}function Pt(e){for(var t in e)if(xa.call(Za,t)===-1||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Za.length;++r)if(e[Za[r]]){if(n)return!1;parseFloat(e[Za[r]])!==w(e[Za[r]])&&(n=!0)}return!0}function Ct(){return this._isValid}function Ot(){return Zt(NaN)}function Mt(e){var t=V(e),n=t.year||0,r=t.quarter||0,a=t.month||0,o=t.week||0,i=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=Pt(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+i+7*o,this._months=+a+3*r+12*n,this._data={},this._locale=rt(),this._bubble()}function Dt(e){return e instanceof Mt}function Rt(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function zt(e,t){U(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+j(~~(e/60),2)+t+j(~~e%60,2)})}function Lt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=n[n.length-1]||[],a=(r+"").match(Ja)||["-",0,0],o=+(60*a[1])+w(a[2]);return 0===o?0:"+"===a[0]?o:-o}function Vt(e,n){var r,a;return n._isUTC?(r=n.clone(),a=(b(e)||u(e)?e.valueOf():kt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+a),t.updateOffset(r,!1),r):kt(e).local()}function Ft(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Bt(e,n,r){var a,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(e=Lt(ia,e),null===e)return this}else Math.abs(e)<16&&!r&&(e*=60);return!this._isUTC&&n&&(a=Ft(this)),this._offset=e,this._isUTC=!0,null!=a&&this.add(a,"m"),o!==e&&(!n||this._changeInProgress?nn(this,Zt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Ft(this)}function jt(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ut(e){return this.utcOffset(0,e)}function Wt(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ft(this),"m")),this}function Gt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Lt(oa,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Ht(e){return!!this.isValid()&&(e=e?kt(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function qt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yt(){if(!i(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),e=_t(e),e._a){var t=e._isUTC?h(e._a):kt(e._a);this._isDSTShifted=this.isValid()&&S(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function $t(){return!!this.isValid()&&!this._isUTC}function Kt(){return!!this.isValid()&&this._isUTC}function Xt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Zt(e,t){var n,r,a,o=e,i=null;return Dt(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(o={},t?o[t]=e:o.milliseconds=e):(i=Qa.exec(e))?(n="-"===i[1]?-1:1,o={y:0,d:w(i[da])*n,h:w(i[fa])*n,m:w(i[ma])*n,s:w(i[ga])*n,ms:w(Rt(1e3*i[va]))*n}):(i=eo.exec(e))?(n="-"===i[1]?-1:("+"===i[1],1),o={y:Jt(i[2],n),M:Jt(i[3],n),w:Jt(i[4],n),d:Jt(i[5],n),h:Jt(i[6],n),m:Jt(i[7],n),s:Jt(i[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(a=en(kt(o.from),kt(o.to)),o={},o.ms=a.milliseconds,o.M=a.months),r=new Mt(o),Dt(e)&&c(e,"_locale")&&(r._locale=e._locale),r}function Jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function en(e,t){var n;return e.isValid()&&t.isValid()?(t=Vt(t,e),e.isBefore(t)?n=Qt(e,t):(n=Qt(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function tn(e,t){return function(n,r){var a,o;return null===r||isNaN(+r)||(T(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=n,n=r,r=o),n="string"==typeof n?+n:n,a=Zt(n,r),nn(this,a,e),this}}function nn(e,n,r,a){var o=n._milliseconds,i=Rt(n._days),s=Rt(n._months);e.isValid()&&(a=null==a||a,s&&fe(e,ae(e,"Month")+s*r),i&&oe(e,"Date",ae(e,"Date")+i*r),o&&e._d.setTime(e._d.valueOf()+o*r),a&&t.updateOffset(e,i||s))}function rn(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function an(e,n){var r=e||kt(),a=Vt(r,this).startOf("day"),o=t.calendarFormat(this,a)||"sameElse",i=n&&(k(n[o])?n[o].call(this,r):n[o]);return this.format(i||this.localeData().calendar(o,this,kt(r)))}function on(){return new y(this)}function sn(e,t){var n=b(e)?e:kt(e);return!(!this.isValid()||!n.isValid())&&(t=L(i(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function un(e,t){var n=b(e)?e:kt(e);return!(!this.isValid()||!n.isValid())&&(t=L(i(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function ln(e,t,n,r){return r=r||"()",("("===r[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===r[1]?this.isBefore(t,n):!this.isAfter(t,n))}function cn(e,t){var n,r=b(e)?e:kt(e);return!(!this.isValid()||!r.isValid())&&(t=L(t||"millisecond"),"millisecond"===t?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function pn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function hn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function dn(e,t,n){var r,a,o;if(!this.isValid())return NaN;if(r=Vt(e,this),!r.isValid())return NaN;switch(a=6e4*(r.utcOffset()-this.utcOffset()),t=L(t)){case"year":o=fn(this,r)/12;break;case"month":o=fn(this,r);break;case"quarter":o=fn(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-a)/864e5;break;case"week":o=(this-r-a)/6048e5;break;default:o=this-r}return n?o:x(o)}function fn(e,t){var n,r,a=12*(t.year()-e.year())+(t.month()-e.month()),o=e.clone().add(a,"months");return t-o<0?(n=e.clone().add(a-1,"months"),r=(t-o)/(o-n)):(n=e.clone().add(a+1,"months"),r=(t-o)/(n-o)),-(a+r)||0}function mn(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function gn(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):k(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function vn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]';return this.format(n+r+a+o)}function yn(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var n=H(this,e);return this.localeData().postformat(n)}function bn(e,t){return this.isValid()&&(b(e)&&e.isValid()||kt(e).isValid())?Zt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function xn(e){return this.from(kt(),e)}function wn(e,t){return this.isValid()&&(b(e)&&e.isValid()||kt(e).isValid())?Zt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Sn(e){return this.to(kt(),e)}function _n(e){var t;return void 0===e?this._locale._abbr:(t=rt(e),null!=t&&(this._locale=t),this)}function Nn(){return this._locale}function Tn(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function kn(e){return e=L(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function In(){return this._d.valueOf()-6e4*(this._offset||0)}function En(){return Math.floor(this.valueOf()/1e3)}function An(){return new Date(this.valueOf())}function Pn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Cn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function On(){return this.isValid()?this.toISOString():null}function Mn(){return m(this)}function Dn(){return p({},f(this))}function Rn(){return f(this).overflow}function zn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Ln(e,t){U(0,[e,e.length],0,t)}function Vn(e){return Un.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Fn(e){return Un.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Bn(){return Te(this.year(),1,4)}function jn(){var e=this.localeData()._week;return Te(this.year(),e.dow,e.doy)}function Un(e,t,n,r,a){var o;return null==e?Ne(this,r,a).year:(o=Te(e,r,a),t>o&&(t=o),Wn.call(this,e,t,n,r,a))}function Wn(e,t,n,r,a){var o=_e(e,t,n,r,a),i=we(o.year,0,o.dayOfYear);return this.year(i.getUTCFullYear()),this.month(i.getUTCMonth()),this.date(i.getUTCDate()),this}function Gn(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Hn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function qn(e,t){t[va]=w(1e3*("0."+e))}function Yn(){return this._isUTC?"UTC":""}function $n(){return this._isUTC?"Coordinated Universal Time":""}function Kn(e){return kt(1e3*e)}function Xn(){return kt.apply(null,arguments).parseZone()}function Zn(e){return e}function Jn(e,t,n,r){var a=rt(),o=h().set(r,t);return a[n](o,e)}function Qn(e,t,n){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return Jn(e,t,n,"month");var r,a=[];for(r=0;r<12;r++)a[r]=Jn(e,r,n,"month");return a}function er(e,t,n,r){"boolean"==typeof e?(s(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,s(t)&&(n=t,t=void 0),t=t||"");var a=rt(),o=e?a._week.dow:0;if(null!=n)return Jn(t,(n+o)%7,r,"day");var i,u=[];for(i=0;i<7;i++)u[i]=Jn(t,(i+o)%7,r,"day");return u}function tr(e,t){return Qn(e,t,"months")}function nr(e,t){return Qn(e,t,"monthsShort")}function rr(e,t,n){return er(e,t,n,"weekdays")}function ar(e,t,n){return er(e,t,n,"weekdaysShort")}function or(e,t,n){return er(e,t,n,"weekdaysMin")}function ir(){var e=this._data;return this._milliseconds=po(this._milliseconds),this._days=po(this._days),this._months=po(this._months),e.milliseconds=po(e.milliseconds),e.seconds=po(e.seconds),e.minutes=po(e.minutes),e.hours=po(e.hours),e.months=po(e.months),e.years=po(e.years),this}function sr(e,t,n,r){var a=Zt(t,n);return e._milliseconds+=r*a._milliseconds,e._days+=r*a._days,e._months+=r*a._months,e._bubble()}function ur(e,t){return sr(this,e,t,1)}function lr(e,t){return sr(this,e,t,-1)}function cr(e){return e<0?Math.floor(e):Math.ceil(e)}function pr(){var e,t,n,r,a,o=this._milliseconds,i=this._days,s=this._months,u=this._data;return o>=0&&i>=0&&s>=0||o<=0&&i<=0&&s<=0||(o+=864e5*cr(dr(s)+i),i=0,s=0),u.milliseconds=o%1e3,e=x(o/1e3),u.seconds=e%60,t=x(e/60),u.minutes=t%60,n=x(t/60),u.hours=n%24,i+=x(n/24),a=x(hr(i)),s+=a,i-=cr(dr(a)),r=x(s/12),s%=12,u.days=i,u.months=s,u.years=r,this}function hr(e){return 4800*e/146097}function dr(e){return 146097*e/4800}function fr(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=L(e),"month"===e||"year"===e)return t=this._days+r/864e5,n=this._months+hr(t),"month"===e?n:n/12;switch(t=this._days+Math.round(dr(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function mr(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN}function gr(e){return function(){return this.as(e)}}function vr(){return Zt(this)}function yr(e){return e=L(e),this.isValid()?this[e+"s"]():NaN}function br(e){return function(){return this.isValid()?this._data[e]:NaN}}function xr(){return x(this.days()/7)}function wr(e,t,n,r,a){return a.relativeTime(t||1,!!n,e,r)}function Sr(e,t,n){var r=Zt(e).abs(),a=Eo(r.as("s")),o=Eo(r.as("m")),i=Eo(r.as("h")),s=Eo(r.as("d")),u=Eo(r.as("M")),l=Eo(r.as("y")),c=a<=Ao.ss&&["s",a]||a<Ao.s&&["ss",a]||o<=1&&["m"]||o<Ao.m&&["mm",o]||i<=1&&["h"]||i<Ao.h&&["hh",i]||s<=1&&["d"]||s<Ao.d&&["dd",s]||u<=1&&["M"]||u<Ao.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,wr.apply(null,c)}function _r(e){return void 0===e?Eo:"function"==typeof e&&(Eo=e,!0)}function Nr(e,t){return void 0!==Ao[e]&&(void 0===t?Ao[e]:(Ao[e]=t,"s"===e&&(Ao.ss=t-1),!0))}function Tr(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=Sr(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function kr(e){return(e>0)-(e<0)||+e}function Ir(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r=Po(this._milliseconds)/1e3,a=Po(this._days),o=Po(this._months);e=x(r/60),t=x(e/60),r%=60,e%=60,n=x(o/12),o%=12;var i=n,s=o,u=a,l=t,c=e,p=r?r.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var d=h<0?"-":"",f=kr(this._months)!==kr(h)?"-":"",m=kr(this._days)!==kr(h)?"-":"",g=kr(this._milliseconds)!==kr(h)?"-":"";return d+"P"+(i?f+i+"Y":"")+(s?f+s+"M":"")+(u?m+u+"D":"")+(l||c||p?"T":"")+(l?g+l+"H":"")+(c?g+c+"M":"")+(p?g+p+"S":"")}var Er,Ar;Ar=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var Pr=t.momentProperties=[],Cr=!1,Or={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null;var Mr;Mr=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)c(e,t)&&n.push(t);return n};var Dr={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Rr={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},zr="Invalid date",Lr="%d",Vr=/\d{1,2}/,Fr={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Br={},jr={},Ur=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Wr=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Gr={},Hr={},qr=/\d/,Yr=/\d\d/,$r=/\d{3}/,Kr=/\d{4}/,Xr=/[+-]?\d{6}/,Zr=/\d\d?/,Jr=/\d\d\d\d?/,Qr=/\d\d\d\d\d\d?/,ea=/\d{1,3}/,ta=/\d{1,4}/,na=/[+-]?\d{1,6}/,ra=/\d+/,aa=/[+-]?\d+/,oa=/Z|[+-]\d\d:?\d\d/gi,ia=/Z|[+-]\d\d(?::?\d\d)?/gi,sa=/[+-]?\d+(\.\d{1,3})?/,ua=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,la={},ca={},pa=0,ha=1,da=2,fa=3,ma=4,ga=5,va=6,ya=7,ba=8;U("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),U(0,["YY",2],0,function(){return this.year()%100}),U(0,["YYYY",4],0,"year"),U(0,["YYYYY",5],0,"year"),U(0,["YYYYYY",6,!0],0,"year"),z("year","y"),F("year",1),Y("Y",aa),Y("YY",Zr,Yr),Y("YYYY",ta,Kr),Y("YYYYY",na,Xr),Y("YYYYYY",na,Xr),Z(["YYYYY","YYYYYY"],pa),Z("YYYY",function(e,n){n[pa]=2===e.length?t.parseTwoDigitYear(e):w(e)}),Z("YY",function(e,n){n[pa]=t.parseTwoDigitYear(e)}),Z("Y",function(e,t){t[pa]=parseInt(e,10)}),t.parseTwoDigitYear=function(e){return w(e)+(w(e)>68?1900:2e3)};var xa,wa=re("FullYear",!0);xa=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},U("M",["MM",2],"Mo",function(){return this.month()+1}),U("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),U("MMMM",0,0,function(e){return this.localeData().months(this,e)}),z("month","M"),F("month",8),Y("M",Zr),Y("MM",Zr,Yr),Y("MMM",function(e,t){return t.monthsShortRegex(e)}),Y("MMMM",function(e,t){return t.monthsRegex(e)}),Z(["M","MM"],function(e,t){t[ha]=w(e)-1}),Z(["MMM","MMMM"],function(e,t,n,r){var a=n._locale.monthsParse(e,r,n._strict);null!=a?t[ha]=a:f(n).invalidMonth=e});var Sa=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,_a="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Na="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Ta=ua,ka=ua;U("w",["ww",2],"wo","week"),U("W",["WW",2],"Wo","isoWeek"),z("week","w"),z("isoWeek","W"),F("week",5),F("isoWeek",5),Y("w",Zr),Y("ww",Zr,Yr),Y("W",Zr),Y("WW",Zr,Yr),J(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=w(e)});var Ia={dow:0,doy:6};U("d",0,"do","day"),U("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),U("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),U("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),U("e",0,0,"weekday"),U("E",0,0,"isoWeekday"),z("day","d"),z("weekday","e"),z("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),Y("d",Zr),Y("e",Zr),Y("E",Zr),Y("dd",function(e,t){return t.weekdaysMinRegex(e)}),Y("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Y("dddd",function(e,t){return t.weekdaysRegex(e)}),J(["dd","ddd","dddd"],function(e,t,n,r){var a=n._locale.weekdaysParse(e,r,n._strict);null!=a?t.d=a:f(n).invalidWeekday=e}),J(["d","e","E"],function(e,t,n,r){t[r]=w(e)});var Ea="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Aa="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pa="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ca=ua,Oa=ua,Ma=ua;U("H",["HH",2],0,"hour"),U("h",["hh",2],0,He),U("k",["kk",2],0,qe),U("hmm",0,0,function(){return""+He.apply(this)+j(this.minutes(),2)}),U("hmmss",0,0,function(){return""+He.apply(this)+j(this.minutes(),2)+j(this.seconds(),2)}),U("Hmm",0,0,function(){return""+this.hours()+j(this.minutes(),2)}),U("Hmmss",0,0,function(){return""+this.hours()+j(this.minutes(),2)+j(this.seconds(),2)}),Ye("a",!0),Ye("A",!1),z("hour","h"),F("hour",13),Y("a",$e),Y("A",$e),Y("H",Zr),Y("h",Zr),Y("k",Zr),Y("HH",Zr,Yr),Y("hh",Zr,Yr),Y("kk",Zr,Yr),Y("hmm",Jr),Y("hmmss",Qr),Y("Hmm",Jr),Y("Hmmss",Qr),Z(["H","HH"],fa),Z(["k","kk"],function(e,t,n){var r=w(e);t[fa]=24===r?0:r}),Z(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),Z(["h","hh"],function(e,t,n){t[fa]=w(e),f(n).bigHour=!0}),Z("hmm",function(e,t,n){var r=e.length-2;t[fa]=w(e.substr(0,r)),t[ma]=w(e.substr(r)),f(n).bigHour=!0}),Z("hmmss",function(e,t,n){var r=e.length-4,a=e.length-2;t[fa]=w(e.substr(0,r)),t[ma]=w(e.substr(r,2)),t[ga]=w(e.substr(a)),f(n).bigHour=!0}),Z("Hmm",function(e,t,n){var r=e.length-2;t[fa]=w(e.substr(0,r)),t[ma]=w(e.substr(r))}),Z("Hmmss",function(e,t,n){var r=e.length-4,a=e.length-2;t[fa]=w(e.substr(0,r)),t[ma]=w(e.substr(r,2)),t[ga]=w(e.substr(a))});var Da,Ra=/[ap]\.?m?\.?/i,za=re("Hours",!0),La={calendar:Dr,longDateFormat:Rr,invalidDate:zr,ordinal:Lr,dayOfMonthOrdinalParse:Vr,relativeTime:Fr,months:_a,monthsShort:Na,week:Ia,weekdays:Ea,weekdaysMin:Pa,weekdaysShort:Aa,meridiemParse:Ra},Va={},Fa={},Ba=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ja=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ua=/Z|[+-]\d\d(?::?\d\d)?/,Wa=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Ga=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Ha=/^\/?Date\((\-?\d+)/i,qa=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Ya={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=N("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){
e._d=new Date(e._i+(e._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var $a=N("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=kt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:g()}),Ka=N("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=kt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:g()}),Xa=function(){return Date.now?Date.now():+new Date},Za=["year","quarter","month","week","day","hour","minute","second","millisecond"];zt("Z",":"),zt("ZZ",""),Y("Z",ia),Y("ZZ",ia),Z(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Lt(ia,e)});var Ja=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Qa=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,eo=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Zt.fn=Mt.prototype,Zt.invalid=Ot;var to=tn(1,"add"),no=tn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ro=N("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});U(0,["gg",2],0,function(){return this.weekYear()%100}),U(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ln("gggg","weekYear"),Ln("ggggg","weekYear"),Ln("GGGG","isoWeekYear"),Ln("GGGGG","isoWeekYear"),z("weekYear","gg"),z("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),Y("G",aa),Y("g",aa),Y("GG",Zr,Yr),Y("gg",Zr,Yr),Y("GGGG",ta,Kr),Y("gggg",ta,Kr),Y("GGGGG",na,Xr),Y("ggggg",na,Xr),J(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=w(e)}),J(["gg","GG"],function(e,n,r,a){n[a]=t.parseTwoDigitYear(e)}),U("Q",0,"Qo","quarter"),z("quarter","Q"),F("quarter",7),Y("Q",qr),Z("Q",function(e,t){t[ha]=3*(w(e)-1)}),U("D",["DD",2],"Do","date"),z("date","D"),F("date",9),Y("D",Zr),Y("DD",Zr,Yr),Y("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),Z(["D","DD"],da),Z("Do",function(e,t){t[da]=w(e.match(Zr)[0])});var ao=re("Date",!0);U("DDD",["DDDD",3],"DDDo","dayOfYear"),z("dayOfYear","DDD"),F("dayOfYear",4),Y("DDD",ea),Y("DDDD",$r),Z(["DDD","DDDD"],function(e,t,n){n._dayOfYear=w(e)}),U("m",["mm",2],0,"minute"),z("minute","m"),F("minute",14),Y("m",Zr),Y("mm",Zr,Yr),Z(["m","mm"],ma);var oo=re("Minutes",!1);U("s",["ss",2],0,"second"),z("second","s"),F("second",15),Y("s",Zr),Y("ss",Zr,Yr),Z(["s","ss"],ga);var io=re("Seconds",!1);U("S",0,0,function(){return~~(this.millisecond()/100)}),U(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),U(0,["SSS",3],0,"millisecond"),U(0,["SSSS",4],0,function(){return 10*this.millisecond()}),U(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),U(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),U(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),U(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),U(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),z("millisecond","ms"),F("millisecond",16),Y("S",ea,qr),Y("SS",ea,Yr),Y("SSS",ea,$r);var so;for(so="SSSS";so.length<=9;so+="S")Y(so,ra);for(so="S";so.length<=9;so+="S")Z(so,qn);var uo=re("Milliseconds",!1);U("z",0,0,"zoneAbbr"),U("zz",0,0,"zoneName");var lo=y.prototype;lo.add=to,lo.calendar=an,lo.clone=on,lo.diff=dn,lo.endOf=kn,lo.format=yn,lo.from=bn,lo.fromNow=xn,lo.to=wn,lo.toNow=Sn,lo.get=ie,lo.invalidAt=Rn,lo.isAfter=sn,lo.isBefore=un,lo.isBetween=ln,lo.isSame=cn,lo.isSameOrAfter=pn,lo.isSameOrBefore=hn,lo.isValid=Mn,lo.lang=ro,lo.locale=_n,lo.localeData=Nn,lo.max=Ka,lo.min=$a,lo.parsingFlags=Dn,lo.set=se,lo.startOf=Tn,lo.subtract=no,lo.toArray=Pn,lo.toObject=Cn,lo.toDate=An,lo.toISOString=gn,lo.inspect=vn,lo.toJSON=On,lo.toString=mn,lo.unix=En,lo.valueOf=In,lo.creationData=zn,lo.year=wa,lo.isLeapYear=ne,lo.weekYear=Vn,lo.isoWeekYear=Fn,lo.quarter=lo.quarters=Gn,lo.month=me,lo.daysInMonth=ge,lo.week=lo.weeks=Ae,lo.isoWeek=lo.isoWeeks=Pe,lo.weeksInYear=jn,lo.isoWeeksInYear=Bn,lo.date=ao,lo.day=lo.days=Ve,lo.weekday=Fe,lo.isoWeekday=Be,lo.dayOfYear=Hn,lo.hour=lo.hours=za,lo.minute=lo.minutes=oo,lo.second=lo.seconds=io,lo.millisecond=lo.milliseconds=uo,lo.utcOffset=Bt,lo.utc=Ut,lo.local=Wt,lo.parseZone=Gt,lo.hasAlignedHourOffset=Ht,lo.isDST=qt,lo.isLocal=$t,lo.isUtcOffset=Kt,lo.isUtc=Xt,lo.isUTC=Xt,lo.zoneAbbr=Yn,lo.zoneName=$n,lo.dates=N("dates accessor is deprecated. Use date instead.",ao),lo.months=N("months accessor is deprecated. Use month instead",me),lo.years=N("years accessor is deprecated. Use year instead",wa),lo.zone=N("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",jt),lo.isDSTShifted=N("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Yt);var co=A.prototype;co.calendar=P,co.longDateFormat=C,co.invalidDate=O,co.ordinal=M,co.preparse=Zn,co.postformat=Zn,co.relativeTime=D,co.pastFuture=R,co.set=I,co.months=ce,co.monthsShort=pe,co.monthsParse=de,co.monthsRegex=ye,co.monthsShortRegex=ve,co.week=ke,co.firstDayOfYear=Ee,co.firstDayOfWeek=Ie,co.weekdays=Me,co.weekdaysMin=Re,co.weekdaysShort=De,co.weekdaysParse=Le,co.weekdaysRegex=je,co.weekdaysShortRegex=Ue,co.weekdaysMinRegex=We,co.isPM=Ke,co.meridiem=Xe,et("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===w(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),t.lang=N("moment.lang is deprecated. Use moment.locale instead.",et),t.langData=N("moment.langData is deprecated. Use moment.localeData instead.",rt);var po=Math.abs,ho=gr("ms"),fo=gr("s"),mo=gr("m"),go=gr("h"),vo=gr("d"),yo=gr("w"),bo=gr("M"),xo=gr("y"),wo=br("milliseconds"),So=br("seconds"),_o=br("minutes"),No=br("hours"),To=br("days"),ko=br("months"),Io=br("years"),Eo=Math.round,Ao={ss:44,s:45,m:45,h:22,d:26,M:11},Po=Math.abs,Co=Mt.prototype;return Co.isValid=Ct,Co.abs=ir,Co.add=ur,Co.subtract=lr,Co.as=fr,Co.asMilliseconds=ho,Co.asSeconds=fo,Co.asMinutes=mo,Co.asHours=go,Co.asDays=vo,Co.asWeeks=yo,Co.asMonths=bo,Co.asYears=xo,Co.valueOf=mr,Co._bubble=pr,Co.clone=vr,Co.get=yr,Co.milliseconds=wo,Co.seconds=So,Co.minutes=_o,Co.hours=No,Co.days=To,Co.weeks=xr,Co.months=ko,Co.years=Io,Co.humanize=Tr,Co.toISOString=Ir,Co.toString=Ir,Co.toJSON=Ir,Co.locale=_n,Co.localeData=Nn,Co.toIsoString=N("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ir),Co.lang=ro,U("X",0,0,"unix"),U("x",0,0,"valueOf"),Y("x",aa),Y("X",sa),Z("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),Z("x",function(e,t,n){n._d=new Date(w(e))}),t.version="2.22.2",n(kt),t.fn=lo,t.min=Et,t.max=At,t.now=Xa,t.utc=h,t.unix=Kn,t.months=tr,t.isDate=u,t.locale=et,t.invalid=g,t.duration=Zt,t.isMoment=b,t.weekdays=rr,t.parseZone=Xn,t.localeData=rt,t.isDuration=Dt,t.monthsShort=nr,t.weekdaysMin=or,t.defineLocale=tt,t.updateLocale=nt,t.locales=at,t.weekdaysShort=ar,t.normalizeUnits=L,t.relativeTimeRounding=_r,t.relativeTimeThreshold=Nr,t.calendarFormat=rn,t.prototype=lo,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t})}).call(t,n(31)(e))},function(e,t,n){"use strict";function r(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function a(e){this.buf=e,this.pos=0,this.len=e.length}function o(){var e=new c(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw r(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw r(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function i(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function s(){if(this.pos+8>this.len)throw r(this,8);return new c(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}e.exports=a;var u,l=n(53),c=l.LongBits,p=l.utf8,h="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new a(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new a(e);throw Error("illegal buffer")};a.create=l.Buffer?function(e){return(a.create=function(e){return l.Buffer.isBuffer(e)?new u(e):h(e)})(e)}:h,a.prototype._slice=l.Array.prototype.subarray||l.Array.prototype.slice,a.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,r(this,10);return e}}(),a.prototype.int32=function(){return 0|this.uint32()},a.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},a.prototype.bool=function(){return 0!==this.uint32()},a.prototype.fixed32=function(){if(this.pos+4>this.len)throw r(this,4);return i(this.buf,this.pos+=4)},a.prototype.sfixed32=function(){if(this.pos+4>this.len)throw r(this,4);return 0|i(this.buf,this.pos+=4)},a.prototype.float=function(){if(this.pos+4>this.len)throw r(this,4);var e=l.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},a.prototype.double=function(){if(this.pos+8>this.len)throw r(this,4);var e=l.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},a.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw r(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},a.prototype.string=function(){var e=this.bytes();return p.read(e,0,e.length)},a.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw r(this,e);this.pos+=e}else do if(this.pos>=this.len)throw r(this);while(128&this.buf[this.pos++]);return this},a.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},a._configure=function(e){u=e;var t=l.Long?"toLong":"toNumber";l.merge(a.prototype,{int64:function(){return o.call(this)[t](!1)},uint64:function(){return o.call(this)[t](!0)},sint64:function(){return o.call(this).zzDecode()[t](!1)},fixed64:function(){return s.call(this)[t](!0)},sfixed64:function(){return s.call(this)[t](!1)}})}},function(e,t,n){"use strict";function r(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function a(){}function o(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function i(){this.len=0,this.head=new r(a,0,0),this.tail=this.head,this.states=null}function s(e,t,n){t[n]=255&e}function u(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e}function l(e,t){this.len=e,this.next=void 0,this.val=t}function c(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function p(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}e.exports=i;var h,d=n(53),f=d.LongBits,m=d.base64,g=d.utf8;i.create=d.Buffer?function(){return(i.create=function(){return new h})()}:function(){return new i},i.alloc=function(e){return new d.Array(e)},d.Array!==Array&&(i.alloc=d.pool(i.alloc,d.Array.prototype.subarray)),i.prototype._push=function(e,t,n){return this.tail=this.tail.next=new r(e,t,n),this.len+=t,this},l.prototype=Object.create(r.prototype),l.prototype.fn=u,i.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new l((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},i.prototype.int32=function(e){return e<0?this._push(c,10,f.fromNumber(e)):this.uint32(e)},i.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},i.prototype.uint64=function(e){var t=f.from(e);return this._push(c,t.length(),t)},i.prototype.int64=i.prototype.uint64,i.prototype.sint64=function(e){var t=f.from(e).zzEncode();return this._push(c,t.length(),t)},i.prototype.bool=function(e){return this._push(s,1,e?1:0)},i.prototype.fixed32=function(e){return this._push(p,4,e>>>0)},i.prototype.sfixed32=i.prototype.fixed32,i.prototype.fixed64=function(e){var t=f.from(e);return this._push(p,4,t.lo)._push(p,4,t.hi)},i.prototype.sfixed64=i.prototype.fixed64,i.prototype.float=function(e){return this._push(d.float.writeFloatLE,4,e)},i.prototype.double=function(e){return this._push(d.float.writeDoubleLE,8,e)};var v=d.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};i.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(s,1,0);if(d.isString(e)){var n=i.alloc(t=m.length(e));m.decode(e,n,0),e=n}return this.uint32(t)._push(v,t,e)},i.prototype.string=function(e){var t=g.length(e);return t?this.uint32(t)._push(g.write,t,e):this._push(s,1,0)},i.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new r(a,0,0),this.len=0,this},i.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(a,0,0),this.len=0),this},i.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},i.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},i._configure=function(e){h=e}},function(e,t,n){(function(e){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0,t.Chart=t.defaults=t.Scatter=t.Bubble=t.Polar=t.Radar=t.HorizontalBar=t.Bar=t.Line=t.Pie=t.Doughnut=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=n(9),c=r(l),p=n(26),h=r(p),d=n(194),f=r(d),m=n(338),g=r(m),v=n(333),y=(r(v),n(339)),b=r(y),x="undefined"!=typeof e&&{NODE_ENV:"production",PUBLIC_DIR:"/home/dan/my-gits/gatsby-gh-pages/public"}&&"production",w=function(e){function t(){var n,r,a;o(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=i(this,e.call.apply(e,[this].concat(u))),r.handleOnClick=function(e){var t=r.chartInstance,n=r.props,a=n.getDatasetAtEvent,o=n.getElementAtEvent,i=n.getElementsAtEvent,s=n.onElementsClick;a&&a(t.getDatasetAtEvent(e),e),o&&o(t.getElementAtEvent(e),e),i&&i(t.getElementsAtEvent(e),e),s&&s(t.getElementsAtEvent(e),e)},r.ref=function(e){r.element=e},a=n,i(r,a)}return s(t,e),t.prototype.componentWillMount=function(){this.chartInstance=void 0},t.prototype.componentDidMount=function(){this.renderChart()},t.prototype.componentDidUpdate=function(){return this.props.redraw?(this.chartInstance.destroy(),void this.renderChart()):void this.updateChart()},t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=(t.redraw,t.type),r=t.options,a=t.plugins,o=t.legend,i=t.height,s=t.width;if(e.redraw===!0)return!0;if(i!==e.height||s!==e.width)return!0;if(n!==e.type)return!0;if(!(0,g.default)(o,e.legend))return!0;if(!(0,g.default)(r,e.options))return!0;var u=this.transformDataProp(e);return!(0,g.default)(this.shadowDataProp,u)||!(0,g.default)(a,e.plugins)},t.prototype.componentWillUnmount=function(){this.chartInstance.destroy()},t.prototype.transformDataProp=function(e){var t=e.data;if("function"==typeof t){var n=this.element;return t(n)}return t},t.prototype.memoizeDataProps=function(){if(this.props.data){var e=this.transformDataProp(this.props);return this.shadowDataProp=u({},e,{datasets:e.datasets&&e.datasets.map(function(e){return u({},e)})}),e}},t.prototype.checkDatasets=function(e){var n="production"!==x&&"prod"!==x,r=this.props.datasetKeyProvider!==t.getLabelAsKey,a=e.length>1;if(n&&a&&!r){var o=!1;e.forEach(function(e){e.label||(o=!0)}),o&&console.error('[react-chartjs-2] Warning: Each dataset needs a unique key. By default, the "label" property on each dataset is used. Alternatively, you may provide a "datasetKeyProvider" as a prop that returns a unique key.')}},t.prototype.updateChart=function(){var e=this,t=this.props.options,n=this.memoizeDataProps(this.props);if(this.chartInstance){t&&(this.chartInstance.options=f.default.helpers.configMerge(this.chartInstance.options,t));var r=this.chartInstance.config.data&&this.chartInstance.config.data.datasets||[],o=n.datasets||[];this.checkDatasets(r);var i=(0,b.default)(r,this.props.datasetKeyProvider);this.chartInstance.config.data.datasets=o.map(function(t){var n=i[e.props.datasetKeyProvider(t)];if(n&&n.type===t.type){n.data.splice(t.data.length),t.data.forEach(function(e,r){n.data[r]=t.data[r]});var r=(t.data,a(t,["data"]));return u({},n,r)}return t});var s=(n.datasets,a(n,["datasets"]));this.chartInstance.config.data=u({},this.chartInstance.config.data,s),this.chartInstance.update()}},t.prototype.renderChart=function(){var e=this.props,n=e.options,r=e.legend,a=e.type,o=(e.redraw,e.plugins),i=this.element,s=this.memoizeDataProps();"undefined"==typeof r||(0,g.default)(t.defaultProps.legend,r)||(n.legend=r),this.chartInstance=new f.default(i,{type:a,data:s,options:n,plugins:o})},t.prototype.render=function(){var e=this.props,t=e.height,n=e.width,r=(e.onElementsClick,e.id);return c.default.createElement("canvas",{ref:this.ref,height:t,width:n,id:r,onClick:this.handleOnClick})},t}(c.default.Component);w.getLabelAsKey=function(e){return e.label},w.propTypes={data:h.default.oneOfType([h.default.object,h.default.func]).isRequired,getDatasetAtEvent:h.default.func,getElementAtEvent:h.default.func,getElementsAtEvent:h.default.func,height:h.default.number,legend:h.default.object,onElementsClick:h.default.func,options:h.default.object,plugins:h.default.arrayOf(h.default.object),redraw:h.default.bool,type:function(e,t,n){if(!f.default.controllers[e[t]])return new Error("Invalid chart type `"+e[t]+"` supplied to `"+n+"`.")},width:h.default.number,datasetKeyProvider:h.default.func},w.defaultProps={legend:{display:!0,position:"bottom"},type:"doughnut",height:150,width:300,redraw:!1,options:{},datasetKeyProvider:w.getLabelAsKey},t.default=w;t.Doughnut=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"doughnut"}))},t}(c.default.Component),t.Pie=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"pie"}))},t}(c.default.Component),t.Line=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"line"}))},t}(c.default.Component),t.Bar=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"bar"}))},t}(c.default.Component),t.HorizontalBar=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"horizontalBar"}))},t}(c.default.Component),t.Radar=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"radar"}))},t}(c.default.Component),t.Polar=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"polarArea"}))},t}(c.default.Component),t.Bubble=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"bubble"}))},t}(c.default.Component),t.Scatter=function(e){function t(){return o(this,t),i(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return c.default.createElement(w,u({},this.props,{ref:function(t){return e.chartInstance=t&&t.chartInstance},type:"scatter"}))},t}(c.default.Component),t.defaults=f.default.defaults;t.Chart=f.default}).call(t,n(73))},,,,,,function(e,t,n){var r=n(588),a=n(590),o=n(593),i=n(592),s=n(591),u=n(589),l=n(594);l.alea=r,l.xor128=a,l.xorwow=o,l.xorshift7=i,l.xor4096=s,l.tychei=u,e.exports=l},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){"use strict";function n(e,t){for(var n=new Array(arguments.length-1),r=0,a=2,o=!0;a<arguments.length;)n[r++]=arguments[a++];return new Promise(function(a,i){n[r]=function(e){if(o)if(o=!1,e)i(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];a.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,i(e))}})}e.exports=n},function(e,t){"use strict";var n=t;n.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var r=new Array(64),a=new Array(123),o=0;o<64;)a[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;n.encode=function(e,t,n){for(var a,o=null,i=[],s=0,u=0;t<n;){var l=e[t++];switch(u){case 0:i[s++]=r[l>>2],a=(3&l)<<4,u=1;break;case 1:i[s++]=r[a|l>>4],a=(15&l)<<2,u=2;break;case 2:i[s++]=r[a|l>>6],i[s++]=r[63&l],u=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0)}return u&&(i[s++]=r[a],i[s++]=61,1===u&&(i[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))};var i="invalid encoding";n.decode=function(e,t,n){for(var r,o=n,s=0,u=0;u<e.length;){var l=e.charCodeAt(u++);if(61===l&&s>1)break;if(void 0===(l=a[l]))throw Error(i);switch(s){case 0:r=l,s=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,s=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,s=3;break;case 3:t[n++]=(3&r)<<6|l,s=0}}if(1===s)throw Error(i);return n-o},n.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)}},function(e,t){"use strict";function n(){this._listeners={}}e.exports=n,n.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},n.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},n.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},function(e,t){"use strict";function n(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,n){o[0]=e,t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3]}function n(e,t,n){o[0]=e,t[n]=i[3],t[n+1]=i[2],t[n+2]=i[1],t[n+3]=i[0]}function r(e,t){return i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],o[0]}function a(e,t){return i[3]=e[t],i[2]=e[t+1],i[1]=e[t+2],i[0]=e[t+3],o[0]}var o=new Float32Array([-0]),i=new Uint8Array(o.buffer),s=128===i[3];e.writeFloatLE=s?t:n,e.writeFloatBE=s?n:t,e.readFloatLE=s?r:a,e.readFloatBE=s?a:r}():function(){function t(e,t,n,r){var a=t<0?1:0;if(a&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>3.4028234663852886e38)e((a<<31|2139095040)>>>0,n,r);else if(t<1.1754943508222875e-38)e((a<<31|Math.round(t/1.401298464324817e-45))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2),i=8388607&Math.round(t*Math.pow(2,-o)*8388608);e((a<<31|o+127<<23|i)>>>0,n,r)}}function n(e,t,n){var r=e(t,n),a=2*(r>>31)+1,o=r>>>23&255,i=8388607&r;return 255===o?i?NaN:a*(1/0):0===o?1.401298464324817e-45*a*i:a*Math.pow(2,o-150)*(i+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,a),e.readFloatLE=n.bind(null,o),e.readFloatBE=n.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,n){o[0]=e,t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7]}function n(e,t,n){o[0]=e,t[n]=i[7],t[n+1]=i[6],t[n+2]=i[5],t[n+3]=i[4],t[n+4]=i[3],t[n+5]=i[2],t[n+6]=i[1],t[n+7]=i[0]}function r(e,t){return i[0]=e[t],i[1]=e[t+1],i[2]=e[t+2],i[3]=e[t+3],i[4]=e[t+4],i[5]=e[t+5],i[6]=e[t+6],i[7]=e[t+7],o[0]}function a(e,t){return i[7]=e[t],i[6]=e[t+1],i[5]=e[t+2],i[4]=e[t+3],i[3]=e[t+4],i[2]=e[t+5],i[1]=e[t+6],i[0]=e[t+7],o[0]}var o=new Float64Array([-0]),i=new Uint8Array(o.buffer),s=128===i[7];e.writeDoubleLE=s?t:n,e.writeDoubleBE=s?n:t,e.readDoubleLE=s?r:a,e.readDoubleBE=s?a:r}():function(){function t(e,t,n,r,a,o){var i=r<0?1:0;if(i&&(r=-r),0===r)e(0,a,o+t),e(1/r>0?0:2147483648,a,o+n);else if(isNaN(r))e(0,a,o+t),e(2146959360,a,o+n);else if(r>1.7976931348623157e308)e(0,a,o+t),e((i<<31|2146435072)>>>0,a,o+n);else{var s;if(r<2.2250738585072014e-308)s=r/5e-324,e(s>>>0,a,o+t),e((i<<31|s/4294967296)>>>0,a,o+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),s=r*Math.pow(2,-u),e(4503599627370496*s>>>0,a,o+t),e((i<<31|u+1023<<20|1048576*s&1048575)>>>0,a,o+n)}}}function n(e,t,n,r,a){var o=e(r,a+t),i=e(r,a+n),s=2*(i>>31)+1,u=i>>>20&2047,l=4294967296*(1048575&i)+o;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,a,4,0),e.readDoubleLE=n.bind(null,o,0,4),e.readDoubleBE=n.bind(null,i,4,0)}(),e}function r(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function a(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function o(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=n(n)},function(module,exports){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t){"use strict";function n(e,t,n){var r=n||8192,a=r>>>1,o=null,i=r;return function(n){if(n<1||n>a)return e(n);i+n>r&&(o=e(r),i=0);var s=t.call(o,i,i+=n);return 7&i&&(i=(7|i)+1),s}}e.exports=n},function(e,t){"use strict";var n=t;n.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)n=e.charCodeAt(r),n<128?t+=1:n<2048?t+=2:55296===(64512&n)&&56320===(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},n.read=function(e,t,n){var r=n-t;if(r<1)return"";for(var a,o=null,i=[],s=0;t<n;)a=e[t++],a<128?i[s++]=a:a>191&&a<224?i[s++]=(31&a)<<6|63&e[t++]:a>239&&a<365?(a=((7&a)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(a>>10),i[s++]=56320+(1023&a)):i[s++]=(15&a)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},n.write=function(e,t,n){for(var r,a,o=n,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&56320===(64512&(a=e.charCodeAt(i+1)))?(r=65536+((1023&r)<<10)+(1023&a),++i,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.weightMap=e,this.tensorArrayMap=t,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),e.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e},e.prototype.contextIdforContexts=function(e){return e?e.map(function(e){return 0===e.id&&0===e.iterationId?"":e.frameName+"-"+e.iterationId}).join("/"):""},e.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},e.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},e.prototype.getWeight=function(e){return this.weightMap[e]},e.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},e.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},e}();t.ExecutionContext=n},function(e,t,n){"use strict";function r(e,t,n){return a(this,void 0,void 0,function(){var r;return o(this,function(a){switch(a.label){case 0:return r=new c(e,t,n),[4,r.load()];case 1:return a.sent(),[2,r]}})})}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){
o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(161),u=n(425),l=n(392),c=function(){function e(e,t,n){this.modelUrl=e,this.weightManifestUrl=t,this.requestOption=n,this.version="n/a"}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),e.prototype.findIOHandler=function(){var e=[this.modelUrl,this.weightManifestUrl];if(this.requestOption)this.handler=i.io.browserHTTPRequest(e,this.requestOption);else{var t=i.io.getLoadHandlers(e);if(0===t.length)t.push(i.io.browserHTTPRequest(e,this.requestOption));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for "+("URL '"+[e]+"'"));this.handler=t[0]}},e.prototype.load=function(){return a(this,void 0,void 0,function(){var e,t,n;return o(this,function(r){switch(r.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return e=r.sent(),t=s.tensorflow.GraphDef.decode(new Uint8Array(e.modelTopology)),this.version=t.versions.producer+"."+t.versions.minConsumer,n=i.io.decodeWeights(e.weightData,e.weightSpecs),this.executor=new l.GraphExecutor(u.OperationMapper.Instance.transformGraph(t)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),[2,!0]}})})},e.prototype.predict=function(e,t){return this.execute(e,this.outputNodes)},e.prototype.constructTensorMap=function(e){var t=e instanceof i.Tensor?[e]:e;if(t.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+("the frozen model has "+this.inputNodes.length+" placeholders, ")+("while there are "+t.length+" input tensors."));return this.inputNodes.reduce(function(e,n,r){return e[n]=t[r],e},{})},e.prototype.execute=function(e,t){if(t=t||this.outputNodes,(e instanceof i.Tensor||Array.isArray(e))&&(e=this.constructTensorMap(e)),this.executor.isControlFlowModel||this.executor.isDynamicShapeModel)throw new Error("The model contains control flow or dynamic shape ops, please use executeAsync method");var n=this.executor.execute(this.convertTensorMapToTensorsMap(e),t),r=Object.keys(n);return Array.isArray(t)&&t.length>1?t.map(function(e){return n[e]}):n[r[0]]},e.prototype.executeAsync=function(e,t){return a(this,void 0,void 0,function(){var n,r;return o(this,function(a){switch(a.label){case 0:if(!this.executor.isControlFlowModel&&!this.executor.isDynamicShapeModel)throw new Error("The model does not contain control flow or dynamic shape ops, please use execute method for better performance.");return t=t||this.outputNodes,(e instanceof i.Tensor||Array.isArray(e))&&(e=this.constructTensorMap(e)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(e),t)];case 1:return n=a.sent(),r=Object.keys(n),[2,Array.isArray(t)&&t.length>1?t.map(function(e){return n[e]}):n[r[0]]]}})})},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce(function(t,n){return t[n]=[e[n]],t},{})},e.prototype.dispose=function(){this.executor.dispose()},e}();t.FrozenModel=c,t.loadFrozenModel=r},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(14),u=n(424),l=n(390),c=function(){function e(e){this.graph=e,this.compiledOrder=[],this._weightMap={},this.placeholders=e.placeholders,this._outputs=e.outputs,this.compile()}return Object.defineProperty(e.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var t=Object.keys(e).map(function(t){return e[t].map(function(e){return e.id})});this.weightIds=[].concat.apply([],t),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.placeholders.map(function(e){return{name:e.name,shape:e.params.shape?e.params.shape.value:void 0,dtype:e.params.dtype?e.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs.map(function(e){return{name:e.name,shape:e.params.shape?e.params.shape.value:void 0,dtype:e.params.dtype?e.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(e){return e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.outputs.map(function(e){return e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isControlFlowModel",{get:function(){return this.graph.withControlFlow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDynamicShapeModel",{get:function(){return this.graph.withDynamicShape},enumerable:!0,configurable:!0}),e.prototype.compile=function(){if(!this.graph.withControlFlow&&!this.graph.withDynamicShape)for(var e=this.graph.inputs.slice(),t={};e.length>0;){var n=e.pop();t[n.name]=!0,this.compiledOrder.push(n),n.children.forEach(function(n){!t[n.name]&&n.inputNames.every(function(e){var n=s.getNodeNameAndIndex(e)[0];return t[n]})&&e.push(n)})}},e.prototype.execute=function(e,t){var n=this;this.checkInput(e),this.checkInputShapeAndType(e);var a={},o=i.tidy(function(){var o=new l.ExecutionContext(n._weightMap,a),i=n.compiledOrder.reduce(function(e,t){return e[t.name]=u.executeOp(t,e,o),e},r({},n.weightMap,e));return n.findOutputs(i,o,t)});return o},e.prototype.executeAsync=function(e,t){return a(this,void 0,void 0,function(){var n,r,a,i,s,u,c,p=this;return o(this,function(o){switch(o.label){case 0:return this.checkInput(e),this.checkInputShapeAndType(e),n={},r=new l.ExecutionContext(this._weightMap,n),[4,this.executeWithControlFlow(e,r)];case 1:return a=o.sent(),i=this.findOutputs(a,r,t),s=Object.keys(i).map(function(e){return i[e].id}),u=Object.keys(e).map(function(t){return e[t].map(function(e){return e.id})}),c=[].concat.apply([],u),Object.keys(a).forEach(function(e){var t=a[e];t.forEach(function(e){e&&s.indexOf(e.id)===-1&&c.indexOf(e.id)===-1&&p.weightIds.indexOf(e.id)===-1&&e.dispose()})}),[2,i]}})})},e.prototype.executeWithControlFlow=function(e,t){return a(this,void 0,void 0,function(){var n,a,i,s;return o(this,function(o){switch(o.label){case 0:n=this.graph.inputs.map(function(e){return{node:e,contexts:t.currentContext}}),a=r({},this.weightMap,e),i={},o.label=1;case 1:return n.length>0?(s=this.processStack(n,t,a,i),[4,Promise.all(s)]):[3,3];case 2:return o.sent(),[3,1];case 3:return[2,a]}})})},e.prototype.processStack=function(e,t,n,r){for(var a=this,o=[],i=function(){var i=e.pop();t.currentContext=i.contexts;var c="";"enter"===i.node.op&&s.getParamValue("isConstant",i.node,n,t)&&(c=s.getNodeNameAndIndex(i.node.name,t)[0]);var p=u.executeOp(i.node,n,t);c||(c=s.getNodeNameAndIndex(i.node.name,t)[0]);var h=t.currentContext;p instanceof Promise?o.push(p.then(function(o){return n[c]=o,t.currentContext=h,a.processChildNodes(i.node,e,t,n,r),o})):(n[c]=p,l.processChildNodes(i.node,e,t,n,r))},l=this;e.length>0;)i();return o},e.prototype.processChildNodes=function(e,t,n,r,a){e.children.forEach(function(e){var o=s.getNodeNameAndIndex(e.name,n)[0];a[o]||("merge"===e.op?e.inputNames.some(function(e){return!!s.getTensor(e,r,n)})&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(function(e){return!!s.getTensor(e,r,n)})&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))})},e.prototype.findOutputs=function(e,t,n){!n||n instanceof Array||(n=[n]);var r=n||this.graph.outputs.map(function(e){return e.name});return r.reduce(function(n,r){return n[r]=s.getTensor(r,e,t),n},{})},e.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach(function(t){return e.weightMap[t].forEach(function(e){return e.dispose()})})},e.prototype.checkInputShapeAndType=function(e){this.placeholders.forEach(function(t){var n=e[t.name][0];if(t.params.shape&&t.params.shape.value){var r=t.params.shape.value,a=r.length===n.shape.length&&n.shape.every(function(e,t){return r[t]===-1||r[t]===e});i.util.assert(a,"The shape of dict['"+t.name+"'] provided in model.execute(dict) must be ["+r+"], but was ["+n.shape+"]")}t.params.dtype&&t.params.dtype.value&&i.util.assert(n.dtype===t.params.dtype.value,"The dtype of dict['"+t.name+"'] provided in model.execute(dict) must be "+t.params.dtype.value+", but was "+n.dtype)})},e.prototype.checkInput=function(e){var t=this,n=Object.keys(e),r=[],a=[];if(this.inputNodes.forEach(function(e){n.indexOf(e)===-1&&r.push(e)}),n.forEach(function(e){t.inputNodes.indexOf(e)===-1&&a.push(e)}),r.length>0)throw new Error("The dict provided in model.execute(dict) has the keys "+("["+n+"], but is missing the required keys: ["+r+"]."));if(a.length>0)throw new Error("The dict provided in model.execute(dict) has "+("unused keys: ["+a+"]. Please provide only the following keys: ")+("["+this.inputNodes+"]."))},e}();t.GraphExecutor=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=function(){function e(t,n,r,a,o,i,s){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=o,this.dynamicSize=i,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=e.nextId++}return Object.defineProperty(e.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),e.prototype.clearAndClose=function(){this.tensors.forEach(function(e){return e.tensor.dispose()}),this.tensors=[],this.closed_=!0},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},e.prototype.readMany=function(e){var t=this;return e.map(function(e){return t.read(e)})},e.prototype.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(0===this.size()&&0===this.elementShape.length&&(this.elementShape=t.shape),this.assertShapesMatch(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");n.tensor=t,n.written=!0,this.tensors[e]=n},e.prototype.writeMany=function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,"+("because the index size: "+e.length+" is not the same as tensors size: "+t.length+"."));e.forEach(function(e,r){return n.write(e,t[r])})},e.prototype.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(!e){e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return r.tensor([],[0].concat(this.elementShape));var a=this.readMany(e);return this.assertShapesMatch(this.elementShape,a[0].shape,"TensorArray shape mismatch: "),r.stack(a,0)},e.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(0===this.size())return r.tensor([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var a=this.readMany(t);return this.assertShapesMatch(this.elementShape,a[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+a[0].shape+")"),r.concat(a,0)},e.prototype.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var n=Math.max.apply(Math,e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(e,r.unstack(t,0))},e.prototype.split=function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var a=0,o=e.map(function(e){return a+=e});if(a!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+a+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var i=0===a?0:t.size/a,s=[];r.tidy(function(){t=t.reshape([1,a,i]);for(var u=0;u<e.length;++u){var l=0===u?0:o[u-1],c=[0,l,0],p=[1,e[u],i];s[u]=r.slice(t,c,p).reshape(n.elementShape)}return s});for(var u=[],l=0;l<e.length;l++)u[l]=l;this.writeMany(u,s)},e.prototype.assertShapesMatch=function(e,t,n){void 0===n&&(n=""),r.util.assert(this.arraysEqual(e,t),n+(" Shapes "+e+" and "+t+" must match"))},e.prototype.arraysEqual=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==-1&&t[n]!==-1&&e[n]!==t[n])return!1;return!0},e.nextId=0,e}();t.TensorArray=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"add":return[r.add(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"addN":return[r.addN(a.getParamValue("tensors",e,t,n))];case"mod":return[r.mod(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"mul":return[r.mul(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"div":return[r.div(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"floorDiv":return[r.floorDiv(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"sub":return[r.sub(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"minimum":return[r.minimum(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"maximum":return[r.maximum(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"pow":return[r.pow(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"squaredDifference":return[r.squaredDifference(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="arithmetic"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"abs":return[r.abs(a.getParamValue("x",e,t,n))];case"acos":return[r.acos(a.getParamValue("x",e,t,n))];case"acosh":return[r.acosh(a.getParamValue("x",e,t,n))];case"asin":return[r.asin(a.getParamValue("x",e,t,n))];case"asinh":return[r.asinh(a.getParamValue("x",e,t,n))];case"atan":return[r.atan(a.getParamValue("x",e,t,n))];case"atanh":return[r.atanh(a.getParamValue("x",e,t,n))];case"ceil":return[r.ceil(a.getParamValue("x",e,t,n))];case"cos":return[r.cos(a.getParamValue("x",e,t,n))];case"cosh":return[r.cosh(a.getParamValue("x",e,t,n))];case"elu":return[r.elu(a.getParamValue("x",e,t,n))];case"erf":return[r.erf(a.getParamValue("x",e,t,n))];case"exp":return[r.exp(a.getParamValue("x",e,t,n))];case"expm1":return[r.expm1(a.getParamValue("x",e,t,n))];case"floor":return[r.floor(a.getParamValue("x",e,t,n))];case"log":return[r.log(a.getParamValue("x",e,t,n))];case"log1p":return[r.log1p(a.getParamValue("x",e,t,n))];case"neg":return[r.neg(a.getParamValue("x",e,t,n))];case"reciprocal":return[r.reciprocal(a.getParamValue("x",e,t,n))];case"relu":return[r.relu(a.getParamValue("x",e,t,n))];case"round":return[r.round(a.getParamValue("x",e,t,n))];case"selu":return[r.selu(a.getParamValue("x",e,t,n))];case"sigmoid":return[r.sigmoid(a.getParamValue("x",e,t,n))];case"sin":return[r.sin(a.getParamValue("x",e,t,n))];case"sign":return[r.sign(a.getParamValue("x",e,t,n))];case"sinh":return[r.sinh(a.getParamValue("x",e,t,n))];case"softplus":return[r.softplus(a.getParamValue("x",e,t,n))];case"sqrt":return[r.sqrt(a.getParamValue("x",e,t,n))];case"square":return[r.square(a.getParamValue("x",e,t,n))];case"tanh":return[r.tanh(a.getParamValue("x",e,t,n))];case"tan":return[r.tan(a.getParamValue("x",e,t,n))];case"clipByValue":return[r.clipByValue(a.getParamValue("x",e,t,n),a.getParamValue("clipValueMin",e,t,n),a.getParamValue("clipValueMax",e,t,n))];case"rsqrt":return[r.div(r.scalar(1,"float32"),r.sqrt(a.getTensor(e.inputNames[0],t,n)))];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="basic_math"},function(e,t,n){"use strict";function r(e,t,n){return a(this,void 0,void 0,function(){var r,a,l,c,p,h,d,f,m,g,v,y,b,x,w,S,_,N,T,k,I,E,A,P,C,O,M,D,R,z,L,V,F,B,j,U,W,G,H,q,Y,$;return o(this,function(o){switch(o.label){case 0:switch(r=e.op){case"loopCond":return[3,1];case"switch":return[3,2];case"merge":return[3,4];case"enter":return[3,5];case"exit":return[3,6];case"nextIteration":return[3,7];case"tensorArray":return[3,8];case"tensorArrayWrite":return[3,9];case"tensorArrayRead":return[3,10];case"tensorArrayGather":return[3,11];case"tensorArrayScatter":return[3,12];case"tensorArrayConcat":return[3,13];case"tensorArraySplit":return[3,14];case"tensorArraySize":return[3,15];case"tensorArrayClose":return[3,16]}return[3,17];case 1:return[2,[u.getParamValue("pred",e,t,n)]];case 2:return a=u.getParamValue("pred",e,t,n),l=u.getParamValue("data",e,t,n),[4,a.data()];case 3:return[2,o.sent()[0]?[void 0,l]:[l,void 0]];case 4:return c=e.inputNames.find(function(e){return void 0!==u.getTensor(e,t,n)}),[2,c?[u.getTensor(c,t,n)]:void 0];case 5:return p=u.getParamValue("frameName",e,t,n),h=u.getParamValue("tensor",e,t,n),n.enterFrame(p),[2,[h]];case 6:return d=u.getParamValue("tensor",e,t,n),n.exitFrame(),[2,[d]];case 7:return f=u.getParamValue("tensor",e,t,n),n.nextIteration(),[2,[f]];case 8:return m=u.getParamValue("size",e,t,n),g=u.getParamValue("dtype",e,t,n),v=u.getParamValue("elementShape",e,t,n),y=u.getParamValue("dynamicSize",e,t,n),b=u.getParamValue("clearAfterRead",e,t,n),x=u.getParamValue("identicalElementShapes",e,t,n),w=u.getParamValue("name",e,t,n),S=new s.TensorArray(w,g,m,v,x,y,b),n.addTensorArray(S),[2,[i.scalar(S.id),i.scalar(1)]];case 9:return _=u.getParamValue("tensorArrayId",e,t,n),N=u.getParamValue("index",e,t,n),T=u.getParamValue("tensor",e,t,n),k=n.getTensorArray(_),k.write(N,T),[2,[i.scalar(1)]];case 10:return I=u.getParamValue("tensorArrayId",e,t,n),E=u.getParamValue("index",e,t,n),A=n.getTensorArray(I),[2,[A.read(E)]];case 11:return P=u.getParamValue("tensorArrayId",e,t,n),C=u.getParamValue("indices",e,t,n),O=u.getParamValue("dtype",e,t,n),M=n.getTensorArray(P),[2,[M.gather(C,O)]];case 12:return D=u.getParamValue("tensorArrayId",e,t,n),R=u.getParamValue("indices",e,t,n),z=u.getParamValue("tensor",e,t,n),L=n.getTensorArray(D),L.scatter(R,z),[2,[i.scalar(1)]];case 13:return V=u.getParamValue("tensorArrayId",e,t,n),F=n.getTensorArray(V),B=u.getParamValue("dtype",e,t,n),[2,[F.concat(B)]];case 14:return j=u.getParamValue("tensorArrayId",e,t,n),U=u.getParamValue("tensor",e,t,n),W=u.getParamValue("lengths",e,t,n),G=n.getTensorArray(j),G.split(W,U),[2,[i.scalar(1)]];case 15:return H=u.getParamValue("tensorArrayId",e,t,n),q=n.getTensorArray(H),[2,[i.scalar(q.size(),"int32")]];case 16:return Y=u.getParamValue("tensorArrayId",e,t,n),$=n.getTensorArray(Y),$.clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+e.op+" is not implemented")}})})}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(393),u=n(14);t.executeOp=r,t.CATEGORY="control"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"conv1d":var o=a.getParamValue("stride",e,t,n),i=a.getParamValue("pad",e,t,n),s=a.getParamValue("dataFormat",e,t,n).toUpperCase(),u=a.getParamValue("dilation",e,t,n);return[r.conv1d(a.getParamValue("x",e,t,n),a.getParamValue("filter",e,t,n),o,i,s,u)];case"conv2d":var o=a.getParamValue("strides",e,t,n),i=a.getParamValue("pad",e,t,n),s=a.getParamValue("dataFormat",e,t,n).toUpperCase(),l=a.getParamValue("dilations",e,t,n);return[r.conv2d(a.getParamValue("x",e,t,n),a.getParamValue("filter",e,t,n),[o[1],o[2]],i,s,[l[0],l[1]])];case"conv2dTranspose":var c=a.getParamValue("outputShape",e,t,n),o=a.getParamValue("strides",e,t,n),i=a.getParamValue("pad",e,t,n);return[r.conv2dTranspose(a.getParamValue("x",e,t,n),a.getParamValue("filter",e,t,n),c,[o[1],o[2]],i)];case"depthwiseConv2d":var o=a.getParamValue("strides",e,t,n),i=a.getParamValue("pad",e,t,n),l=a.getParamValue("dilations",e,t,n),s=a.getParamValue("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(a.getParamValue("input",e,t,n),a.getParamValue("filter",e,t,n),[o[1],o[2]],i,s,[l[0],l[1]])];case"avgPool":var o=a.getParamValue("strides",e,t,n),i=a.getParamValue("pad",e,t,n),p=a.getParamValue("kernelSize",e,t,n);return[r.avgPool(a.getParamValue("x",e,t,n),[p[1],p[2]],[o[1],o[2]],i)];case"maxPool":var o=a.getParamValue("strides",e,t,n),i=a.getParamValue("pad",e,t,n),p=a.getParamValue("kernelSize",e,t,n);return[r.maxPool(a.getParamValue("x",e,t,n),[p[1],p[2]],[o[1],o[2]],i)];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="convolution"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"fill":var o=a.getParamValue("shape",e,t,n),i=a.getParamValue("dtype",e,t,n),s=a.getParamValue("value",e,t,n);return[r.fill(o,s,i)];case"linspace":var u=a.getParamValue("start",e,t,n),l=a.getParamValue("stop",e,t,n),c=a.getParamValue("num",e,t,n);return[r.linspace(u,l,c)];case"oneHot":var p=a.getParamValue("indices",e,t,n),h=a.getParamValue("depth",e,t,n),d=a.getParamValue("onValue",e,t,n),f=a.getParamValue("offValue",e,t,n);return[r.oneHot(p,h,d,f)];case"ones":return[r.ones(a.getParamValue("shape",e,t,n),a.getParamValue("dtype",e,t,n))];case"onesLike":return[r.onesLike(a.getParamValue("x",e,t,n))];case"randomUniform":return[r.randomUniform(a.getParamValue("shape",e,t,n),a.getParamValue("minval",e,t,n),a.getParamValue("maxval",e,t,n),a.getParamValue("dtype",e,t,n))];case"range":var u=a.getParamValue("start",e,t,n),m=a.getParamValue("stop",e,t,n),g=a.getParamValue("step",e,t,n);return[r.range(u,m,g,a.getParamValue("dtype",e,t,n))];case"truncatedNormal":var o=a.getParamValue("shape",e,t,n),v=a.getParamValue("mean",e,t,n),y=a.getParamValue("stdDev",e,t,n),b=a.getParamValue("seed",e,t,n);return[r.truncatedNormal(o,v,y,a.getParamValue("dtype",e,t,n),b)];case"zeros":return[r.zeros(a.getParamValue("shape",e,t,n),a.getParamValue("dtype",e,t,n))];case"zerosLike":return[r.zerosLike(a.getParamValue("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="creation"},function(e,t,n){"use strict";function r(e,t,n){return a(this,void 0,void 0,function(){var r,a,u,l,c,p;return o(this,function(o){switch(o.label){case 0:switch(r=e.op){case"nonMaxSuppression":return[3,1];case"whereAsync":return[3,3]}return[3,5];case 1:return a=s.getParamValue("boxes",e,t,n),u=s.getParamValue("scores",e,t,n),l=s.getParamValue("maxOutputSize",e,t,n),c=s.getParamValue("iouThreshold",e,t,n),p=s.getParamValue("scoreThreshold",e,t,n),[4,i.image.nonMaxSuppressionAsync(a,u,l,c,p)];case 2:return[2,[o.sent()]];case 3:return[4,i.whereAsync(s.getParamValue("condition",e,t,n))];case 4:return[2,[o.sent()]];case 5:throw TypeError("Node type "+e.op+" is not implemented")}})})}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(14);t.executeOp=r,t.CATEGORY="dynamic"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"topK":var o=a.getParamValue("x",e,t,n),i=a.getParamValue("k",e,t,n),s=a.getParamValue("sorted",e,t,n),u=r.topk(o,i,s);return[u.values,u.indices];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="evaluation"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"const":return t[e.name];case"placeholder":var o=a.getParamValue("default",e,t,n);return[a.getTensor(e.name,t,n)||o];case"identity":case"stopGradient":case"fakeQuantWithMinMaxVars":return[a.getParamValue("x",e,t,n)];case"snapshot":var i=a.getParamValue("x",e,t,n);return[i.clone()];case"shape":return[r.tensor1d(a.getParamValue("x",e,t,n).shape,"int32")];case"size":return[r.scalar(a.getParamValue("x",e,t,n).size,"int32")];case"rank":return[r.scalar(a.getParamValue("x",e,t,n).rank,"int32")];case"noop":return[];case"print":var s=a.getParamValue("x",e,t,n),u=a.getParamValue("data",e,t,n),l=a.getParamValue("message",e,t,n),c=a.getParamValue("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(var p=0;p<u.length;p++)console.log(Array.prototype.slice.call(u[0].dataSync()).slice(0,c));return[s];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="graph"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"resizeBilinear":var o=a.getParamValue("images",e,t,n),i=a.getParamValue("size",e,t,n),s=a.getParamValue("alignCorners",e,t,n);
return[r.image.resizeBilinear(o,[i[0],i[1]],s)];case"resizeNearestNeighbor":var o=a.getParamValue("images",e,t,n),i=a.getParamValue("size",e,t,n),s=a.getParamValue("alignCorners",e,t,n);return[r.image.resizeNearestNeighbor(o,[i[0],i[1]],s)];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="image"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"equal":return[r.equal(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"notEqual":return[r.notEqual(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"greater":return[r.greater(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"greaterEqual":return[r.greaterEqual(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"less":return[r.less(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"lessEqual":return[r.lessEqual(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"logicalAnd":return[r.logicalAnd(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"logicalNot":return[r.logicalNot(a.getParamValue("a",e,t,n))];case"logicalOr":return[r.logicalOr(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];case"where":return[r.where(a.getParamValue("condition",e,t,n),a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="logical"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"matMul":return[r.matMul(a.getParamValue("a",e,t,n),a.getParamValue("b",e,t,n),a.getParamValue("transposeA",e,t,n),a.getParamValue("transposeB",e,t,n))];case"transpose":return[r.transpose(a.getParamValue("x",e,t,n),a.getParamValue("perm",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="matrices"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"batchNormalization":return[r.batchNormalization(a.getParamValue("x",e,t,n),a.getParamValue("mean",e,t,n),a.getParamValue("variance",e,t,n),a.getParamValue("epsilon",e,t,n),a.getParamValue("scale",e,t,n),a.getParamValue("offset",e,t,n))];case"localResponseNormalization":return[r.localResponseNormalization(a.getParamValue("x",e,t,n),a.getParamValue("radius",e,t,n),a.getParamValue("bias",e,t,n),a.getParamValue("alpha",e,t,n),a.getParamValue("beta",e,t,n))];case"softmax":return[r.softmax(a.getParamValue("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="normalization"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"max":var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("keepDims",e,t,n);return[r.max(a.getParamValue("x",e,t,n),o,i)];case"mean":var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("keepDims",e,t,n);return[r.mean(a.getParamValue("x",e,t,n),o,i)];case"min":var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("keepDims",e,t,n);return[r.min(a.getParamValue("x",e,t,n),o,i)];case"sum":var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("keepDims",e,t,n);return[r.sum(a.getParamValue("x",e,t,n),o,i)];case"all":var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("keepDims",e,t,n);return[r.all(a.getParamValue("x",e,t,n),o,i)];case"any":var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("keepDims",e,t,n);return[r.any(a.getParamValue("x",e,t,n),o,i)];case"argMax":var o=a.getParamValue("axis",e,t,n);return[r.argMax(a.getParamValue("x",e,t,n),o)];case"argMin":var o=a.getParamValue("axis",e,t,n);return[r.argMin(a.getParamValue("x",e,t,n),o)];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="reduction"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"concat":var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("tensors",e,t,n);return[r.concat(i,o)];case"gather":var o=a.getParamValue("axis",e,t,n),s=a.getParamValue("x",e,t,n),u=a.getParamValue("indices",e,t,n);return[r.gather(s,u,o)];case"reverse":var o=a.getParamValue("axis",e,t,n),s=a.getParamValue("x",e,t,n);return[r.reverse(s,o)];case"slice":var l=a.getParamValue("begin",e,t,n),c=a.getParamValue("size",e,t,n);return[r.slice(a.getParamValue("x",e,t,n),l,c)];case"stridedSlice":var l=a.getParamValue("begin",e,t,n),p=a.getParamValue("end",e,t,n),h=a.getParamValue("strides",e,t,n),d=a.getParamValue("beginMask",e,t,n),f=a.getParamValue("endMask",e,t,n),m=a.getParamValue("ellipsisMask",e,t,n),g=a.getParamValue("newAxisMask",e,t,n),v=a.getParamValue("shrinkAxisMask",e,t,n),y=a.getParamValue("x",e,t,n);if(1===l.length&&y.shape.length>1)for(var b=1;b<y.shape.length;b++)l.push(0),p.push(y.shape[b]),h.push(h[0]);return[r.stridedSlice(y,l,p,h,d,f,m,g,v)];case"stack":return r.tidy(function(){var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("tensors",e,t,n),s=i[0].shape,u=i[0].squeeze().shape,l=i.map(function(e){var t=r.util.arraysEqual(e.shape,s);if(!t&&!r.util.arraysEqual(e.squeeze().shape,u))throw new Error("the input tensors shape does not match");return t?e:e.reshape(s)});return[r.stack(l,o)]});case"unstack":return r.tidy(function(){var o=a.getParamValue("axis",e,t,n),i=a.getParamValue("tensor",e,t,n);return r.unstack(i,o)});case"tile":var x=a.getParamValue("reps",e,t,n);return[r.tile(a.getParamValue("x",e,t,n),x)];case"split":var o=a.getParamValue("axis",e,t,n),w=a.getParamValue("numOrSizeSplits",e,t,n);return r.split(a.getParamValue("x",e,t,n),w,o);default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="slice_join"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(14);t.executeOp=function(e,t,n){switch(e.op){case"cast":return[r.cast(a.getParamValue("x",e,t,n),a.getParamValue("dtype",e,t,n))];case"expandDims":var o=a.getParamValue("axis",e,t,n);return[r.expandDims(a.getParamValue("x",e,t,n),o)];case"squeeze":var o=a.getParamValue("axis",e,t,n);return[r.squeeze(a.getParamValue("x",e,t,n),o)];case"reshape":return[r.reshape(a.getParamValue("x",e,t,n),a.getParamValue("shape",e,t,n))];case"pad":return[r.pad(a.getParamValue("x",e,t,n),a.split(a.getParamValue("padding",e,t,n),2),a.getParamValue("constantValue",e,t,n))];case"spaceToBatchND":var i=a.getParamValue("blockShape",e,t,n),s=a.split(a.getParamValue("paddings",e,t,n),2);return[r.spaceToBatchND(a.getParamValue("x",e,t,n),i,s)];case"batchToSpaceND":var i=a.getParamValue("blockShape",e,t,n),u=a.split(a.getParamValue("crops",e,t,n),2);return[r.batchToSpaceND(a.getParamValue("x",e,t,n),i,u)];default:throw TypeError("Node type "+e.op+" is not implemented")}},t.CATEGORY="transformation"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"Add",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",dlOpName:"addN",category:"arithmetic",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",dlOpName:"sub",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",dlOpName:"floorDiv",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",dlOpName:"mul",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",dlOpName:"maximum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Minimum",dlOpName:"minimum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Pow",dlOpName:"pow",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",dlOpName:"squaredDifference",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"Abs",dlOpName:"abs",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",dlOpName:"acos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",dlOpName:"asin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"atan",dlOpName:"atan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",dlOpName:"ceil",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"clip_value_min",dlParamName:"clipValueMin",type:"number"},{tfParamName:"clip_value_max",dlParamName:"clipValueMax",type:"number"}]},{tfOpName:"Cos",dlOpName:"cos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",dlOpName:"cosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",dlOpName:"elu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",dlOpName:"exp",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",dlOpName:"floor",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",dlOpName:"log",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",dlOpName:"neg",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",dlOpName:"relu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{dlParamName:"clipValueMin",type:"number",defaultValue:0},{dlParamName:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",dlOpName:"selu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",dlOpName:"sigmoid",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",dlOpName:"sin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",dlOpName:"sinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",dlOpName:"sqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",dlOpName:"rsqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",dlOpName:"square",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",dlOpName:"tan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",dlOpName:"tanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",dlOpName:"sign",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",dlOpName:"round",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",dlOpName:"expm1",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",dlOpName:"log1p",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",dlOpName:"softplus",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",dlOpName:"asinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",dlOpName:"acosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",dlOpName:"atanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",dlOpName:"erf",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"LoopCond",dlOpName:"loopCond",category:"control",params:[{tfInputIndex:0,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Switch",dlOpName:"switch",category:"control",params:[{tfInputIndex:0,dlParamName:"data",type:"tensor"},{tfInputIndex:1,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Merge",dlOpName:"merge",category:"control",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"Enter",dlOpName:"enter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"frame_name",dlParamName:"frameName",type:"string"},{tfParamName:"is_constant",dlParamName:"isConstant",type:"bool"}]},{tfOpName:"Exit",dlOpName:"exit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",dlOpName:"nextIteration",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",dlOpName:"tensorArray",category:"control",params:[{tfInputIndex:0,dlParamName:"size",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"},{tfParamName:"dynamic_size",dlParamName:"dynamicSize",type:"bool"},{tfParamName:"clear_after_read",dlParamName:"clearAfterRead",type:"bool"},{tfParamName:"identical_element_shapes",dlParamName:"identicalElementShapes",type:"bool"},{tfParamName:"tensor_array_name",dlParamName:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",dlOpName:"tensorArrayWrite",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",dlOpName:"tensorArrayRead",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",dlOpName:"tensorArrayGather",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",dlOpName:"tensorArrayScatter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",dlOpName:"tensorArrayConcat",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape_except0",dlParamName:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",dlOpName:"tensorArraySplit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"tensor",type:"tensor"},{tfInputIndex:2,dlParamName:"lengths",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",dlOpName:"tensorArraySize",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",dlOpName:"tensorArrayClose",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"AvgPool",dlOpName:"avgPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",dlOpName:"maxPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",dlOpName:"conv1d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"stride",dlParamName:"stride",type:"number"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NWC"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"dilation",dlParamName:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",dlOpName:"conv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"useCudnnOnGpu",dlParamName:"useCudnnOnGpu",type:"bool"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"Conv2DBackpropInput",dlOpName:"conv2dTranspose",category:"convolution",params:[{tfInputIndex:2,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfInputIndex:0,dlParamName:"outputShape",type:"number[]"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"Fill",dlOpName:"fill",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfInputIndex:1,dlParamName:"value",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",dlOpName:"linspace",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"num",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",dlOpName:"oneHot",category:"creation",params:[{tfInputIndex:0,dlParamName:"indices",type:"tensor"},{tfInputIndex:1,dlParamName:"depth",type:"number"},{tfInputIndex:2,dlParamName:"onValue",type:"number",defaultValue:1},{tfInputIndex:3,dlParamName:"offValue",type:"number",defaultValue:0},{tfParamName:"axis",dlParamName:"axis",type:"number",notSupported:!0},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",dlOpName:"ones",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",dlOpName:"onesLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",dlOpName:"randomUniform",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"minval",dlParamName:"minval",type:"number",defaultValue:0},{tfParamName:"maxval",dlParamName:"maxval",type:"number",defaultValue:1},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"seed",dlParamName:"seed",type:"number",defaultValue:0},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",dlOpName:"range",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"step",type:"number",defaultValue:0},{tfParamName:"Tidx",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"truncatedNormal",dlOpName:"truncatedNormal",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"means",dlParamName:"mean",type:"number",defaultValue:0},{tfParamName:"stddev",dlParamName:"stdDev",type:"number",defaultValue:1},{tfParamName:"seed",dlParamName:"seed",type:"number"},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",dlOpName:"zeros",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",dlOpName:"zerosLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"NonMaxSuppressionV2",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"},{tfInputIndex:4,dlParamName:"scoreThreshold",type:"number"}]},{tfOpName:"Where",dlOpName:"whereAsync",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"TopKV2",dlOpName:"topK",category:"evaluation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"k",type:"number"},{tfParamName:"sorted",dlParamName:"sorted",type:"bool"}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"PlaceholderWithDefault",dlOpName:"placeholder",category:"graph",params:[{tfInputIndex:0,dlParamName:"default",type:"tensor"},{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",dlOpName:"placeholder",category:"graph",params:[{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Const",dlOpName:"const",category:"graph"},{tfOpName:"Identity",dlOpName:"identity",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Snapshot",dlOpName:"snapshot",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Rank",dlOpName:"rank",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Size",dlOpName:"size",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Shape",dlOpName:"shape",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Print",dlOpName:"print",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfInputParamLength:1,dlParamName:"data",type:"tensors"},{tfParamName:"message",dlParamName:"message",type:"string"},{tfParamName:"first_n",dlParamName:"firstN",type:"number",notSupprted:!0},{tfParamName:"summarize",dlParamName:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",dlOpName:"noop",category:"graph",params:[]},{tfOpName:"StopGradient",dlOpName:"stopGradient",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",dlOpName:"fakeQuantWithMinMaxVars",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"min",dlParamName:"min",type:"number"},{tfParamName:"max",dlParamName:"max",type:"number"}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"ResizeBilinear",dlOpName:"resizeBilinear",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",dlOpName:"resizeNearestNeighbor",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"Equal",dlOpName:"equal",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",dlOpName:"notEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",dlOpName:"greater",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",dlOpName:"greaterEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"
},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",dlOpName:"less",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",dlOpName:"lessEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",dlOpName:"logicalAnd",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",dlOpName:"logicalNot",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",dlOpName:"logicalOr",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",dlOpName:"where",category:"logical",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfInputIndex:1,dlParamName:"a",type:"tensor"},{tfInputIndex:2,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"MatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"transpose_a",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"transpose_b",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",dlOpName:"transpose",category:"matrices",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"perm",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"FusedBatchNorm",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",dlOpName:"localResponseNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"depth_radius",dlParamName:"radius",type:"number",defaultValue:5},{tfParamName:"bias",dlParamName:"bias",type:"number",defaultValue:1},{tfParamName:"alpha",dlParamName:"alpha",type:"number",defaultValue:1},{tfParamName:"beta",dlParamName:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",dlOpName:"softmax",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"Max",dlOpName:"max",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Mean",dlOpName:"mean",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Min",dlOpName:"min",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Sum",dlOpName:"sum",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"All",dlOpName:"all",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Any",dlOpName:"any",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",dlOpName:"argMax",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ArgMin",dlOpName:"argMin",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"ConcatV2",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:-1,dlParamName:"axis",type:"number"}]},{tfOpName:"Concat",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:1,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:0,dlParamName:"axis",type:"number"}]},{tfOpName:"GatherV2",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ReverseV2",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"Slice",dlOpName:"slice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"size",type:"number[]"}]},{tfOpName:"StridedSlice",dlOpName:"stridedSlice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"end",type:"number[]"},{tfInputIndex:3,dlParamName:"strides",type:"number[]"},{tfParamName:"begin_mask",dlParamName:"beginMask",type:"number",defaultValue:0},{tfParamName:"end_mask",dlParamName:"endMask",type:"number",defaultValue:0},{tfParamName:"new_axis_mask",dlParamName:"newAxisMask",type:"number",defaultValue:0},{tfParamName:"ellipsis_mask",dlParamName:"ellipsisMask",type:"number",defaultValue:0},{tfParamName:"shrink_axis_mask",dlParamName:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",dlOpName:"stack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",dlOpName:"unstack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"num",dlParamName:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",dlOpName:"tile",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"reps",type:"number[]"}]},{tfOpName:"Split",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"axis",type:"number",defaultValue:0},{tfInputIndex:1,dlParamName:"x",type:"tensor"},{tfParamName:"num_split",dlParamName:"numOrSizeSplits",type:"number",defaultValue:1}]}]},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.json=[{tfOpName:"Cast",dlOpName:"cast",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"SrcT",dlParamName:"sdtype",type:"dtype",notSupported:!0},{tfParamName:"DstT",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",dlOpName:"expandDims",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfParamNameDeprecated:"dim",dlParamName:"axis",type:"number"}]},{tfOpName:"Pad",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfParamName:"constant_value",dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfInputIndex:2,dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",dlOpName:"reshape",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"shape",type:"number[]"}]},{tfOpName:"Squeeze",dlOpName:"squeeze",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"axis",tfParamNameDeprecated:"squeeze_dims",dlParamName:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",dlOpName:"spaceToBatchND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",dlOpName:"batchToSpaceND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"crops",type:"number[]"}]}]},function(e,t,n){"use strict";function r(e,t,n){switch(e.category){case"arithmetic":return a.executeOp(e,t,n);case"basic_math":return o.executeOp(e,t,n);case"control":return i.executeOp(e,t,n);case"convolution":return s.executeOp(e,t,n);case"creation":return u.executeOp(e,t,n);case"dynamic":return l.executeOp(e,t,n);case"evaluation":return c.executeOp(e,t,n);case"image":return h.executeOp(e,t,n);case"graph":return p.executeOp(e,t,n);case"logical":return d.executeOp(e,t,n);case"matrices":return f.executeOp(e,t,n);case"normalization":return m.executeOp(e,t,n);case"reduction":return g.executeOp(e,t,n);case"slice_join":return v.executeOp(e,t,n);case"transformation":return y.executeOp(e,t,n);default:throw TypeError("Node type "+e.op+" is not implemented")}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(394),o=n(395),i=n(396),s=n(397),u=n(398),l=n(399),c=n(400),p=n(401),h=n(402),d=n(403),f=n(404),m=n(405),g=n(406),v=n(407),y=n(408);t.executeOp=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(161),a=n(14),o=n(409),i=n(410),s=n(411),u=n(412),l=n(413),c=n(414),p=n(415),h=n(416),d=n(417),f=n(418),m=n(419),g=n(420),v=n(421),y=n(422),b=n(423),x=["Switch","Merge","Enter","Exit","NextIteration"],w=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"],S=function(){function e(){var e=[o,i,s,u,l,c,p,f,d,h,m,g,v,y,b],t=[].concat.apply([],e.map(function(e){return e.json}));this.opMappers=t.reduce(function(e,t){return e[t.tfOpName]=t,e},{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.isControlFlow=function(e){return x.some(function(t){return t===e.op})},e.prototype.isDynamicShape=function(e){return w.some(function(t){return t===e.op})},e.prototype.transformGraph=function(e){var t=this,n=e.node,r=!1,o=!1,i=[],s=n.reduce(function(e,n){return e[n.name]=t.mapNode(n),t.isControlFlow(n)&&(r=!0),t.isDynamicShape(n)&&(o=!0),"Placeholder"===n.op&&i.push(e[n.name]),e},{}),u=[],l=[];return Object.keys(s).forEach(function(e){var t=s[e];t.inputNames.forEach(function(e){var n=a.getNodeNameAndIndex(e)[0];t.inputs.push(s[n]),s[n].children.push(t)}),0===t.inputs.length&&u.push(t)}),Object.keys(s).forEach(function(e){var t=s[e];0===t.children.length&&l.push(t)}),{nodes:s,inputs:u,outputs:l,placeholders:i,withControlFlow:r,withDynamicShape:o}},e.prototype.mapNode=function(e){var t=this,n=this.opMappers[e.op];if(void 0===n)throw new Error("Tensorflow Op is not supported: "+e.op);var r={name:e.name,op:n.dlOpName,category:n.category,inputNames:(e.input||[]).map(function(e){return e.startsWith("^")?e.substr(1):e}),inputs:[],children:[],params:{}};return n.params&&(r.params=n.params.reduce(function(n,r){var a=r.tfInputIndex,o=r.tfInputParamLength,i=r.type,s=void 0;if(void 0===a)switch(r.type){case"string":s=t.getStringParam(e.attr,r.tfParamName,r.defaultValue),void 0===s&&r.tfParamNameDeprecated&&(s=t.getStringParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number":s=t.getNumberParam(e.attr,r.tfParamName,r.defaultValue),void 0===s&&r.tfParamNameDeprecated&&(s=t.getNumberParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number[]":s=t.getNumericArrayParam(e.attr,r.tfParamName,r.defaultValue),void 0===s&&r.tfParamNameDeprecated&&(s=t.getNumericArrayParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"bool":s=t.getBoolParam(e.attr,r.tfParamName,r.defaultValue),void 0===s&&r.tfParamNameDeprecated&&(s=t.getBoolParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"shape":s=t.getTensorShapeParam(e.attr,r.tfParamName,r.defaultValue),void 0===s&&r.tfParamNameDeprecated&&(s=t.getTensorShapeParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"dtype":s=t.getDtypeParam(e.attr,r.tfParamName,r.defaultValue),void 0===s&&r.tfParamNameDeprecated&&(s=t.getDtypeParam(e.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+r.type+" for op: "+e.op)}return n[r.dlParamName]={value:s,inputIndex:a,type:i,inputParamLength:o},n},{})),r},e.prototype.getStringParam=function(e,t,n,r){void 0===r&&(r=!1);var a=e[t];if(void 0!==a){var o=String.fromCharCode.apply(null,a.s);return r?o:o.toLowerCase()}return n},e.prototype.getBoolParam=function(e,t,n){var r=e[t];return r?r.b:n},e.prototype.getNumberParam=function(e,t,n){var r=e[t],a=r?r[r.value]:n;return"number"==typeof a?a:a.toInt()},e.prototype.getDtypeParam=function(e,t,n){var a=e[t];if(a&&a.type)switch(a.type){case r.tensorflow.DataType.DT_FLOAT:return"float32";case r.tensorflow.DataType.DT_INT32:return"int32";case r.tensorflow.DataType.DT_BOOL:return"bool";default:return n}return n},e.prototype.getTensorShapeParam=function(e,t,n){var r=e[t];return r&&r.shape?r.shape.dim.map(function(e){return"number"==typeof e.size?e.size:e.size.toInt()}):n},e.prototype.getNumericArrayParam=function(e,t,n){var r=e[t];return r?(r.list.f&&r.list.f.length?r.list.f:r.list.i).map(function(e){return"number"==typeof e?e:e.toInt()}):n},e}();t.OperationMapper=S},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="0.5.9";t.version=n},function(e,t,n){(function(e){"use strict";function n(){return new Promise(function(e){return r(function(){return e()})})}Object.defineProperty(t,"__esModule",{value:!0});var r="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:e;t.nextFrame=n}).call(t,n(596).setImmediate)},function(e,t){"use strict";function n(){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=n},function(e,t,n){"use strict";function r(e){var t=p.makeOnesTypedArray(p.sizeFromShape(e),"float32");return u.Tensor.make(e,{values:t})}var a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var i=n(494),s=n(495),u=n(18),l=n(76),c=n(2),p=n(2),h=function(){function e(e,t,n){this.backend=e,this.safeMode=t,this.debugMode=n,this.registeredVariables={},this.refCounter=new WeakMap,this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.gradientScopeCount=0,this.customGradientDepth=0,this.keepTensors=new Set,this.activeScope={track:[],name:"default scope"},this.scopeStack=[this.activeScope],this.profiler=new i.Profiler(e)}return e.prototype.tidy=function(e,t,n){var r=this;void 0===n&&(n=!1);var a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}var o;return this.scopedRun(function(){return r.startScope(a,n)},function(){return r.endScope(o,n)},function(){return o=t(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o})},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.runKernel=function(e,t,n){var r,a=this,o=[],i=function(e){return o.push(e),e},s=this.activeScope.name;if(this.scopedRun(function(){return a.customGradientDepth++},function(){return a.customGradientDepth--},function(){r=a.debugMode()?a.profiler.profileKernel(s,function(){return e(a.backend,i)}):e(a.backend,i)}),this.shouldRecord()){var u={id:this.nextTapeNodeId++,name:s,inputs:t,outputs:Array.isArray(r)?r:[r]};null!=n&&(u.gradient=function(e){return n(e,o)}),this.activeTape.push(u)}return r},e.prototype.registerTensor=function(e){var t=this.refCounter.has(e.dataId)?this.refCounter.get(e.dataId):0;this.numTensors++,0===t&&(this.numDataBuffers++,"complex64"!==e.dtype&&(this.numBytes+=c.sizeFromShape(e.shape)*c.bytesPerElement(e.dtype)),this.backend.register(e.dataId,e.shape,e.dtype)),this.refCounter.set(e.dataId,t+1),e instanceof u.Variable||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered");this.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.refCounter.has(e.dataId)){this.keepTensors.has(e.id)&&this.keepTensors.delete(e.id),this.numTensors--;var t=this.refCounter.get(e.dataId);t<=1?(this.refCounter.delete(e.dataId),this.backend.disposeData(e.dataId),this.numDataBuffers--,"complex64"!==e.dtype&&(this.numBytes-=c.sizeFromShape(e.shape)*c.bytesPerElement(e.dtype))):this.refCounter.set(e.dataId,t-1)}},e.prototype.disposeVariables=function(){for(var e in this.registeredVariables){var t=this.registeredVariables[e];this.disposeTensor(t),delete this.registeredVariables[e]}},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.numTensors,e.numDataBuffers=this.numDataBuffers,e.numBytes=this.numBytes,e},e.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},e.prototype.addTapeNode=function(e,t,n){var r={};e.forEach(function(e,t){r[t]=e});var a=function(e){var t=n(e),r={};return t.forEach(function(e,t){r[t]=function(){return e}}),r},o={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:r,outputs:[t],gradient:a};this.activeTape.push(o)},e.prototype.keep=function(e){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return this.keepTensors.add(e.id),e},e.prototype.startScope=function(e,t){void 0===t&&(t=!1),t&&0===this.gradientScopeCount&&(this.activeTape=[]),t&&this.gradientScopeCount++;var n={track:[],name:"unnamed scope"};e&&(n.name=e),this.scopeStack.push(n),this.activeScope=n},e.prototype.endScope=function(e,t){var n=this;void 0===t&&(t=!1),t&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var r=new Set(this.keepTensors),a=l.getTensorsInContainer(e);a.forEach(function(e){return r.add(e.id)});for(var o=0;o<this.activeScope.track.length;o++){var i=this.activeScope.track[o];r.has(i.id)||(null!=this.activeTape?a.push(i):i.dispose())}var s=this.scopeStack.pop();this.activeScope=0===this.scopeStack.length?{track:[],name:"default scope"}:this.scopeStack[this.scopeStack.length-1],a.forEach(function(e){!n.keepTensors.has(e.id)&&l.isTensorInList(e,s.track)&&n.track(e)})},e.prototype.gradients=function(e,t,n,a){var o=this;return void 0===a&&(a=!1),c.assert(t.length>0,"gradients() received an empty list of xs."),this.tidy("gradients",function(){var i=e();c.assert(i instanceof u.Tensor,"The result y returned by f() must be a tensor.");var l=s.getFilteredNodesXToY(o.activeTape,t,i);if(!a&&0===l.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var p={};p[i.id]=null==n?r(i.shape):n,s.backpropagateGradients(p,l);var h=t.map(function(e){return p[e.id]});return{value:i,grads:h}},!0)},e.prototype.customGrad=function(e){var t=this;return c.assert(c.isFunction(e),"The f passed in customGrad(f) must be a function."),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];c.assert(n.every(function(e){return e instanceof u.Tensor}),"The args passed in customGrad(f)(x1, x2,...) must all be tensors");var a,o;if(t.scopedRun(function(){return t.customGradientDepth++},function(){return t.customGradientDepth--},function(){var r=!0;o=t.tidy(e.name,function(){var t=e.apply(void 0,n),r=t.value,o=t.gradFunc;return c.assert(r instanceof u.Tensor,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),c.assert(c.isFunction(o),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),a=o,r},r)}),t.shouldRecord()){var i=function(e){var t=a(e),r=Array.isArray(t)?t:[t];return c.assert(r.length===n.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),c.assert(r.every(function(e){return e instanceof u.Tensor}),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),r};t.addTapeNode(n,o,i)}return o}},e.prototype.write=function(e,t){this.backend.write(e,t)},e.prototype.readSync=function(e){return this.backend.readSync(e)},e.prototype.read=function(e){return this.backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return a(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=p.now(),[4,this.backend.time(e)];case 1:return n=r.sent(),n.wallMs=p.now()-t,[2,n]}})})},e.prototype.track=function(e){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(e),e},e}();t.Engine=h},function(e,t){"use strict";function n(e,t){var n;try{n=c(e,t)}catch(e){return!1}return null!=n&&(p(n),!0)}function r(e,t){if(0===e)return 0;var n,r=c(e,t);return n=l(r,"EXT_disjoint_timer_query_webgl2")&&2===e?2:l(r,"EXT_disjoint_timer_query")?1:0,null!=r&&p(r),n}function a(e,t){if(0===e)return!1;var n=c(e,t);if(1===e){if(!l(n,"OES_texture_float"))return!1}else if(!l(n,"EXT_color_buffer_float"))return!1;var r=h(n,e);return p(n),r}function o(e,t){if(0===e)return!1;var n=c(e,t);if(1===e){if(!l(n,"OES_texture_float"))return!1;if(!l(n,"WEBGL_color_buffer_float"))return!1}else if(!l(n,"EXT_color_buffer_float"))return!1;var r=h(n,e);return p(n),r}function i(e,t){if(2!==e)return!1;var n=c(e,t),r=null!=n.fenceSync;return p(n),r}function s(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}function u(){var e={};if("undefined"==typeof window||"undefined"==typeof window.location)return e;var n=d(window.location.search);if(g in n){var r={},a=n[g].split(",");a.forEach(function(e){var t=e.split(":"),n=t[0],a=t[1];r[n]=a}),t.URL_PROPERTIES.forEach(function(t){t.name in r&&(console.log("Setting feature override from URL "+t.name+": "+r[t.name]),t.type===m.NUMBER?e[t.name]=+r[t.name]:t.type===m.BOOLEAN?e[t.name]="true"===r[t.name]:t.type===m.STRING?e[t.name]=r[t.name]:console.warn("Unknown URL param: "+t.name+"."))})}return e}function l(e,t){var n=e.getExtension(t);return null!=n}function c(e,t){if(0===e||!t)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=document.createElement("canvas");return 1===e?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}function p(e){if(null!=e){var t=e.getExtension("WEBGL_lose_context");if(null==t)throw new Error("Extension WEBGL_lose_context not supported on this browser.");t.loseContext()}}function h(e,t){var n=e.createFramebuffer(),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=2===t?e.RGBA32F:e.RGBA;e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,e.RGBA,e.FLOAT,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),o}function d(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return f(t,n[0],n[1]),n.join("=")}),t}function f(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}Object.defineProperty(t,"__esModule",{value:!0});var m;!function(e){e[e.NUMBER=0]="NUMBER",e[e.BOOLEAN=1]="BOOLEAN",e[e.STRING=2]="STRING"}(m=t.Type||(t.Type={})),t.URL_PROPERTIES=[{name:"DEBUG",type:m.BOOLEAN},{name:"IS_BROWSER",type:m.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:m.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:m.BOOLEAN},{name:"WEBGL_VERSION",type:m.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:m.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:m.BOOLEAN},{name:"WEBGL_FENCE_API_ENABLED",type:m.BOOLEAN},{name:"BACKEND",type:m.STRING},{name:"EPSILON",type:m.NUMBER}],t.isWebGLVersionEnabled=n,t.getWebGLDisjointQueryTimerVersion=r,t.isRenderToFloatTextureEnabled=a,t.isDownloadFloatTextureEnabled=o,t.isWebGLFenceEnabled=i,t.isChrome=s;var g="tfjsflags";t.getFeaturesFromURL=u,t.getQueryParams=d},function(e,t,n){"use strict";function r(e){return void 0===e&&(e="model"),new d(e)}function a(e){return new f(e)}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),
throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),u=n(66),l=n(67),c="model",p=".json",h=".weights.bin",d=function(){function e(t){if(!s.ENV.get("IS_BROWSER"))throw new Error("triggerDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t=c),this.modelTopologyFileName=t+p,this.weightDataFileName=t+h}return e.prototype.save=function(e){return o(this,void 0,void 0,function(){var t,n,r,a,o,s;return i(this,function(i){if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),e.modelTopology instanceof ArrayBuffer)throw new Error("DownloadTrigger.save() does not support saving model topology in binary formats yet.");return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,weightsManifest:n},a=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor,o.download=this.modelTopologyFileName,o.href=a,o.click(),null!=e.weightData&&(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor,s.download=this.weightDataFileName,s.href=t,s.click()),[2,{modelArtifactsInfo:u.getModelArtifactsInfoForJSON(e)}]})})},e.URL_SCHEME="downloads://",e}();t.BrowserDownloads=d;var f=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return o(this,void 0,void 0,function(){var e,t,n=this;return i(this,function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise(function(r,a){var o=new FileReader;o.onload=function(o){var i=JSON.parse(o.target.result),s=i.modelTopology;if(null==s)return void a(new Error("modelTopology field is missing from file "+e.name));0===t.length&&r({modelTopology:s});var l=i.weightsManifest;if(null==l)return void a(new Error("weightManifest field is missing from file "+e.name));var c;try{c=n.checkManifestAndWeightFiles(l,t)}catch(e){return void a(e)}var p=[],h=[],d=[];l.forEach(function(e){e.paths.forEach(function(e){h.push(e),d.push(null)}),p.push.apply(p,e.weights)}),l.forEach(function(e){e.paths.forEach(function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,a=h.indexOf(e);d[a]=n,d.indexOf(null)===-1&&r({modelTopology:s,weightSpecs:p,weightData:u.concatenateArrayBuffers(d)})},t.onerror=function(t){a("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(c[e])})})},o.onerror=function(t){a("Failed to read model topology and weights manifest JSON "+("from file '"+e.name+"'. BrowserFiles supports loading ")+"Keras-style tf.Model artifacts only.")},o.readAsText(e)})]})})},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map(function(e){return u.basename(e.name)}),a={},o=0,i=e;o<i.length;o++){var s=i[o];s.paths.forEach(function(e){var o=u.basename(e);if(n.indexOf(o)!==-1)throw new Error("Duplicate file basename found in weights manifest: "+("'"+o+"'"));if(n.push(o),r.indexOf(o)===-1)throw new Error("Weight file with basename '"+o+"' is not provided.");a[e]=t[r.indexOf(o)]})}if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest "+("("+n.length+") and the number of weight files provided ")+("("+t.length+")."));return a},e}();t.browserDownloadsRouter=function(e){return s.ENV.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(d.URL_SCHEME)?r(e.slice(d.URL_SCHEME.length)):null},l.IORouterRegistry.registerSaveRouter(t.browserDownloadsRouter),t.browserDownloads=r,t.browserFiles=a},function(e,t,n){"use strict";function r(e){return null!=e.match(p.URL_SCHEME_REGEX)}function a(e,t){return new p(e,t)}var o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),u=n(66),l=n(67),c=n(165),p=function(){function e(e,t){if(this.DEFAULT_METHOD="POST","undefined"==typeof fetch)throw new Error("browserHTTPRequest is not supported outside the web browser without a fetch polyfill.");if(s.assert(null!=e&&e.length>0,"URL path for browserHTTPRequest must not be null, undefined or empty."),Array.isArray(e)&&s.assert(2===e.length,"URL paths for browserHTTPRequest must have a length of 2, "+("(actual length is "+e.length+").")),this.path=e,null!=t&&null!=t.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t||{}}return e.prototype.save=function(e){return o(this,void 0,void 0,function(){var t,n,r,a;return i(this,function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit),t.body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,fetch(this.path,t)];case 1:if(a=o.sent(),200===a.status)return[2,{modelArtifactsInfo:u.getModelArtifactsInfoForJSON(e),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+(a.status+"."))}})})},e.prototype.load=function(){return o(this,void 0,void 0,function(){return i(this,function(e){return[2,Array.isArray(this.path)?this.loadBinaryModel():this.loadJSONModel()]})})},e.prototype.loadBinaryTopology=function(){return o(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,fetch(this.path[0],this.requestInit)];case 1:return e=n.sent(),[4,e.arrayBuffer()];case 2:return[2,n.sent()];case 3:throw t=n.sent(),new Error(this.path[0]+" not found. "+t);case 4:return[2]}})})},e.prototype.loadBinaryModel=function(){return o(this,void 0,void 0,function(){var e,t,n,r,a,o,s,u,l;return i(this,function(i){switch(i.label){case 0:return e=this.loadBinaryTopology(),[4,fetch(this.path[1],this.requestInit)];case 1:return t=i.sent(),[4,Promise.all([e,t])];case 2:return n=i.sent(),r=n[0],a=n[1],[4,a.json()];case 3:return o=i.sent(),null==o?[3,5]:[4,this.loadWeights(o)];case 4:l=i.sent(),s=l[0],u=l[1],i.label=5;case 5:return[2,{modelTopology:r,weightSpecs:s,weightData:u}]}})})},e.prototype.loadJSONModel=function(){return o(this,void 0,void 0,function(){var e,t,n,r,a,o,s,u;return i(this,function(i){switch(i.label){case 0:return[4,fetch(this.path,this.requestInit)];case 1:return e=i.sent(),[4,e.json()];case 2:if(t=i.sent(),n=t.modelTopology,r=t.weightsManifest,null==n&&null==r)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==r?[3,4]:(s=t.weightsManifest,[4,this.loadWeights(s)]);case 3:u=i.sent(),a=u[0],o=u[1],i.label=4;case 4:return[2,{modelTopology:n,weightSpecs:a,weightData:o}]}})})},e.prototype.loadWeights=function(e){return o(this,void 0,void 0,function(){var t,n,r,a,o,s,l,p,h;return i(this,function(i){switch(i.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=[],r=0,a=e;r<a.length;r++)o=a[r],n.push.apply(n,o.weights);return s=t.substring(0,t.lastIndexOf("/")),s.endsWith("/")||(s+="/"),l=[],e.forEach(function(e){e.paths.forEach(function(e){l.push(s+e)})}),p=[n],h=u.concatenateArrayBuffers,[4,c.loadWeightsAsArrayBuffer(l,this.requestInit)];case 1:return[2,p.concat([h.apply(void 0,[i.sent()])])]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();t.BrowserHTTPRequest=p,t.httpRequestRouter=function(e){if("undefined"==typeof fetch)return null;var t=!0;return(t=Array.isArray(e)?e.every(function(e){return r(e)}):r(e))?a(e):null},l.IORouterRegistry.registerSaveRouter(t.httpRequestRouter),l.IORouterRegistry.registerLoadRouter(t.httpRequestRouter),t.browserHTTPRequest=a},function(e,t,n){"use strict";function r(){return u(this,void 0,void 0,function(){var e;return l(this,function(t){return e=a(),[2,new Promise(function(t,n){var r=e.deleteDatabase(f);r.onsuccess=function(){return t()},r.onerror=function(e){return n(e)}})]})})}function a(){if(!c.ENV.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function o(e){var t=e.result;t.createObjectStore(g,{keyPath:"modelPath"}),t.createObjectStore(v,{keyPath:"modelPath"})}function i(e){return new y(e)}function s(e){return e.startsWith(y.URL_SCHEME)?e.slice(y.URL_SCHEME.length):e}var u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(4),p=n(66),h=n(124),d=n(67),f="tensorflowjs",m=1,g="models_store",v="model_info_store";t.deleteDatabase=r;var y=function(){function e(e){if(this.indexedDB=a(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return u(this,void 0,void 0,function(){return l(this,function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},e.prototype.load=function(){return u(this,void 0,void 0,function(){return l(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(e,t){var n=this;return new Promise(function(e,r){var a=n.indexedDB.open(f,m);a.onupgradeneeded=function(){return o(a)},a.onsuccess=function(){var o=a.result;if(null==t){var i=o.transaction(g,"readonly"),s=i.objectStore(g),u=s.get(n.modelPath);u.onsuccess=function(){return null==u.result?(o.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."))):void e(u.result.modelArtifacts)},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){return o.close()}}else{var l,c=p.getModelArtifactsInfoForJSON(t),h=o.transaction(v,"readwrite"),d=h.objectStore(v),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){l=o.transaction(g,"readwrite");var a=l.objectStore(g),i=a.put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});i.onsuccess=function(){return e({modelArtifactsInfo:c})},i.onerror=function(e){d=h.objectStore(v);var t=d.delete(n.modelPath);t.onsuccess=function(){return o.close(),r(i.error)},t.onerror=function(e){return o.close(),r(i.error)}}},f.onerror=function(e){return o.close(),r(f.error)},h.oncomplete=function(){null==l?o.close():l.oncomplete=function(){return o.close()}}}},a.onerror=function(e){return r(a.error)}})},e.URL_SCHEME="indexeddb://",e}();t.BrowserIndexedDB=y,t.indexedDBRouter=function(e){return c.ENV.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(y.URL_SCHEME)?i(e.slice(y.URL_SCHEME.length)):null},d.IORouterRegistry.registerSaveRouter(t.indexedDBRouter),d.IORouterRegistry.registerLoadRouter(t.indexedDBRouter),t.browserIndexedDB=i;var b=function(){function e(){this.indexedDB=a()}return e.prototype.listModels=function(){return u(this,void 0,void 0,function(){var e=this;return l(this,function(t){return[2,new Promise(function(t,n){var r=e.indexedDB.open(f,m);r.onupgradeneeded=function(){return o(r)},r.onsuccess=function(){var e=r.result,a=e.transaction(v,"readonly"),o=a.objectStore(v),i=o.getAll();i.onsuccess=function(){for(var e={},n=0,r=i.result;n<r.length;n++){var a=r[n];e[a.modelPath]=a.modelArtifactsInfo}t(e)},i.onerror=function(t){return e.close(),n(i.error)},a.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}})]})})},e.prototype.removeModel=function(e){return u(this,void 0,void 0,function(){var t=this;return l(this,function(n){return e=s(e),[2,new Promise(function(n,r){var a=t.indexedDB.open(f,m);a.onupgradeneeded=function(){return o(a)},a.onsuccess=function(){var t,o=a.result,i=o.transaction(v,"readwrite"),s=i.objectStore(v),u=s.get(e);u.onsuccess=function(){if(null==u.result)return o.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var a=s.delete(e),i=function(){t=o.transaction(g,"readwrite");var a=t.objectStore(g),i=a.delete(e);i.onsuccess=function(){return n(u.result.modelArtifactsInfo)},i.onerror=function(e){return r(u.error)}};a.onsuccess=i,a.onerror=function(e){return i(),o.close(),r(u.error)}},u.onerror=function(e){return o.close(),r(u.error)},i.oncomplete=function(){null==t?o.close():t.oncomplete=function(){return o.close()}}},a.onerror=function(e){return r(a.error)}})]})})},e}();if(t.BrowserIndexedDBManager=b,c.ENV.get("IS_BROWSER"))try{h.ModelStoreManagerRegistry.registerManager(y.URL_SCHEME,new b)}catch(e){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(433),n(435);var r=n(431);t.browserFiles=r.browserFiles;var a=n(432);t.browserHTTPRequest=a.browserHTTPRequest;var o=n(66);t.concatenateArrayBuffers=o.concatenateArrayBuffers,t.decodeWeights=o.decodeWeights,t.encodeWeights=o.encodeWeights,t.getModelArtifactsInfoForJSON=o.getModelArtifactsInfoForJSON;var i=n(436);t.fromMemory=i.fromMemory,t.withSaveHandler=i.withSaveHandler;var s=n(67),u=n(165);t.loadWeights=u.loadWeights;var l=s.IORouterRegistry.registerSaveRouter;t.registerSaveRouter=l;var c=s.IORouterRegistry.registerLoadRouter;t.registerLoadRouter=c;var p=s.IORouterRegistry.getSaveHandlers;t.getSaveHandlers=p;var h=s.IORouterRegistry.getLoadHandlers;t.getLoadHandlers=h;var d=n(124);t.copyModel=d.copyModel,t.listModels=d.listModels,t.moveModel=d.moveModel,t.removeModel=d.removeModel},function(e,t,n){"use strict";function r(){if(!c.ENV.get("IS_BROWSER")||"undefined"==typeof window.localStorage)throw new Error("purgeLocalStorageModels() cannot proceed because local storage is unavailable in the current environment.");for(var e=window.localStorage,t=[],n=0;n<e.length;++n){var r=e.key(n),a=g+m;if(r.startsWith(a)&&r.length>a.length){e.removeItem(r);var i=o(r);t.indexOf(i)===-1&&t.push(i)}}return t}function a(e){return{info:[g,e,v].join(m),topology:[g,e,y].join(m),weightSpecs:[g,e,b].join(m),weightData:[g,e,x].join(m)}}function o(e){var t=e.split(m);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(m)}function i(e){return e.startsWith(w.URL_SCHEME)?e.slice(w.URL_SCHEME.length):e}function s(e){return new w(e)}var u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},l=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var c=n(4),p=n(2),h=n(66),d=n(124),f=n(67),m="/",g="tensorflowjs_models",v="info",y="model_topology",b="weight_specs",x="weight_data";t.purgeLocalStorageArtifacts=r;var w=function(){function e(e){if(!c.ENV.get("IS_BROWSER")||"undefined"==typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=a(this.modelPath)}return e.prototype.save=function(e){return u(this,void 0,void 0,function(){var t,n,r,a;return l(this,function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=h.getModelArtifactsInfoForJSON(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,h.arrayBufferToBase64String(e.weightData)),[2,{modelArtifactsInfo:r}]}catch(e){for(a in this.keys)this.LS.removeItem(this.keys[a]);throw new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: "+("modelTopologyBytes="+r.modelTopologyBytes+", ")+("weightSpecsBytes="+r.weightSpecsBytes+", ")+("weightDataBytes="+r.weightDataBytes+"."))}return[2]})})},e.prototype.load=function(){return u(this,void 0,void 0,function(){var e,t,n,r,a;return l(this,function(o){if(e=JSON.parse(this.LS.getItem(this.keys.info)),null==e)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},n=JSON.parse(this.LS.getItem(this.keys.topology)),null==n)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,r=JSON.parse(this.LS.getItem(this.keys.weightSpecs)),null==r)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,a=this.LS.getItem(this.keys.weightData),null==a)throw new Error("In local storage, the binary weight values of model "+("'"+this.modelPath+"' are missing."));return t.weightData=h.base64StringToArrayBuffer(a),[2,t]})})},e.URL_SCHEME="localstorage://",e}();t.BrowserLocalStorage=w,t.localStorageRouter=function(e){return c.ENV.get("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(w.URL_SCHEME)?s(e.slice(w.URL_SCHEME.length)):null},f.IORouterRegistry.registerSaveRouter(t.localStorageRouter),f.IORouterRegistry.registerLoadRouter(t.localStorageRouter),t.browserLocalStorage=s;var S=function(){function e(){p.assert(c.ENV.get("IS_BROWSER"),"Current environment is not a web browser"),p.assert("undefined"!=typeof window.localStorage,"Current browser does not appear to support localStorage"),this.LS=window.localStorage}return e.prototype.listModels=function(){return u(this,void 0,void 0,function(){var e,t,n,r,a,i;return l(this,function(s){for(e={},t=g+m,n=m+v,r=0;r<this.LS.length;++r)a=this.LS.key(r),a.startsWith(t)&&a.endsWith(n)&&(i=o(a),e[i]=JSON.parse(this.LS.getItem(a)));return[2,e]})})},e.prototype.removeModel=function(e){return u(this,void 0,void 0,function(){var t,n;return l(this,function(r){if(e=i(e),t=a(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]})})},e}();if(t.BrowserLocalStorageManager=S,c.ENV.get("IS_BROWSER"))try{d.ModelStoreManagerRegistry.registerManager(w.URL_SCHEME,new S)}catch(e){}},function(e,t){"use strict";function n(e,t,n){return new s(e,t,n)}function r(e){return new u(e)}var a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t,n){this.modelTopology=e,this.weightSpecs=t,this.weightData=n}return e.prototype.load=function(){return o(this,void 0,void 0,function(){var e;return i(this,function(t){return e={},null!=this.modelTopology&&(e=a({modelTopology:this.modelTopology},e)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(e=a({weightSpecs:this.weightSpecs},e)),null!=this.weightData&&this.weightData.byteLength>0&&(e=a({weightData:this.weightData},e)),[2,e]})})},e}(),u=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return o(this,void 0,void 0,function(){return i(this,function(t){return[2,this.saveHandler(e)]})})},e}();t.fromMemory=n,t.withSaveHandler=r},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n(357),i=n(4),s=n(175),u=n(176),l=n(34),c=n(36),p=n(92),h=n(180),d=n(29),f=n(29),m=n(130),g=n(131),v=n(18),y=n(94),b=n(2),x=n(2),w=n(166),S=n(168),_=n(125),N=n(169),T=n(170),k=n(127),I=function(){function e(){this.blockSize=48,this.data=new WeakMap,this.firstUse=!0,i.ENV.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas"))}return e.prototype.register=function(e,t,n){if(this.firstUse&&(this.firstUse=!1,i.ENV.get("IS_NODE")&&s.warn("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,{dtype:n})},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null");this.throwIfNoData(e),this.data.get(e).values=t},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.fromPixels() can not be null");var n;if(i.ENV.get("IS_NODE")&&null==e.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=e.getContext)n=e.getContext("2d").getImageData(0,0,e.width,e.height).data;else if(e instanceof ImageData)n=e.data;else{if(!(e instanceof HTMLImageElement||e instanceof HTMLVideoElement))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+e.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=e.width,this.canvas.height=e.height,this.canvas.getContext("2d").drawImage(e,0,0,e.width,e.height),n=this.canvas.getContext("2d").getImageData(0,0,e.width,e.height).data}var r;if(4===t)r=new Int32Array(n);else{var a=e.width*e.height;r=new Int32Array(a*t);for(var o=0;o<a;o++)for(var s=0;s<t;++s)r[o*t+s]=n[4*o+s]}var u=[e.height,e.width,t];return f.tensor3d(r,u,"int32")},e.prototype.read=function(e){return r(this,void 0,void 0,function(){return a(this,function(t){return[2,this.readSync(e)]})})},e.prototype.readSync=function(e){this.throwIfNoData(e);var t=this.data.get(e),n=t.dtype,r=t.complexTensors;if("complex64"===n){var a=r.real.dataSync(),o=r.imag.dataSync();return S.mergeRealAndImagArrays(a,o)}return this.data.get(e).values},e.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},e.prototype.time=function(e){return r(this,void 0,void 0,function(){var t,n;return a(this,function(r){return t=x.now(),e(),n=x.now()-t,[2,{kernelMs:n}]})})},e.prototype.memory=function(){return{unreliable:!0}},e.prototype.throwIfNoData=function(e){if(!this.data.has(e))throw new Error("CPU backend: No data found for this tensor. Did you change your backend in the middle of the program? New backends can't use Tensors created with previous backends")},e.prototype.complex=function(e,t){var n=v.Tensor.make(e.shape,{},"complex64"),r=this.data.get(n.dataId);return r.complexTensors={real:i.ENV.engine.keep(e.clone()),imag:i.ENV.engine.keep(t.clone())},n},e.prototype.real=function(e){var t=this.data.get(e.dataId);return t.complexTensors.real.clone()},e.prototype.imag=function(e){var t=this.data.get(e.dataId);return t.complexTensors.imag.clone()},e.prototype.assertNotComplex=function(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(e){null!=e&&b.assert("complex64"!==e.dtype,t+" does not support complex64 tensors.")})},e.prototype.slice=function(e,t,n){this.assertNotComplex(e,"slice");for(var r=d.buffer(n,e.dtype),a=0;a<r.size;++a){var o=r.indexToLoc(a),i=o.map(function(e,n){return e+t[n]});r.set.apply(r,[e.get.apply(e,i)].concat(o))}return r.toTensor()},e.prototype.stridedSlice=function(e,t,n,r,a,o,i,s,u){this.assertNotComplex(e,"stridedSlice");var l=g.getStridedSlicedInfo(e.shape,t,n,r,a,o,i,s,u),c=l[0],p=l[1],h=l[2],f=p.filter(function(e,t){return h.indexOf(t)===-1});if(f.some(function(e){return 0===e}))return d.tensor([],f);for(var m=d.buffer(p,e.dtype),v=0;v<m.size;v++){for(var y=m.indexToLoc(v),b=new Array(y.length),x=0;x<b.length;x++)b[x]=y[x]*r[x]+c[x];m.set.apply(m,[e.get.apply(e,b)].concat(y))}return m.toTensor().reshape(f)},e.prototype.reverse=function(e,t){this.assertNotComplex(e,"reverse");for(var n=d.buffer(e.shape,e.dtype),r=e.buffer(),a=function(a){var o=n.indexToLoc(a),i=o.slice();t.forEach(function(t){return i[t]=e.shape[t]-1-i[t]}),n.set.apply(n,[r.get.apply(r,i)].concat(o))},o=0;o<n.size;o++)a(o);return n.toTensor()},e.prototype.concat=function(e,t){this.assertNotComplex(e,"concat");var n=e.map(function(e){var n=b.sizeFromShape(e.shape.slice(t));return e.as2D(-1,n)}),r=p.computeOutShape(n.map(function(e){return e.shape}),1),a=d.buffer(r,e[0].dtype).values;if(1===n[0].shape[0]){var o=0;n.forEach(function(e){a.set(e.dataSync(),o),o+=e.size})}else{var i=0;n.forEach(function(e){for(var t=e.dataSync(),n=0,o=0;o<e.shape[0];++o)for(var s=o*r[1]+i,u=0;u<e.shape[1];++u)a[s+u]=t[n++];i+=e.shape[1]})}var s=p.computeOutShape(e.map(function(e){return e.shape}),t);return f.tensor(a,s,e[0].dtype)},e.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),
this.multiply(d.scalar(-1),e)},e.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e+n,imag:t+r}}):this.broadcastedBinaryOp(e,t,y.upcastType(e.dtype,t.dtype),function(e,t){return e+t})},e.prototype.addN=function(e){this.assertNotComplex(e,"addN");for(var t=e.map(function(e){return e.dataSync()}),n=d.buffer(e[0].shape,e[0].dtype),r=n.values,a=0;a<e.length;a++)for(var o=t[a],i=0;i<r.length;i++)r[i]+=o[i];return n.toTensor()},e.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e-n,imag:t-r}}):this.broadcastedBinaryOp(e,t,y.upcastType(e.dtype,t.dtype),function(e,t){return e-t})},e.prototype.pow=function(e,t){return this.assertNotComplex([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.pow(e,t)})},e.prototype.batchMatMul=function(e,t,n,r){this.assertNotComplex([e,t],"matMul");for(var a=n?e.shape[1]:e.shape[2],o=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],s=e.shape[0],u=e.dataSync(),l=t.dataSync(),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],p=c[0],h=c[1],f=c[2],m=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],g=m[0],v=m[1],y=m[2],b=o*i,x=new Float32Array(s*b),w=this.blockSize,S=0;S<s;S++)for(var _=0;_<o;_+=w)for(var N=0;N<i;N+=w)for(var T=0;T<a;T+=w)for(var k=Math.min(_+w,o),I=Math.min(N+w,i),E=Math.min(T+w,a),A=_;A<k;A++)for(var P=N;P<I;P++){for(var C=0,O=T;O<E;O++)C+=u[S*p+A*h+O*f]*l[O*g+P*v+S*y];x[S*b+(A*i+P)]+=C}return d.tensor3d(x,[s,o,i])},e.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}):this.broadcastedBinaryOp(e,t,y.upcastType(e.dtype,t.dtype),function(e,t){return e*t})},e.prototype.realDivide=function(e,t){this.assertNotComplex([e,t],"realDivide");var n=function(e,t){return e/t},r="float32";return this.broadcastedBinaryOp(e,t,r,n)},e.prototype.floorDiv=function(e,t){this.assertNotComplex([e,t],"floorDiv");var n=function(e,t){return Math.floor(e/t)},r="int32";return this.broadcastedBinaryOp(e,t,r,n)},e.prototype.sum=function(e,t){this.assertNotComplex(e,"sum"),l.assertAxesAreInnerMostDims("sum",t,e.rank);for(var n=l.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=y.upcastType(e.dtype,"int32"),i=d.zeros(r,o),s=b.sizeFromShape(a),u=i.dataSync(),c=e.dataSync(),p=0;p<u.length;++p){for(var h=p*s,f=0,m=0;m<s;++m)f+=c[h+m];u[p]=f}return i},e.prototype.unsortedSegmentSum=function(e,t,n){this.assertNotComplex(e,"unsortedSegmentSum");for(var r=[],a=e.rank-t.rank,o=0;o<a;++o)t=t.expandDims(o+1);for(var o=0;o<n;++o){var i=d.scalar(o,"int32"),s=d.equal(i,t).asType("float32"),u=s.mul(e).sum(0);r.push(u)}return d.stack(r)},e.prototype.argMin=function(e,t){this.assertNotComplex(e,"argMin");var n=[t];l.assertAxesAreInnerMostDims("argMin",n,e.rank);for(var r=l.computeOutAndReduceShapes(e.shape,n),a=r[0],o=r[1],i=d.zeros(a,"int32"),s=b.sizeFromShape(o),u=i.dataSync(),c=e.dataSync(),p=0;p<u.length;++p){for(var h=p*s,f=c[h],m=0,g=0;g<s;++g){var v=c[h+g];v<f&&(f=v,m=g)}u[p]=m}return i},e.prototype.argMax=function(e,t){this.assertNotComplex(e,"argMax");var n=[t];l.assertAxesAreInnerMostDims("argMax",n,e.rank);for(var r=l.computeOutAndReduceShapes(e.shape,n),a=r[0],o=r[1],i=d.zeros(a,"int32"),s=b.sizeFromShape(o),u=i.dataSync(),c=e.dataSync(),p=0;p<u.length;++p){for(var h=p*s,f=c[h],m=0,g=0;g<s;++g){var v=c[h+g];v>f&&(f=v,m=g)}u[p]=m}return i},e.prototype.cumsum=function(e,t,n,r){if(this.assertNotComplex(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var a=y.upcastType(e.dtype,"int32"),o=d.zeros(e.shape,a),i=o.dataSync(),s=e.dataSync(),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var p=0;p<u;p++){var h=l(c,p);if(0===p)i[h]=n?0:s[h];else{var f=l(c,p-1);i[h]=n?s[f]+i[f]:s[h]+i[f]}}return o},e.prototype.equal=function(e,t){return this.assertNotComplex([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e===t?1:0})},e.prototype.notEqual=function(e,t){return this.assertNotComplex([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e!==t?1:0})},e.prototype.less=function(e,t){return this.assertNotComplex([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<t?1:0})},e.prototype.lessEqual=function(e,t){return this.assertNotComplex([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e<=t?1:0})},e.prototype.greater=function(e,t){return this.assertNotComplex([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>t?1:0})},e.prototype.greaterEqual=function(e,t){return this.assertNotComplex([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e>=t?1:0})},e.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot");for(var t=e.dataSync(),n=new Int32Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return v.Tensor.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.assertNotComplex([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e&&t})},e.prototype.logicalOr=function(e,t){return this.assertNotComplex([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",function(e,t){return e||t})},e.prototype.select=function(e,t,n){this.assertNotComplex([e,t,n],"select");for(var r=e.dataSync(),a=t.dataSync(),o=n.dataSync(),i=d.zeros(t.shape,y.upcastType(t.dtype,n.dtype)),s=i.dataSync(),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:t.shape[1],c=0;c<r.length;c++)for(var p=0;p<l;p++)1===r[c]?s[u++]=a[c]:s[u++]=o[c];return i},e.prototype.where=function(e){this.assertNotComplex([e],"where");var t=e.dataSync();return k.whereImpl(e.shape,t)},e.prototype.topk=function(e,t,n){this.assertNotComplex(e,"topk");var r=e.dataSync();return T.topkImpl(r,e.shape,e.dtype,t,n)},e.prototype.min=function(e,t){this.assertNotComplex(e,"min"),l.assertAxesAreInnerMostDims("min",t,e.rank);for(var n=l.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=d.zeros(r,e.dtype),i=b.sizeFromShape(a),s=o.dataSync(),u=e.dataSync(),c=0;c<s.length;++c){for(var p=c*i,h=u[p],f=0;f<i;++f){var m=u[p+f];m<h&&(h=m)}s[c]=h}return o},e.prototype.minimum=function(e,t){return this.assertNotComplex([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.min(e,t)})},e.prototype.mod=function(e,t){return this.assertNotComplex([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})},e.prototype.max=function(e,t){this.assertNotComplex(e,"max"),l.assertAxesAreInnerMostDims("max",t,e.rank);for(var n=l.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=d.zeros(r,e.dtype),i=b.sizeFromShape(a),s=o.dataSync(),u=e.dataSync(),c=0;c<s.length;++c){for(var p=c*i,h=u[p],f=0;f<i;++f){var m=u[p+f];m>h&&(h=m)}s[c]=h}return o},e.prototype.maximum=function(e,t){return this.assertNotComplex([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.max(e,t)})},e.prototype.all=function(e,t){this.assertNotComplex(e,"all"),l.assertAxesAreInnerMostDims("all",t,e.rank);for(var n=l.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=d.zeros(r,e.dtype),i=b.sizeFromShape(a),s=o.dataSync(),u=e.dataSync(),c=0;c<s.length;++c){for(var p=c*i,h=u[p],f=0;f<i;++f){var m=u[p+f];h=h&&m}s[c]=h}return o},e.prototype.any=function(e,t){this.assertNotComplex(e,"any"),l.assertAxesAreInnerMostDims("any",t,e.rank);for(var n=l.computeOutAndReduceShapes(e.shape,t),r=n[0],a=n[1],o=d.zeros(r,e.dtype),i=b.sizeFromShape(a),s=o.dataSync(),u=e.dataSync(),c=0;c<s.length;++c){for(var p=c*i,h=u[p],f=0;f<i;++f){var m=u[p+f];h=h||m}s[c]=h}return o},e.prototype.squaredDifference=function(e,t){return this.assertNotComplex([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){var n=e-t;return n*n})},e.prototype.ceil=function(e){this.assertNotComplex(e,"ceil");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return v.Tensor.make(e.shape,{values:n})},e.prototype.floor=function(e){this.assertNotComplex(e,"floor");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return v.Tensor.make(e.shape,{values:n})},e.prototype.sign=function(e){this.assertNotComplex(e,"x");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return v.Tensor.make(e.shape,{values:n})},e.prototype.round=function(e){this.assertNotComplex(e,"round");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=Math.floor(t[r]);t[r]-a<.5?n[r]=Math.floor(t[r]):t[r]-a>.5?n[r]=Math.ceil(t[r]):a%2===0?n[r]=a:n[r]=a+1}return v.Tensor.make(e.shape,{values:n})},e.prototype.exp=function(e){this.assertNotComplex(e,"exp");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return v.Tensor.make(e.shape,{values:n})},e.prototype.expm1=function(e){this.assertNotComplex(e,"expm1");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return v.Tensor.make(e.shape,{values:n})},e.prototype.log=function(e){this.assertNotComplex(e,"log");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log(a)}return v.Tensor.make(e.shape,{values:n})},e.prototype.log1p=function(e){this.assertNotComplex(e,"log1p");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.log1p(a)}return v.Tensor.make(e.shape,{values:n})},e.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=Math.sqrt(a)}return v.Tensor.make(e.shape,{values:n})},e.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=1/Math.sqrt(a)}return v.Tensor.make(e.shape,{values:n})},e.prototype.square=function(e){this.assertNotComplex(e,"square");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r){var a=t[r];n[r]=a*a}return v.Tensor.make(e.shape,{values:n})},e.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal");for(var t=e.dataSync(),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return v.Tensor.make(e.shape,{values:n})},e.prototype.relu=function(e){this.assertNotComplex(e,"relu");for(var t=d.zeros(e.shape,e.dtype),n=t.dataSync(),r=e.dataSync(),a=0;a<r.length;++a)n[a]=Math.max(0,r[a]);return t},e.prototype.elu=function(e){this.assertNotComplex(e,"elu");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r){var a=n[r];a>=0?t[r]=a:t[r]=Math.exp(a)-1}return v.Tensor.make(e.shape,{values:t})},e.prototype.eluDer=function(e,t){this.assertNotComplex([e,t],"eluDer");for(var n=new Float32Array(t.size),r=t.dataSync(),a=e.dataSync(),o=0;o<r.length;++o){var i=r[o];i>=1?n[o]=a[o]:n[o]=a[o]*(i+1)}return v.Tensor.make(t.shape,{values:n})},e.prototype.selu=function(e){this.assertNotComplex(e,"selu");for(var t=m.SELU_SCALEALPHA,n=m.SELU_SCALE,r=new Float32Array(e.size),a=e.dataSync(),o=0;o<a.length;++o){var i=a[o];i>=0?r[o]=n*i:r[o]=t*(Math.exp(i)-1)}return v.Tensor.make(e.shape,{values:r})},e.prototype.clip=function(e,t,n){this.assertNotComplex(e,"clip");for(var r=new Float32Array(e.size),a=e.dataSync(),o=0;o<a.length;++o){var i=a[o];r[o]=i>n?n:i<t?t:i}return v.Tensor.make(e.shape,{values:r})},e.prototype.abs=function(e){this.assertNotComplex(e,"abs");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.int=function(e){this.assertNotComplex(e,"int");for(var t=new Int32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=n[r];return v.Tensor.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return v.Tensor.make(e.shape,{values:t})},e.prototype.softplus=function(e){this.assertNotComplex(e,"softplus");for(var t=1.1920928955078125e-7,n=Math.log(t)+2,r=new Float32Array(e.size),a=e.dataSync(),o=0;o<a.length;++o){var i=a[o]>-n,s=a[o]<n,u=Math.exp(a[o]),l=void 0;l=s?u:i?a[o]:Math.log(1+u),r[o]=l}return v.Tensor.make(e.shape,{values:r})},e.prototype.sin=function(e){this.assertNotComplex(e,"sin");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.cos=function(e){this.assertNotComplex(e,"cos");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.tan=function(e){this.assertNotComplex(e,"tan");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.asin=function(e){this.assertNotComplex(e,"asin");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.acos=function(e){this.assertNotComplex(e,"acos");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.atan=function(e){this.assertNotComplex(e,"atan");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.atan2=function(e,t){return this.assertNotComplex([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,function(e,t){return Math.atan2(e,t)})},e.prototype.sinh=function(e){this.assertNotComplex(e,"sinh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.cosh=function(e){this.assertNotComplex(e,"cosh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.tanh=function(e){this.assertNotComplex(e,"tanh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=b.tanh(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.asinh=function(e){this.assertNotComplex(e,"asinh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.acosh=function(e){this.assertNotComplex(e,"acosh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.atanh=function(e){this.assertNotComplex(e,"atanh");for(var t=new Float32Array(e.size),n=e.dataSync(),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return v.Tensor.make(e.shape,{values:t})},e.prototype.erf=function(e){this.assertNotComplex(e,"erf");for(var t=new Float32Array(e.size),n=e.dataSync(),r=h.ERF_P,a=h.ERF_A1,o=h.ERF_A2,i=h.ERF_A3,s=h.ERF_A4,u=h.ERF_A5,l=0;l<n.length;++l){var c=n[l],p=1/(1+r*c);t[l]=1-((((u*p+s)*p+i)*p+o)*p+a)*p*Math.exp(-c*c)}return v.Tensor.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0),this.assertNotComplex(e,"step");for(var n=new Float32Array(e.size),r=e.dataSync(),a=0;a<r.length;++a){var o=r[a];isNaN(o)?n[a]=NaN:n[a]=o>0?1:t}return v.Tensor.make(e.shape,{values:n})},e.prototype.conv2d=function(e,t,n){this.assertNotComplex([e,t],"conv2d");for(var r=n.filterHeight,a=n.filterWidth,o=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=d.buffer(n.outShape,e.dtype),c=e.dataSync(),p=t.dataSync(),h=l.values,f=0;f<n.batchSize;++f)for(var m=f*e.strides[0],g=f*l.strides[0],v=0;v<n.outHeight;++v)for(var y=g+v*l.strides[1],b=v*n.strideHeight-s,x=0;x<r;x++){var w=b+x*o;if(!(w<0||w>=n.inHeight))for(var S=x*t.strides[0],_=m+w*e.strides[1],N=0;N<n.outWidth;++N)for(var T=y+N*n.outChannels,k=N*n.strideWidth-u,I=0;I<a;I++){var E=k+I*i;if(!(E<0||E>=n.inWidth))for(var A=S+I*t.strides[1],P=_+E*n.inChannels,C=A,O=0;O<n.inChannels;++O){for(var M=c[P+O],D=0;D<n.outChannels;++D)h[T+D]+=M*p[C+D];C+=n.outChannels}}}return l.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerInput");for(var r=d.buffer(n.inShape,"float32"),a=r.values,o=r.strides,i=o[0],s=o[1],u=o[2],l=e.dataSync(),c=e.strides,p=c[0],h=c[1],f=c[2],m=t.dataSync(),g=t.strides,v=g[0],y=g[1],b=g[2],x=n.batchSize,w=n.filterHeight,S=n.filterWidth,_=n.inChannels,N=n.inHeight,T=n.inWidth,k=n.outChannels,I=n.outHeight,E=n.outWidth,A=n.strideHeight,P=n.strideWidth,C=w-1-n.padInfo.top,O=S-1-n.padInfo.left,M=0;M<x;++M)for(var D=0;D<_;++D)for(var R=0;R<N;++R)for(var z=R-C,L=Math.max(0,Math.ceil(z/A)),V=Math.min(I,(w+z)/A),F=0;F<T;++F){for(var B=F-O,j=Math.max(0,Math.ceil(B/P)),U=Math.min(E,(S+B)/P),W=0,G=L;G<V;++G)for(var H=G*A-z,q=j;q<U;++q)for(var Y=q*P-B,$=p*M+h*G+f*q,K=v*(w-1-H)+y*(S-1-Y)+b*D,X=0;X<k;++X){var Z=l[$+X],J=m[K+X];W+=Z*J}a[i*M+s*R+u*F+D]=W}return r.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerFilter");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s=d.buffer(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=0;c<o;++c)for(var p=Math.max(0,Math.ceil((l-c)/r)),h=Math.min(n.outHeight,(n.inHeight+l-c)/r),f=0;f<i;++f)for(var m=Math.max(0,Math.ceil((u-f)/a)),g=Math.min(n.outWidth,(n.inWidth+u-f)/a),v=0;v<n.inChannels;++v)for(var y=0;y<n.outChannels;++y){for(var b=0,x=0;x<n.batchSize;++x)for(var w=p;w<h;++w)for(var S=c+w*r-l,_=m;_<g;++_){var N=f+_*a-u;b+=e.get(x,S,N,v)*t.get(x,w,_,y)}s.set(b,c,f,v,y)}return s.toTensor()},e.prototype.depthwiseConv2D=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2D");for(var r=n.filterHeight,a=n.filterWidth,o=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=d.buffer(n.outShape,e.dtype),p=e.dataSync(),h=t.dataSync(),f=c.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],v=m*c.strides[0],y=0;y<n.outHeight;++y)for(var b=v+y*c.strides[1],x=y*n.strideHeight-s,w=0;w<r;++w){var S=x+w*o;if(!(S<0||S>=n.inHeight))for(var _=w*t.strides[0],N=g+S*e.strides[1],T=0;T<n.outWidth;++T)for(var k=b+T*c.strides[2],I=T*n.strideWidth-u,E=0;E<a;++E){var A=I+E*i;if(!(A<0||A>=n.inWidth))for(var P=_+E*t.strides[1],C=N+A*n.inChannels,O=k,M=P,D=0;D<n.inChannels;++D){for(var R=p[C+D],z=0;z<l;++z)f[O+z]+=R*h[M+z];O+=l,M+=l}}}return c.toTensor()},e.prototype.depthwiseConv2DDerInput=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerInput");for(var r=d.buffer(n.inShape,"float32"),a=r.values,o=r.strides,i=o[0],s=o[1],u=o[2],l=e.dataSync(),c=e.strides,p=c[0],h=c[1],f=c[2],m=t.dataSync(),g=t.strides,v=g[0],y=g[1],b=g[2],x=n.batchSize,w=n.filterHeight,S=n.filterWidth,_=n.inChannels,N=n.inHeight,T=n.inWidth,k=n.outChannels,I=n.outHeight,E=n.outWidth,A=n.strideHeight,P=n.strideWidth,C=w-1-n.padInfo.top,O=S-1-n.padInfo.left,M=k/_,D=0;D<x;++D)for(var R=0;R<_;++R)for(var z=0;z<N;++z)for(var L=z-C,V=Math.max(0,Math.ceil(L/A)),F=Math.min(I,(w+L)/A),B=0;B<T;++B){for(var j=B-O,U=Math.max(0,Math.ceil(j/P)),W=Math.min(E,(S+j)/P),G=0,H=V;H<F;++H)for(var q=H*A-L,Y=U;Y<W;++Y)for(var $=Y*P-j,K=p*D+h*H+f*Y,X=v*(w-1-q)+y*(S-1-$)+b*R,Z=0;Z<M;++Z){var J=R*M+Z,Q=l[K+J],ee=m[X+Z];G+=Q*ee}a[i*D+s*z+u*B+R]=G}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s=d.buffer(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,p=0;p<o;++p)for(var h=Math.max(0,Math.ceil((l-p)/r)),f=Math.min(n.outHeight,(n.inHeight+l-p)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((u-m)/a)),v=Math.min(n.outWidth,(n.inWidth+u-m)/a),y=0;y<n.outChannels;++y){for(var b=Math.trunc(y/c),x=y%c,w=0,S=0;S<n.batchSize;++S)for(var _=h;_<f;++_)for(var N=p+_*r-l,T=g;T<v;++T){var k=m+T*a-u;w+=e.get(S,N,k,b)*t.get(S,_,T,y)}s.set(w,p,m,b,x)}return s.toTensor()},e.prototype.tile=function(e,t){this.assertNotComplex(e,"tile");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=d.buffer(n,e.dtype),o=e.buffer(),r=0;r<a.values.length;++r){for(var i=a.indexToLoc(r),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=i[u]%e.shape[u];var l=o.locToIndex(s);a.values[r]=o.values[l]}return a.toTensor()},e.prototype.pad=function(e,t,n){this.assertNotComplex(e,"pad");var r=t.map(function(t,n){return t[0]+e.shape[n]+t[1]}),a=t.map(function(e){return e[0]}),o=e.buffer(),i=d.buffer(r,e.dtype);0!==n&&i.values.fill(n);for(var s=0;s<e.size;s++){var u=o.indexToLoc(s),l=u.map(function(e,t){return e+a[t]});i.set.apply(i,[e.get.apply(e,u)].concat(l))}return i.toTensor()},e.prototype.transpose=function(e,t){this.assertNotComplex(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];for(var a=e.dataSync(),o=f.buffer(n,e.dtype),i=e.buffer(),r=0;r<e.size;++r){for(var s=i.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[t[l]];var c=o.locToIndex(u);o.values[c]=a[r]}return o.toTensor()},e.prototype.gather=function(e,t,n){this.assertNotComplex([e,t],"gather");var r=e.shape.slice(),a=t.dataSync();r[n]=a.length;for(var o=f.buffer(r,e.dtype),i=e.buffer(),s=0;s<o.size;++s){var u=o.indexToLoc(s),l=u.slice();l[n]=a[u[n]];var c=i.locToIndex(l);o.values[s]=i.values[c]}return o.toTensor()},e.prototype.batchToSpaceND=function(e,t,n){this.assertNotComplex([e],"batchToSpaceND");var r=t.reduce(function(e,t){return e*t}),a=u.getReshaped(e.shape,t,r),o=u.getPermuted(a.length,t.length),i=u.getReshapedPermuted(e.shape,t,r),s=u.getSliceBeginCoords(n,t.length),l=u.getSliceSize(i,n,t.length);return e.reshape(a).transpose(o).reshape(i).slice(s,l)},e.prototype.spaceToBatchND=function(e,t,n){this.assertNotComplex([e],"spaceToBatchND");var r=t.reduce(function(e,t){return e*t}),a=[[0,0]];a.push.apply(a,n);for(var o=1+t.length;o<e.shape.length;++o)a.push([0,0]);var i=e.pad(a),s=u.getReshaped(i.shape,t,r,!1),l=u.getPermuted(s.length,t.length,!1),c=u.getReshapedPermuted(i.shape,t,r,!1);return i.reshape(s).transpose(l).reshape(c)},e.prototype.pool=function(e,t,n){this.assertNotComplex(e,"pool");for(var r=t.strideHeight,a=t.strideWidth,o=t.filterHeight,i=t.filterWidth,s=d.buffer(t.outShape,"float32"),u=t.padInfo.top,l=t.padInfo.left,c="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=0;p<t.batchSize;++p)for(var h=0;h<t.inChannels;++h)for(var f=0;f<t.outHeight;++f)for(var m=f*r-u,g=Math.max(0,m),v=Math.min(t.inHeight,o+m),y=0;y<t.outWidth;++y){for(var b=y*a-l,x=Math.max(0,b),w=Math.min(t.inWidth,i+b),S=c,_=0,N=0,T=g;T<v;++T){for(var k=x;k<w;++k){var I=e.get(p,T,k,h);"max"===n&&I>S?S=I:"avg"===n&&(_+=I,N++)}if(isNaN(S))break}s.set("avg"===n?_/N:S,p,f,y,h)}return s.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=d.buffer(t.outShape,"int32"),r=t.strideHeight,a=t.strideWidth,o=t.filterHeight,i=t.filterWidth,s=t.padInfo.top,u=t.padInfo.left,l=0;l<t.batchSize;++l)for(var c=0;c<t.inChannels;++c)for(var p=0;p<t.outHeight;++p)for(var h=p*r-s,f=Math.max(0,h),m=Math.min(t.inHeight,o+h),g=0;g<t.outWidth;++g){for(var v=g*a-u,y=Math.max(0,v),b=Math.min(t.inWidth,i+v),x=Number.NEGATIVE_INFINITY,w=-1,S=f;S<m;++S)for(var _=S-h,N=y;N<b;++N){var T=N-v,k=e.get(l,S,N,c);k>x&&(x=k,w=_*i+T)}n.set(w,l,p,g,c)}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPoolBackprop");for(var a=this.maxPoolPositions(t,r),o=r.strideHeight,i=r.strideWidth,s=r.filterHeight,u=r.filterWidth,l=u-1-r.padInfo.left,c=s-1-r.padInfo.top,p=d.buffer(t.shape,"float32"),h=0;h<r.batchSize;++h)for(var f=0;f<r.inChannels;++f)for(var m=0;m<r.inHeight;++m)for(var g=0;g<r.inWidth;++g){for(var v=m-c,y=g-l,b=0,x=0;x<s;++x){var w=(v+x)/o;if(!(w<0||w>=r.outHeight||Math.floor(w)!==w))for(var S=0;S<u;++S){var _=(y+S)/i;if(!(_<0||_>=r.outWidth||Math.floor(_)!==_)){var N=s*u-1-a.get(h,w,_,f),T=x*u+S,k=N===T?1:0;if(0!==k){var I=e.get(h,w,_,f);b+=I*k}}}}p.set(b,h,m,g,f)}return p.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPoolBackprop");for(var r=n.strideHeight,a=n.strideWidth,o=n.filterHeight,i=n.filterWidth,s=i-1-n.padInfo.left,u=o-1-n.padInfo.top,l=d.buffer(t.shape,"float32"),c=1/(o*i),p=0;p<n.batchSize;++p)for(var h=0;h<n.inChannels;++h)for(var f=0;f<n.inHeight;++f)for(var m=0;m<n.inWidth;++m){for(var g=f-u,v=m-s,y=0,b=0;b<o;++b){var x=(g+b)/r;if(!(x<0||x>=n.outHeight||Math.floor(x)!==x))for(var w=0;w<i;++w){var S=(v+w)/a;if(!(S<0||S>=n.outWidth||Math.floor(S)!==S)){var _=e.get(p,x,S,h);y+=_}}}l.set(y*c,p,f,m,h)}return l.toTensor()},e.prototype.cast=function(e,t){return w.castTensor(e,t,this)},e.prototype.reshape=function(e,t){return w.reshapeTensor(e,t)},e.prototype.avgPool=function(e,t){return this.assertNotComplex(e,"avgPool"),this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){this.assertNotComplex(e,"resizeBilinear");for(var a=e.shape,o=a[0],i=a[1],s=a[2],u=a[3],l=d.buffer([o,t,n,u],e.dtype),c=[r&&t>1?i-1:i,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=0;h<o;h++)for(var f=0;f<t;f++)for(var m=0;m<n;m++)for(var g=0;g<u;g++){var v=c[0]*f/p[0],y=c[1]*m/p[1],b=Math.floor(v),x=Math.min(i-1,Math.ceil(v)),w=Math.floor(y),S=Math.min(s-1,Math.ceil(y)),_=e.get(h,b,w,g),N=e.get(h,x,w,g),T=e.get(h,b,S,g),k=e.get(h,x,S,g),I=v-b,E=y-w,A=_+(T-_)*E,P=N+(k-N)*E,C=A+(P-A)*I;l.set(C,h,f,m,g)}return l.toTensor()},e.prototype.resizeBilinearBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeBilinearBackprop");for(var r=t.shape,a=r[0],o=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],p=d.buffer([a,o,i,s],t.dtype),h=[n&&l>1?o-1:o,n&&c>1?i-1:i],f=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=h[0]/f[0],g=h[1]/f[1],v=0;v<a;v++)for(var y=0;y<l;y++)for(var b=y*m,x=Math.floor(b),w=Math.min(Math.ceil(b),o-1),S=b-x,_=1-S,N=0;N<c;N++)for(var T=N*g,k=Math.floor(T),I=Math.min(Math.ceil(T),i-1),E=T-k,A=1-E,P=0;P<s;P++){var C=e.get(v,y,N,P),O=p.get(v,x,k,P);O+=C*_*A,p.set(O,v,x,k,P);var M=p.get(v,x,I,P);M+=C*_*E,p.set(M,v,x,I,P);var D=p.get(v,w,k,P);D+=C*S*A,p.set(D,v,w,k,P);var R=p.get(v,w,I,P);R+=C*S*E,p.set(R,v,w,I,P)}return p.toTensor()},e.prototype.resizeNearestNeighbor=function(e,t,n,r){this.assertNotComplex(e,"resizeNearestNeighbor");for(var a=e.shape,o=a[0],i=a[1],s=a[2],u=a[3],l=d.buffer([o,t,n,u],e.dtype),c=[r&&t>1?i-1:i,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],h=0;h<o;h++)for(var f=0;f<t;f++)for(var m=0;m<n;m++)for(var g=0;g<u;g++){var v=c[0]*f/p[0],y=c[1]*m/p[1],b=Math.min(i-1,r?Math.round(v):Math.floor(v)),x=Math.min(s-1,r?Math.round(y):Math.floor(y)),w=e.get(h,b,x,g);l.set(w,h,f,m,g)}return l.toTensor()},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,a=r[0],o=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],p=d.buffer([a,o,i,s],t.dtype),h=[n&&l>1?o-1:o,n&&c>1?i-1:i],f=[n&&l>1?l-1:l,n&&c>1?c-1:c],m=h[0]/f[0],g=h[1]/f[1],v=1/m,y=1/g,b=2*Math.ceil(v)+2,x=2*Math.ceil(y)+2,w=0;w<a;w++)for(var S=0;S<o;S++)for(var _=0;_<i;_++)for(var N=Math.floor(S*v),T=Math.floor(N-b/2),k=Math.floor(_*y),I=Math.floor(k-x/2),E=0;E<s;E++){for(var A=0,P=0;P<b;P++){var C=P+T;if(!(C<0||C>=l))for(var O=0;O<x;O++){var M=O+I;if(!(M<0||M>=c)){var D=h[0]*(C/f[0]),R=h[1]*(M/f[1]),z=Math.min(o-1,n?Math.round(D):Math.floor(D)),L=Math.min(i-1,n?Math.round(R):Math.floor(R));S===z&&_===L&&(A+=e.get(w,C,M,E))}}}p.set(A,w,S,_,E)}return p.toTensor()},e.prototype.batchNormalization=function(e,t,n,r,a,o){this.assertNotComplex([e,t,n,a,o],"batchNormalization");for(var i=e.dataSync(),s=t.dataSync(),u=n.dataSync(),l=a?a.dataSync():new Float32Array([1]),c=o?o.dataSync():new Float32Array([0]),p=new Float32Array(i.length),h=c.length,d=l.length,m=u.length,g=s.length,v=0,y=0,b=0,x=0,w=0;w<i.length;++w)p[w]=c[v++]+(i[w]-s[y++])*l[b++]/Math.sqrt(u[x++]+r),v>=h&&(v=0),y>=g&&(y=0),b>=d&&(b=0),x>=m&&(x=0);return f.tensor4d(p,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,a){function o(e){for(var n=e%i,r=e-n+Math.max(0,n-t),a=e-n+Math.min(n+t,s),o=0;r<=a;r++){var l=u[r];o+=l*l}return o}this.assertNotComplex(e,"localResponseNormalization4D");for(var i=e.shape[3],s=i-1,u=e.dataSync(),l=b.sizeFromShape(e.shape),c=new Float32Array(l),p=0;p<l;p++){var h=o(p),f=u[p]*Math.pow(n+r*h,-a);c[p]=f}return d.tensor4d(c,e.shape)},e.prototype.LRNGrad=function(e,t,n,r,a,o,i){this.assertNotComplex(e,"LRNGrad");for(var s=e.shape[3],u=e.dataSync(),l=t.dataSync(),c=n.dataSync(),p=new Float32Array(b.sizeFromShape(e.shape)),h=b.sizeFromShape(e.shape),f=0;f<h;f++){for(var m=f%s,g=f-m+Math.max(0,m-r),v=f-m+Math.min(s,m+r+1),y=0,x=g;x<v;x++)y+=Math.pow(l[x],2);y=o*y+a;for(var x=g;x<v;x++){var w=-2*o*i*l[x]*c[f]/y;f===x&&(w+=Math.pow(y,-i)),w*=u[f],p[x]+=w}}return d.tensor4d(p,e.shape)},e.prototype.multinomial=function(e,t,n,r){this.assertNotComplex(e,"multinomial");for(var a=t?e:d.softmax(e),i=a.shape[0],s=a.shape[1],u=d.zeros([i,n],"int32"),l=u.dataSync(),c=a.dataSync(),p=0;p<i;++p){var h=p*s,f=new Float32Array(s-1);f[0]=c[h];for(var m=1;m<f.length;++m)f[m]=f[m-1]+c[h+m];for(var g=o.alea(r.toString()),v=p*n,y=0;y<n;++y){var b=g();l[v+y]=f.length;for(var x=0;x<f.length;x++)if(b<f[x]){l[v+y]=x;break}}}return u},e.prototype.oneHot=function(e,t,n,r){this.assertNotComplex(e,"oneHot");var a=new Float32Array(e.size*t);a.fill(r);for(var o=0;o<e.size;++o)e.get(o)>=0&&e.get(o)<t&&(a[o*t+e.get(o)]=n);return d.tensor2d(a,[e.size,t],"int32")},e.prototype.nonMaxSuppression=function(e,t,n,r,a){this.assertNotComplex(e,"nonMaxSuppression");var o=e.dataSync(),i=t.dataSync();return _.nonMaxSuppressionImpl(o,i,n,r,a)},e.prototype.depthToSpace=function(e,t,n){b.assert("NHWC"===n,"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n),b.assert(t>1,"blockSize should be > 1 for depthToSpace, but was: "+t);for(var r=e.shape[0],a=e.shape[1],o=e.shape[2],i=e.shape[3],s=a*t,u=o*t,l=i/(t*t),c=e.dataSync(),p=new Float32Array(r*s*u*l),h=0,f=0;f<r;++f)for(var m=0;m<s;++m)for(var g=Math.floor(m/t),v=m%t,y=0;y<u;++y)for(var x=Math.floor(y/t),w=y%t,S=(v*t+w)*l,_=0;_<l;++_){var N=_+S,T=N+i*(x+o*(g+a*f));p[h++]=c[T]}return d.tensor4d(p,[r,s,u,l])},e.prototype.broadcastedBinaryOp=function(e,t,n,r){var a=c.assertAndGetBroadcastShape(e.shape,t.shape),o=d.buffer(a,n),i=e.dataSync(),s=t.dataSync(),u=c.getBroadcastDims(e.shape,a),l=c.getBroadcastDims(t.shape,a),p=o.values;if(u.length+l.length===0)for(var h=0;h<p.length;++h)p[h]=r(i[h%i.length],s[h%s.length]);else for(var f=e.buffer(),m=t.buffer(),g=function(n){var a=o.indexToLoc(n),c=a.slice(-e.rank);u.forEach(function(e){return c[e]=0});var h=f.locToIndex(c),d=a.slice(-t.rank);l.forEach(function(e){return d[e]=0});var g=m.locToIndex(d);p[n]=r(i[h],s[g])},h=0;h<p.length;++h)g(h);return o.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=c.assertAndGetBroadcastShape(e.shape,t.shape),a=d.buffer(r,"float32"),o=d.buffer(r,"float32"),i=e.dataSync(),s=t.dataSync(),u=c.getBroadcastDims(e.shape,r),l=c.getBroadcastDims(t.shape,r),p=a.values,h=o.values;if(u.length+l.length===0)for(var f=0;f<p.length;f++){var m=f%i.length,g=f%s.length,v=n(i[2*m],i[2*m+1],s[2*g],s[2*g+1]);p[f]=v.real,h[f]=v.imag}else for(var y=this.data.get(e.dataId).complexTensors.real.buffer(),b=this.data.get(t.dataId).complexTensors.real.buffer(),x=function(r){var o=a.indexToLoc(r),c=o.slice(-e.rank);u.forEach(function(e){return c[e]=0});var d=y.locToIndex(c),f=o.slice(-t.rank);l.forEach(function(e){return f[e]=0});var m=b.locToIndex(f),g=n(i[2*d],i[2*d+1],s[2*m],s[2*m+1]);p[r]=g.real,h[r]=g.imag},f=0;f<p.length;f++)x(f);return this.complex(a.toTensor(),o.toTensor())},e.prototype.split=function(e,t,n){return N.split(e,t,n)},e.prototype.dispose=function(){},
e.prototype.floatPrecision=function(){return 32},e.prototype.cropAndResize=function(e,t,n,r,a,o){for(var i=e.shape,s=i[0],u=i[1],l=i[2],c=i[3],p=t.shape[0],h=r[0],f=r[1],m=d.buffer([p,h,f,c]),g=t.dataSync(),v=n.dataSync(),y=e.dataSync(),b=e.strides,x=m.strides,w=0;w<p;w++){var S=4*w,_=g[S],N=g[S+1],T=g[S+2],k=g[S+3],I=v[w];if(!(I>=s))for(var E=h>1?(T-_)*(u-1)/(h-1):0,A=f>1?(k-N)*(l-1)/(f-1):0,P=0;P<h;P++){var C=h>1?_*(u-1)+P*E:.5*(_+T)*(u-1);if(C<0||C>u-1)for(var O=0;O<f;O++)for(var M=0;M<c;M++){var D=M+O*x[2]+P*x[1]+w*x[0];m.values[D]=o}else if("bilinear"===a)for(var R=Math.floor(C),z=Math.ceil(C),L=C-R,O=0;O<f;O++){var V=f>1?N*(l-1)+O*A:.5*(N+k)*(l-1);if(V<0||V>l-1)for(var M=0;M<c;M++){var D=M+O*x[2]+P*x[1]+w*x[0];m.values[D]=o}else for(var F=Math.floor(V),B=Math.ceil(V),j=V-F,M=0;M<c;M++){var D=M+F*b[2]+R*b[1]+I*b[0],U=y[D];D=M+B*b[2]+R*b[1]+I*b[0];var W=y[D];D=M+F*b[2]+z*b[1]+I*b[0];var G=y[D];D=M+B*b[2]+z*b[1]+I*b[0];var H=y[D],q=U+(W-U)*j,Y=G+(H-G)*j;D=M+O*x[2]+P*x[1]+w*x[0],m.values[D]=q+(Y-q)*L}}else for(var O=0;O<f;++O){var V=f>1?N*(l-1)+O*A:.5*(N+k)*(l-1);if(V<0||V>l-1)for(var M=0;M<c;M++){var D=M+O*x[2]+P*x[1]+w*x[0];m.values[D]=o}else for(var $=Math.round(V),K=Math.round(C),M=0;M<c;M++){var X=M+$*b[2]+K*b[1]+I*b[0],Z=M+O*x[2]+P*x[1]+w*x[0];m.values[Z]=y[X]}}}}return m.toTensor()},e}();t.MathBackendCPU=I,i.ENV.registerBackend("cpu",function(){return new I},1,v.setTensorTracker)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,o=e.inSize,i=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}return e}();t.ArgMinMaxProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+o+", "+i+");\n      const float avgMultiplier = float("+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}return e}();t.AvgPool2DBackpropProgram=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),a=function(){function e(e,t,n,a,o,i){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],r.assertAndGetBroadcastShape(e,t),r.assertAndGetBroadcastShape(e,n);var s="0.0";null!=a&&(r.assertAndGetBroadcastShape(e,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=o&&(r.assertAndGetBroadcastShape(e,o),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+u+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "}return e}();t.BatchNormProgram=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, float("+t+"), float("+n+")));\n      }\n    "}return e}();t.ClipProgram=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(92),a=function(){function e(e,t){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=r.computeOutShape([e,t],1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+e[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+e[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "}return e}();t.ConcatProgram=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}return e}();t.Conv2DDerFilterProgram=n;var r=function(){function e(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}return e}();t.Conv2DDerInputProgram=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}return e}();t.DepthwiseConv2DDerFilterProgram=n;var r=function(){function e(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}return e}();t.DepthwiseConv2DDerInputProgram=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.top,n=e.padInfo.left,r=e.strideHeight,a=e.strideWidth,o=e.dilationHeight,i=e.dilationWidth,s=e.filterHeight,u=e.filterWidth,l=4*Math.floor(e.inChannels/4),c=e.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+a+");\n      const ivec2 pads = ivec2("+t+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+o+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+i+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+l+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===c)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+l+") *\n                getW(wR, wC, "+l+", d2);\n            } else if ("+(2===c)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===c)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1),\n                getX(batch, xR, xC, "+l+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2),\n                getW(wR, wC, "+l+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}return e}();t.Conv2DProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.inHeight,n=e.inWidth,r=e.padInfo.top,a=e.padInfo.left,o=e.strideHeight,i=e.strideWidth,s=e.dilationHeight,u=e.dilationWidth,l=e.filterHeight,c=e.filterWidth,p=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+o+", "+i+");\n      const ivec2 pads = ivec2("+r+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+p+";\n        int q = d2 - d1 * "+p+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+t+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+c+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}return e}();t.DepthwiseConv2DProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=e[0],i=e[1],s=e[2],u=e[3],l=t[0],c=n[0],p=n[1];this.outputShape=[l,c,p,u];var h="bilinear"===r?1:0,d=[i-1+".0",s-1+".0"],f=d[0],m=d[1],g=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],v=g[0],y=g[1],b=g[2],x=p>1?[""+(s-1)/(p-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=x[0],S=x[1],_=x[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+S+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+f+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+_+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexRC = vec2(in_y,in_x);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n          ivec2 sourceCeilRC = ivec2(ceil(sourceFracIndexRC));\n\n          float topLeft = getImage(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          float bottomLeft = getImage(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          float topRight = getImage(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          float bottomRight = getImage(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n          float top = topLeft + (topRight - topLeft) * fracRC.y;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          float newValue = top + (bottom - top) * fracRC.x;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestRC = ivec2(floor(\n            sourceFracIndexRC + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestRC.x, sourceNearestRC.y, d);\n          setOutput(newValue);\n        }\n      }\n    "}return e}();t.CropAndResizeProgram=n},function(e,t,n){"use strict";function r(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}function a(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}Object.defineProperty(t,"__esModule",{value:!0});var o=n(33),i=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=e;var i=e.length,s=e[e.length-1],u=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+s+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+o.getCoordsDataType(i)+" coords = getOutputCoords();\n        int end = "+a(i,"coords")+";\n        float val = 0.0;\n        for (int i = "+s+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+u+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+a(i,"coords")+" = idx;\n          val += getX("+r(i,"coords")+");\n        }\n        setOutput(val);\n      }\n    "}return e}();t.CumSumProgram=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}();t.DepthToSpaceProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        gl_FragColor = encode_float(x);\n      }\n    "}return e}();t.EncodeFloatProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.variableNames=["A"];var t=e[0],n=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+n+".0, "+t+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "}return e}();t.FromPixelsProgram=n},function(e,t,n){"use strict";function r(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],o=0;o<e.length;o++)o===t?a.push("int(getIndices("+r[o]+"))"):a.push(""+r[o]);return a.join()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(33),o=function(){function e(e,t,n){this.variableNames=["A","indices"];var o=e.slice();o[n]=t,this.outputShape=o,this.rank=o.length;var i=a.getCoordsDataType(this.rank),s=r(e,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+s+"));\n      }\n    "}return e}();t.GatherProgram=o},function(e,t,n){"use strict";function r(e,t,n,r){for(var a=t.userCode,o=n.map(function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform};return{name:t.variableNames[n],shapeInfo:r}}),i=o.map(function(e){return e.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1},l=u.makeShader(o,s,a,t.supportsBroadcasting===!0),c=e.createProgram(l),p={},h=0;h<t.variableNames.length;h++){var d=t.variableNames[h],f=!1;p[d]=e.getUniformLocation(c,d,f)}return{program:t,source:l,webGLProgram:c,uniformLocations:p,gpgpu:e,inShapeInfos:i,outShapeInfo:s}}function a(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but "+("was executed with "+t.length+" inputs"));e.forEach(function(e,n){var r=e.logicalShape,a=t[n],o=a.shape;if(!s.arraysEqual(r,o))throw Error("Binary was compiled with different shapes than "+("the current args. Shapes "+r+" and "+o+" must match"));if(!e.isUniform||!a.isUniform){var i=e.texShape,u=a.isUniform?null:a.texData.texShape;if(!s.arraysEqual(i,u))throw Error("Binary was compiled with different texture shapes than the"+(" current args. Shape "+i+" and "+u+" must match"))}})}function o(e,t,n,r){a(e.inShapeInfos,t),a([e.outShapeInfo],[n]);var o=n.texData.texture,i=n.texData.texShape,u=e.gpgpu;u.setOutputMatrixTexture(o,i[0],i[1]),u.setProgram(e.webGLProgram),t.forEach(function(t,n){var r=e.program.variableNames[n],a=e.uniformLocations[r];if(null!=a){if(t.isUniform){if(1===s.sizeFromShape(t.shape))u.gl.uniform1f(a,t.uniformValues[0]);else{var o=t.uniformValues;o instanceof Float32Array||(o=new Float32Array(o)),u.gl.uniform1fv(a,o)}return}var i=t.texData.texture;u.setInputMatrixTexture(i,a,n)}}),null!=r&&r(u,e.webGLProgram),u.executeProgram()}function i(e,t,n){var r="";t.concat(n).forEach(function(e){r+=e.shape+"_"+(e.isUniform?"uniform":e.texData.texShape)});var a=e.userCode,o=(e.supportsBroadcasting===!0).toString(),i=e.constructor.name;return i+="_"+o+"_"+r+"_"+a}Object.defineProperty(t,"__esModule",{value:!0});var s=n(2),u=n(33);t.compileProgram=r,t.runProgram=o,t.makeShaderKey=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var o=t,i=e[3]-1;this.outputShape=e;var s,u="float("+n+") + float("+r+") * sum";s=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+i+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+s+";\n        setOutput(val);\n      }\n    "}return e}();t.LRNProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "}return e}();t.LRNGradProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,o=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=t*n-1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}return e}();t.MaxPool2DBackpropProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var a=e[0],o=n?e[2]:e[1],i=r?t[1]:t[2],s=n?e[1]:e[2];this.outputShape=[a,o,i];var u=function(e,t){return n?"batch, "+t+" + "+e+", aRow":"batch, aRow, "+t+" + "+e},l=function(e,t){
return r?"batch, bCol, "+t+" + "+e:"batch, "+t+" + "+e+", bCol"},c=4*Math.floor(s/4),p=s%4;this.userCode=" float dotARowBCol(int batch, int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+c+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+u(0,"i")+"),\n          getMatrixA("+u(1,"i")+"),\n          getMatrixA("+u(2,"i")+"),\n          getMatrixA("+u(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+l(0,"i")+"),\n          getMatrixB("+l(1,"i")+"),\n          getMatrixB("+l(2,"i")+"),\n          getMatrixB("+l(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===p)+") {\n        result += getMatrixA("+u(0,c)+") *\n          getMatrixB("+l(0,c)+");\n      } else if ("+(2===p)+") {\n        vec2 a = vec2(\n          getMatrixA("+u(0,c)+"),\n          getMatrixA("+u(1,c)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+l(0,c)+"),\n          getMatrixB("+l(1,c)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===p)+") {\n        vec3 a = vec3(\n          getMatrixA("+u(0,c)+"),\n          getMatrixA("+u(1,c)+"),\n          getMatrixA("+u(2,c)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+l(0,c)+"),\n          getMatrixB("+l(1,c)+"),\n          getMatrixB("+l(2,c)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec3 resBRC = getOutputCoords();\n      setOutput(dotARowBCol(resBRC.x, resBRC.y, resBRC.z));\n    }\n    "}return e}();t.MatMulProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}();t.MultinomialProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "}return e}();t.OneHotProgram=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),a=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(t,n){return t[0]+e[n]+t[1]});var a=e.length,o=r.getCoordsDataType(a),i=t.map(function(e){return e[0]}).join(","),s=t.map(function(t,n){return t[0]+e[n]}).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);return 1===a?void(this.userCode="\n        int start = "+i+";\n        int end = "+s+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "):void(this.userCode="\n      "+o+" start = "+o+"("+i+");\n      "+o+" end = "+o+"("+s+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+u+"));\n        }\n      }\n    ")}return e}();t.PadProgram=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterHeight,a=e.filterWidth,o=e.strideHeight,i=e.strideWidth,s=e.padInfo.top,u=e.padInfo.left;this.outputShape=e.outShape;var l="avg"===t,c="0.0";if(l||(c="-1.0 / 0.0"),n){var p=">=";return void(this.userCode="\n        const ivec2 strides = ivec2("+o+", "+i+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+a+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value "+p+" currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+a+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}var h="max",d=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(d="avgValue / count");var f=4*Math.floor(a/4),m=a%4,g="\n      if ("+l+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = "+h+"(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+i+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+c+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+c+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+f+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+d+");\n      }\n    "}return e}();t.Pool2DProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=Math.ceil(a/n);this.outputShape=[r,o];var i="0.0",s="";"min"===t?(i="1.0 / 0.0",s="min"):"max"===t&&(i="-1.0 / 0.0",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,p="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===t?(i="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(i="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+d+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+p+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(2===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(3===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+p+"\n        }\n        setOutput("+u+");\n      }\n    "}return e}();t.ReduceProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],o=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?a-1:a,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=l[0]/c[0],h=l[1]/c[1],d=1/p,f=1/h,m=2*Math.ceil(d)+2,g=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(a-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}return e}();t.ResizeBilinearBackpropProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}return e}();t.ResizeBilinearProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,a=r[1],o=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?a-1:a,n&&u>1?o-1:o],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],p=l[0]/c[0],h=l[1]/c[1],d=1/p,f=1/h,m=2*Math.ceil(d)+2,g=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+p+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+d+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}return e}();t.ResizeNearestNeigborBackpropProgram=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var a=e[0],o=e[1],i=e[2],s=e[3];this.outputShape=[a,t,n,s];var u=[r&&t>1?o-1:o,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "}return e}();t.ResizeNearestNeighborProgram=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),a=function(){function e(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1===n)return void(this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      ");var a=function(n){return t.indexOf(n)!==-1&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"},o=e.map(function(e,t){return a(t)}).join(","),i=r.getCoordsDataType(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "}return e}();t.ReverseProgram=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,o=e.numSegments,i=o*Math.ceil(a/n);this.outputShape=[r,i];var s="0.0",u="sumValue",l=4*Math.floor(n/4),c=n%4,p="\n        sumValue += dot(values, filter);\n    ",h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var d="";a%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+p+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+p+"\n        } else if ("+(2===c)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+p+"\n        } else if ("+(3===c)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+p+"\n        }\n        setOutput("+u+");\n      }\n    "}return e}();t.SegmentOpProgram=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),a=function(){function e(e,t,n){this.variableNames=["c","a","b"],this.outputShape=t;var a,o;if(n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",a="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],l=0;l<t.length;l++)u.push(""+i[l]),l<e&&s.push(""+i[l]);a=s.join(),o=u.join()}var c=r.getCoordsDataType(n);this.userCode="\n      void main() {\n        "+c+" resRC = getOutputCoords();\n        float cVal = getC("+a+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "}return e}();t.SelectProgram=a},function(e,t,n){"use strict";function r(e){if(1===e)return"sourceLoc";if(2===e)return"sourceLoc.x, sourceLoc.y";if(3===e)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===e)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+e+" is not yet supported")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(33),o=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t=a.getCoordsDataType(this.rank),n=r(this.rank);this.userCode="\n      uniform "+t+" start;\n\n      void main() {\n        "+t+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the "+("length of start ("+e.length+")"));return function(n,r){if(null!=t.startLoc||(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=t.startLoc))if(1===t.rank)n.gl.uniform1i(t.startLoc,e[0]);else if(2===t.rank)n.gl.uniform2i(t.startLoc,e[0],e[1]);else if(3===t.rank)n.gl.uniform3i(t.startLoc,e[0],e[1],e[2]);else{if(4!==t.rank)throw Error("Slicing for rank "+t.rank+" is not yet supported");n.gl.uniform4i(t.startLoc,e[0],e[1],e[2],e[3])}}},e}();t.SliceProgram=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(33),a=function(){function e(e,t,n,a){this.variableNames=["x"];var o=n.filter(function(e,t){return a.indexOf(t)===-1});this.outputShape=o;var i=n.length,s=r.getCoordsDataType(n.length),u=r.getCoordsDataType(o.length),l="";if(1===i)l="coords * strides + begin";else{var c=0;l=n.map(function(e,t){return a.indexOf(t)===-1?(c++,1===o.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(c-1)+"] * strides["+t+"] + begin["+t+"]"):"begin["+t+"]"}).join(",")}this.userCode="\n      "+s+" begin = "+s+"("+e+");\n      "+s+" strides = "+s+"("+t+");\n\n      void main() {\n        "+u+" coords = getOutputCoords();\n        setOutput(getX("+l+"));\n      }\n    "}return e}();t.StridedSliceProgram=a},function(e,t,n){"use strict";function r(e){if(e===i.TextureUsage.DOWNLOAD||e===i.TextureUsage.PIXELS)return i.PhysicalTextureType.UNSIGNED_BYTE;if(e===i.TextureUsage.UPLOAD)return i.PhysicalTextureType.FLOAT32;if(e===i.TextureUsage.RENDER)return o.ENV.get("WEBGL_RENDER_FLOAT32_ENABLED")?i.PhysicalTextureType.FLOAT32:i.PhysicalTextureType.FLOAT16;throw new Error("Unknown logical texture type "+e)}function a(e,t){return e[0]+"_"+e[1]+"_"+t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(90),s=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t){var n=r(t),o=a(e,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[o].shift();return this.usedTextures[o].push(s),s}this.numUsedTextures++,this.log();var u;return n===i.PhysicalTextureType.FLOAT32?u=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):n===i.PhysicalTextureType.FLOAT16?u=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):n===i.PhysicalTextureType.UNSIGNED_BYTE&&(u=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(u),u},e.prototype.releaseTexture=function(e,t,n){var o=r(n),i=a(t,o);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[i],u=s.indexOf(e);if(u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(u,1),this.log()},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});for(var t in this.usedTextures)this.usedTextures[t].forEach(function(t){e.gpgpu.deleteMatrixTexture(t)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();t.TextureManager=s},function(e,t,n){"use strict";function r(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(33),o=function(){function e(e,t){this.variableNames=["A"];for(var n=new Array(e.length),o=0;o<n.length;o++)n[o]=e[o]*t[o];this.outputShape=n,this.rank=n.length;var i=a.getCoordsDataType(this.rank),s=r(e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+s+"));\n      }\n    "}return e}();t.TileProgram=o},function(e,t,n){"use strict";function r(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}Object.defineProperty(t,"__esModule",{value:!0});var a=n(33),o=function(){function e(e,t){this.variableNames=["A"];for(var n=new Array(e.length),o=0;o<n.length;o++)n[o]=e[t[o]];this.outputShape=n,this.rank=n.length;var i=a.getCoordsDataType(this.rank),s=r(t);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+s+"));\n    }\n    "}return e}();t.TransposeProgram=o},function(e,t,n){"use strict";function r(e,n,r,a,o,i){void 0===a&&(a=.001);var s,u=l.convertToTensor(e,"x","batchNormalization"),p=l.convertToTensor(n,"mean","batchNormalization"),h=l.convertToTensor(r,"variance","batchNormalization");null!=o&&(s=l.convertToTensor(o,"scale","batchNormalization"));var d;return null!=i&&(d=l.convertToTensor(i,"offset","batchNormalization")),c.assert(2===u.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+(u.rank+".")),c.assert(2===p.rank||1===p.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but "+("got rank "+p.rank+".")),c.assert(2===h.rank||1===h.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 "+("but got rank "+h.rank+".")),null!=s&&c.assert(2===s.rank||1===s.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 "+("but got rank "+s.rank+".")),null!=d&&c.assert(2===d.rank||1===d.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 "+("but got rank "+d.rank+".")),
t.batchNormalization(u,p,h,a,s,d)}function a(e,n,r,a,o,i){void 0===a&&(a=.001);var s,u=l.convertToTensor(e,"x","batchNormalization"),p=l.convertToTensor(n,"mean","batchNormalization"),h=l.convertToTensor(r,"variance","batchNormalization");null!=o&&(s=l.convertToTensor(o,"scale","batchNormalization"));var d;return null!=i&&(d=l.convertToTensor(i,"offset","batchNormalization")),c.assert(3===u.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+(u.rank+".")),c.assert(3===p.rank||1===p.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but "+("got rank "+p.rank+".")),c.assert(3===h.rank||1===h.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 "+("but got rank "+h.rank+".")),null!=s&&c.assert(3===s.rank||1===s.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 "+("but got rank "+s.rank+".")),null!=d&&c.assert(3===d.rank||1===d.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 "+("but got rank "+d.rank+".")),t.batchNormalization(u,p,h,a,s,d)}function o(e,n,r,a,o,i){void 0===a&&(a=.001);var s,u=l.convertToTensor(e,"x","batchNormalization"),p=l.convertToTensor(n,"mean","batchNormalization"),h=l.convertToTensor(r,"variance","batchNormalization");null!=o&&(s=l.convertToTensor(o,"scale","batchNormalization"));var d;return null!=i&&(d=l.convertToTensor(i,"offset","batchNormalization")),c.assert(4===u.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+(u.rank+".")),c.assert(4===p.rank||1===p.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but "+("got rank "+p.rank+".")),c.assert(4===h.rank||1===h.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 "+("but got rank "+h.rank+".")),null!=s&&c.assert(4===s.rank||1===s.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 "+("but got rank "+s.rank+".")),null!=d&&c.assert(4===d.rank||1===d.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 "+("but got rank "+d.rank+".")),t.batchNormalization(u,p,h,a,s,d)}function i(e,t,n,r,a,o){void 0===r&&(r=.001);var i,d=l.convertToTensor(e,"x","batchNormalization"),g=l.convertToTensor(t,"mean","batchNormalization"),v=l.convertToTensor(n,"variance","batchNormalization");null!=a&&(i=l.convertToTensor(a,"scale","batchNormalization"));var y;null!=o&&(y=l.convertToTensor(o,"offset","batchNormalization")),c.assert(g.rank===v.rank,"Batch normalization gradient requires mean and variance to have equal ranks."),c.assert(null==y||g.rank===y.rank,"Batch normalization gradient requires mean and offset to have equal ranks."),c.assert(null==i||g.rank===i.rank,"Batch normalization gradient requires mean and scale to have equal ranks.");var b;b=0===d.rank||1===d.rank?d.as4D(1,1,1,d.size):2===d.rank?d.as4D(1,1,d.shape[0],d.shape[1]):3===d.rank?d.as4D(1,d.shape[0],d.shape[1],d.shape[2]):d;var x=function(e){var t=null==i?f.scalar(1):i,n=h.getReductionAxes(g.shape,b.shape),a=[];if(1===g.rank){for(var o=0;o<b.shape.length-1;++o)a.push(b.shape[o]);a.push(1)}var s=d.sub(g),u=e.mul(t),l=m.rsqrt(v.add(f.scalar(r))),c=l.mul(l).mul(l).mul(f.scalar(-.5)),y=function(){return 1===g.rank?e.mul(p.tile(l.as4D(1,1,1,g.shape[0]),a)).mul(t).reshape(d.shape):e.mul(l).mul(t).reshape(d.shape)},x=function(){var e=l.mul(f.scalar(-1)).mul(u);return 1===g.rank&&(e=e.sum(n)),e.reshape(g.shape)},w=function(){var e=c.mul(s).mul(u);return 1===g.rank&&(e=e.sum(n)),e.reshape(g.shape)},S=function(){var t=s.mul(l),r=e.mul(t);return 1===g.rank&&(r=r.sum(n)),r.reshape(g.shape)},_=function(){var t=e;return 1===g.rank&&(t=t.sum(n)),t.reshape(g.shape)};return{$x:y,$mean:x,$variance:w,$scale:S,$offset:_}},w=u.ENV.engine.runKernel(function(e){return e.batchNormalization(b,s(g),s(v),r,s(i),s(y))},{$x:d,$mean:g,$variance:v,$scale:i,$offset:y},x);return w.reshape(d.shape)}function s(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),l=n(7),c=n(2),p=n(74),h=n(36),d=n(6),f=n(10),m=n(132);t.batchNormalization2d=d.op({batchNormalization2d_:r}),t.batchNormalization3d=d.op({batchNormalization3d_:a}),t.batchNormalization4d=d.op({batchNormalization4d_:o}),t.batchNormalization=d.op({batchNormalization_:i})},function(e,t,n){"use strict";function r(e,n,r,a,o,i,s){void 0===o&&(o="NWC"),void 0===i&&(i=1);var u=g.convertToTensor(e,"x","conv1d"),l=g.convertToTensor(n,"filter","conv1d"),c=u,p=!1;2===u.rank&&(p=!0,c=u.as3D(1,u.shape[0],u.shape[1])),v.assert(3===c.rank,"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."),v.assert(3===l.rank,"Error in conv1d: filter must be rank 3, but got rank "+(l.rank+".")),null!=s&&v.assert(v.isInt(a),"Error in conv1d: pad must be an integer when using, "+("dimRoundingMode "+s+" but got pad "+a+".")),v.assert(c.shape[2]===l.shape[1],"Error in conv1d: depth of input ("+c.shape[2]+") must match "+("input depth for filter "+l.shape[1]+".")),v.assert(h(r,i),"Error in conv1D: Either stride or dilation must be 1. "+("Got stride "+r+" and dilation '"+i+"'")),v.assert("NWC"===o,"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported.");var d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),f=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),m=[1,r],y=[1,i],b="NHWC",x=t.conv2d(f,d,m,a,b,y,s);return p?x.as2D(x.shape[2],x.shape[3]):x.as3D(x.shape[0],x.shape[2],x.shape[3])}function a(e,t,n,r,a,s,u){void 0===a&&(a="NHWC"),void 0===s&&(s=[1,1]);var l=g.convertToTensor(e,"x","conv2d"),c=g.convertToTensor(t,"filter","conv2d"),d=l,f=!1;3===l.rank&&(f=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),v.assert(4===d.rank,"Error in conv2d: input must be rank 4, but got rank "+d.rank+"."),v.assert(4===c.rank,"Error in conv2d: filter must be rank 4, but got rank "+(c.rank+".")),null!=u&&v.assert(v.isInt(r),"Error in conv2d: pad must be an integer when using, "+("dimRoundingMode "+u+" but got pad "+r+".")),v.assert(d.shape[3]===c.shape[2],"Error in conv2d: depth of input ("+d.shape[3]+") must match "+("input depth for filter "+c.shape[2]+".")),v.assert(h(n,s),"Error in conv2D: Either strides or dilations must be 1. "+("Got strides "+n+" and dilations '"+s+"'")),v.assert("NHWC"===a,"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported.");var b=y.computeConv2DInfo(d.shape,c.shape,n,s,r,u),x=function(e){return v.assert(p(s),"Error in gradient of conv2D: dilation rates greater than 1 are not"+("yet supported in gradients. Got dilations '"+s+"'")),{x:function(){return o(d.shape,e,c,n,r)},$filter:function(){return i(d,e,c.shape,n,r)}}},w=m.ENV.engine.runKernel(function(e){return e.conv2d(d,c,b)},{x:d,$filter:c},x);return f?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}function o(e,t,n,r,a,o){v.assert(e.length===t.rank,"Length of inShape "+("("+e.length+") and rank of dy ("+t.rank+") must match"));var i=e,s=t,u=!1;3===t.rank&&(u=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),i=[1,e[0],e[1],e[2]]);var l=i[3],c=s.shape[3];v.assert(4===i.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+(i.length+".")),v.assert(4===s.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank),v.assert(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),v.assert(l===n.shape[2],"Error in conv2dDerInput: depth of input ("+l+") must "+("match input depth for filter "+n.shape[2]+".")),v.assert(c===n.shape[3],"Error in conv2dDerInput: depth of output ("+c+") must "+("match output depth for filter "+n.shape[3]+".")),null!=o&&v.assert(v.isInt(a),"Error in conv2dDerInput: pad must be an integer when using, "+("dimRoundingMode "+o+" but got pad "+a+"."));var p=1,h=y.computeConv2DInfo(i,n.shape,r,p,a,o),d=m.ENV.engine.runKernel(function(e){return e.conv2dDerInput(s,n,h)},{dy4D:s});return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function i(e,t,n,r,a,o){var i=e;3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=t;3===s.rank&&(s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),v.assert(4===i.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+(i.shape+".")),v.assert(4===s.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+(s.shape+".")),v.assert(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+(n+".")),v.assert(i.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+i.shape[3]+") must "+("match input depth in filter ("+n[2]+".")),v.assert(s.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must "+("match output depth for filter ("+n[3]+").")),null!=o&&v.assert(v.isInt(a),"Error in conv2dDerFilter: pad must be an integer when using, "+("dimRoundingMode "+o+" but got pad "+a+"."));var u=1,l=y.computeConv2DInfo(i.shape,n,r,u,a,o);return m.ENV.engine.runKernel(function(e){return e.conv2dDerFilter(i,s,l)},{x4D:i,dy4D:s})}function s(e,t,n,r,a,i){var s=g.convertToTensor(e,"x","conv2dTranspose"),u=g.convertToTensor(t,"filter","conv2dTranspose");return o(n,s,u,r,a,i)}function u(e,t,n,r,a,o,i){void 0===a&&(a="NHWC"),void 0===o&&(o=[1,1]);var s=g.convertToTensor(e,"x","depthwiseConv2d"),u=g.convertToTensor(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),v.assert(4===l.rank,"Error in depthwiseConv2d: input must be rank 4, but got "+("rank "+l.rank+".")),v.assert(4===u.rank,"Error in depthwiseConv2d: filter must be rank 4, but got rank "+(u.rank+".")),v.assert(l.shape[3]===u.shape[2],"Error in depthwiseConv2d: number of input channels "+("("+l.shape[3]+") must match the inChannels dimension in ")+("filter "+u.shape[2]+".")),null==o&&(o=[1,1]),v.assert(h(n,o),"Error in depthwiseConv2d: Either strides or dilations must be 1. "+("Got strides "+n+" and dilations '"+o+"'")),null!=i&&v.assert(v.isInt(r),"Error in depthwiseConv2d: pad must be an integer when using, "+("dimRoundingMode "+i+" but got pad "+r+"."));var b=y.computeConv2DInfo(l.shape,u.shape,n,o,r,i,!0),x=function(e){return v.assert(p(o),"Error in gradient of depthwiseConv2d: dilation rates greater than "+("1 are not yet supported. Got dilations '"+o+"'")),{x:function(){return d(l.shape,e,u,b)},$filter:function(){return f(l,e,u.shape,b)}}},w=m.ENV.engine.runKernel(function(e){return e.depthwiseConv2D(l,u,b)},{x:l,$filter:u},x);return c?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}function l(e,n,r,a,o,i,s){void 0===i&&(i=[1,1]),void 0===s&&(s="NHWC");var u=g.convertToTensor(e,"x","separableConv2d"),l=g.convertToTensor(n,"depthwiseFilter","separableConv2d"),c=g.convertToTensor(r,"pointwiseFilter","separableConv2d"),p=u,h=!1;if(3===u.rank&&(h=!0,p=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),"NCHW"===s)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");v.assert(4===p.rank,"Error in separableConv2d: input must be rank 4, but got "+("rank "+p.rank+".")),v.assert(4===l.rank,"Error in separableConv2d: depthwise filter must be rank 4, but got "+("rank "+l.rank+".")),v.assert(4===c.rank,"Error in separableConv2d: pointwise filter must be rank 4, but got "+("rank "+l.rank+".")),v.assert(1===c.shape[0],"Error in separableConv2d: the first dimension of pointwise filter "+(" must be 1, but got "+c.shape[0]+".")),v.assert(1===c.shape[1],"Error in separableConv2d: the second dimension of pointwise filter "+(" must be 1, but got "+c.shape[1]+"."));var d=l.shape[2],f=l.shape[3];v.assert(c.shape[2]===d*f,"Error in separableConv2d: the third dimension of pointwise filter "+("must be "+d*f+", ")+("but got "+c.shape[2]+"."));var m=t.depthwiseConv2d(p,l,a,o,s,i),y=1,b=t.conv2d(m,c,y,"valid",s);return h?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}function c(e){return"number"==typeof e?[e,e]:e}function p(e){var t=c(e),n=t[0],r=t[1];return 1===n&&1===r}function h(e,t){return p(e)||p(t)}function d(e,t,n,r){var a=t,o=!1;3===t.rank&&(o=!0,a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=m.ENV.engine.runKernel(function(e){return e.depthwiseConv2DDerInput(a,n,r)},{dy4D:a});return o?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}function f(e,t,n,r){var a=e;3===e.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=t;return 3===o.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),m.ENV.engine.runKernel(function(e){return e.depthwiseConv2DDerFilter(a,o,r)},{x4D:a,dy4D:o})}Object.defineProperty(t,"__esModule",{value:!0});var m=n(4),g=n(7),v=n(2),y=n(179),b=n(6);t.conv1d=b.op({conv1d_:r}),t.conv2d=b.op({conv2d_:a}),t.depthwiseConv2d=b.op({depthwiseConv2d_:u}),t.separableConv2d=b.op({separableConv2d_:l}),t.conv2dTranspose=b.op({conv2dTranspose_:s})},function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n=!1);var r=d.convertToTensor(e,"images","resizeBilinear");f.assert(3===r.rank||4===r.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got "+("rank "+r.rank+".")),f.assert(2===t.length,"Error in resizeBilinear: new shape must 2D, but got shape "+(t+"."));var a=r,o=!1;3===r.rank&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=function(e,t){return e.resizeBilinear(a,i,s,n)},l=function(e,t){return{batchImages:function(){return p.ENV.engine.runKernel(function(t){return t.resizeBilinearBackprop(e,a,n)},{})}}},c=p.ENV.engine.runKernel(u,{batchImages:a},l);return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function a(e,t,n){void 0===n&&(n=!1);var r=d.convertToTensor(e,"images","resizeNearestNeighbor");f.assert(3===r.rank||4===r.rank,"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+("rank "+r.rank+".")),f.assert(2===t.length,"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+(t+".")),f.assert("float32"===r.dtype||"int32"===r.dtype,"`images` must have `int32` or `float32` as dtype");var a=r,o=!1;3===r.rank&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=function(e,t){return e.resizeNearestNeighbor(a,i,s,n)},l=function(e,t){return{batchImages:function(){return p.ENV.engine.runKernel(function(t){return t.resizeNearestNeighborBackprop(e,a,n)},{})}}},c=p.ENV.engine.runKernel(u,{batchImages:a},l);return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function o(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var o=d.convertToTensor(e,"boxes","nonMaxSuppression"),i=d.convertToTensor(t,"scores","nonMaxSuppression"),u=s(o,i,n,r,a);return n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,p.ENV.engine.runKernel(function(e){return e.nonMaxSuppression(o,i,n,r,a)},{$boxes:o})}function i(e,t,n,r,a){return void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),l(this,void 0,void 0,function(){var o,i,u,l,p,f;return c(this,function(c){switch(c.label){case 0:return o=d.convertToTensor(e,"boxes","nonMaxSuppressionAsync"),i=d.convertToTensor(t,"scores","nonMaxSuppressionAsync"),u=s(o,i,n,r,a),n=u.maxOutputSize,r=u.iouThreshold,a=u.scoreThreshold,[4,o.data()];case 1:return l=c.sent(),[4,i.data()];case 2:return p=c.sent(),f=h.nonMaxSuppressionImpl(l,p,n,r,a),o!==e&&o.dispose(),i!==t&&i.dispose(),[2,f]}})})}function s(e,t,n,r,a){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY);var o=e.shape[0];return n=Math.min(n,o),f.assert(0<=r&&r<=1,"iouThreshold must be in [0, 1], but was '"+r+"'"),f.assert(2===e.rank,"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"),f.assert(4===e.shape[1],"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]),f.assert(1===t.rank,"scores must be a 1D tensor"),f.assert(t.shape[0]===o,"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a}}function u(e,t,n,r,a,o){var i=d.convertToTensor(e,"image","cropAndResize","float32"),s=d.convertToTensor(t,"boxes","cropAndResize","float32"),u=d.convertToTensor(n,"boxInd","cropAndResize","int32");a=a||"bilinear",o=o||0;var l=s.shape[0];f.assert(4===i.rank,"Error in cropAndResize: image must be rank 4,"+("but got rank "+i.rank+".")),f.assert(2===s.rank&&4===s.shape[1],"Error in cropAndResize: boxes must be have size ["+l+",4] "+("but had shape "+s.shape+".")),f.assert(1===u.rank&&u.shape[0]===l,"Error in cropAndResize: boxInd must be have size ["+l+"] "+("but had shape "+s.shape+".")),f.assert("int32"===u.dtype,"Error in cropAndResize: boxInd must be of dtype int32, but got dtype "+(u.dtype+".")),f.assert(2===r.length,"Error in cropAndResize: cropSize must be of length 2, but got length "+(r.length+".")),f.assert(r[0]>=1&&r[1]>=1,"cropSize must be atleast [1,1], but was "+r),f.assert("bilinear"===a||"nearest"===a,"method must be bilinear or nearest, but was "+a);var c=function(e,t){return e.cropAndResize(i,s,u,r,a,o)},h=p.ENV.engine.runKernel(c,{$image:i,$boxes:s});return h}var l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,o,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};Object.defineProperty(t,"__esModule",{value:!0});var p=n(4),h=n(125),d=n(7),f=n(2),m=n(6);t.resizeBilinear=m.op({resizeBilinear_:r}),t.resizeNearestNeighbor=m.op({resizeNearestNeighbor_:a}),t.nonMaxSuppression=m.op({nonMaxSuppression_:o}),t.nonMaxSuppressionAsync=i,t.cropAndResize=u},function(e,t,n){"use strict";function r(e){var t;if(Array.isArray(e)){t=!1,u.assert(null!=e&&e.length>0,"Gram-Schmidt process: input must not be null, undefined, or empty");for(var n=e[0].shape[0],r=1;r<e.length;++r)u.assert(e[r].shape[0]===n,"Gram-Schmidt: Non-unique lengths found in the input vectors: "+("("+e[r].shape[0]+" vs. "+n+")"))}else t=!0,e=c.split(e,e.shape[0],0).map(function(e){return l.squeeze(e,[0])});u.assert(e.length<=e[0].shape[0],"Gram-Schmidt: Number of vectors ("+e.length+") exceeds "+("number of dimensions ("+e[0].shape[0]+")."));for(var a=[],o=e,s=function(e){a.push(i.ENV.engine.tidy(function(){var t=o[e];if(e>0)for(var n=0;n<e;++n){var r=d.sum(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(p.norm(t,"euclidean"))}))},r=0;r<e.length;++r)s(r);return t?l.stack(a,0):a}function a(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return o(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(e,t){return e*t}),r=l.unstack(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach(function(e){var n=o(e,t),r=n[0],s=n[1];a.push(r),i.push(s)});var s=l.stack(a,0).reshape(e.shape),u=l.stack(i,0).reshape(e.shape);return[s,u]}function o(e,t){return void 0===t&&(t=!1),i.ENV.engine.tidy(function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],a=l.eye(n),o=e.clone(),u=f.tensor2d([[1]],[1,1]),c=u.clone(),p=n>=r?r:n,h=function(e){var t,l=o,p=c,h=a;t=i.ENV.engine.tidy(function(){var t=o.slice([e,e],[n-e,1]),i=t.norm(),s=o.slice([e,e],[1,1]),l=s.sign().neg(),p=s.sub(l.mul(i)),h=t.div(p);c=1===h.shape[0]?u.clone():u.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var d=l.matMul(p).div(i).neg(),f=o.slice([e,0],[n-e,r]),m=d.mul(c);o=0===e?f.sub(m.matMul(c.transpose().matMul(f))):o.slice([0,0],[e,r]).concat(f.sub(m.matMul(c.transpose().matMul(f))),0);var g=a.slice([0,e],[n,a.shape[1]-e]);return a=0===e?g.sub(g.matMul(c).matMul(m.transpose())):a.slice([0,0],[n,e]).concat(g.sub(g.matMul(c).matMul(m.transpose())),1),[c,o,a]}),c=t[0],o=t[1],a=t[2],s.dispose([l,p,h])},d=0;d<p;++d)h(d);return!t&&n>r&&(a=a.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[a,o]})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(24),u=n(2),l=n(74),c=n(128),p=n(182),h=n(6),d=n(184),f=n(10);t.gramSchmidt=h.op({gramSchmidt_:r}),t.qr=h.op({qr_:a})},function(e,t,n){"use strict";function r(e,t,n,r,s){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===s&&(s=.5);var u=o.convertToTensor(e,"x","localResponseNormalization");i.assert(4===u.rank||3===u.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+u.rank+"."),i.assert(i.isInt(t),"Error in localResponseNormalization: depthRadius must be an integer\n                     but got depthRadius "+t+".");var l=u,c=!1;3===u.rank&&(c=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]));var p=function(e,o){var i=o[0];return{x4D:function(){return a.ENV.engine.runKernel(function(a){return a.LRNGrad(e,l,i,t,n,r,s)},{})}}},h=a.ENV.engine.runKernel(function(e,a){return a(e.localResponseNormalization4D(l,t,n,r,s))},{x4D:l},p);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(7),i=n(2),s=n(6);t.localResponseNormalization=s.op({localResponseNormalization_:r})},function(e,t,n){"use strict";function r(e,t,n,r){for(var a=o.convertToTensor(t,"data","multiRNNCell"),i=o.convertToTensorArray(n,"c","multiRNNCell"),s=o.convertToTensorArray(r,"h","multiRNNCell"),u=a,l=[],c=0;c<e.length;c++){var p=e[c](u,i[c],s[c]);l.push(p[0]),l.push(p[1]),u=p[1]}for(var h=[],d=[],c=0;c<l.length;c+=2)h.push(l[c]),d.push(l[c+1]);return[h,d]}function a(e,t,n,r,a,i){var s=o.convertToTensor(e,"forgetBias","basicLSTMCell"),u=o.convertToTensor(t,"lstmKernel","basicLSTMCell"),l=o.convertToTensor(n,"lstmBias","basicLSTMCell"),c=o.convertToTensor(r,"data","basicLSTMCell"),p=o.convertToTensor(a,"c","basicLSTMCell"),h=o.convertToTensor(i,"h","basicLSTMCell"),d=c.concat(h,1),f=d.matMul(u),m=f.add(l),g=m.shape[0],v=m.shape[1]/4,y=[g,v],b=m.slice([0,0],y),x=m.slice([0,v],y),w=m.slice([0,2*v],y),S=m.slice([0,3*v],y),_=b.sigmoid().mulStrict(x.tanh()).addStrict(p.mulStrict(s.add(w).sigmoid())),N=_.tanh().mulStrict(S.sigmoid());return[_,N]}Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=n(6);t.basicLSTMCell=i.op({basicLSTMCell_:a}),t.multiRNNCell=i.op({multiRNNCell_:r})},function(e,t,n){"use strict";function r(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var a=s.convertToTensor(e,"a","matMul"),o=s.convertToTensor(t,"b","matMul"),l=n?a.shape[a.rank-2]:a.shape[a.rank-1],c=r?o.shape[o.rank-1]:o.shape[o.rank-2],p=n?a.shape[a.rank-1]:a.shape[a.rank-2],h=r?o.shape[o.rank-2]:o.shape[o.rank-1],d=a.shape.slice(0,-2),f=o.shape.slice(0,-2),m=u.sizeFromShape(d),g=u.sizeFromShape(f);u.assert(a.rank>=2&&o.rank>=2&&a.rank===o.rank,"Error in matMul: inputs must have the same rank of at least 2, "+("got ranks "+a.rank+" and "+o.rank+".")),u.assert(u.arraysEqual(d,f),"Error in matMul: outer dimensions ("+d+") and ("+(f+") of Tensors with shapes "+a.shape+" and ")+(o.shape+" must match.")),u.assert(l===c,"Error in matMul: inner shapes ("+l+") and ("+(c+") of Tensors with shapes "+a.shape+" and ")+(o.shape+" and transposeA="+n)+(" and transposeB="+r+" must match."));var v=a.shape.slice(0,-2).concat([p,h]),y=n?a.as3D(m,l,p):a.as3D(m,p,l),b=r?o.as3D(g,h,c):o.as3D(g,c,h),x=function(e){return n||r?!n&&r?{$a:function(){return e.matMul(b.toFloat(),!1,!1)},$b:function(){return e.matMul(y.toFloat(),!0,!1)}}:n&&!r?{$a:function(){return b.toFloat().matMul(e,!1,!0)},$b:function(){return y.toFloat().matMul(e,!1,!1)}}:{$a:function(){return b.toFloat().matMul(e,!0,!0)},$b:function(){return e.matMul(y.toFloat(),!0,!0)}}:{$a:function(){return e.matMul(b.toFloat(),!1,!0)},$b:function(){return y.toFloat().matMul(e,!0,!1)}}},w=i.ENV.engine.runKernel(function(e){return e.batchMatMul(y,b,n,r)},{$a:y,$b:b},x);return w.reshape(v)}function a(e,t){var n=s.convertToTensor(e,"v1","outerProduct"),r=s.convertToTensor(t,"v2","outerProduct");return u.assert(1===n.rank&&1===r.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+(n.rank+" and "+r.rank+".")),n.as2D(-1,1).matMul(r.as2D(1,-1))}function o(e,t){var n=s.convertToTensor(e,"t1","dot"),r=s.convertToTensor(t,"t2","dot");u.assert(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),"Error in dot: inputs must all be rank 1 or 2, but got ranks "+(n.rank+" and "+r.rank+"."));var a=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];return u.assert(a===o,"Error in dot: inner dimensions of inputs must match, but got "+(a+" and "+o+".")),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(7),u=n(2),l=n(6);t.matMul=l.op({matMul_:r}),t.dot=l.op({dot_:o}),t.outerProduct=l.op({outerProduct_:a})},function(e,t,n){"use strict";function r(e,t,n,r,u){void 0===u&&(u=!0);var c=o.convertToTensor(e,"v","movingAverage"),p=o.convertToTensor(t,"x","movingAverage"),h=o.convertToTensor(n,"decay","movingAverage");a.assertTypesMatch(c,p),i.assert(i.arraysEqual(c.shape,p.shape),"Shape mismatch in v and x");var d=l.scalar(1),f=d.sub(h),m=p.sub(c).mul(f);if(u){i.assert(null!=r,"When using zeroDebias: true, step is required.");var g=o.convertToTensor(r,"step","movingAverage");m=m.div(d.sub(s.pow(h,g)))}return c.add(m)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(76),o=n(7),i=n(2),s=n(75),u=n(6),l=n(10);t.movingAverage=u.op({movingAverage_:r})},function(e,t,n){"use strict";function r(e,t,n,r,a){var i=u.convertToTensor(e,"x","maxPool"),p=i,h=!1;3===i.rank&&(h=!0,p=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),l.assert(4===p.rank,"Error in maxPool: input must be rank 4 but got rank "+p.rank+"."),null!=a&&l.assert(l.isInt(r),"Error in maxPool: pad must be an integer when using, "+("dimRoundingMode "+a+" but got pad "+r+"."));var d=c.computePool2DInfo(p.shape,t,n,r,a),f=function(e,a){var i=a[0];return{x:function(){return o(e,p,i,t,n,r)}}},m=s.ENV.engine.runKernel(function(e,t){return t(e.maxPool(p,d))},{x:p},f);return h?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}function a(e,t,n,r,a){var o=u.convertToTensor(e,"x","avgPool");l.assert("float32"===o.dtype,"The input dtype to avgPool must be float32");var p=o,h=!1;3===o.rank&&(h=!0,p=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),l.assert(4===p.rank,"Error in avgPool: x must be rank 4 but got rank "+p.rank+"."),null!=a&&l.assert(l.isInt(r),"Error in avgPool: pad must be an integer when using, "+("dimRoundingMode "+a+" but got pad "+r+"."));var d=c.computePool2DInfo(p.shape,t,n,r),f=function(e){return{x:function(){return i(e,p,t,n,r)}}},m=s.ENV.engine.runKernel(function(e){return e.avgPool(p,d)},{x:p},f);return m=m.cast(o.dtype),h?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}function o(e,t,n,r,a,o,i){var p=u.convertToTensor(e,"dy","maxPoolBackprop"),h=u.convertToTensor(t,"input","maxPoolBackprop"),d=u.convertToTensor(n,"output","maxPoolBackprop");l.assert(h.rank===p.rank,"Rank of input ("+h.rank+") does not match rank of dy ("+p.rank+")"),l.assert(4===p.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+(p.rank+".")),l.assert(4===h.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+(h.rank+".")),null!=i&&l.assert(l.isInt(o),"Error in maxPoolBackprop: pad must be an integer when using, "+("dimRoundingMode "+i+" but got pad "+o+"."));var f=c.computePool2DInfo(h.shape,r,a,o,i),m=s.ENV.engine.runKernel(function(e){return e.maxPoolBackprop(p,h,d,f)},{$dy:p,$input:h});return m}function i(e,t,n,r,a){var o=u.convertToTensor(e,"dy","avgPoolBackprop"),i=u.convertToTensor(t,"input","avgPoolBackprop");l.assert(i.rank===o.rank,"Rank of input ("+i.rank+") does not match rank of dy ("+o.rank+")");var p=i,h=o,d=!1;3===i.rank&&(d=!0,p=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]),h=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),l.assert(4===h.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+(h.rank+".")),l.assert(4===p.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+(p.rank+"."));var f=c.computePool2DInfo(p.shape,n,r,a),m=s.ENV.engine.runKernel(function(e){return e.avgPoolBackprop(h,p,f)},{dy4D:h,input4D:p});return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),u=n(7),l=n(2),c=n(179),p=n(6);t.maxPool=p.op({maxPool_:r}),t.avgPool=p.op({avgPool_:a})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(357),a=function(){function e(e,t,n,a,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=o?o:Math.random();this.random=r.alea(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,o=void 0,i=void 0;do a=2*this.random()-1,o=2*this.random()-1,i=a*a+o*o;while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}();t.MPRandGauss=a},function(e,t,n){"use strict";function r(e){var t=l.convertToTensor(e,"x","relu");if("bool"===t.dtype)return t.toInt();var n=function(e){var n=t.step();return{$x:function(){return e.mulStrict(n.toFloat())}}};return u.ENV.engine.runKernel(function(e){return e.relu(t)},{$x:t},n)}function a(e){var t=l.convertToTensor(e,"x","elu"),n=function(e,t){var n=t[0];return{$x:function(){return u.ENV.engine.runKernel(function(t){return t.eluDer(e,n)},{dy:e,y:n})}}};return u.ENV.engine.runKernel(function(e,n){return n(e.elu(t))},{$x:t},n)}function o(e){var t=l.convertToTensor(e,"x","selu"),n=function(e){return{$x:function(){var n=t.greater(f.scalar(0)),r=f.scalar(d.SELU_SCALEALPHA),a=f.scalar(d.SELU_SCALE),o=e.mul(a),i=e.mul(r).mul(t.toFloat().exp());return p.where(n,o,i)}}};return u.ENV.engine.runKernel(function(e){return e.selu(t)},{$x:t},n)}function i(e,t){void 0===t&&(t=.2);var n=l.convertToTensor(e,"x","leakyRelu");return c.maximum(f.scalar(t).mul(n),n)}function s(e,t){var n=l.convertToTensor(e,"x","prelu"),r=l.convertToTensor(t,"alpha","prelu"),a=f.scalar(0);return c.maximum(a,n).add(r.mul(c.minimum(a,n)))}Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),l=n(7),c=n(75),p=n(129),h=n(6),d=n(130),f=n(10);t.elu=h.op({elu_:a}),t.leakyRelu=h.op({leakyRelu_:i}),t.prelu=h.op({prelu_:s}),t.relu=h.op({relu_:r}),t.selu=h.op({selu_:o})},function(e,t,n){"use strict";function r(e){var n=l.convertToTensor(e,"x","reverse");return c.assert(1===n.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+n.rank+"."),t.reverse(n,0)}function a(e,n){var r=l.convertToTensor(e,"x","reverse");return c.assert(2===r.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+r.rank+"."),t.reverse(r,n)}function o(e,n){var r=l.convertToTensor(e,"x","reverse");return c.assert(3===r.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+r.rank+"."),
t.reverse(r,n)}function i(e,n){var r=l.convertToTensor(e,"x","reverse");return c.assert(4===r.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+r.rank+"."),t.reverse(r,n)}function s(e,t){var n=l.convertToTensor(e,"x","reverse");if(0===n.rank)return n.clone();var r=p.parseAxisParam(t,n.shape),a=function(e){return{$x:function(){return e.reverse(r)}}},o=u.ENV.engine.runKernel(function(e){return e.reverse(n,r)},{$x:n},a);return o.reshapeAs(n)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),l=n(7),c=n(2),p=n(34),h=n(6);t.reverse=h.op({reverse_:s}),t.reverse1d=h.op({reverse1d_:r}),t.reverse2d=h.op({reverse2d_:a}),t.reverse3d=h.op({reverse3d_:o}),t.reverse4d=h.op({reverse4d_:i})},function(e,t,n){"use strict";function r(e,t,n){var r=l.convertToTensor(e,"x","unsortedSegmentSum"),a=l.convertToTensor(t,"segmentIds","unsortedSegmentSum","int32");c.assert("int32"===a.dtype,"segmentIds must be of dtype `int32`"),c.assert(c.isInt(n),"numSegments must be of dtype int");var o=function(e){var t=function(){return s(e,a)};return{$x:t}};return u.ENV.engine.runKernel(function(e){return e.unsortedSegmentSum(r,a,n)},{$x:r},o)}function a(e,n,r){void 0===r&&(r=0);var a=l.convertToTensor(e,"x","gather"),s=l.convertToTensor(n,"indices","gather","int32");c.assert("int32"===s.dtype,"Indices must be of dtype `int32`"),r=h.parseAxisParam(r,a.shape)[0];var p=function(e){var n=function(){if(0===r)return t.unsortedSegmentSum(e,s,a.shape[r]);var n=a.shape,u=s.size,l=n.slice(0,r),c=l.length,p=n.slice(r,n.length).slice(1),d=p.length,f=o(0,c),m=o(c+1,c+1+d),g=i([l,[u],p]),v=e.reshape(g),y=s.reshape([u]),b=i([[c],f,m]),x=v.transpose(b),w=t.unsortedSegmentSum(x,y,a.shape[r]),S=h.getUndoAxesPermutation(b);return w=w.transpose(S)};return{$x:n}};return u.ENV.engine.runKernel(function(e){return e.gather(a,s,r)},{$x:a},p)}function o(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function i(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}function s(e,n){for(var r=d.maximum(n,v.zerosLike(n)),a=t.gather(e,r),o=f.greaterEqual(n,v.scalar(0,"int32")),i=a.rank-o.rank,s=0;s<i;++s)o=p.expandDims(o,s+1);o=m.logicalAnd(o,v.ones(a.shape,"bool"));var u=v.zerosLike(a);return m.where(o,a,u)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),l=n(7),c=n(2),p=n(74),h=n(34),d=n(75),f=n(177),m=n(129),g=n(6),v=n(10);t.gather=g.op({gather_:a}),t.unsortedSegmentSum=g.op({unsortedSegmentSum_:r})},function(e,t,n){"use strict";function r(e,t){var n,r=!1;for(e<=i.PARALLELIZE_THRESHOLD?(n=e,r=!0):n=o.nearestDivisor(e,Math.floor(Math.sqrt(e)));!r;){if(n>t||n===e){r=!0;break}n=o.nearestDivisor(e,n+1)}return n}function a(e,t,n){for(var r=[],a=e.length,o=0;o<a;o++)o!==t?r.push(e[o]):r.push(n);return r}Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(183);t.segOpComputeOptimalWindowSize=r,t.computeOutShape=a},function(e,t,n){"use strict";function r(e,n,r){var a=l.convertToTensor(e,"x","slice1d");return c.assert(1===a.rank,"slice1d expects a rank-1 tensor, but got a rank-"+a.rank+" tensor"),t.slice(a,[n],[r])}function a(e,n,r){var a=l.convertToTensor(e,"x","slice2d");return c.assert(2===a.rank,"slice1d expects a rank-2 tensor, but got a rank-"+a.rank+" tensor"),t.slice(a,n,r)}function o(e,n,r){var a=l.convertToTensor(e,"x","slice3d");return c.assert(3===a.rank,"slice1d expects a rank-3 tensor, but got a rank-"+a.rank+" tensor"),t.slice(a,n,r)}function i(e,n,r){var a=l.convertToTensor(e,"x","slice4d");return c.assert(4===a.rank,"slice1d expects a rank-4 tensor, but got a rank-"+a.rank+" tensor"),t.slice(a,n,r)}function s(e,t,n){var r=l.convertToTensor(e,"x","slice");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a;a="number"==typeof t?[t].concat(new Array(r.rank-1).fill(0)):t.length<r.rank?t.concat(new Array(r.rank-t.length).fill(0)):t.slice();var o;o=null==n?new Array(r.rank).fill(-1):"number"==typeof n?[n].concat(new Array(r.rank-1).fill(-1)):n.length<r.rank?n.concat(new Array(r.rank-n.length).fill(-1)):n,o=o.map(function(e,t){return e>=0?e:(c.assert(e===-1,"Bad value in size"),r.shape[t]-a[t])}),h.assertParamsValid(r,a,o);var i=r.shape,s=function(e){for(var t=[],n=0;n<e.rank;n++)t.push([a[n],i[n]-a[n]-o[n]]);return{$x:function(){return e.pad(t)}}};return u.ENV.engine.runKernel(function(e){return e.slice(r,a,o)},{$x:r},s)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(4),l=n(7),c=n(2),p=n(6),h=n(131);t.slice=p.op({slice_:s}),t.slice1d=p.op({slice1d_:r}),t.slice2d=p.op({slice2d_:a}),t.slice3d=p.op({slice3d_:o}),t.slice4d=p.op({slice4d_:i})},function(e,t,n){"use strict";function r(e,t,n,r,i,s,u,l,c){if(void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),void 0===l&&(l=0),void 0===c&&(c=0),0!==u)throw new Error("ellipsis mask is not yet supported");if(0!==l)throw new Error("new axis mask is not yet supported");var p=o.convertToTensor(e,"x","stridedSlice");return a.ENV.engine.runKernel(function(e){return e.stridedSlice(p,t,n,r,i,s,u,l,c)},{$x:p})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(7),i=n(6);t.stridedSlice=i.op({stridedSlice_:r})},function(e,t,n){"use strict";function r(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=o.convertToTensor(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var s=a.ENV.engine.runKernel(function(e){return e.topk(r,t,n)},{$x:r}),u=s[0],l=s[1];return{values:u,indices:l}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(7),i=n(6);t.topk=i.op({topk_:r})},function(e,t,n){"use strict";function r(e,t){var n=o.convertToTensor(e,"x","transpose");if(null==t&&(t=n.shape.map(function(e,t){return t}).reverse()),i.assert(n.rank===t.length,"Error in transpose: rank of input "+n.rank+" "+("must match length of perm "+t+".")),t.forEach(function(e){i.assert(e>=0&&e<n.rank,"All entries in 'perm' must be between 0 and "+(n.rank-1)+(" but got "+t))}),n.rank<=1)return n.clone();var r=function(e){var n=s.getUndoAxesPermutation(t);return{$x:function(){return e.transpose(n)}}};return a.ENV.engine.runKernel(function(e){return e.transpose(n,t)},{$x:n},r)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=n(7),i=n(2),s=n(34),u=n(6);t.transpose=u.op({transpose_:r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(133),a=n(134),o=n(135),i=n(136),s=n(137),u=n(138),l=n(93),c=function(){function e(){}return e.sgd=function(e){return new l.SGDOptimizer(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new s.MomentumOptimizer(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new u.RMSPropOptimizer(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new o.AdamOptimizer(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new r.AdadeltaOptimizer(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new i.AdamaxOptimizer(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new a.AdagradOptimizer(e,t)},e}();t.OptimizerConstructors=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new o)}return e.prototype.profileKernel=function(e,t){var n,a=this,o=function(){n=t()},i=this.backendTimer.time(o),s=Array.isArray(n)?n:[n];return s.forEach(function(t){var n=t.dataSync();r.checkComputationForNaN(n,t.dtype,e),i.then(function(r){a.logger.logKernelProfile(e,t,n,r.kernelMs)})}),n},e}();t.Profiler=a;var o=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,a){var o=r.rightPad(a+"ms",9),i=r.rightPad(e,25),s=t.rank,u=t.size,l=r.rightPad(t.shape.toString(),14);console.log("%c"+i+"\t%c"+o+"\t%c"+s+"D "+l+"\t%c"+u,"font-weight:bold","color:red","color:blue","color: orange")},e}();t.Logger=o},function(e,t,n){"use strict";function r(e,t,n){for(var r={},a={},o=0;o<t.length;o++)r[t[o].id]=!0;for(var o=0;o<e.length;o++){var i=e[o],s=i.inputs;for(var u in s){for(var l=s[u],c=!1,p=0;p<t.length;p++)if(r[l.id]){i.outputs.forEach(function(e){return r[e.id]=!0}),c=!0,a[i.id]=!0;break}if(c)break}}var h={};h[n.id]=!0;for(var d={},o=e.length-1;o>=0;o--)for(var i=e[o],s=i.inputs,p=0;p<i.outputs.length;p++)if(h[i.outputs[p].id]){for(var u in s)h[s[u].id]=!0,d[i.id]=!0;break}for(var f=[],o=0;o<e.length;o++){var i=e[o];if(a[i.id]&&d[i.id]){var m={};for(var u in i.inputs){var g=i.inputs[u];r[g.id]&&(m[u]=g)}var v=Object.assign({},i);v.inputs=m,v.outputs=i.outputs,f.push(v)}}return f}function a(e,t){for(var n=(function(n){var r=t[n],a=[];if(r.outputs.forEach(function(t){var n=e[t.id];if(null!=n)a.push(n);else{var r=o.Tensor.make(t.shape,{values:i.makeZerosTypedArray(t.size,t.dtype)},t.dtype);a.push(r)}}),null==r.gradient)throw new Error("Cannot compute gradient: gradient function not found "+("for "+r.name+"."));var s=r.gradient(1===r.outputs.length?a[0]:a);for(var u in r.inputs){if(!(u in s))throw new Error("Cannot backprop through input "+u+". "+("Available gradients found: "+Object.keys(s)+"."));var l=s[u](),c=r.inputs[u];if(!i.arraysEqual(l.shape,c.shape))throw new Error("Error in gradient for op "+r.name+". The gradient of input "+("'"+u+"' has shape '"+l.shape+"', which does not match ")+("the shape of the input '"+c.shape+"'"));if(null==e[c.id])e[c.id]=l;else{var p=e[c.id];e[c.id]=p.add(l),p.dispose()}}}),r=t.length-1;r>=0;r--)n(r)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(18),i=n(2);t.getFilteredNodesXToY=r,t.backpropagateGradients=a},function(e,t,n){"use strict";function r(e,t,n,r){var o=u.computeStrides(t),s=a(e,t,n,o),l=t.length,c=i(e,t,n,o,s),p=["Tensor"];return r&&(p.push("  dtype: "+n),p.push("  rank: "+l),p.push("  shape: ["+t+"]"),p.push("  values:")),p.push(c.map(function(e){return"    "+e}).join("\n")),p.join("\n")}function a(e,t,n,r){var a=u.sizeFromShape(t),i=r[r.length-1],l=new Array(i).fill(0),c=t.length,p="complex64"===n?s(e):e;if(c>1)for(var h=0;h<a/i;h++)for(var d=h*i,f=0;f<i;f++)l[f]=Math.max(l[f],o(p[d+f],0).length);return l}function o(e,t){var n;return n=Array.isArray(e)?parseFloat(e[0].toFixed(p))+" + "+(parseFloat(e[1].toFixed(p))+"j"):parseFloat(e.toFixed(p)).toString(),u.rightPad(n,t)}function i(e,t,n,r,a,u){void 0===u&&(u=!0);var p="complex64"===n?2:1,h=t[0],d=t.length;if(0===d){if("complex64"===n){var f=s(e);return[o(f[0],0)]}return[e[0].toString()]}if(1===d){if(h>l){var m=c*p,g=Array.from(e.subarray(0,m)),v=Array.from(e.subarray(h-c*p,h));return"complex64"===n&&(g=s(g),v=s(v)),["["+g.map(function(e,t){return o(e,a[t])}).join(", ")+", ..., "+v.map(function(e,t){return o(e,a[h-c+t])}).join(", ")+"]"]}var y="complex64"===n?s(e):Array.from(e);return["["+y.map(function(e,t){return o(e,a[t])}).join(", ")+"]"]}var b=t.slice(1),x=r.slice(1),w=r[0]*p,S=[];if(h>l){for(var _=0;_<c;_++){var N=_*w,T=N+w;S.push.apply(S,i(e.subarray(N,T),b,n,x,a,!1))}S.push("...");for(var _=h-c;_<h;_++){var N=_*w,T=N+w;S.push.apply(S,i(e.subarray(N,T),b,n,x,a,_===h-1))}}else for(var _=0;_<h;_++){var N=_*w,T=N+w;S.push.apply(S,i(e.subarray(N,T),b,n,x,a,_===h-1))}var k=2===d?",":"";S[0]="["+S[0]+k;for(var _=1;_<S.length-1;_++)S[_]=" "+S[_]+k;for(var I=",\n",_=2;_<d;_++)I+="\n";return S[S.length-1]=" "+S[S.length-1]+"]"+(u?"":I),S}function s(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),l=20,c=3,p=7;t.tensorToString=r},function(e,t,n){"use strict";function r(e,t,n){if(null==n&&(n=c.ENV.get("TEST_EPSILON")),e instanceof p.Tensor||t instanceof p.Tensor){if(e instanceof p.Tensor&&t instanceof p.Tensor){if(e.dtype!==t.dtype)throw new Error("Arrays are of different type actual: "+e.dtype+" "+("vs expected: "+t.dtype+"."));if(!h.arraysEqual(e.shape,t.shape))throw new Error("Arrays are of different shape actual: "+e.shape+" "+("vs expected: "+t.shape+"."))}}else{var r=e.constructor.name,a=t.constructor.name;if(r!==a)throw new Error("Arrays are of different type actual: "+r+" vs expected: "+a)}var o,i;if(o=e instanceof p.Tensor?e.dataSync():e,i=t instanceof p.Tensor?t.dataSync():t,o.length!==i.length)throw new Error("Arrays have different lengths actual: "+o.length+" vs "+("expected: "+i.length+".\n")+("Actual:   "+o+".\n")+("Expected: "+i+"."));for(var u=0;u<i.length;++u){var l=o[u],d=i[u];if(!s(l,Number(d),n))throw new Error("Arrays differ: actual["+u+"] = "+l+", expected["+u+"] = "+d+".\n"+("Actual:   "+o+".\n")+("Expected: "+i+"."))}}function a(e,t){e().then(function(){return t.fail()},function(){return t()})}function o(e,t){return r(e,t,0)}function i(e,t,n){if(null==n&&(n=c.ENV.get("TEST_EPSILON")),!s(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)}function s(e,t,n){return!(!isNaN(e)||!isNaN(t))||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function u(e,t,n){var r;r=e instanceof p.Tensor?e.dataSync():e;for(var a=0;a<r.length;a++)if(r[a]<t||r[a]>n)throw new Error("Value out of range:"+r[a]+" low: "+t+", high: "+n)}function l(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}Object.defineProperty(t,"__esModule",{value:!0});var c=n(4),p=n(18),h=n(2);t.WEBGL_ENVS={HAS_WEBGL:!0},t.NODE_ENVS={IS_NODE:!0},t.CHROME_ENVS={IS_CHROME:!0},t.BROWSER_ENVS={IS_BROWSER:!0},t.CPU_ENVS={HAS_WEBGL:!1},t.ALL_ENVS={},t.expectArraysClose=r,t.expectPromiseToFail=a,t.expectArraysEqual=o,t.expectNumbersClose=i,t.expectValuesInRange=u,t.expectArrayBuffersEqual=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(133),a=n(134),o=n(135),i=n(136),s=n(137),u=n(493),l=n(138),c=n(93);[s.MomentumOptimizer,c.SGDOptimizer,r.AdadeltaOptimizer,a.AdagradOptimizer,l.RMSPropOptimizer,i.AdamaxOptimizer,o.AdamOptimizer],t.train={sgd:u.OptimizerConstructors.sgd,momentum:u.OptimizerConstructors.momentum,adadelta:u.OptimizerConstructors.adadelta,adagrad:u.OptimizerConstructors.adagrad,rmsprop:u.OptimizerConstructors.rmsprop,adamax:u.OptimizerConstructors.adamax,adam:u.OptimizerConstructors.adam}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="0.12.17";t.version=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(126);t.gpgpu_util=r;var a=n(91);t.webgl_util=a;var o=n(167);t.MathBackendWebGL=o.MathBackendWebGL;var i=n(173);t.GPGPUContext=i.GPGPUContext},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(139),o=n(96),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.model=null,t}return r(t,e),t.prototype.setModel=function(e){if(!(e instanceof o.Model))throw new Error("model must be a Model, not some other Container");this.model=e},t}(a.BaseCallback);t.Callback=i},function(e,t,n){"use strict";function r(e,t,n,r){if(!n.startsWith("2."))throw new c.ValueError("Unsupported Keras version in weights being loaded: "+n);return t}function a(e,t,n){var r=h.stringToDType(e);return u.Tensor.make(t,{values:0===t.length?n:u.util.flatten(n)},r)}function o(e,t,n){void 0===n&&(n=!1);for(var o=e.keras_version,i=e.backend,s=t.map(function(e){return e.name}),l={},p=0,h=t;p<h.length;p++){var d=h[p];null!=d.name&&(null==l[d.name]&&(l[d.name]=[]),l[d.name].push(d))}for(var f=e.weights,g=[],v=0;v<s.length;++v){var y=s[v],b=f[y];null==b&&(b=[]);for(var x=[],w=0;w<b.length;++w){var S=b[w];x.push(new m.LayerVariable(a(S.dtype,S.shape,S.value)))}for(var _=0,N=l[y];_<N.length;_++){var d=N[_],T=d.weights;if(x=r(d,x,o,i),x.length!==T.length){if(!n)throw new c.ValueError("Layer #"+v+' (named "'+d.name+'") expects '+(T.length+" weight(s), but the saved weights ")+("have "+x.length+" element(s)."));console.warn("Skipping loading of weights of layer "+d.name+" "+("due to mismatch in number of weights: ("+x.length+" ")+("vs "+T.length+")."))}for(var k=0;k<x.length;++k)!n||u.util.arraysEqual(T[k].shape,x[k].shape)?g.push([T[k],x[k].read()]):console.warn("Skipping loading of weights for layer "+d.name+" due "+("to mismatch in shape ("+T[k].shape+" vs ")+(x[k].shape+")"))}}m.batchSetValue(g)}function i(e,t,n){void 0===n&&(n=!0);for(var r={},a=0,o=0,i=t;o<i.length;o++)for(var s=i[o],u=0,l=s.weights;u<l.length;u++){var p=l[u];if(null!=r[p.originalName])throw new c.ValueError("Duplicate weight name: "+p.originalName);r[p.originalName]=p,a++}var h=[];for(var d in e){if(null!=r[d])h.push([r[d],e[d]]);else if(n)throw new c.ValueError("Provided weight data has no target variable: "+d);delete r[d]}if(n){var f=[];for(var g in r)f.push(g);if(f.length>0)throw new c.ValueError(f.length+" of "+a+" weights are not set: "+f)}m.batchSetValue(h)}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),l=n(11),c=n(8),p=n(97),h=n(13),d=n(191),f=n(19),m=n(99),g=n(193),v=n(77),y=n(15);t.loadWeightsFromJson=o,t.loadWeightsFromNamedTensorMap=i;var b=function(e){function t(n){var r=e.call(this,{})||this;if(r.containerNodes=new Set,r.name=n.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=l.getUid(a)}if(r.supportsMasking=!1,r.trainable=!0,r.updatable=!0,Array.isArray(n.inputs)?r.inputs=n.inputs.slice():r.inputs=[n.inputs],Array.isArray(n.outputs)?r.outputs=n.outputs.slice():r.outputs=[n.outputs],h.unique(r.inputs).length!==r.inputs.length)throw new c.ValueError("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(e){return e.name}));h.unique(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(e){return e.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[];for(var o=0,i=r.outputs;o<i.length;o++){var s=i[o],u=s.sourceLayer,p=s.nodeIndex,d=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(p),r.outputLayersTensorIndices.push(d)}for(var f=0,m=r.inputs;f<m.length;f++){var s=m[f],u=s.sourceLayer,p=s.nodeIndex,d=s.tensorIndex;h.assert(0===p,"input layer has >1 nodes"),h.assert(0===d,"input layer has >1 tensors"),r.inputLayers.push(u),r.inputLayersNodeIndices.push(p),r.inputLayersTensorIndices.push(d)}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var u=r.inputLayers[g];if(!(u instanceof v.InputLayer))throw new TypeError("Input layers to a Model must be InputLayer objects. "+("Received inputs: "+n.inputs+". ")+("Input "+g+" (0-based) originates ")+("from layer type "+u.getClassName()+"."));r.inputNames.push(u.name),r.feedInputShapes.push(u.batchInputShape),r.feedInputNames.push(u.name)}for(var b=0,x=r.outputLayers;b<x.length;b++){var u=x[b];r.outputNames.push(u.name)}r.internalInputShapes=r.inputs.map(function(e){return e.shape}),r.internalOutputShapes=r.outputs.map(function(e){return e.shape});for(var w={},S={},_={},N={},T={},k=[],I=(function(e,n,a,o,i,s){null!=o&&null!=i&&null!=s||(o=e.sourceLayer,i=e.nodeIndex,s=e.tensorIndex);var u=o.inboundNodes[i];if(a.indexOf(u)!==-1)throw new c.RuntimeError("The tensor "+e.name+' at layer "'+o.name+'" is part of a cycle.');if(n.indexOf(u)===-1){r.containerNodes.add(t.nodeKey(o,i)),o.id in T||(T[o.id]=Object.keys(T).length),a.indexOf(u)===-1&&a.push(u);for(var l=u.inboundLayers.length,p=0;p<l;p++){var h=u.inputTensors[p],d=u.inboundLayers[p],f=u.nodeIndices[p],m=u.tensorIndices[p];I(h,n,a,d,f,m)}for(n.push(u);a.indexOf(u)>=0;)a.splice(a.indexOf(u),1);k.push(u)}}),E=[],A=[],P=0,C=r.outputs;P<C.length;P++){var s=C[P];I(s,E,A)}for(var O=k.slice().reverse(),M=0,D=O;M<D.length;M++){var R=D[M];S[R.id]=R,R.id in w||(w[R.id]=0);var z=w[R.id],L=null==_[R.outboundLayer.id]?0:_[R.outboundLayer.id];z=Math.max(z,L),_[R.outboundLayer.id]=z,N[R.outboundLayer.id]=R.outboundLayer,w[R.id]=z;for(var g=0;g<R.inboundLayers.length;g++){var V=R.inboundLayers[g],p=R.nodeIndices[g],F=V.inboundNodes[p],B=null==w[F.id]?0:w[F.id];w[F.id]=Math.max(z+1,B),S[F.id]=F}}var j={};for(var U in w){var z=w[U];z in j||(j[z]=[]),j[z].push(S[U])}var W={};for(var G in _){var z=_[G];z in W||(W[z]=[]),W[z].push(N[G])}var H=Object.keys(W).map(function(e){return parseInt(e,10)}).sort(h.reverseNumberCompare);r.layers=[];for(var q=0,Y=H;q<Y.length;q++){var z=Y[q],$=W[z];$.sort(function(e,t){var n=T[e.id],r=T[t.id];return n<r?-1:n>r?1:0});for(var K=0,X=$;K<X.length;K++){var u=X[K];r.layers.push(u)}}r.layersByDepth=W,H=Object.keys(j).map(function(e){return parseInt(e,10)}).sort(h.reverseNumberCompare);for(var Z=r.inputs.slice(),J=[],Q=0,ee=H;Q<ee.length;Q++)for(var z=ee[Q],te=0,ne=j[z];te<ne.length;te++){var R=ne[te],u=R.outboundLayer;if(null!=u){for(var re=0,ae=R.inputTensors;re<ae.length;re++){var s=ae[re];if(Z.indexOf(s)===-1)throw new c.RuntimeError("Graph disconnected: cannot obtain value for tensor "+s+(' at layer "'+u.name+'". ')+"The following previous layers were accessed without issue: "+J)}for(var oe=0,ie=R.outputTensors;oe<ie.length;oe++){var s=ie[oe];Z.push(s)}J.push(u.name)}}r.nodesByDepth=j;for(var se=r.layers.map(function(e){return e.name}),ue=function(e){var t=se.filter(function(t){return t===e}).length;if(1!==t)throw new c.RuntimeError('The name "'+e+'" is used '+t+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(se))},le=0,ce=se;le<ce.length;le++){var pe=ce[le];ue(pe)}return r.outboundNodes=[],r.inboundNodes=[],new y.Node({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(e){return null}),outputMasks:r.outputs.map(function(e){return null}),inputShapes:r.inputs.map(function(e){return e.shape}),outputShapes:r.outputs.map(function(e){return e.shape})}),r.built=!0,r._refCount=1,r}return s(t,e),t.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},t.prototype.dispose=function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0===--this._refCount)for(var t=0,n=this.layers;t<n.length;t++){var r=n[t];e.numDisposedVariables+=r.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new c.ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e=e.concat(r.trainableWeights)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){for(var e=[],t=0,n=this.layers;t<n.length;t++){var r=n[t];e.push.apply(e,r.nonTrainableWeights)}if(!this.trainable){for(var a=[],o=0,i=this.layers;o<i.length;o++){var r=i[o];a.push.apply(a,r.trainableWeights)}return a.concat(e)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.loadWeights=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),n?i(e,this.layers,r):o(e,this.layers,t)},t.prototype.updatedConfig=function(){var e=this.getConfig(),t={className:this.getClassName(),config:e,kerasVersion:"tfjs-layers "+g.version,backend:"TensorFlow.js"};return t},t.prototype.toJSON=function(e,t){void 0===t&&(t=!0);var n=d.convertTsToPythonic(this.updatedConfig());return t?JSON.stringify(n):n},t.prototype.call=function(e,t){var n=this;return u.tidy(function(){e=h.toList(e);var r;return r="mask"in t?h.toList(t.mask):h.pyListRepeat(null,e.length),n.runInternalGraph(e,r)[0]})},t.prototype.computeMask=function(e,t){var n=this;return u.tidy(function(){e=h.toList(e);var r;return r=null==t?h.pyListRepeat(null,e.length):h.toList(t),n.runInternalGraph(e,r)[1]})},t.prototype.computeOutputShape=function(e){var t=f.normalizeShapeList(e);if(t.length!==this.inputLayers.length)throw new c.ValueError("Invalid inputShape argument "+e+": "+("model has "+this.inputLayers.length+" tensor inputs."));for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],o=t[r],i=a.name+"_0_0";n[i]=o}var s=Object.keys(this.nodesByDepth).map(function(e){return parseInt(e,10)}).sort(h.reverseNumberCompare);if(s.length>1)for(var u=0,l=s;u<l.length;u++)for(var p=l[u],d=this.nodesByDepth[p],m=0,g=d;m<g.length;m++){var v=g[m],a=v.outboundLayer;if(this.inputLayers.map(function(e){return e.id}).indexOf(a.id)===-1){for(var y=[],b=0;b<v.inboundLayers.length;b++){var x=v.inboundLayers[b],w=v.nodeIndices[b],S=v.tensorIndices[b],i=x.name+"_"+w+"_"+S,_=n[i];y.push(_)}for(var N=a.computeOutputShape(h.singletonOrArray(y)),T=f.normalizeShapeList(N),k=a.inboundNodes.indexOf(v),b=0;b<T.length;b++){var i=a.name+"_"+k+"_"+b;n[i]=T[b]}}}for(var I=[],E=[],r=0;r<this.outputLayers.length;r++){var a=this.outputLayers[r],k=this.outputLayersNodeIndices[r],S=this.outputLayersTensorIndices[r],i=a.name+"_"+k+"_"+S;E.push(i)}for(var r=0;r<E.length;r++){var A=E[r];h.assert(A in n),I.push(n[A])}return h.singletonOrArray(I)},t.prototype.runInternalGraph=function(e,t){null==t&&(t=h.pyListRepeat(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],o=e[r],i=t[r];n[a.id]=[o,i]}for(var s=Object.keys(this.nodesByDepth).map(function(e){return parseInt(e,10)}).sort(h.reverseNumberCompare),u=0,l=s;u<l.length;u++)for(var p=l[u],d=this.nodesByDepth[p],f=0,m=d;f<m.length;f++){for(var g=m[f],v=g.outboundLayer,y=g.inputTensors,b=g.outputTensors,x=new Array,w=0,S=y;w<S.length;w++){var a=S[w];a.id in n&&x.push(n[a.id])}if(x.length===y.length){var _={},N=void 0,T=void 0,k=void 0,I=void 0;if(null!=g.callArgs&&(_=g.callArgs),1===x.length){var E=x[0],A=E[0],P=E[1];null==_.mask&&(_.mask=P),k=h.toList(v.call(A,_)),I=h.toList(v.computeMask(A,P)),N=[A],T=[P]}else N=x.map(function(e){return e[0]}),T=x.map(function(e){return e[1]}),null==_.mask&&(_.mask=T),k=h.toList(v.call(N,_)),I=h.toList(v.computeMask(N,T));if(v.activityRegularizer)throw new c.NotImplementedError("Model invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var r=0;r<b.length;++r){var a=b[r],o=k[r],i=I[r];n[a.id]=[o,i]}}}for(var C=[],O=[],M=[],D=0,R=this.outputs;D<R.length;D++){var a=R[D];h.assert(a.id in n,"Could not compute output "+a.name+" : "+a.id);var z=n[a.id],L=z[0],i=z[1];M.push(L.shape),C.push(L),O.push(i)}return[C,O,M]},t.prototype.buildNodeConversionMap=function(e){for(var n,r={},a=0,o=this.layers;a<o.length;a++){var i=o[a];n=i instanceof t?1:0;for(var s=0;s<i.inboundNodes.length;s++){var u=t.nodeKey(i,s);u in this.containerNodes&&(r[u]=n,n+=1)}}return r},t.prototype.getLayer=function(e,t){if(null!=t){if(this.layers.length<=t)throw new c.ValueError("Was asked to retrieve layer at index "+t+", but model only "+("has "+this.layers.length+" layer(s)."));return this.layers[t]}if(null==e)throw new c.ValueError("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var a=r[n];if(a.name===e)return a}throw new c.ValueError("No such layer: "+e)},t.prototype.calculateLosses=function(){var e=this;return u.tidy(function(){for(var n=[],r=0,a=e.layers;r<a.length;r++)for(var o=a[r],i=0;i<o.inboundNodes.length;++i){var s=t.nodeKey(o,i);e.containerNodes.has(s)&&n.push.apply(n,o.calculateLosses())}return n})},t.prototype.getConfig=function(){for(var e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[],a=0,o=this.layers;a<o.length;a++){for(var i=o[a],s=i.getClassName(),u=i.getConfig(),l=[],c=0;c<i.inboundNodes.length;c++){var p=i.inboundNodes[c],h=t.nodeKey(i,c),d={};if(this.containerNodes.has(h)){if(p.callArgs)try{JSON.stringify(p.callArgs),d=p.callArgs}catch(e){console.warn("Layer "+i.name+" was passed non-serializable keyword arguments: "+(p.callArgs+". They will not be included ")+"in the serialized model (and thus will be missing at deserialization time)."),d={}}if(p.inboundLayers.length>0){for(var f=[],m=0;m<p.inboundLayers.length;m++){var g=p.inboundLayers[m],v=p.nodeIndices[m],y=p.tensorIndices[m],b=t.nodeKey(g,v),x=n[b];null!==x&&void 0!==x||(x=0),f.push([g.name,x,y,d])}l.push(f)}}}r.push({name:i.name,className:s,config:u,inboundNodes:l})}e.layers=r;for(var w=[],m=0;m<this.inputLayers.length;m++){var i=this.inputLayers[m],v=this.inputLayersNodeIndices[m],h=t.nodeKey(i,v);if(this.containerNodes.has(h)){var x=n[h];null!==x&&void 0!==x||(x=0);var y=this.inputLayersTensorIndices[m];w.push([i.name,x,y])}}e.inputLayers=w;for(var S=[],m=0;m<this.outputLayers.length;m++){var i=this.outputLayers[m],v=this.outputLayersNodeIndices[m],h=t.nodeKey(i,v);if(this.containerNodes.has(h)){var x=n[h];null!==x&&void 0!==x||(x=0);var y=this.outputLayersTensorIndices[m];S.push([i.name,x,y])}}return e.outputLayers=S,e},t.fromConfig=function(e,t){function n(e,t){e.name in i?i[e.name].push(t):i[e.name]=[t]}function r(e,t){for(var r,a=[],i=0,s=t;i<s.length;i++){var u=s[i],l=u[0],p=u[1],d=u[2];if(3===u.length)r={};else{if(4!==u.length)throw new c.ValueError("Improperly formatted model config for layer "+JSON.stringify(e)+": "+JSON.stringify(u));r=u[3]}if(!(l in o))return void n(e,t);var f=o[l];if(f.inboundNodes.length<=p)return void n(e,t);var m=f.inboundNodes[p];a.push(m.outputTensors[d])}a.length>0&&e.apply(h.singletonOrArray(a),r)}function a(e){var r=e.name,a=p.deserialize(e,null!=t.customObjects?t.customObjects:{});o[r]=a;for(var i=e.inboundNodes,s=0,u=i;s<u.length;s++){var l=u[s];if(!(l instanceof Array))throw new c.ValueError("Corrupted configuration, expected array for nodeData: "+l);n(a,l)}}for(var o={},i={},s=t.name,u=t.layers,l=0,d=u;l<d.length;l++){var f=d[l];a(f)}for(;!h.isObjectEmpty(i);)for(var m=0,g=u;m<g.length;m++){var f=g[m],v=o[f.name];if(v.name in i){for(var y=0,b=i[v.name];y<b.length;y++){var x=b[y];r(v,x)}delete i[v.name]}}for(var w=[],S=[],_=t.inputLayers,N=0,T=_;N<T.length;N++){var f=T[N],k=f[0],I=f[1],E=f[2];h.assert(k in o);var v=o[k],A=v.inboundNodes[I].outputTensors;w.push(A[E])}for(var P=t.outputLayers,C=0,O=P;C<O.length;C++){var f=O[C],k=f[0],I=f[1],E=f[2];h.assert(k in o);var v=o[k],A=v.inboundNodes[I].outputTensors;S.push(A[E])}return new e({inputs:w,outputs:S,name:s})},Object.defineProperty(t.prototype,"stateful",{get:function(){if(this._stateful)throw new c.ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var e=0,t=this.layers;e<t.length;e++){var n=t[e];if(n.stateful)return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.resetStates=function(){var e=this;u.tidy(function(){e.layers.forEach(function(e){e.stateful&&e.resetStates()})})},t}(y.Layer);t.Container=b},function(e,t,n){"use strict";function r(e,t){if(null!=e.shape){if(e.shape.length!==t.shape.length)throw new u.ValueError("The rank of feed ("+t.shape.length+") does not match the rank of "+("the key ("+e.shape.length+")."));
for(var n=0;n<e.shape.length;++n)if(null!=e.shape[n]&&e.shape[n]!==t.shape[n])throw new u.ValueError("The "+n+"-th dimension of the feed ("+t.shape[n]+") is "+("incompatible with that of the key ("+e.shape[n]+")."))}if(null==e.dtype||e.dtype===t.dtype)return t;try{return s.cast(t,e.dtype)}catch(n){throw new u.ValueError("The dtype of the feed ("+t.dtype+") can not be cast to the dtype "+("of the key '"+e.name+"' ("+e.dtype+")."))}}function a(e,t,n){for(var r=Array.isArray(e),a=r?e:[e],i=[],s=new c(t),u=0,l=a;u<l.length;u++){var p=l[u];i.push(o(p,s,n))}return r?i:i[0]}function o(e,t,n){if(t.hasKey(e))return t.getValue(e);if(e.sourceLayer instanceof l.InputLayer)throw new u.ValueError("Missing a feed value for SymbolicTensor from InputLayer "+("'"+l.InputLayer.name+"'"));for(var r=e.inputs,a=[],s=0,c=r;s<c.length;s++){var p=c[s],h=o(p,t,n);a.push(h)}var d=e.sourceLayer.apply(a,n);Array.isArray(d)||(d=[d]);for(var f=i(e),m=Array.isArray(f)?f:[f],g=0;g<m.length;++g)t.add(m[g],d[g]);return 1===d.length?d[0]:d[e.outputTensorIndex]}function i(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r)for(var a=0,o=e.sourceLayer.inboundNodes[r].outputTensors;a<o.length;a++){var i=o[a];if(i.id===e.id){n=r;break}}t=e.sourceLayer.getOutputAt(n)}return t}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),u=n(8),l=n(77),c=function(){function e(t){if(this.id2Value={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n];else{if(null==t)return;for(var r=0,a=t;r<a.length;r++){var o=a[r];this.add(o.key,o.value)}}}return e.prototype.add=function(e,t){if(null!=this.id2Value[e.id])throw new u.ValueError("Duplicate key: name="+e.name+", id="+e.id);return this.id2Value[e.id]=r(e,t),this},e.prototype.addFeed=function(e){this.add(e.key,e.value)},e.prototype.hasKey=function(e){return null!=this.id2Value[e.id]},e.prototype.getValue=function(e){if(null==this.id2Value[e.id])throw new u.ValueError("Nonexistent key: "+JSON.stringify(e));return this.id2Value[e.id]},e}();t.FeedDict=c,t.execute=a},function(e,t,n){"use strict";function r(e){return new s.MaxNorm(e)}function a(e){return new s.UnitNorm(e)}function o(){return new s.NonNeg}function i(e){return new s.MinMaxNorm(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(49);t.maxNorm=r,t.unitNorm=a,t.nonNeg=o,t.minMaxNorm=i},function(e,t,n){"use strict";function r(){return new g.Zeros}function a(){return new g.Ones}function o(e){return new g.Constant(e)}function i(e){return new g.RandomUniform(e)}function s(e){return new g.RandomNormal(e)}function u(e){return new g.TruncatedNormal(e)}function l(e){return new g.Identity(e)}function c(e){return new g.VarianceScaling(e)}function p(e){return new g.GlorotUniform(e)}function h(e){return new g.GlorotNormal(e)}function d(e){return new g.HeNormal(e)}function f(e){return new g.LeCunNormal(e)}function m(e){return new g.Orthogonal(e)}Object.defineProperty(t,"__esModule",{value:!0});var g=n(50);t.zeros=r,t.ones=a,t.constant=o,t.randomUniform=i,t.randomNormal=s,t.truncatedNormal=u,t.identity=l,t.varianceScaling=c,t.glorotUniform=p,t.glorotNormal=h,t.heNormal=d,t.leCunNormal=f,t.orthogonal=m},function(e,t,n){"use strict";function r(e){return new ee.InputLayer(e)}function a(e){return new re.ELU(e)}function o(e){return new re.ReLU(e)}function i(e){return new re.LeakyReLU(e)}function s(e){return new re.Softmax(e)}function u(e){return new re.ThresholdedReLU(e)}function l(e){return new ae.Conv1D(e)}function c(e){return new ae.Conv2D(e)}function p(e){return new ae.Conv2DTranspose(e)}function h(e){return new ae.SeparableConv2D(e)}function d(e){return new ae.Cropping2D(e)}function f(e){return new ae.UpSampling2D(e)}function m(e){return new oe.DepthwiseConv2D(e)}function g(e){return new ie.Activation(e)}function v(e){return new ie.Dense(e)}function y(e){return new ie.Dropout(e)}function b(e){return new ie.Flatten(e)}function x(e){return new ie.RepeatVector(e)}function w(e){return new ie.Reshape(e)}function S(e){return new ie.Permute(e)}function _(e){return new se.Embedding(e)}function N(e){return new ue.Add(e)}function T(e){return new ue.Average(e)}function k(e){return new ue.Concatenate(e)}function I(e){return new ue.Maximum(e)}function E(e){return new ue.Minimum(e)}function A(e){return new ue.Multiply(e)}function P(e){return new le.BatchNormalization(e)}function C(e){return new ce.ZeroPadding2D(e)}function O(e){return new pe.AveragePooling1D(e)}function M(e){return O(e)}function D(e){return O(e)}function R(e){return new pe.AveragePooling2D(e)}function z(e){return R(e)}function L(e){return R(e)}function V(e){return new pe.GlobalAveragePooling1D(e)}function F(e){return new pe.GlobalAveragePooling2D(e)}function B(e){return new pe.GlobalMaxPooling1D(e)}function j(e){return new pe.GlobalMaxPooling2D(e)}function U(e){return new pe.MaxPooling1D(e)}function W(e){return new pe.MaxPooling2D(e)}function G(e){return new he.GRU(e)}function H(e){return new he.GRUCell(e)}function q(e){return new he.LSTM(e)}function Y(e){return new he.LSTMCell(e)}function $(e){return new he.SimpleRNN(e)}function K(e){return new he.SimpleRNNCell(e)}function X(e){return new he.RNN(e)}function Z(e){return new he.StackedRNNCells(e)}function J(e){return new de.Bidirectional(e)}function Q(e){return new de.TimeDistributed(e)}Object.defineProperty(t,"__esModule",{value:!0});var ee=n(77),te=n(15);t.Layer=te.Layer;var ne=n(186);t.input=ne.input;var re=n(509),ae=n(140),oe=n(510),ie=n(511),se=n(512),ue=n(513),le=n(514),ce=n(515),pe=n(516),he=n(141);t.RNN=he.RNN,t.RNNCell=he.RNNCell;var de=n(517);t.inputLayer=r,t.elu=a,t.reLU=o,t.leakyReLU=i,t.softmax=s,t.thresholdedReLU=u,t.conv1d=l,t.conv2d=c,t.conv2dTranspose=p,t.separableConv2d=h,t.cropping2D=d,t.upSampling2d=f,t.depthwiseConv2d=m,t.activation=g,t.dense=v,t.dropout=y,t.flatten=b,t.repeatVector=x,t.reshape=w,t.permute=S,t.embedding=_,t.add=N,t.average=T,t.concatenate=k,t.maximum=I,t.minimum=E,t.multiply=A,t.batchNormalization=P,t.zeroPadding2d=C,t.averagePooling1d=O,t.avgPool1d=M,t.avgPooling1d=D,t.averagePooling2d=R,t.avgPool2d=z,t.avgPooling2d=L,t.globalAveragePooling1d=V,t.globalAveragePooling2d=F,t.globalMaxPooling1d=B,t.globalMaxPooling2d=j,t.maxPooling1d=U,t.maxPooling2d=W,t.gru=G,t.gruCell=H,t.lstm=q,t.lstmCell=Y,t.simpleRNN=$,t.simpleRNNCell=K,t.rnn=X,t.stackedRNNCells=Z,t.bidirectional=J,t.timeDistributed=Q,t.globalMaxPool1d=B,t.globalMaxPool2d=j,t.maxPool1d=U,t.maxPool2d=W},function(e,t,n){"use strict";function r(e,t){return g.binaryAccuracy(e,t)}function a(e,t){return g.binaryCrossentropy(e,t)}function o(e,t){return g.categoricalAccuracy(e,t)}function i(e,t){return g.categoricalCrossentropy(e,t)}function s(e,t){return m.cosineProximity(e,t)}function u(e,t){return m.meanAbsoluteError(e,t)}function l(e,t){return m.meanAbsolutePercentageError(e,t)}function c(e,t){return m.meanAbsolutePercentageError(e,t)}function p(e,t){return m.meanAbsolutePercentageError(e,t)}function h(e,t){return m.meanSquaredError(e,t)}function d(e,t){return m.meanSquaredError(e,t)}function f(e,t){return m.meanSquaredError(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var m=n(98),g=n(189);t.binaryAccuracy=r,t.binaryCrossentropy=a,t.categoricalAccuracy=o,t.categoricalCrossentropy=i,t.cosineProximity=s,t.meanAbsoluteError=u,t.meanAbsolutePercentageError=l,t.MAPE=c,t.mape=p,t.meanSquaredError=h,t.MSE=d,t.mse=f},function(e,t,n){"use strict";function r(e){return new s.L1L2(e)}function a(e){return i.l1(e)}function o(e){return i.l2(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(40),s=n(40);t.l1l2=r,t.l1=a,t.l2=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(95),i=n(17),s=n(15),u=n(11),l=n(8),c=n(19),p=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.supportsMasking=!0,null!=t&&(n.maxValue=t.maxValue),n}return r(t,e),t.prototype.call=function(e,t){e=c.getExactlyOneTensor(e);var n=a.relu(e);return null!=this.maxValue&&(n=a.clipByValue(n,0,this.maxValue)),n},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={maxValue:this.maxValue},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ReLU",t}(s.Layer);t.ReLU=p,a.serialization.SerializationMap.register(p);var h=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_ALPHA=.3,null==t&&(t={}),n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return r(t,e),t.prototype.call=function(e,t){var n=c.getExactlyOneTensor(e);return a.leakyRelu(n,this.alpha)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="LeakyReLU",t}(s.Layer);t.LeakyReLU=h,a.serialization.SerializationMap.register(h);var d=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;if(n.DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==n.DEFAULT_ALPHA)throw new l.NotImplementedError("Non-default alpha value ("+t.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}return r(t,e),t.prototype.call=function(e,t){var n=c.getExactlyOneTensor(e);return a.elu(n)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ELU",t}(s.Layer);t.ELU=d,a.serialization.SerializationMap.register(d);var f=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_THETA=1,null==t&&(t={}),n.theta=null==t.theta?n.DEFAULT_THETA:t.theta,n.thetaTensor=u.getScalar(n.theta),n}return r(t,e),t.prototype.call=function(e,t){var n=c.getExactlyOneTensor(e);return n.mul(i.cast(n.greater(this.thetaTensor),"float32"))},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={theta:this.theta},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ThresholdedReLU",t}(s.Layer);t.ThresholdedReLU=f,a.serialization.SerializationMap.register(f);var m=function(e){function t(t){var n=e.call(this,null==t?{}:t)||this;return n.DEFAULT_AXIS=1,null==t&&(t={}),n.softmax=(new o.Softmax).apply,n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n}return r(t,e),t.prototype.call=function(e,t){var n=c.getExactlyOneTensor(e);return this.softmax(n,this.axis)},t.prototype.computeOutputShape=function(e){return e},t.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Softmax",t}(s.Layer);t.Softmax=m,a.serialization.SerializationMap.register(m)},function(e,t,n){"use strict";function r(e,t,n,r,a,u){return void 0===n&&(n=[1,1]),void 0===r&&(r="valid"),i.tidy(function(){null==a&&(a=s.imageDataFormat()),l.checkDataFormat(a);var i=g.preprocessConv2DInput(e,a);if(4!==e.rank)throw new p.ValueError("Input for depthwiseConv2d is required to be 4-D, but is instead "+(e.rank+"-D"));if(4!==t.rank)throw new p.ValueError("depthwiseKernel is required to be 4-D, but is instead "+(t.rank+"-D"));return i=o.depthwiseConv2d(i,t,n,"same"===r?"same":"valid","NHWC",u),"channelsFirst"===a&&(i=o.transpose(i,[0,3,1,2])),i})}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(1),s=n(39),u=n(17),l=n(38),c=n(49),p=n(8),h=n(50),d=n(40),f=n(142),m=n(19),g=n(140);t.depthwiseConv2d=r;var v=function(e){function t(t){var n=e.call(this,2,t)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,n.depthwiseInitializer=h.getInitializer(t.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=c.getConstraint(t.depthwiseConstraint),n.depthwiseRegularizer=d.getRegularizer(t.depthwiseRegularizer),n}return a(t,e),t.prototype.build=function(e){if(e=m.getExactlyOneShape(e),e.length<4)throw new p.ValueError("Inputs to DepthwiseConv2D should have rank 4. "+("Received input shape: "+JSON.stringify(e)+"."));var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new p.ValueError("The channel dimension of the inputs to DepthwiseConv2D should "+("be defined, but is not ("+e[t]+")."));var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},t.prototype.call=function(e,t){var n=this;return i.tidy(function(){e=m.getExactlyOneTensor(e);var t=r(e,n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(t=u.biasAdd(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),t})},t.prototype.computeOutputShape=function(e){e=m.getExactlyOneShape(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=f.convOutputLength(t,this.kernelSize[0],this.padding,this.strides[0]),o=f.convOutputLength(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,o]:[e[0],a,o,r]},t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=h.serializeInitializer(this.depthwiseInitializer),t.depthwiseRegularizer=d.serializeRegularizer(this.depthwiseRegularizer),t.depthwiseConstraint=c.serializeConstraint(this.depthwiseRegularizer),t},t.className="DepthwiseConv2D",t}(g.BaseConv);t.DepthwiseConv2D=v,i.serialization.SerializationMap.register(v)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(95),i=n(11),s=n(17),u=n(49),l=n(15),c=n(8),p=n(50),h=n(40),d=n(41),f=n(19),m=function(e){function t(t){var n=e.call(this,t)||this;if(n.rate=Math.max(Math.min(t.rate,1),0),n.rateScalar=i.getScalar(n.rate),n.noiseShape=t.noiseShape,n.seed=t.seed,null!=n.seed)throw new c.NotImplementedError("Non-default seed is not implemented in Dropout layer yet: "+n.seed);return n.supportsMasking=!0,n}return r(t,e),t.prototype.getNoiseShape=function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n},t.prototype.call=function(e,t){var n=this;return a.tidy(function(){n.invokeCallHook(e,t);var r=f.getExactlyOneTensor(e);if(null!=n.noiseShape&&!a.util.arraysEqual(r.shape,n.noiseShape))throw new c.NotImplementedError("Non-default noise shape is not implemented in Dropout layer yet: "+JSON.stringify(n.noiseShape));if(0<n.rate&&n.rate<1){var o=null!=t.training&&t.training,i=n.getNoiseShape(r),u=s.inTrainPhase(function(){return s.dropout(r,n.rateScalar,i,n.seed)},function(){return r},o);return u}return e})},t.prototype.getConfig=function(){var t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Dropout",t}(l.Layer);t.Dropout=m,a.serialization.SerializationMap.register(m);var g=function(e){function t(t){var n=e.call(this,t)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){var r=null;null!=t.batchSize&&(r=t.batchSize),n.batchInputShape=[r,t.inputDim]}return n.units=t.units,n.activation=o.getActivation(t.activation),null!=t.useBias&&(n.useBias=t.useBias),n.kernelInitializer=p.getInitializer(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=p.getInitializer(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=u.getConstraint(t.kernelConstraint),n.biasConstraint=u.getConstraint(t.biasConstraint),n.kernelRegularizer=h.getRegularizer(t.kernelRegularizer),n.biasRegularizer=h.getRegularizer(t.biasRegularizer),n.activityRegularizer=h.getRegularizer(t.activityRegularizer),n.inputSpec=[{minNDim:2}],n}return r(t,e),t.prototype.build=function(e){e=f.getExactlyOneShape(e);var t=e[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(n={},n[-1]=t,n)}],this.built=!0;var n},t.prototype.computeOutputShape=function(e){e=f.getExactlyOneShape(e);var t=e.slice();return t[t.length-1]=this.units,t},t.prototype.call=function(e,t){var n=this;return a.tidy(function(){n.invokeCallHook(e,t);var r=f.getExactlyOneTensor(e),a=s.dot(r,n.kernel.read());return null!=n.bias&&(a=s.biasAdd(a,n.bias.read())),null!=n.activation&&(a=n.activation.apply(a)),a})},t.prototype.getConfig=function(){var t={units:this.units,activation:o.serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:p.serializeInitializer(this.kernelInitializer),biasInitializer:p.serializeInitializer(this.biasInitializer),kernelRegularizer:h.serializeRegularizer(this.kernelRegularizer),biasRegularizer:h.serializeRegularizer(this.biasRegularizer),activityRegularizer:h.serializeRegularizer(this.activityRegularizer),kernelConstraint:u.serializeConstraint(this.kernelConstraint),biasConstraint:u.serializeConstraint(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Dense",t}(l.Layer);t.Dense=g,a.serialization.SerializationMap.register(g);var v=function(e){function t(t){var n=e.call(this,t||{})||this;return n.inputSpec=[{minNDim:3}],n}return r(t,e),t.prototype.computeOutputShape=function(e){e=f.getExactlyOneShape(e);for(var t=0,n=e.slice(1);t<n.length;t++){var r=n[t];if(null==r)throw new c.ValueError('The shape of the input to "Flatten" is not fully defined '+("(got "+e.slice(1)+"). Make sure to pass a complete ")+'"input_shape" or "batch_input_shape" argument to the first layer in your model.')}return[e[0],d.arrayProd(e,1)]},t.prototype.call=function(e,t){var n=this;return a.tidy(function(){return n.invokeCallHook(e,t),s.batchFlatten(f.getExactlyOneTensor(e))})},t.className="Flatten",t}(l.Layer);t.Flatten=v,a.serialization.SerializationMap.register(v);var y=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.activation=o.getActivation(t.activation),n}return r(t,e),t.prototype.call=function(e,t){var n=this;return a.tidy(function(){n.invokeCallHook(e,t);var r=f.getExactlyOneTensor(e);return n.activation.apply(r)})},t.prototype.getConfig=function(){var t={activation:o.serializeActivation(this.activation)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Activation",t}(l.Layer);t.Activation=y,a.serialization.SerializationMap.register(y);var b=function(e){function t(t){var n=e.call(this,t)||this;return n.n=t.n,n.inputSpec=[{ndim:2}],n}return r(t,e),t.prototype.computeOutputShape=function(e){return[e[0],this.n,e[1]]},t.prototype.call=function(e,t){var n=this;return a.tidy(function(){return e=f.getExactlyOneTensor(e),s.repeat(e,n.n)})},t.prototype.getConfig=function(){var t={n:this.n},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="RepeatVector",t}(l.Layer);t.RepeatVector=b,a.serialization.SerializationMap.register(b);var x=function(e){function t(t){var n=e.call(this,t)||this;n.targetShape=t.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return r(t,e),t.prototype.isUnknown=function(e){return e<0||null==e},t.prototype.fixUnknownDimension=function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,o=null,i=0;i<r.length;++i){var s=r[i];if(this.isUnknown(s)){if(null!==o)throw new c.ValueError("Can only specifiy one unknown dimension.");o=i}else a*=s}var u=d.arrayProd(e);if(null!==o){if(0===a||u%a!==0)throw new c.ValueError(n);r[o]=u/a}else if(u!==a)throw new c.ValueError(n);return r},t.prototype.computeOutputShape=function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))},t.prototype.call=function(e,t){var n=this;return a.tidy(function(){n.invokeCallHook(e,t);var r=f.getExactlyOneTensor(e),a=r.shape,o=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return r.reshape(o)})},t.prototype.getConfig=function(){var t={targetShape:this.targetShape},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Reshape",t}(l.Layer);t.Reshape=x,a.serialization.SerializationMap.register(x);var w=function(e){function t(t){var n=e.call(this,t)||this;if(null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+(t.dims+" instead."));var r=d.range(1,t.dims.length+1);if(!a.util.arraysEqual(t.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");return n.dims=t.dims,n.dimsIncludingBatch=[0].concat(n.dims),n.inputSpec=[new l.InputSpec({ndim:n.dims.length+1})],n}return r(t,e),t.prototype.computeOutputShape=function(e){e=f.getExactlyOneShape(e);var t=e.slice();return this.dims.forEach(function(n,r){t[r+1]=e[n]}),t},t.prototype.call=function(e,t){return a.transpose(f.getExactlyOneTensor(e),this.dimsIncludingBatch)},t.prototype.getConfig=function(){var t={dims:this.dims},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Permute",t}(l.Layer);t.Permute=w,a.serialization.SerializationMap.register(w)},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(17),i=n(49),s=n(15),u=n(8),l=n(50),c=n(40),p=n(13),h=n(19),d=function(e){function t(t){var n=e.call(this,t)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){var r=null;null!=t.batchSize&&(r=t.batchSize),null==t.inputLength?n.batchInputShape=[r,null]:n.batchInputShape=[r].concat(p.toList(t.inputLength))}return n.inputDim=t.inputDim,n.outputDim=t.outputDim,n.embeddingsInitializer=l.getInitializer(t.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=c.getRegularizer(t.embeddingsRegularizer),n.activityRegularizer=c.getRegularizer(t.activityRegularizer),n.embeddingsConstraint=i.getConstraint(t.embeddingsConstraint),n.maskZero=t.maskZero,n.inputLength=t.inputLength,n}return r(t,e),t.prototype.build=function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},t.prototype.warnOnIncompatibleInputShape=function(e){},t.prototype.computeMask=function(e,t){throw new u.NotImplementedError("computeMask has not been implemented for Embedding yet")},t.prototype.computeOutputShape=function(e){if(e=h.getExactlyOneShape(e),null==this.inputLength)return e.concat([this.outputDim]);var t=p.toList(this.inputLength);if(t.length!==e.length-1)throw new u.ValueError('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);for(var n=0,r=0;r<t.length;++r){var a=t[r],o=e[r+1];if(null!=a&&null!=o&&a!==o)throw new u.ValueError('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);null==a&&(t[n]=o),n++}return[e[0]].concat(t,[this.outputDim])},t.prototype.call=function(e,t){var n=this;return a.tidy(function(){n.invokeCallHook(e,t);var r=h.getExactlyOneTensor(e);"int32"!==r.dtype&&(r=o.cast(r,"int32"));var a=o.gather(n.embeddings.read(),r.as1D());return a.reshape(h.getExactlyOneShape(n.computeOutputShape(r.shape)))})},t.prototype.getConfig=function(){var t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:l.serializeInitializer(this.embeddingsInitializer),embeddingsRegularizer:c.serializeRegularizer(this.embeddingsRegularizer),activityRegularizer:c.serializeRegularizer(this.activityRegularizer),embeddingsConstraint:i.serializeConstraint(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Embedding",t}(s.Layer);t.Embedding=d,a.serialization.SerializationMap.register(d)},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){var t=new x({});return t.apply(e)}return new x(e)}function a(e){if(Array.isArray(e)){var t=new w({});return t.apply(e)}return new w(e)}function o(e){if(Array.isArray(e)){var t=new S({});return t.apply(e)}return new S(e)}function i(e){if(Array.isArray(e)){var t=new _({});return t.apply(e)}return new _(e)}function s(e){if(Array.isArray(e)){var t=new N({});return t.apply(e)}return new N(e)}function u(e){if(Array.isArray(e)){var t=new T({});return t.apply(e)}return new T(e)}var l=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var c=n(1),p=n(1),h=n(11),d=n(17),f=n(15),m=n(8),g=n(13),v=n(41),y=n(19),b=function(e){function t(t){var n=e.call(this,t||{})||this;return n.supportsMasking=!0,n}return l(t,e),t.prototype.mergeFunction=function(e){throw new m.NotImplementedError},t.prototype.computeElementwiseOpOutputShape=function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],o=t[r];if(null==a||null==o||a<0||o<0)n.push(null);else if(1===a)n.push(o);else if(1===o)n.push(a);else{if(a!==o)throw new m.ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n},t.prototype.build=function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[y.getExactlyOneShape(e)]),e=e,e.length<2)throw new m.ValueError("A merge layer should be called on an Array of at least 2 inputs."+(" Got "+e.length+" input(s)."));for(var t=[],n=0,r=e;n<r.length;n++){var a=r[n];null!=a&&null!==a[0]&&t.push(a[0])}if(t=g.unique(t),t.length>1)throw new m.ValueError("Can not merge tensors with different batch sizes. "+("Got tensors with shapes: "+JSON.stringify(e)+"."));for(var o=null==e[0]?null:e[0].slice(1),i=1;i<e.length;++i){var a=null==e[i]?null:e[i].slice(1);o=this.computeElementwiseOpOutputShape(o,a)}var s=e.map(function(e){return e.length});e.indexOf(null)===-1&&1===g.unique(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0},t.prototype.call=function(e,t){var n=this;return p.tidy(function(){if(e=e,n.reshapeRequired){var t=[],r=e.map(function(e){return e.rank});if(r.indexOf(null)===-1){for(var a=v.max(r),o=0,i=e;o<i.length;o++){for(var s=i[o],u=s.rank,l=0;l<a-u;++l)s=d.expandDims(s,1);t.push(s)}return n.mergeFunction(t)}for(var p=!1,h=0,f=e;h<f.length;h++){var s=f[h],u=s.rank;if(null==u){var m=s.shape,g=m[0],y=m.slice(1).concat([g]),b=s.reshape([g].concat(v.arrayProd(m.slice(1))));b=c.transpose(b,[1,0]),b=b.reshape(y),t.push(b),p=!0}else if(u>1){var x=v.range(1,u).concat([0]);t.push(c.transpose(s,x)),p=!0}else t.push(s)}var w=n.mergeFunction(t),S=w.rank;if(p)if(null==S){var _=w.shape,N=_.length,g=_[N-1],y=[g].concat(_.slice(0,_.length-1));w=c.transpose(w.reshape([-1,g]),[1,0]).reshape(y)}else if(S>1){var x=[S-1].concat(v.range(0,S-1));w=c.transpose(w,x)}return w}return n.mergeFunction(e)})},t.prototype.computeOutputShape=function(e){e=e;var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}for(var a=[],o=0,i=e;o<i.length;o++){var r=i[o];null!=r&&null!==r[0]&&a.push(r[0])}return a=g.unique(a),t=1===a.length?a.concat(t):[null].concat(t)},t}(f.Layer);t.Merge=b;var x=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.mergeFunction=function(e){return p.tidy(function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=c.add(t,e[n]);return t})},t.className="Add",t}(b);t.Add=x,p.serialization.SerializationMap.register(x),t.add=r;var w=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.mergeFunction=function(e){return p.tidy(function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=c.mul(t,e[n]);return t})},t.className="Multiply",t}(b);t.Multiply=w,p.serialization.SerializationMap.register(w),t.multiply=a;var S=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.mergeFunction=function(e){return p.tidy(function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=c.add(t,e[n]);return c.mul(h.getScalar(1/e.length),t)})},t.className="Average",t}(b);t.Average=S,p.serialization.SerializationMap.register(S),t.average=o;var _=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.mergeFunction=function(e){return p.tidy(function(){for(var t=e[0],n=1;n<e.length;++n)t=c.maximum(t,e[n]);return t})},t.className="Maximum",t}(b);t.Maximum=_,p.serialization.SerializationMap.register(_),t.maximum=i;var N=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.mergeFunction=function(e){return p.tidy(function(){for(var t=e[0],n=1;n<e.length;++n)t=c.minimum(t,e[n]);return t})},t.className="Minimum",t}(b);t.Minimum=N,p.serialization.SerializationMap.register(N),t.minimum=s;var T=function(e){function t(t){var n=e.call(this,t)||this;return n.DEFAULT_AXIS=-1,null==t&&(t={}),n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return l(t,e),t.prototype.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new m.ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;for(var t=!0,n=0,r=e;n<r.length;n++){var a=r[n];if(null!=a){t=!1;break}}if(!t){for(var o=[],i=0;i<e.length;++i){var s=e[i].slice();s.splice(this.axis,1);for(var u=!1,l=0,c=o;l<c.length;l++){var a=c[l];if(p.util.arraysEqual(a,s)){u=!0;break}}u||o.push(s)}if(o.length>1)throw new m.ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},t.prototype.mergeFunction=function(e){
var t=this;return p.tidy(function(){return d.concatenate(e,t.axis)})},t.prototype.computeOutputShape=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new m.ValueError("A `Concatenate` layer should be called on a list of inputs.");for(var t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,a=0,o=t.slice(1);a<o.length;a++){var i=o[a];if(null==n[r]||null==i[r]){n[r]=null;break}n[r]+=i[r]}return n},t.prototype.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="Concatenate",t}(b);t.Concatenate=T,p.serialization.SerializationMap.register(T),t.concatenate=u},function(e,t,n){"use strict";function r(e,t,n,r,a,o){void 0===o&&(o=.001);var i;if(2===e.rank)i=u.batchNormalization2d(e,t,n,o,a,r);else if(3===e.rank)i=u.batchNormalization3d(e,t,n,o,a,r);else{if(4!==e.rank)throw new d.NotImplementedError("batchNormalization is not implememnted for array of rank "+e.rank+" yet");i=u.batchNormalization4d(e,t,n,o,a,r)}return i}function a(e,t,n,a,o){return void 0===o&&(o=.001),l.tidy(function(){var i=u.moments(e,a),s=i.mean,l=i.variance,c=r(e,s,l,n,t,o);return[c,s,l]})}function o(e,t,n,a,o){return void 0===o&&(o=.001),l.tidy(function(){for(var i=u.moments(e,a),s=i.mean,l=i.variance,c=[],p=0,h=v.range(0,e.rank);p<h.length;p++){var d=h[p];a.indexOf(d)!==-1?c.push(1):c.push(e.shape[d])}var f=s.reshape(c),m=l.reshape(c),g=null==t?null:t.reshape(c),y=null==n?null:n.reshape(c),b=r(e,f,m,y,g,o);return[b,s,l]})}function i(e,t,n,r,i){return void 0===i&&(i=.001),l.util.arraysEqual(r.slice().sort(),v.range(0,e.rank-1))?a(e,t,n,r,i):o(e,t,n,r,i)}var s=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),l=n(1),c=n(49),p=n(15),h=n(11),d=n(8),f=n(50),m=n(40),g=n(13),v=n(41),y=n(19);t.batchNormalization=r,t.normalizeBatchInTraining=i;var b=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n.axis=null==t.axis?-1:t.axis,n.momentum=null==t.momentum?.99:t.momentum,n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=f.getInitializer(t.betaInitializer||"zeros"),n.gammaInitializer=f.getInitializer(t.gammaInitializer||"ones"),n.movingMeanInitializer=f.getInitializer(t.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=f.getInitializer(t.movingVarianceInitializer||"ones"),n.betaConstraint=c.getConstraint(t.betaConstraint),n.gammaConstraint=c.getConstraint(t.gammaConstraint),n.betaRegularizer=m.getRegularizer(t.betaRegularizer),n.gammaRegularizer=m.getRegularizer(t.gammaRegularizer),n.stepCount=0,n}return s(t,e),t.prototype.build=function(e){e=y.getExactlyOneShape(e);var t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new d.ValueError("Axis "+t+" of input tensor should have a defined dimension but the layer received an input with shape "+(JSON.stringify(e)+"."));this.inputSpec=[new p.InputSpec({ndim:e.length,axes:(a={},a[t]=n,a)})];var r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0;var a},t.prototype.call=function(e,t){var n=this;return l.tidy(function(){var a=null!=t.training&&t.training,o=y.getExactlyOneTensor(e),s=o.shape,c=s.length,p=v.range(0,c),d=n.axis>=0?n.axis:n.axis+c;p.splice(d,1);var f=g.pyListRepeat(1,c);f[d]=s[d];var m=p.slice();m.sort();var b=!l.util.arraysEqual(m,v.range(0,c).slice(0,c-1)),x=function(){if(b){var e=n.movingMean.read().reshape(f),t=n.movingVariance.read().reshape(f),a=n.center?n.beta.read().reshape(f):null,i=n.scale?n.gamma.read().reshape(f):null;return r(o,e,t,a,i,n.epsilon)}return r(o,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)};if(!a)return x();var w=i(o,n.gamma.read(),n.beta.read(),p,n.epsilon),S=w[0],_=w[1],N=w[2],T=v.arrayProd(p.map(function(e){return o.shape[e]})),k=N.mul(h.getScalar(T/(T-(1+n.epsilon)))),I=function(){n.stepCount++;var e=u.movingAverage(n.movingMean.read(),_,n.momentum,n.stepCount);n.movingMean.write(e);var t=u.movingAverage(n.movingVariance.read(),k,n.momentum,n.stepCount);n.movingVariance.write(t)};return I(),S})},t.prototype.getConfig=function(){var t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:f.serializeInitializer(this.betaInitializer),gammaInitializer:f.serializeInitializer(this.gammaInitializer),movingMeanInitializer:f.serializeInitializer(this.movingMeanInitializer),movingVarianceInitializer:f.serializeInitializer(this.movingVarianceInitializer),betaRegularizer:m.serializeRegularizer(this.betaRegularizer),gammaRegularizer:m.serializeRegularizer(this.gammaRegularizer),betaConstraint:c.serializeConstraint(this.betaConstraint),gammaConstraint:c.serializeConstraint(this.gammaConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="BatchNormalization",t}(p.Layer);t.BatchNormalization=b,l.serialization.SerializationMap.register(b)},function(e,t,n){"use strict";function r(e,t){return s.tidy(function(){if(3!==e.rank)throw new c.ValueError("temporalPadding expects input tensor to be 3-D, but received a "+(e.rank+"-D tensor."));if(null==t&&(t=[1,1]),2!==t.length)throw new c.ValueError("temporalPadding expects input padding pattern to be a length-2 "+("array, but received a length-"+t.length+" array."));var n=[[0,0],t,[0,0]];return i.pad(e,n)})}function a(e,t,n){return s.tidy(function(){if(4!==e.rank)throw new c.ValueError("temporalPadding expects input tensor to be 4-D, but received a "+(e.rank+"-D tensor."));if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new c.ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n=u.imageDataFormat()),"channelsLast"!==n&&"channelsFirst"!==n)throw new c.ValueError("Unknown data format: "+n+". Supported data formats are 'channelsLast' and 'channelsFirst.");var r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],i.pad(e,r)})}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(1),u=n(39),l=n(15),c=n(8),p=n(19);t.temporalPadding=r,t.spatial2dPadding=a;var h=function(e){function t(t){var n=this;if(null==t&&(t={}),n=e.call(this,t)||this,n.dataFormat=null==t.dataFormat?u.imageDataFormat():t.dataFormat,null==t.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)n.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new c.ValueError("ZeroPadding2D expects padding to be a length-2 array, but "+("received a length-"+t.padding.length+" array."));var r=void 0,a=void 0;if("number"==typeof t.padding[0])r=[t.padding[0],t.padding[0]],a=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new c.ValueError("ZeroPadding2D expects height padding to be a length-2 array, "+("but received a length-"+t.padding[0].length+" array."));if(r=t.padding[0],2!==t.padding[1].length)throw new c.ValueError("ZeroPadding2D expects width padding to be a length-2 array, "+("but received a length-"+t.padding[1].length+" array."));a=t.padding[1]}n.padding=[r,a]}return n.inputSpec=[new l.InputSpec({ndim:4})],n}return o(t,e),t.prototype.computeOutputShape=function(e){e=p.getExactlyOneShape(e);var t,n;return"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])},t.prototype.call=function(e,t){var n=this;return s.tidy(function(){return a(p.getExactlyOneTensor(e),n.padding,n.dataFormat)})},t.prototype.getConfig=function(){var t={padding:this.padding,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.className="ZeroPadding2D",t}(l.Layer);t.ZeroPadding2D=h,s.serialization.SerializationMap.register(h)},function(e,t,n){"use strict";function r(e,t,n,r,a,u){return i.tidy(function(){l.checkDataFormat(a),l.checkPoolMode(u),l.checkPaddingMode(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a=s.imageDataFormat()),null==u&&(u="max"),e=m.preprocessConv2DInput(e,a);var i,c="same"===r?"same":"valid";return i="max"===u?o.maxPool(e,t,n,c):o.avgPool(e,t,n,c),"channelsFirst"===a&&(i=o.transpose(i,[0,3,1,2])),i})}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(1),s=n(39),u=n(17),l=n(38),c=n(15),p=n(15),h=n(8),d=n(142),f=n(19),m=n(140);t.pool2d=r;var g=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=2),n=e.call(this,t)||this,"number"==typeof t.poolSize)n.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new h.ValueError("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));n.poolSize=t.poolSize}if(null==t.strides)n.strides=n.poolSize;else if("number"==typeof t.strides)n.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new h.ValueError("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));n.strides=t.strides}return n.padding=null==t.padding?"valid":t.padding,l.checkPaddingMode(n.padding),n.inputSpec=[new c.InputSpec({ndim:3})],n}return a(t,e),t.prototype.computeOutputShape=function(e){e=f.getExactlyOneShape(e);var t=d.convOutputLength(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]},t.prototype.call=function(e,t){var n=this;return i.tidy(function(){n.invokeCallHook(e,t),e=u.expandDims(f.getExactlyOneTensor(e),2);var r=n.poolingFunction(f.getExactlyOneTensor(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return o.squeeze(r,[2])})},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(p.Layer);t.Pooling1D=g;var v=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,a,o){return l.checkDataFormat(o),l.checkPaddingMode(a),r(e,t,n,a,o,"max")},t.className="MaxPooling1D",t}(g);t.MaxPooling1D=v,i.serialization.SerializationMap.register(v);var y=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,a,o){return l.checkDataFormat(o),l.checkPaddingMode(a),r(e,t,n,a,o,"avg")},t.className="AveragePooling1D",t}(g);t.AveragePooling1D=y,i.serialization.SerializationMap.register(y);var b=function(e){function t(t){var n=this;if(null==t.poolSize&&(t.poolSize=[2,2]),n=e.call(this,t)||this,n.poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new h.ValueError("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+(t.strides.length+"."));n.strides=t.strides}else n.strides=[t.strides,t.strides];return n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,l.checkDataFormat(n.dataFormat),l.checkPaddingMode(n.padding),n.inputSpec=[new c.InputSpec({ndim:4})],n}return a(t,e),t.prototype.computeOutputShape=function(e){e=f.getExactlyOneShape(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=d.convOutputLength(t,this.poolSize[0],this.padding,this.strides[0]),n=d.convOutputLength(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]},t.prototype.call=function(e,t){var n=this;return i.tidy(function(){return n.invokeCallHook(e,t),n.poolingFunction(f.getExactlyOneTensor(e),n.poolSize,n.strides,n.padding,n.dataFormat)})},t.prototype.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(p.Layer);t.Pooling2D=b;var x=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,a,o){return l.checkDataFormat(o),l.checkPaddingMode(a),r(e,t,n,a,o,"max")},t.className="MaxPooling2D",t}(b);t.MaxPooling2D=x,i.serialization.SerializationMap.register(x);var w=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.poolingFunction=function(e,t,n,a,o){return l.checkDataFormat(o),l.checkPaddingMode(a),r(e,t,n,a,o,"avg")},t.className="AveragePooling2D",t}(b);t.AveragePooling2D=w,i.serialization.SerializationMap.register(w);var S=function(e){function t(t){var n=e.call(this,t)||this;return n.inputSpec=[new c.InputSpec({ndim:3})],n}return a(t,e),t.prototype.computeOutputShape=function(e){return[e[0],e[2]]},t.prototype.call=function(e,t){throw new h.NotImplementedError},t}(p.Layer);t.GlobalPooling1D=S;var _=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.call=function(e,t){return i.tidy(function(){var t=f.getExactlyOneTensor(e);return o.mean(t,1)})},t.className="GlobalAveragePooling1D",t}(S);t.GlobalAveragePooling1D=_,i.serialization.SerializationMap.register(_);var N=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.call=function(e,t){return i.tidy(function(){var t=f.getExactlyOneTensor(e);return o.max(t,1)})},t.className="GlobalMaxPooling1D",t}(S);t.GlobalMaxPooling1D=N,i.serialization.SerializationMap.register(N);var T=function(e){function t(t){var n=e.call(this,t)||this;return n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,l.checkDataFormat(n.dataFormat),n.inputSpec=[new c.InputSpec({ndim:4})],n}return a(t,e),t.prototype.computeOutputShape=function(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]},t.prototype.call=function(e,t){throw new h.NotImplementedError},t.prototype.getConfig=function(){var t={dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(p.Layer);t.GlobalPooling2D=T;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.call=function(e,t){var n=this;return i.tidy(function(){var t=f.getExactlyOneTensor(e);return"channelsLast"===n.dataFormat?o.mean(t,[1,2]):o.mean(t,[2,3])})},t.className="GlobalAveragePooling2D",t}(T);t.GlobalAveragePooling2D=k,i.serialization.SerializationMap.register(k);var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.call=function(e,t){var n=this;return i.tidy(function(){var t=f.getExactlyOneTensor(e);return"channelsLast"===n.dataFormat?o.max(t,[1,2]):o.max(t,[2,3])})},t.className="GlobalMaxPooling2D",t}(T);t.GlobalMaxPooling2D=I,i.serialization.SerializationMap.register(I)},function(e,t,n){"use strict";function r(e){h.checkStringTypeUnionValue(t.VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",e)}var a=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(1),s=n(11),u=n(17),l=n(38),c=n(15),p=n(8),h=n(13),d=n(19),f=n(141),m=n(97),g=function(e){function t(t){var n=e.call(this,t)||this;return n.layer=t.layer,n}return a(t,e),t.prototype.build=function(e){this.built=!0},Object.defineProperty(t.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.layer.getWeights()},t.prototype.setWeights=function(e){this.layer.setWeights(e)},t.prototype.getConfig=function(){var t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.fromConfig=function(e,t,n){void 0===n&&(n={});var r=t.layer,a=m.deserialize(r,n);delete t.layer;var o={layer:a};return Object.assign(o,t),new e(o)},t}(c.Layer);t.Wrapper=g;var v=function(e){function t(t){var n=e.call(this,t)||this;return n.supportsMasking=!0,n}return a(t,e),t.prototype.build=function(t){if(t=d.getExactlyOneShape(t),t.length<3)throw new p.ValueError("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];var n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),e.prototype.build.call(this,t)},t.prototype.computeOutputShape=function(e){e=d.getExactlyOneShape(e);var t=[e[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))},t.prototype.call=function(e,t){var n=this;return i.tidy(function(){e=d.getExactlyOneTensor(e);var r=function(e,r){var a=n.layer.call(e,t);return[a,[]]},a=f.rnn(r,e,[],!1,null,null,!1,e.shape[1]),o=a[1];return o})},t.className="TimeDistributed",t}(g);t.TimeDistributed=v,i.serialization.SerializationMap.register(v),t.VALID_BIDIRECTIONAL_MERGE_MODES=["sum","mul","concat","ave"],t.checkBidirectionalMergeMode=r;var y=function(e){function t(t){var n=e.call(this,t)||this,a=t.layer.getConfig();if(n.forwardLayer=m.deserialize({className:t.layer.getClassName(),config:a}),a.goBackwards=a.goBackwards!==!0,n.backwardLayer=m.deserialize({className:t.layer.getClassName(),config:a}),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,r(t.mergeMode),n.mergeMode=t.mergeMode,t.weights)throw new p.NotImplementedError("weights support is not implemented for Bidirectional layer yet.");return n._stateful=t.layer.stateful,n.returnSequences=t.layer.returnSequences,n.returnState=t.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=t.layer.inputSpec,n.numConstants=null,n}return a(t,e),Object.defineProperty(t.prototype,"trainable",{get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)},enumerable:!0,configurable:!0}),t.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},t.prototype.setWeights=function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))},t.prototype.computeOutputShape=function(e){var t=this.forwardLayer.computeOutputShape(e);Array.isArray(t)&&Array.isArray(t[0])||(t=[t]),t=t;var n,r,a;return this.returnState?(a=t.slice(1),n=t[0]):n=t[0],n=n,"concat"===this.mergeMode?(n[n.length-1]*=2,r=[n]):r=null==this.mergeMode?[n,n.slice()]:[n],this.returnState?null==this.mergeMode?r.concat(a).concat(a.slice()):[n].concat(a).concat(a.slice()):h.singletonOrArray(r)},t.prototype.apply=function(t,n){var r=null==n?null:n.initialState,a=null==n?null:n.constants;null==n&&(n={});var o=f.standardizeArgs(t,r,a,this.numConstants);if(t=o.inputs,r=o.initialState,a=o.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(null==r||0===r.length)&&null==a)return e.prototype.apply.call(this,t,n);var i=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new p.ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,i.push.apply(i,r);var l=r.map(function(e){return new c.InputSpec({shape:e.shape})});this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,l)}if(null!=a)throw new p.NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");for(var h=i[0]instanceof c.SymbolicTensor,d=0,m=i;d<m.length;d++){var g=m[d];if(g instanceof c.SymbolicTensor!==h)throw new p.ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(h){var v=[t].concat(i),y=this.inputSpec.concat(s),b=this.inputSpec;this.inputSpec=y;var x=e.prototype.apply.call(this,v,n);return this.inputSpec=b,x}return e.prototype.apply.call(this,t,n)},t.prototype.call=function(e,t){var n=this;return i.tidy(function(){if(null!=t.mask)throw new p.NotImplementedError("The support for masking is not implemented for Bidirectional layers yet.");var r,a,i=t.initialState;if(null==i)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var l=i.slice(0,i.length/2),c=i.slice(i.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:l})),a=n.forwardLayer.call(e,Object.assign(t,{initialState:c}))}var h;n.returnState&&(Array.isArray(r)&&(h=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=o.reverse(a,1));var d;return"concat"===n.mergeMode?d=u.concatenate([r,a]):"sum"===n.mergeMode?d=o.add(r,a):"ave"===n.mergeMode?d=o.mul(s.getScalar(.5),o.add(r,a)):"mul"===n.mergeMode?d=o.mul(r,a):null==n.mergeMode&&(d=[r,a]),n.returnState?null==n.mergeMode?d.concat(h):[d].concat(h):d})},t.prototype.resetStates=function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},t.prototype.build=function(e){var t=this;l.nameScope(this.forwardLayer.name,function(){t.forwardLayer.build(e)}),l.nameScope(this.backwardLayer.name,function(){t.backwardLayer.build(e)}),this.built=!0},Object.defineProperty(t.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),t.prototype.getConfig=function(){var t={mergeMode:this.mergeMode},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.fromConfig=function(e,t){var n=m.deserialize(t.layer);if(delete t.layer,null!=t.numConstants)throw new p.NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)},t.className="Bidirectional",t}(g);t.Bidirectional=y,i.serialization.SerializationMap.register(y)},function(e,t,n){"use strict";function r(e){var t={Adagrad:function(){return a.train.adagrad(.01)},Adadelta:function(){return a.train.adadelta(1,.95,o.epsilon())},Adam:function(){return a.train.adam(.001,.9,.999,o.epsilon())},Adamax:function(){return a.train.adamax(.002,.9,.999,o.epsilon(),0)},RMSProp:function(){return a.train.rmsprop(.001,.9,0,o.epsilon())},SGD:function(){return a.train.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new i.ValueError("Unknown Optimizer "+e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=n(39),i=n(8);t.getOptimizer=r},function(e,t,n){"use strict";function r(e,t,n,r){void 0===r&&(r=console.log);var c=o(e),p=["Layer (type)","Output shape","Param #"];c?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(function(e){return Math.floor(t*e)}));var h;if(!c){p.push("Receives inputs"),h=[];for(var d in e.nodesByDepth)h.push.apply(h,e.nodesByDepth[d])}r("_".repeat(t)),i(p,n,r),r("=".repeat(t));for(var f=e.layers,m=0;m<f.length;++m)c?s(f[m],n,r):u(f[m],n,h,r),r((m===f.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var g=a(e),v=l.countParamsInWeights(e.nonTrainableWeights);r("Total params: "+(g+v)),r("Trainable params: "+g),r("Non-trainable params: "+v),r("_".repeat(t))}function a(e){var t;return t=null!=e.collectedTrainableWeights?l.countParamsInWeights(e.collectedTrainableWeights):l.countParamsInWeights(e.trainableWeights)}function o(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var o=0,i=n;o<i.length;o++){var s=i[o];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,s)}if(t)for(var u=0,l=e.layers;u<l.length;u++){for(var c=l[u],p=!1,h=0,d=c.inboundNodes;h<d.length;h++){var f=d[h];if(r.indexOf(f)!==-1){if(p){t=!1;break}p=!0}}if(!t)break}return t}function i(e,t,n){void 0===n&&(n=console.log);for(var r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r+=e[a],r=r.slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function s(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}var a=e.name,o=e.getClassName(),s=[a+" ("+o+")",r,e.countParams().toString()];i(s,t,n)}function u(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}for(var o=[],s=0,u=e.inboundNodes;s<u.length;s++){var l=u[s];if(!(null!=n&&n.length>0&&n.indexOf(l)===-1))for(var c=0;c<l.inboundLayers.length;++c){var p=l.inboundLayers[c].name,h=l.nodeIndices[c],d=l.tensorIndices[c];o.push(p+"["+h+"]["+d+"]")}}var f=e.name,m=e.getClassName(),g=0===o.length?"":o[0],v=[f+" ("+m+")",a,e.countParams().toString(),g];i(v,t,r);for(var c=1;c<o.length;++c)i(["","","",o[c]],t,r)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(192);t.printSummary=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="0.12.7";t.version=n},,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(46),o=r(a),i=n(52),s=r(i),u=n(51),l=r(u),c=n(9),p=(r(c),function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,e.apply(this,arguments))}return(0,l.default)(t,e),t.prototype.render=function(){return null},t}(c.Component));t.default=p,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(46),i=a(o),s=n(52),u=a(s),l=n(51),c=a(l),p=n(9),h=a(p),d=n(151),f=r(d),m=function(e){function t(n){return(0,i.default)(this,t),(0,u.default)(this,e.call(this,n))}return(0,c.default)(t,e),t.prototype.render=function(){return null},t.prototype.parseLayerElement=function(e){switch(e.props.lname){case"Conv2D":return f.layers.conv2d(e.props);case"Dense":return f.layers.dense(e.props);case"Flatten":return f.layers.flatten(e.props);case"MaxPooling2D":return f.layers.maxPooling2d(e.props);default:throw new Error("Invalid Layer",e)}},t.prototype._compile=function(){var e=this,t=this.props,n=t.children,r=t.optimizer,a=t.loss,o=t.metrics,i=t.onCompile,s=h.default.Children.toArray(n),u=f.sequential();s.map(function(t){t?u.add(e.parseLayerElement(t)):console.log("No fuking layer...")}),u.compile({optimizer:r,loss:a,metrics:o}),"function"==typeof i&&i(u)},t.prototype.componentDidUpdate=function(e){this.props!=e&&this._compile()},t.prototype.componentDidMount=function(){this._compile()},t}(h.default.Component);t.default=m,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=n(143),i=a(o),s=n(360),u=a(s),l=n(603),c=a(l),p=n(525),h=a(p),d=n(46),f=a(d),m=n(52),g=a(m),v=n(51),y=a(v),b=n(9),x=a(b),w=n(151),S=r(w),_=n(351),N=n(72),T=a(N),k=n(26),I=(a(k),function(e){function t(n){(0,f.default)(this,t);var r=(0,g.default)(this,e.call(this,n));return r.state={metrics:{},allcharts:{},modelElement:null},r.trainer=null,r.dcolors={backgroundColor:"rgba(255,99,132,0.2)",borderColor:"rgba(255,99,132,1)",borderWidth:1,hoverBackgroundColor:"rgba(255,99,132,0.4)",hoverBorderColor:"rgba(255,99,132,1)"},r}return(0,y.default)(t,e),t.prototype.componentDidMount=function(){var e=this,t=x.default.Children.only(this.props.children),n=x.default.cloneElement(t,{onCompile:function(t){e.trainer=e._train(t),e.trainer.next()}});this.setState({modelElement:n})},t.prototype.draw_metrics=function(){var e=this,t=(0,h.default)(this.state.metrics).map(function(t){var n=(e.state.metrics[t],e.state.allcharts[t]);return x.default.createElement("div",{key:t,className:T.default.d200},x.default.createElement(_.Line,{data:n}))});return t},t.prototype.render=function(){if(!this.props.display)return this.state.modelElement;var e=this.draw_metrics();return x.default.createElement("div",null,x.default.createElement("div",{className:T.default.chart},e),this.state.modelElement)},t.prototype.shouldComponentUpdate=function(e,t){return this.props.display!=e.display||this.props.train!=e.train||this.state.modelElement!=t.modelElement||this.state.metrics!=t.metrics},t.prototype.componentDidUpdate=function(e){this.props.train&&!e.train&&null!=this.trainer&&this.trainer.next()},t.prototype._train=function(){function e(e){return t.apply(this,arguments)}var t=c.default.wrap(u.default.mark(function e(t){var n,r,a,o,i,s,l,p,h,d,f,m,g,v,y,b,x,w,_,N,T;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props,r=n.trainData,a=n.samples,o=n.validationData,i=n.epochs,s=n.batchSize,l=n.display,p=this.props.onBatchEnd,h=0;case 3:if(!(h<i)){e.next=45;break}d=r(),f=0;case 6:if(!(f*s<a)){e.next=25;break}if(m=this.props.train){e.next=11;break}return void(e.next=11);case 11:return g=this._getBatch(d,s),e.next=14,c.default.await(t.fit(g.xs,g.ys,{batchSize:g.xs.shape[0],epochs:1}));case 14:if(v=e.sent,p(v.history,t),S.dispose(g),!l){e.next=22;break}return y=v.history,this._pushMetrics(y),e.next=22,c.default.await(S.nextFrame());case 22:f++,e.next=6;break;case 25:if(!o){e.next=42;break}b=o(),x=this._getBatch(b,1/0),w=t.evaluate(x.xs,x.ys,{batchSize:s}),_={},N=0;case 31:if(!(N<w.length)){e.next=39;break}return T=t.metricsNames[N],e.next=35,c.default.await(w[N].data());case 35:_["validation-"+T]=e.sent;case 36:N++,e.next=31;break;case 39:this._pushMetrics(_),S.dispose(w),S.dispose(x);case 42:h++,e.next=3;break;case 45:this.props.onTrainEnd(t);case 46:case"end":return e.stop();
}},e,this)}));return e}(),t.prototype._getBatch=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=[],r=[],a=0;a<t;a++){var o=e.next().value;if(null==o)break;n.push(o.x),r.push(o.y)}if(0===n.length)throw new Error("No data returned from data generator for batch, check sample length");var i=function(e){return e[0]instanceof S.Tensor?S.stack(e):S.tensor(e)};return{xs:i(n),ys:i(r)}},t.prototype._pushMetrics=function(e){var t=this,n=(0,i.default)({},this.state.metrics);(0,h.default)(e).map(function(r){null==n[r]&&(n[r]=[]),n[r].push(e[r][0]);var a=n[r],o={labels:(0,h.default)(a).map(function(e){return parseInt(e,10)}),datasets:[(0,i.default)({label:r,data:a},t.dcolors)]};t.setState(function(e){return e.allcharts[r]=o,e})}),this.setState({metrics:n})},t}(x.default.Component));I.propTypes={onBatchEnd:x.default.PropTypes.func},t.default=I,e.exports=t.default},,function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function r(e){var t=n(e),r=t[0],a=t[1];return 3*(r+a)/4-a}function a(e,t,n){return 3*(t+n)/4-n}function o(e){for(var t,r=n(e),o=r[0],i=r[1],s=new p(a(e,o,i)),u=0,l=i>0?o-4:o,h=0;h<l;h+=4)t=c[e.charCodeAt(h)]<<18|c[e.charCodeAt(h+1)]<<12|c[e.charCodeAt(h+2)]<<6|c[e.charCodeAt(h+3)],s[u++]=t>>16&255,s[u++]=t>>8&255,s[u++]=255&t;return 2===i&&(t=c[e.charCodeAt(h)]<<2|c[e.charCodeAt(h+1)]>>4,s[u++]=255&t),1===i&&(t=c[e.charCodeAt(h)]<<10|c[e.charCodeAt(h+1)]<<4|c[e.charCodeAt(h+2)]>>2,s[u++]=t>>8&255,s[u++]=255&t),s}function i(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function s(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(i(r));return a.join("")}function u(e){for(var t,n=e.length,r=n%3,a=[],o=16383,i=0,u=n-r;i<u;i+=o)a.push(s(e,i,i+o>u?u:i+o));return 1===r?(t=e[n-1],a.push(l[t>>2]+l[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(l[t>>10]+l[t>>4&63]+l[t<<2&63]+"=")),a.join("")}t.byteLength=r,t.toByteArray=o,t.fromByteArray=u;for(var l=[],c=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,f=h.length;d<f;++d)l[d]=h[d],c[h.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t,n){(function(e){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function a(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?p(e,t,n):f(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return u(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function c(e,t){if(u(t),e=o(e,t<0?0:0|m(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n);e=o(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function h(e,t){var n=t.length<0?0:0|m(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=h(e,t),e}function f(e,t){if(i.isBuffer(t)){var n=0|m(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&Q(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),i.alloc(+e)}function v(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(r)return H(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,a);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,a){function o(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}var i=1,s=e.length,u=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,u/=2,n/=2}var l;if(a){var c=-1;for(l=n;l<s;l++)if(o(e,l)===o(t,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*i}else c!==-1&&(l-=l-c),c=-1}else for(n+u>s&&(n=s-u),l=n;l>=0;l--){for(var p=!0,h=0;h<u;h++)if(o(e,l+h)!==o(t,h)){p=!1;break}if(p)return l}return-1}function S(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r),r>a&&(r=a)):r=a;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}function _(e,t,n,r){return K(H(t,e.length-n),e,n,r)}function N(e,t,n,r){return K(q(t),e,n,r)}function T(e,t,n,r){return N(e,t,n,r)}function k(e,t,n,r){return K($(t),e,n,r)}function I(e,t,n,r){return K(Y(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?Z.fromByteArray(e):Z.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o=e[a],i=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s<=n){var u,l,c,p;switch(s){case 1:o<128&&(i=o);break;case 2:u=e[a+1],128===(192&u)&&(p=(31&o)<<6|63&u,p>127&&(i=p));break;case 3:u=e[a+1],l=e[a+2],128===(192&u)&&128===(192&l)&&(p=(15&o)<<12|(63&u)<<6|63&l,p>2047&&(p<55296||p>57343)&&(i=p));break;case 4:u=e[a+1],l=e[a+2],c=e[a+3],128===(192&u)&&128===(192&l)&&128===(192&c)&&(p=(15&o)<<18|(63&u)<<12|(63&l)<<6|63&c,p>65535&&p<1114112&&(i=p))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),a+=s}return P(r)}function P(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function M(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=G(e[o]);return a}function D(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function R(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function z(e,t,n,r,a,o){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-n,2);a<o;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function V(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-n,4);a<o;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function F(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,a){return a||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,a){return a||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function U(e){if(e=W(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function H(e,t){t=t||1/0;for(var n,r=e.length,a=null,o=[],i=0;i<r;++i){if(n=e.charCodeAt(i),n>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=(a-55296<<10|n-56320)+65536}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,r,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}function $(e){return Z.toByteArray(U(e))}function K(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function X(e){return e!==e}var Z=n(526),J=n(557),Q=n(558);t.Buffer=i,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=a(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,n){return s(null,e,t,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,n){return l(null,e,t,n)},i.allocUnsafe=function(e){return c(null,e)},i.allocUnsafeSlow=function(e){return c(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!i.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):y.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,a){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var o=a-r,s=n-t,u=Math.min(o,s),l=this.slice(r,a),c=e.slice(t,n),p=0;p<u;++p)if(l[p]!==c[p]){o=l[p],s=c[p];break}return o<s?-1:s<o?1:0},i.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},i.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return N(this,e,t,n);case"latin1":case"binary":return T(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;i.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var r;if(i.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=i.prototype;else{var a=t-e;r=new i(a,void 0);for(var o=0;o<a;++o)r[o]=this[o+e]}return r},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},i.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,a=1,o=this[e+--r];r>0&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},i.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),J.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),J.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),J.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),J.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var a=Math.pow(2,8*n)-1;z(this,e,t,n,a,0)}var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){var a=Math.pow(2,8*n)-1;z(this,e,t,n,a,0)}var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):V(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);z(this,e,t,n,a-1,-a)}var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);z(this,e,t,n,a-1,-a)}var o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):V(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,o=r-n;if(this===e&&n<t&&t<r)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!i.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=i.isBuffer(e)?e:H(new i(e,r).toString()),u=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){t.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,u=(1<<s)-1,l=u>>1,c=-7,p=n?a-1:0,h=n?-1:1,d=e[t+p];for(p+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=h,c-=8);for(i=o&(1<<-c)-1,o>>=-c,c+=r;c>0;i=256*i+e[t+p],p+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return i?NaN:(d?-1:1)*(1/0);i+=Math.pow(2,r),o-=l}return(d?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,s,u,l=8*o-a-1,c=(1<<l)-1,p=c>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=c):(i=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-i))<1&&(i--,u*=2),t+=i+p>=1?h/u:h*Math.pow(2,1-p),t*u>=2&&(i++,u/=2),i+p>=c?(s=0,i=c):i+p>=1?(s=(t*u-1)*Math.pow(2,a),i+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,a),i=0));a>=8;e[n+d]=255&s,d+=f,s/=256,a-=8);for(i=i<<a|s,l+=a;l>0;e[n+d]=255&i,d+=f,i/=256,l-=8);e[n+d-f]|=128*m}},,,function(e,t,n){"use strict";e.exports=n(561)},function(e,t,n){"use strict";function r(){a.Reader._configure(a.BufferReader),a.util._configure()}var a=t;a.build="minimal",a.Writer=n(350),a.BufferWriter=n(567),a.Reader=n(349),a.BufferReader=n(562),a.util=n(53),a.rpc=n(564),a.roots=n(563),a.configure=r,a.Writer._configure(a.BufferWriter),r()},function(e,t,n){"use strict";function r(e){a.call(this,e)}e.exports=r;var a=n(349);(r.prototype=Object.create(a.prototype)).constructor=r;var o=n(53);o.Buffer&&(r.prototype._slice=o.Buffer.prototype.slice),r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len))}},function(e,t){"use strict";e.exports={}},function(e,t,n){"use strict";var r=t;r.Service=n(565)},function(e,t,n){"use strict";function r(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");a.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}e.exports=r;var a=n(53);(r.prototype=Object.create(a.EventEmitter.prototype)).constructor=r,r.prototype.rpcCall=function e(t,n,r,o,i){if(!o)throw TypeError("request must be specified");var s=this;if(!i)return a.asPromise(e,s,t,n,r,o);if(!s.rpcImpl)return void setTimeout(function(){i(Error("already ended"))},0);try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,n){if(e)return s.emit("error",e,t),i(e);if(null===n)return void s.end(!0);if(!(n instanceof r))try{n=r[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),i(e)}return s.emit("data",n,t),i(null,n)})}catch(e){return s.emit("error",e,t),void setTimeout(function(){i(e)},0)}},r.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,n){"use strict";function r(e,t){this.lo=e>>>0,this.hi=t>>>0}e.exports=r;var a=n(53),o=r.zero=new r(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var i=r.zeroHash="\0\0\0\0\0\0\0\0";r.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var n=e>>>0,a=(e-n)/4294967296>>>0;return t&&(a=~a>>>0,n=~n>>>0,++n>4294967295&&(n=0,++a>4294967295&&(a=0))),new r(n,a)},r.from=function(e){if("number"==typeof e)return r.fromNumber(e);if(a.isString(e)){if(!a.Long)return r.fromNumber(parseInt(e,10));e=a.Long.fromString(e)}return e.low||e.high?new r(e.low>>>0,e.high>>>0):o},r.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},r.prototype.toLong=function(e){return a.Long?new a.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;r.fromHash=function(e){return e===i?o:new r((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},r.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},r.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},r.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},r.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},function(e,t,n){"use strict";function r(){o.call(this)}function a(e,t,n){e.length<40?i.utf8.write(e,t,n):t.utf8Write(e,n)}e.exports=r;var o=n(350);(r.prototype=Object.create(o.prototype)).constructor=r;var i=n(53),s=i.Buffer;r.alloc=function(e){return(r.alloc=i._Buffer_allocUnsafe)(e)};var u=s&&s.prototype instanceof Uint8Array&&"set"===s.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]};r.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(u,t,e),this},r.prototype.string=function(e){var t=s.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this}},,,,,,,,,,,,,,,,,,,,function(e,t){!function(t){"use strict";function n(e,t,n,r){var o=t&&t.prototype instanceof a?t:a,i=Object.create(o.prototype),s=new d(r||[]);return i._invoke=l(e,n,s),i}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function o(){}function i(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(n,a,o,i){var s=r(e[n],e,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&y.call(l,"__await")?Promise.resolve(l.__await).then(function(e){t("next",e,o,i)},function(e){t("throw",e,o,i)}):Promise.resolve(l).then(function(e){u.value=e,o(u)},i)}i(s.arg)}function n(e,n){function r(){return new Promise(function(r,a){t(e,n,r,a)})}return a=a?a.then(r,r):r()}var a;this._invoke=n}function l(e,t,n){var a=T;return function(o,i){if(a===I)throw new Error("Generator is already running");if(a===E){if("throw"===o)throw i;return m()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var u=c(s,n);if(u){if(u===A)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===T)throw a=E,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=I;var l=r(e,t,n);if("normal"===l.type){if(a=n.done?E:k,l.arg===A)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=E,n.method="throw",n.arg=l.arg)}}}function c(e,t){var n=e.iterator[t.method];if(n===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,c(e,t),"throw"===t.method))return A;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var a=r(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,A;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,A):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function p(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function h(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(p,this),this.reset(!0)}function f(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=g,t.done=!0,t};return r.next=r}}return{next:m}}function m(){return{value:g,done:!0}}var g,v=Object.prototype,y=v.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},x=b.iterator||"@@iterator",w=b.asyncIterator||"@@asyncIterator",S=b.toStringTag||"@@toStringTag",_="object"==typeof e,N=t.regeneratorRuntime;if(N)return void(_&&(e.exports=N));N=t.regeneratorRuntime=_?e.exports:{},N.wrap=n;var T="suspendedStart",k="suspendedYield",I="executing",E="completed",A={},P={};P[x]=function(){return this};var C=Object.getPrototypeOf,O=C&&C(C(f([])));O&&O!==v&&y.call(O,x)&&(P=O);var M=i.prototype=a.prototype=Object.create(P);o.prototype=M.constructor=i,i.constructor=o,i[S]=o.displayName="GeneratorFunction",N.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},N.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,i):(e.__proto__=i,S in e||(e[S]="GeneratorFunction")),e.prototype=Object.create(M),e},N.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[w]=function(){return this},N.AsyncIterator=u,N.async=function(e,t,r,a){var o=new u(n(e,t,r,a));return N.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},s(M),M[S]="Generator",M[x]=function(){return this},M.toString=function(){return"[object Generator]"},N.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},N.values=f,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(h),!e)for(var t in this)"t"===t.charAt(0)&&y.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;
return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var i=y.call(a,"catchLoc"),s=y.call(a,"finallyLoc");if(i&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),h(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;h(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:f(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=g),A}}}(function(){return this}()||Function("return this")())},function(e,t,n){var r;(function(e){!function(e,a,o){function i(e){var t=this,n=l();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new i(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}function l(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){e+=t.charCodeAt(n);var r=.02519603282416938*e;e=r>>>0,r-=e,r*=e,e=r>>>0,r-=e,e+=4294967296*r}return 2.3283064365386963e-10*(e>>>0)};return t}a&&a.exports?a.exports=u:n(27)&&n(71)?(r=function(){return u}.call(t,n,t,a),!(void 0!==r&&(a.exports=r))):this.alea=u}(this,"object"==typeof e&&e,n(27))}).call(t,n(31)(e))},function(e,t,n){var r;(function(e){!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21);while(0===r);return r},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(27)&&n(71)?(r=function(){return u}.call(t,n,t,a),!(void 0!==r&&(a.exports=r))):this.tychei=u}(this,"object"==typeof e&&e,n(27))}).call(t,n(31)(e))},function(e,t,n){var r;(function(e){!function(e,a,o){function i(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21);while(0===r);return r},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(27)&&n(71)?(r=function(){return u}.call(t,n,t,a),!(void 0!==r&&(a.exports=r))):this.xor128=u}(this,"object"==typeof e&&e,n(27))}).call(t,n(31)(e))},function(e,t,n){var r;(function(e){!function(e,a,o){function i(e){function t(e,t){var n,r,a,o,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(i=i+1640531527|0,n=s[127&o]^=r+i,a=0==n?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=i,e.X=s,e.i=a}var n=this;n.next=function(){var e,t,r=n.w,a=n.X,o=n.i;return n.w=r=r+1640531527|0,t=a[o+34&127],e=a[o=o+1&127],t^=t<<13,e^=e<<17,t^=t>>>15,e^=e>>>12,t=a[o]=t^e,n.i=o,t+(r^r>>>16)|0},t(n,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21);while(0===r);return r},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(27)&&n(71)?(r=function(){return u}.call(t,n,t,a),!(void 0!==r&&(a.exports=r))):this.xor4096=u}(this,"object"==typeof e&&e,n(27))}).call(t,n(31)(e))},function(e,t,n){var r;(function(e){!function(e,a,o){function i(e){function t(e,t){var n,r,a=[];if(t===(0|t))r=a[0]=t;else for(t=""+t,n=0;n<t.length;++n)a[7&n]=a[7&n]<<15^t.charCodeAt(n)+a[n+1&7]<<13;for(;a.length<8;)a.push(0);for(n=0;n<8&&0===a[n];++n);for(r=8==n?a[7]=-1:a[n],e.x=a,e.i=0,n=256;n>0;--n)e.next()}var n=this;n.next=function(){var e,t,r=n.x,a=n.i;return e=r[a],e^=e>>>7,t=e^e<<24,e=r[a+1&7],t^=e^e>>>10,e=r[a+3&7],t^=e^e>>>3,e=r[a+4&7],t^=e^e<<7,e=r[a+7&7],e^=e<<13,t^=e^e<<9,r[a]=t,n.i=a+1&7,t},t(n,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21);while(0===r);return r},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(27)&&n(71)?(r=function(){return u}.call(t,n,t,a),!(void 0!==r&&(a.exports=r))):this.xorshift7=u}(this,"object"==typeof e&&e,n(27))}).call(t,n(31)(e))},function(e,t,n){var r;(function(e){!function(e,a,o){function i(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(e^e<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new i(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do var e=n.next()>>>11,t=(n.next()>>>0)/4294967296,r=(e+t)/(1<<21);while(0===r);return r},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n(27)&&n(71)?(r=function(){return u}.call(t,n,t,a),!(void 0!==r&&(a.exports=r))):this.xorwow=u}(this,"object"==typeof e&&e,n(27))}).call(t,n(31)(e))},function(e,t,n){var r;!function(a,o){function i(e,t,n){var r=[];t=1==t?{entropy:!0}:t||{};var i=c(l(t.entropy?[e,h(a)]:null==e?p():e,3),r),d=new s(r),f=function(){for(var e=d.g(g),t=b,n=0;e<x;)e=(e+n)*m,t*=m,n=d.g(1);for(;e>=w;)e/=2,t/=2,n>>>=1;return(e+n)/t};return f.int32=function(){return 0|d.g(4)},f.quick=function(){return d.g(4)/4294967296},f.double=f,c(h(d.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&u(r,d),e.state=function(){return u(d,{})}),n?(o[y]=e,t):e})(f,i,"global"in t?t.global:this==o,t.state)}function s(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(e=[n++]);a<m;)i[a]=a++;for(a=0;a<m;a++)i[a]=i[o=S&o+e[a%n]+(t=i[a])],i[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,i=r.S;e--;)t=i[a=S&a+1],n=n*m+i[S&(i[a]=i[o=S&o+t])+(i[o]=t)];return r.i=a,r.j=o,n})(m)}function u(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function l(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(l(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function c(e,t){for(var n,r=e+"",a=0;a<r.length;)t[S&a]=S&(n^=19*t[S&a])+r.charCodeAt(a++);return h(t)}function p(){try{var e;return d&&(e=d.randomBytes)?e=e(m):(e=new Uint8Array(m),(f.crypto||f.msCrypto).getRandomValues(e)),h(e)}catch(e){var t=f.navigator,n=t&&t.plugins;return[+new Date,f,n,f.screen,h(a)]}}function h(e){return String.fromCharCode.apply(0,e)}var d,f=(0,eval)("this"),m=256,g=6,v=52,y="random",b=o.pow(m,g),x=o.pow(2,v),w=2*x,S=m-1;if(o["seed"+y]=i,c(o.random(),a),"object"==typeof e&&e.exports){e.exports=i;try{d=n(597)}catch(e){}}else r=function(){return i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}([],Math)},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return m[f]=r,d(f),f++}function a(e){delete m[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function i(e){if(g)setTimeout(i,0,e);else{var t=m[e];if(t){g=!0;try{o(t)}finally{a(e),g=!1}}}}function s(){d=function(e){t.nextTick(function(){i(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function l(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),d=function(n){e.postMessage(t+n,"*")}}function c(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;i(t)},d=function(t){e.port2.postMessage(t)}}function p(){var e=v.documentElement;d=function(t){var n=v.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function h(){d=function(e){setTimeout(i,0,e)}}if(!e.setImmediate){var d,f=1,m={},g=!1,v=e.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():u()?l():e.MessageChannel?c():v&&"onreadystatechange"in v.createElement("script")?p():h(),y.setImmediate=r,y.clearImmediate=a}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(73))},function(e,t,n){(function(e){function r(e,t){this._id=e,this._clearFn=t}var a="undefined"!=typeof e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;t.setTimeout=function(){return new r(o.call(setTimeout,a,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,a,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(595),t.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(t,function(){return this}())},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=function(){return this}()||Function("return this")(),a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(587),a)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(360),o=r(a),i=n(46),s=r(i),u=n(52),l=r(u),c=n(51),p=r(c),h=n(9),d=r(h),f=n(108),m=(r(f),n(374)),g=(r(m),n(523)),v=r(g),y=n(524),b=r(y),x=n(522),w=r(x),S=function(e){function t(n){return(0,s.default)(this,t),(0,l.default)(this,e.call(this,n))}return(0,p.default)(t,e),t.prototype.trainDataGenerator=o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{x:1,y:1};case 2:return e.next=4,{x:4,y:4};case 4:return e.next=6,{x:8,y:8};case 6:case"end":return e.stop()}},e,this)}),t.prototype.render=function(){return d.default.createElement("div",null,d.default.createElement(b.default,{trainData:this.trainDataGenerator,epochs:15,batchSize:3,samples:3,onTrainEnd:function(e){return e.describe()},train:!0,display:!0},d.default.createElement(v.default,{optimizer:"sgd",loss:"meanSquaredError"},d.default.createElement(w.default,{lname:"Dense",units:1,inputShape:[1]}))))},t}(d.default.Component);t.default=S,e.exports=t.default}]);
//# sourceMappingURL=component---src-pages-test-js-ad3952ffd50e438698a5.js.map